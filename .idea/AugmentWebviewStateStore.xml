<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiJiZjc2M2JhMC00YTAyLTQ5OGYtYjMzNi03YjA4Y2Y4YTczYmIiLCJjb252ZXJzYXRpb25zIjp7ImVkZGE2MGRmLTkwNzEtNDU1MC05NzI3LWQ5NzU5NzU5MDE0NyI6eyJpZCI6ImVkZGE2MGRmLTkwNzEtNDU1MC05NzI3LWQ5NzU5NzU5MDE0NyIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDQtMzBUMDg6MjU6NDQuMzIxWiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA0LTMwVDA4OjM0OjE2LjMyNVoiLCJjaGF0SGlzdG9yeSI6W3sicmVxdWVzdF9pZCI6Ijc1ZjZkMDAwLTA1NTItNGI0Zi04OWFkLWM1MTQ4M2Q0YTE4OSIsInV1aWQiOiI4NGU1YmFhOS1mNWI2LTRhOGItYjU5Yy04MGRmNTQzYzE3NDEiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjAsInRvVGltZXN0YW1wIjoxNzQ2MDAxNTQ0MzIyLCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI5OTE4MjU1MC0zZWMwLTRjNzItYTViOC00NDk0Zjg4MTgzYWUiLCJyZXF1ZXN0X21lc3NhZ2UiOiLnjrDlnKjluK7miJHlnKjml6XnqIvnrqHnkIblop7liqDkuIDkuKrmmbrog73mjpLluo/vvIzngrnlh7vkuYvlkI7ml6XnqIvopoHmoLnmja7ml7bpl7Tph43opoHmgKfvvIzntKfmgKXmgKfliJLliIbvvIzkuZ/lsLHmmK/moLnmja7liankvZnlpJrlsJHml7bpl7TvvIzku7vliqHnmoTmnYPph43mnaXmjInnhafph43opoHmgKfmjpLluo/vvIzkvaDoh6rlt7HmoLnmja7pobnnm67nvJblhpnkuIDkuKrnrpfms5UiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0Ijoi546w5Zyo5biu5oiR5Zyo5pel56iL566h55CG5aKe5Yqg5LiA5Liq5pm66IO95o6S5bqP77yM54K55Ye75LmL5ZCO5pel56iL6KaB5qC55o2u5pe26Ze06YeN6KaB5oCn77yM57Sn5oCl5oCn5YiS5YiG77yM5Lmf5bCx5piv5qC55o2u5Ymp5L2Z5aSa5bCR5pe26Ze077yM5Lu75Yqh55qE5p2D6YeN5p2l5oyJ54Wn6YeN6KaB5oCn5o6S5bqP77yM5L2g6Ieq5bex5qC55o2u6aG555uu57yW5YaZ5LiA5Liq566X5rOVIn1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVDkzOU1vOWhta2dreTZhUHp2ZmExdSIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiXFx1NjdlNVxcdTYyN2VcXHU0ZTBlXFx1NGVmYlxcdTUyYTEoVGFzaylcXHU3NmY4XFx1NTE3M1xcdTc2ODRcXHU1YjllXFx1NGY1M1xcdTdjN2JcXHUzMDAxXFx1NjcwZFxcdTUyYTFcXHU2M2E1XFx1NTNlM1xcdTU0OGNcXHU1YjllXFx1NzNiMFxcdTdjN2JcXHVmZjBjXFx1NzI3OVxcdTUyMmJcXHU2NjJmVGFza1NlcnZpY2VJbXBsLmphdmFcXHU3Njg0XFx1OGJlNlxcdTdlYzZcXHU1MTg1XFx1NWJiOVwifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi5oiR5bCG5biu5oKo5Zyo5pel56iL566h55CG5Lit5aKe5Yqg5pm66IO95o6S5bqP5Yqf6IO977yM5qC55o2u5pe26Ze06YeN6KaB5oCn44CB57Sn5oCl5oCn77yI5Ymp5L2Z5pe26Ze077yJ5ZKM5Lu75Yqh5p2D6YeN5p2l5o6S5bqP44CC6aaW5YWI77yM6K6p5oiR5LqG6Kej5LiA5LiL5b2T5YmN55qE5Luj56CB57uT5p6E77yM54m55Yir5piv5LiO5Lu75Yqh5ZKM5pel56iL55u45YWz55qE6YOo5YiG44CCXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6IueOsOWcqOW4ruaIkeWcqOaXpeeoi+euoeeQhuWinuWKoOS4gOS4quaZuuiDveaOkuW6j++8jOeCueWHu+S5i+WQjuaXpeeoi+imgeagueaNruaXtumXtOmHjeimgeaAp++8jOe0p+aApeaAp+WIkuWIhu+8jOS5n+WwseaYr+agueaNruWJqeS9meWkmuWwkeaXtumXtO+8jOS7u+WKoeeahOadg+mHjeadpeaMieeFp+mHjeimgeaAp+aOkuW6j++8jOS9oOiHquW3seagueaNrumhueebrue8luWGmeS4gOS4queul+azlSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0Ijoi5oiR5bCG5biu5oKo5Zyo5pel56iL566h55CG5Lit5aKe5Yqg5pm66IO95o6S5bqP5Yqf6IO977yM5qC55o2u5pe26Ze06YeN6KaB5oCn44CB57Sn5oCl5oCn77yI5Ymp5L2Z5pe26Ze077yJ5ZKM5Lu75Yqh5p2D6YeN5p2l5o6S5bqP44CC6aaW5YWI77yM6K6p5oiR5LqG6Kej5LiA5LiL5b2T5YmN55qE5Luj56CB57uT5p6E77yM54m55Yir5piv5LiO5Lu75Yqh5ZKM5pel56iL55u45YWz55qE6YOo5YiG44CCXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiOTkzMmEwOGEtN2U3OS00OTZhLWFkZTktYjczYzFlYmIxNjA4IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTNHcWQ4Mmplelk5N3FydlNwSkJNMlAiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIlxcdTY3ZTVcXHU2MjdlXFx1NGUwZVxcdTRmMThcXHU1MTQ4XFx1N2VhNyhQcmlvcml0eSlcXHU3NmY4XFx1NTE3M1xcdTc2ODRcXHU1YjllXFx1NGY1M1xcdTdjN2JcXHU1NDhjXFx1NjcwZFxcdTUyYTFcXHVmZjBjXFx1NGVlNVxcdTUzY2FcXHU2NWU1XFx1N2EwYihTY2hlZHVsZSlcXHU3NmY4XFx1NTE3M1xcdTc2ODRcXHU1YjllXFx1NGY1M1xcdTdjN2JcXHU1NDhjXFx1NjcwZFxcdTUyYTFcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IuiuqeaIkee7p+e7reS6huino+abtOWkmuWFs+S6juS8mOWFiOe6p+WSjOaXpeeoi+WuieaOkueahOS/oeaBr++8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YVxuLi4uXG5cbmltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLklkVXRpbDtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuc2VydmljZS5VbXNBZG1pblNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLkNhdGVnb3J5O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5TY2hlZHVsZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyLlRhc2tNYXBwZXI7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuQ2F0ZWdvcnlTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlByaW9yaXR5U2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5SZXNvdXJjZXNTZXJ2aWNlO1xuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDku7vliqHooagg5pyN5Yqh5a6e546w57G7XG4gKiA8L3A+XG4gKi9cbkBTZXJ2aWNlXG5wdWJsaWMgY2xhc3MgVGFza1NlcnZpY2VJbXBsIGV4dGVuZHMgU2VydmljZUltcGw8VGFza01hcHBlciwgVGFzaz4gaW1wbGVtZW50cyBUYXNrU2VydmljZSB7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBUYXNrTWFwcGVyIHRhc2tNYXBwZXI7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBDYXRlZ29yeVNlcnZpY2UgY2F0ZWdvcnlTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgUHJpb3JpdHlTZXJ2aWNlIHByaW9yaXR5U2VydmljZTtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFVtc0FkbWluU2VydmljZSB1c2VyU2VydmljZTtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFJlc291cmNlc1NlcnZpY2UgcmVzb3VyY2VzU2VydmljZTtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBATGF6eVxuICAgIHByaXZhdGUgU2NoZWR1bGVTZXJ2aWNlIHNjaGVkdWxlU2VydmljZTtcblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBQYWdlPFRhc2tWbz4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgTG9uZyBjYXRlZ29yeUlkLCBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIC8vIOWFiOabtOaWsOaJgOacieS7u+WKoeeKtuaAgVxuICAgICAgICB1cGRhdGVBbGxUYXNrU3RhdHVzKCk7XG4gICAgICAgIFxuICAgICAgICBQYWdlPFRhc2tWbz4gcGFnZSA9IG5ldyBQYWdlPD4ocGFnZU51bSwgcGFnZVNpemUpO1xuICAgICAgICByZXR1cm4gdGFza01hcHBlci5zZWFyY2hUYXNrKHBhZ2UsIHNlYXJjaEtleSwgY2F0ZWdvcnlJZCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIExpc3Q8VGFza1ZvPiBsaXN0QWxsKEludGVnZXIgc3RhdHVzKSB7XG4gICAgICAgIC8vIOWFiOabtOaWsOaJgOacieS7u+WKoeeKtuaAgVxuICAgICAgICB1cGRhdGVBbGxUYXNrU3RhdHVzKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFza01hcHBlci5saXN0QWxsKHN0YXR1cyk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFRhc2tWbyBnZXRJbmZvKExvbmcgaWQpIHtcbiAgICAgICAgLy8g5pu05paw5b2T5YmN5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZVRhc2tTdGF0dXModGhpcy5nZXRCeUlkKGlkKSk7XG4gICAgICAgIFxuICAgICAgICBUYXNrVm8gdGFza1ZvID0gbmV3IFRhc2tWbygpO1xuICAgICAgICBUYXNrIHRhc2sgPSB0aGlzLmdldEJ5SWQoaWQpO1xuICAgICAgICBCZWFuVXRpbHMuY29weVByb3BlcnRpZXModGFzaywgdGFza1ZvKTtcbiAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBjYXRlZ29yeVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldENhdGVnb3J5SWQoKSk7XG4gICAgICAgIHRhc2tWby5zZXRDYXRlZ29yeU5hbWUoY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgUHJpb3JpdHkgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0RXhpZ2VuY3lJZCgpKTtcbiAgICAgICAgdGFza1ZvLnNldEltcG9ydGFuY2VOYW1lKGV4aWdlbmN5UHJpb3JpdHkuZ2V0TmFtZSgpKTtcblxuICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgICAgICBTZXQ8TG9uZz4gdXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQodGFzay5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgICAgICBTZXQ8TG9uZz4gcmVzb3VyY2VJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0UmVzb3VyY2VzRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuXG4gICAgICAgIExpc3Q8VW1zQWRtaW4+IHVzZXJMaXN0ID0gdXNlclNlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFVtc0FkbWluPigpLmxhbWJkYSgpLmluKFVtc0FkbWluOjpnZXRJZCwgdXNlcklkcykpO1xuICAgICAgICBMaXN0PFJlc291cmNlcz4gcmVzb3VyY2VzTGlzdCA9IHJlc291cmNlc1NlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFJlc291cmNlcz4oKS5sYW1iZGEoKS5pbihSZXNvdXJjZXM6OmdldElkLCByZXNvdXJjZUlkcykpO1xuICAgICAgICB0YXNrVm8uc2V0VXNlckxpc3QodXNlckxpc3QpO1xuICAgICAgICB0YXNrVm8uc2V0UmVzb3VyY2VzTGlzdChyZXNvdXJjZXNMaXN0KTtcblxuICAgICAgICByZXR1cm4gdGFza1ZvO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBMaXN0PFRyZW5kUGllPiB0cmVuZFBpZSgpIHtcbiAgICAgICAgcmV0dXJuIHRhc2tNYXBwZXIudHJlbmRQaWUoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTGlzdDxUcmVuZD4gdHJlbmQoU3RyaW5nIHN0YXJ0RGF0ZSwgU3RyaW5nIGVuZERhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRhc2tNYXBwZXIudHJlbmQoc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQm9vbGVhbiBjcmVhdGUoVGFzayB0YXNrKSB7XG4gICAgICAgIHRhc2suc2V0Q29kZShJZFV0aWwucmFuZG9tVVVJRCgpKTtcbiAgICAgICAgTGlzdDxQcmlvcml0eT4gcHJpb3JpdGllcyA9IHByaW9yaXR5U2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgLy8g5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcblxuICAgICAgICAvLyDpgY3ljobkvJjlhYjnuqfmlbDmja7vvIzorr7nva4gaW1wb3J0YW5jZUlkIOWSjCBleGlnZW5jeUlkXG4gICAgICAgIGZvciAoUHJpb3JpdHkgcHJpb3JpdHkgOiBwcmlvcml0aWVzKSB7XG4gICAgICAgICAgICAvLyDljLnphY0gaW1wb3J0YW5jZUlkICh0eXBlPTEg5LiUIGNhdGVnb3J5SWQg55u45ZCMKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAxICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKS5lcXVhbHModGFzay5nZXRDYXRlZ29yeUlkKCkpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRJbXBvcnRhbmNlSWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7ku7vliqHliJ3lp4vnirbmgIHkuLrlvoXlip5cbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmUodGFzayk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEJvb2xlYW4gdXBkYXRlVGFzayhUYXNrIHRhc2spIHtcbiAgICAgICAgTGlzdDxQcmlvcml0eT4gcHJpb3JpdGllcyA9IHByaW9yaXR5U2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgLy8g5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcblxuICAgICAgICAvLyDpgY3ljobkvJjlhYjnuqfmlbDmja7vvIzorr7nva4gaW1wb3J0YW5jZUlkIOWSjCBleGlnZW5jeUlkXG4gICAgICAgIGZvciAoUHJpb3JpdHkgcHJpb3JpdHkgOiBwcmlvcml0aWVzKSB7XG4gICAgICAgICAgICAvLyDljLnphY0gaW1wb3J0YW5jZUlkICh0eXBlPTEg5LiUIGNhdGVnb3J5SWQg55u45ZCMKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAxICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKS5lcXVhbHModGFzay5nZXRDYXRlZ29yeUlkKCkpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRJbXBvcnRhbmNlSWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmiYvliqjlsIbku7vliqHorr7nva7kuLrlt7LlrozmiJDvvIzkv53mjIHor6XnirbmgIFcbiAgICAgICAgVGFzayBvbGRUYXNrID0gdGhpcy5nZXRCeUlkKHRhc2suZ2V0SWQoKSk7XG4gICAgICAgIGlmIChvbGRUYXNrICE9IG51bGwgJiYgb2xkVGFzay5nZXRTdGF0dXMoKSAhPSA0ICYmIHRhc2suZ2V0U3RhdHVzKCkgIT0gNCkge1xuICAgICAgICAgICAgLy8g6Ieq5Yqo5pu05paw5Lu75Yqh54q25oCBXG4gICAgICAgICAgICB1cGRhdGVUYXNrU3RhdHVzKHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVCeUlkKHRhc2spO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDmr4/lpKnlh4zmmajmiafooYzkuIDmrKHvvIzoh6rliqjmm7TmlrDmiYDmnInku7vliqHnmoTnirbmgIFcbiAgICAgKi9cbiAgICBAU2NoZWR1bGVkKGNyb24gPSBcIjAgMCAwICogKiA/XCIpXG4gICAgcHVibGljIHZvaWQgc2NoZWR1bGVkVXBkYXRlQWxsVGFza1N0YXR1cygpIHtcbiAgICAgICAgdXBkYXRlQWxsVGFza1N0YXR1cygpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmiYDmnInku7vliqHnmoTnirbmgIFcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgdXBkYXRlQWxsVGFza1N0YXR1cygpIHtcbiAgICAgICAgTGlzdDxUYXNrPiBhbGxUYXNrcyA9IHRoaXMubGlzdCgpO1xuICAgICAgICBhbGxUYXNrcy5mb3JFYWNoKHRoaXM6OnVwZGF0ZVRhc2tTdGF0dXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUJhdGNoQnlJZChhbGxUYXNrcyk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIOagueaNruS7u+WKoeeahOaIquatouaXtumXtOiHquWKqOabtOaWsOS7u+WKoeeKtuaAgVxuICAgICAqIOS7u+WKoeeKtuaAge+8mjEt5b6F5YqeLCAyLeW3suWuieaOkiwgMy3ov5vooYzkuK0sIDQt5bey5a6M5oiQLCA1LeW3sumAvuacn1xuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCB1cGRhdGVUYXNrU3RhdHVzKFRhc2sgdGFzaykge1xuICAgICAgICAvLyDlpoLmnpzku7vliqHlt7Lnu4/mmK/lt7LlrozmiJDnirbmgIEoNCnvvIzkuI3lgZrmlLnlj5hcbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmn6Xmib7ku7vliqHlr7nlupTnmoTml6XnqIvlronmjpJcbiAgICAgICAgTGlzdDxTY2hlZHVsZT4gc2NoZWR1bGVzID0gc2NoZWR1bGVTZXJ2aWNlLmxpc3QoXG4gICAgICAgICAgICBuZXcgUXVlcnlXcmFwcGVyPFNjaGVkdWxlPigpLmVxKFwidGFza19pZFwiLCB0YXNrLmdldElkKCkpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmnInml6XnqIvlronmjpLvvIzkvJjlhYjkvb/nlKjml6XnqIvnmoTnu5PmnZ/ml7bpl7TmnaXliKTmlq3mmK/lkKbpgL7mnJ9cbiAgICAgICAgaWYgKCFzY2hlZHVsZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey6YC+5pyf77yI57uT5p2f5pe26Ze05bey6L+H77yJXG4gICAgICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIG5vdy5pc0FmdGVyKHNjaGVkdWxlLmdldEVuZFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInml6XnqIvlronmjpLvvIzliJnkvb/nlKjku7vliqHnmoTmiKrmraLml7bpl7TliKTmlq1cbiAgICAgICAgZWxzZSBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwgJiYgbm93LmlzQWZ0ZXIodGFzay5nZXREZWFkbGluZSgpKSkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4uLi5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBQcmlvcml0eSBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChleGlnZW5jeVByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldEV4aWdlbmN5TmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YXNrVm9zLmFkZCh0YXNrVm8pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAzLiDmjInkvJjlhYjnuqfliIbmlbDmjpLluo/vvIjku47pq5jliLDkvY7vvIlcbiAgICAgICAgdGFza1Zvcy5zb3J0KChhLCBiKSAtPiBEb3VibGUuY29tcGFyZShiLmdldFByaW9yaXR5U2NvcmUoKSwgYS5nZXRQcmlvcml0eVNjb3JlKCkpKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YXNrVm9zO1xuICAgIH1cbiAgICBcbiAgICBAT3ZlcnJpZGVcbiAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgICBwdWJsaWMgTWFwPExvbmcsIEJvb2xlYW4+IGF1dG9TY2hlZHVsZVRhc2tzKExvY2FsRGF0ZSBkYXRlLCBMb25nIHVzZXJJZCkge1xuICAgICAgICAvLyDnu5PmnpzmmKDlsITvvIzorrDlvZXmr4/kuKrku7vliqHnmoTlronmjpLnu5PmnpxcbiAgICAgICAgTWFwPExvbmcsIEJvb2xlYW4+IHJlc3VsdCA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDEuIOiOt+WPluaOkuW6j+WQjueahOS7u+WKoeWIl+ihqFxuICAgICAgICBMaXN0PFRhc2tWbz4gcHJpb3JpdGl6ZWRUYXNrcyA9IGdldFByaW9yaXRpemVkVGFza3ModXNlcklkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWmguaenOayoeacieW+heWKnuS7u+WKoe+8jOebtOaOpei/lOWbnuepuue7k+aenFxuICAgICAgICBpZiAocHJpb3JpdGl6ZWRUYXNrcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbi4uLlxuICAgICAgICBcbiAgICAgICAgLy8gNS4g5qC55o2u5LyY5YWI57qn5ZKM5Lu75Yqh5omA6ZyA5pe26Ze05a6J5o6S5Lu75YqhXG4gICAgICAgIGZvciAoVGFza1ZvIHRhc2tWbyA6IHByaW9yaXRpemVkVGFza3MpIHtcbiAgICAgICAgICAgIFRhc2sgdGFzayA9IHRoaXMuZ2V0QnlJZCh0YXNrVm8uZ2V0SWQoKSk7XG4gICAgICAgICAgICBpZiAodGFzayA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1dCh0YXNrVm8uZ2V0SWQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDorqHnrpfku7vliqHmiYDpnIDml7bpl7TmrrXmlbDph49cbiAgICAgICAgICAgIGludCByZXF1aXJlZFNsb3RzID0gMTsgLy8g6buY6K6k5Y2g55SoMeS4quaXtumXtOaute+8iDMw5YiG6ZKf77yJXG4gICAgICAgICAgICBpZiAodGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8g5q+PMzDliIbpkp/kuIDkuKrml7bpl7TmrrXvvIzlkJHkuIrlj5bmlbRcbiAgICAgICAgICAgICAgICByZXF1aXJlZFNsb3RzID0gKGludCkgTWF0aC5jZWlsKHRhc2suZ2V0VGltZVNwZW5kKCkgLyAzMC4wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5a+75om+6L+e57ut55qE56m66Zey5pe26Ze05q61XG4gICAgICAgICAgICBpbnQgc3RhcnRTbG90ID0gZmluZEF2YWlsYWJsZVRpbWVTbG90cyh0aW1lU2xvdE9jY3VwaWVkLCByZXF1aXJlZFNsb3RzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5aaC5p6c5om+5LiN5Yiw6Laz5aSf55qE5pe26Ze05q6177yM5qCH6K6w5Li65a6J5o6S5aSx6LSlXG4gICAgICAgICAgICBpZiAoc3RhcnRTbG90ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1dCh0YXNrLmdldElkKCksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvVGFza1NlcnZpY2UuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZTtcblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlRhc2s7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5zZXJ2aWNlLklTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZFBpZTtcblxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqIDxwPlxuICog5Lu75Yqh6KGoIOacjeWKoeexu1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFRhc2tTZXJ2aWNlIGV4dGVuZHMgSVNlcnZpY2U8VGFzaz4ge1xuXG4gICAgUGFnZTxUYXNrVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIExvbmcgY2F0ZWdvcnlJZCwgU3RyaW5nIHNlYXJjaEtleSk7XG5cbiAgICBMaXN0PFRhc2tWbz4gbGlzdEFsbChJbnRlZ2VyIHN0YXR1cyk7XG5cbiAgICBUYXNrVm8gZ2V0SW5mbyhMb25nIGlkKTtcblxuICAgIExpc3Q8VHJlbmRQaWU+IHRyZW5kUGllKCk7XG5cbiAgICBMaXN0PFRyZW5kPiB0cmVuZChTdHJpbmcgc3RhcnREYXRlLCBTdHJpbmcgZW5kRGF0ZSk7XG5cbiAgICBCb29sZWFuIGNyZWF0ZShUYXNrIHRhc2spO1xuXG4gICAgQm9vbGVhbiB1cGRhdGVUYXNrKFRhc2sgdGFzayk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tb2RlbC9UYXNrLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uSWRUeXBlO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLlRhYmxlSWQ7XG5pbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcblxuaW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5hbm5vdGF0aW9uLkpzb25Gb3JtYXQ7XG5pbXBvcnQgY29tLmZhc3RlcnhtbC5qYWNrc29uLmFubm90YXRpb24uSnNvblByb3BlcnR5O1xuaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpTW9kZWw7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbFByb3BlcnR5O1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgYWlkZW56MjMzXG4gKiBAc2luY2UgMjAyNS0wNC0xNlxuICovXG5AR2V0dGVyXG5AU2V0dGVyXG5AQXBpTW9kZWwodmFsdWUgPSBcIlRhc2vlr7nosaFcIiwgZGVzY3JpcHRpb24gPSBcIuS7u+WKoeihqFwiKVxucHVibGljIGNsYXNzIFRhc2sgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG5cbiAgICBAVGFibGVJZCh2YWx1ZSA9IFwiaWRcIiwgdHlwZSA9IElkVHlwZS5BVVRPKVxuICAgIHByaXZhdGUgTG9uZyBpZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5qCH6aKYXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgdGl0bGU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoee8lueggVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGNvZGU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoeexu+Wei0lEXCIpXG4gICAgcHJpdmF0ZSBMb25nIGNhdGVnb3J5SWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoeaPj+i/sFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHnirbmgIHvvIgxOuW+heWKniwgMjrlt7LlronmjpIsIDM66L+b6KGM5LitLCA0OuW3suWujOaIkCwgNTrlt7LpgL7mnJ/vvIlcIilcbiAgICBwcml2YXRlIEludGVnZXIgc3RhdHVzO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLph43opoHmgKfmnYPph43orr7nva5cIilcbiAgICBwcml2YXRlIExvbmcgaW1wb3J0YW5jZUlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLntKfmgKXmgKfmnYPph43orr7nva5cIilcbiAgICBwcml2YXRlIExvbmcgZXhpZ2VuY3lJZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5omA6ZyA6LWE5rqQ5pWw5o2u77yISlNPTuagvOW8j++8iVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIHJlc291cmNlc0RhdGE7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoeaJgOmcgOS6uuWRmOaVsOaNru+8iEpTT07moLzlvI/vvIlcIilcbiAgICBwcml2YXRlIFN0cmluZyB1c2VyRGF0YTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5omA6ZyA5pe26Ze05YiG6ZKf5pWwXCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIHRpbWVTcGVuZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5oiq5q2i5pe26Ze0XCIpXG4gICAgQEpzb25Gb3JtYXQocGF0dGVybiA9IFwieXl5eS1NTS1kZCBISDptbTpzc1wiKVxuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBkZWFkbGluZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5o+Q6YaS5pe26Ze0XCIpXG4gICAgQEpzb25Gb3JtYXQocGF0dGVybiA9IFwieXl5eS1NTS1kZCBISDptbTpzc1wiKVxuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSByZW1pbmRlclRpbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuWIm+W7uuaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmm7TmlrDml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgdXBkYXRlVGltZTtcblxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi92by9UYXNrVm8uamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm87XG5cbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlJlc291cmNlcztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbmltcG9ydCBsb21ib2suR2V0dGVyO1xuaW1wb3J0IGxvbWJvay5TZXR0ZXI7XG5cbmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuQEdldHRlclxuQFNldHRlclxucHVibGljIGNsYXNzIFRhc2tWbyBleHRlbmRzIFRhc2sge1xuICAgIHByaXZhdGUgU3RyaW5nIGNhdGVnb3J5TmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBpbXBvcnRhbmNlTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBleGlnZW5jeU5hbWU7XG4gICAgcHJpdmF0ZSBCaWdEZWNpbWFsIHByaW9yaXR5U2NvcmU7XG5cbiAgICBwcml2YXRlIExpc3Q8VW1zQWRtaW4+IHVzZXJMaXN0O1xuICAgIHByaXZhdGUgTGlzdDxSZXNvdXJjZXM+IHJlc291cmNlc0xpc3Q7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tYXBwZXIvVGFza01hcHBlci5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tYXBwZXI7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLm1hcHBlci5CYXNlTWFwcGVyO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZFBpZTtcblxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqIDxwPlxuICog5Lu75Yqh6KGoIE1hcHBlciDmjqXlj6NcbiAqIDwvcD5cbiAqL1xucHVibGljIGludGVyZmFjZSBUYXNrTWFwcGVyIGV4dGVuZHMgQmFzZU1hcHBlcjxUYXNrPiB7XG5cbiAgICBQYWdlPFRhc2tWbz4gc2VhcmNoVGFzayhQYWdlPFRhc2tWbz4gcGFnZSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBjYXRlZ29yeUlkKTtcblxuICAgIExpc3Q8VGFza1ZvPiBsaXN0QWxsKEludGVnZXIgc3RhdHVzKTtcblxuICAgIExpc3Q8VHJlbmRQaWU+IHRyZW5kUGllKCk7XG5cbiAgICBMaXN0PFRyZW5kPiB0cmVuZChTdHJpbmcgc3RhcnREYXRlLCBTdHJpbmcgZW5kRGF0ZSk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tYXBwZXIvU2NoZWR1bGVNYXBwZXIuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDml6XnqIvlronmjpLooaggTWFwcGVyIOaOpeWPo1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFNjaGVkdWxlTWFwcGVyIGV4dGVuZHMgQmFzZU1hcHBlcjxTY2hlZHVsZT4ge1xuXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hTY2hlZHVsZShQYWdlPFNjaGVkdWxlVm8+IHBhZ2UsIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKTtcblxuICAgIExpc3Q8U2NoZWR1bGVWbz4gZmluZEFsbFNjaGVkdWxlcygpO1xuXG4gICAgTGlzdDxTY2hlZHVsZVZvPiBmaW5kQnlJZHMoTGlzdDxMb25nPiBpZHMpO1xuICAgIFxuICAgIExpc3Q8U2NoZWR1bGVWbz4gZmluZFNjaGVkdWxlc0J5TW9udGgoU3RyaW5nIHllYXJNb250aCk7XG4gICAgXG4gICAgLyoqXG4gICAgICog5qC55o2u5pyI5Lu95ZKM55So5oi3SUTmn6Xor6LkuI7nlKjmiLfnm7jlhbPnmoTml6XnqItcbiAgICAgKiBAcGFyYW0geWVhck1vbnRoIOW5tOaciO+8jOagvOW8j+S4uu+8mnl5eXktTU1cbiAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lEXG4gICAgICogQHJldHVybiDml6XnqIvliJfooahcbiAgICAgKi9cbiAgICBMaXN0PFNjaGVkdWxlVm8+IGZpbmRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi92by9TY2hlZHVsZVZvLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvO1xuXG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVWbyBleHRlbmRzIFNjaGVkdWxlIHtcbiAgICBwcml2YXRlIFN0cmluZyB0YXNrTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyB0YXNrQ29kZTtcbiAgICBwcml2YXRlIEludGVnZXIgc3RhdHVzO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBkZWFkbGluZTtcblxuICAgIHByaXZhdGUgQm9vbGVhbiBoYXNDb25mbGljdDtcbiAgICBwcml2YXRlIFN0cmluZyBjb25mbGljdFNjaGVkdWxlSWRzO1xuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJEYXRhO1xuICAgIHByaXZhdGUgU3RyaW5nIHJlc291cmNlc0RhdGE7XG5cbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgZW5kVGltZTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL3Jlc291cmNlcy9tYXBwZXIvd2ViL1Rhc2tNYXBwZXIueG1sXG4uLi5cblxuICAgIDwhLS0g6YCa55So5p+l6K+i5pig5bCE57uT5p6cIC0tPlxuICAgIDxyZXN1bHRNYXAgaWQ9XCJCYXNlUmVzdWx0TWFwXCIgdHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrXCI+XG4gICAgICAgIDxpZCBjb2x1bW49XCJpZFwiIHByb3BlcnR5PVwiaWRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cInRpdGxlXCIgcHJvcGVydHk9XCJ0aXRsZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiY29kZVwiIHByb3BlcnR5PVwiY29kZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiY2F0ZWdvcnlfaWRcIiBwcm9wZXJ0eT1cImNhdGVnb3J5SWRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cImRlc2NyaXB0aW9uXCIgcHJvcGVydHk9XCJkZXNjcmlwdGlvblwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwic3RhdHVzXCIgcHJvcGVydHk9XCJzdGF0dXNcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cImltcG9ydGFuY2VfaWRcIiBwcm9wZXJ0eT1cImltcG9ydGFuY2VJZFwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiZXhpZ2VuY3lfaWRcIiBwcm9wZXJ0eT1cImV4aWdlbmN5SWRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cInJlc291cmNlc19kYXRhXCIgcHJvcGVydHk9XCJyZXNvdXJjZXNEYXRhXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJ1c2VyX2RhdGFcIiBwcm9wZXJ0eT1cInVzZXJEYXRhXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJ0aW1lX3NwZW5kXCIgcHJvcGVydHk9XCJ0aW1lU3BlbmRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cImRlYWRsaW5lXCIgcHJvcGVydHk9XCJkZWFkbGluZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiY3JlYXRlX3RpbWVcIiBwcm9wZXJ0eT1cImNyZWF0ZVRpbWVcIiAvPlxuLi4uXG48IS0tICAgICAgICAgICAgPC9pZj4tLT5cbjwhLS0gICAgICAgICAgICA8aWYgdGVzdD1cImNhdGVnb3J5SWQgIT0gbnVsbCBhbmQgY2F0ZWdvcnlJZCAhPSAnJ1wiPi0tPlxuPCEtLSAgICAgICAgICAgICAgICBBTkQgdC5jYXRlZ29yeV9pZCA9ICN7Y2F0ZWdvcnlJZH0tLT5cbjwhLS0gICAgICAgICAgICA8L2lmPi0tPlxuPCEtLSAgICAgICAgPC93aGVyZT4tLT5cbjwhLS0gICAgICAgIG9yZGVyIGJ5IHQuY3JlYXRlX3RpbWUgZGVzYy0tPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgdC4qLFxuICAgICAgICBjLm5hbWUgQVMgY2F0ZWdvcnlOYW1lLFxuICAgICAgICBwaS5uYW1lIEFTIGltcG9ydGFuY2VOYW1lLFxuICAgICAgICBwZS5uYW1lIEFTIGV4aWdlbmN5TmFtZSxcbiAgICAgICAgKHBpLnNjb3JlICogcGkud2VpZ2h0ICsgcGUuc2NvcmUgKiBwZS53ZWlnaHQpIEFTIHByaW9yaXR5U2NvcmVcbiAgICAgICAgRlJPTVxuICAgICAgICB0YXNrIHRcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgIGNhdGVnb3J5IGMgT04gYy5pZCA9IHQuY2F0ZWdvcnlfaWRcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgIHByaW9yaXR5IHBpIE9OIHBpLmlkID0gdC5pbXBvcnRhbmNlX2lkIEFORCBwaS50eXBlID0gMVxuICAgICAgICBMRUZUIEpPSU5cbiAgICAgICAgcHJpb3JpdHkgcGUgT04gcGUuaWQgPSB0LmV4aWdlbmN5X2lkIEFORCBwZS50eXBlID0gMlxuICAgICAgICA8d2hlcmU+XG4gICAgICAgICAgICA8aWYgdGVzdD1cInNlYXJjaEtleSAhPSBudWxsIGFuZCBzZWFyY2hLZXkgIT0gJydcIj5cbiAgICAgICAgICAgICAgICBBTkQgKHQudGl0bGUgTElLRSBDT05DQVQoJyUnLCAje3NlYXJjaEtleX0sICclJylcbiAgICAgICAgICAgICAgICBPUiB0LmNvZGUgTElLRSBDT05DQVQoJyUnLCAje3NlYXJjaEtleX0sICclJylcbiAgICAgICAgICAgICAgICBPUiB0LmRlc2NyaXB0aW9uIExJS0UgQ09OQ0FUKCclJywgI3tzZWFyY2hLZXl9LCAnJScpKVxuICAgICAgICAgICAgPC9pZj5cbiAgICAgICAgICAgIDxpZiB0ZXN0PVwiY2F0ZWdvcnlJZCAhPSBudWxsIGFuZCBjYXRlZ29yeUlkICE9ICcnXCI+XG4gICAgICAgICAgICAgICAgQU5EIHQuY2F0ZWdvcnlfaWQgPSAje2NhdGVnb3J5SWR9XG4gICAgICAgICAgICA8L2lmPlxuICAgICAgICA8L3doZXJlPlxuICAgICAgICBPUkRFUiBCWVxuICAgICAgICBwcmlvcml0eVNjb3JlIERFU0MsXG4gICAgICAgIHQuZGVhZGxpbmUgQVNDXG4gICAgPC9zZWxlY3Q+XG4gICAgPHNlbGVjdCBpZD1cImxpc3RBbGxcIiByZXN1bHRUeXBlPVwiY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWb1wiPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgdC4qLFxuICAgICAgICBjLm5hbWUgQVMgY2F0ZWdvcnlOYW1lLFxuICAgICAgICBwaS5uYW1lIEFTIGltcG9ydGFuY2VOYW1lLFxuICAgICAgICBwZS5uYW1lIEFTIGV4aWdlbmN5TmFtZSxcbiAgICAgICAgKHBpLnNjb3JlICogcGkud2VpZ2h0ICsgcGUuc2NvcmUgKiBwZS53ZWlnaHQpIEFTIHByaW9yaXR5U2NvcmVcbiAgICAgICAgRlJPTVxuICAgICAgICB0YXNrIHRcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgIGNhdGVnb3J5IGMgT04gYy5pZCA9IHQuY2F0ZWdvcnlfaWRcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgIHByaW9yaXR5IHBpIE9OIHBpLmlkID0gdC5pbXBvcnRhbmNlX2lkIEFORCBwaS50eXBlID0gMVxuICAgICAgICBMRUZUIEpPSU5cbiAgICAgICAgcHJpb3JpdHkgcGUgT04gcGUuaWQgPSB0LmV4aWdlbmN5X2lkIEFORCBwZS50eXBlID0gMlxuICAgICAgICA8d2hlcmU+XG4gICAgICAgICAgICA8aWYgdGVzdD1cInN0YXR1cyAhPSBudWxsIGFuZCBzdGF0dXMgIT0gJydcIj5cbiAgICAgICAgICAgICAgICBBTkQgdC5zdGF0dXMgPSAje3N0YXR1c31cbiAgICAgICAgICAgIDwvaWY+XG4gICAgICAgICAgICBBTkQgdC5kZWFkbGluZSA+IE5PVygpXG4gICAgICAgIDwvd2hlcmU+XG4gICAgICAgIE9SREVSIEJZXG4gICAgICAgIHByaW9yaXR5U2NvcmUgREVTQyxcbiAgICAgICAgdC5kZWFkbGluZSBERVNDXG4gICAgPC9zZWxlY3Q+XG4gICAgPHNlbGVjdCBpZD1cInRyZW5kUGllXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZFBpZVwiPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgQ0FTRVxuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDEgVEhFTiAn5b6F5YqeJ1xuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDIgVEhFTiAn5bey5a6J5o6SJ1xuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDMgVEhFTiAn6L+b6KGM5LitJ1xuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDQgVEhFTiAn5bey5a6M5oiQJ1xuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDUgVEhFTiAn5bey6YC+5pyfJ1xuICAgICAgICAgICAgRUxTRSAn5pyq55+lJ1xuICAgICAgICBFTkQgQVMgbmFtZSxcbiAgICAgICAgQ09VTlQodC5pZCkgQVMgY291bnRcbiAgICAgICAgRlJPTVxuICAgICAgICB0YXNrIHRcbiAgICAgICAgR1JPVVAgQllcbiAgICAgICAgdC5zdGF0dXNcbiAgICA8L3NlbGVjdD5cbiAgICA8c2VsZWN0IGlkPVwidHJlbmRcIiByZXN1bHRUeXBlPVwiY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICBEQVRFKGNyZWF0ZV90aW1lKSBBUyBkYXRlLFxuICAgICAgICBTVU0oQ0FTRVxuICAgICAgICBXSEVOIHN0YXR1cyA9IDUgVEhFTiAxXG4gICAgICAgIEVMU0UgMFxuICAgICAgICBFTkQpIEFTIGNvdW50TGVmdCxcbiAgICAgICAgU1VNKENBU0VcbiAgICAgICAgV0hFTiBzdGF0dXMgPSA0IFRIRU4gMVxuICAgICAgICBFTFNFIDBcbiAgICAgICAgRU5EKSBBUyBjb3VudFJpZ2h0XG4gICAgICAgIEZST00gYHRhc2tgXG4gICAgICAgIFdIRVJFIGNyZWF0ZV90aW1lIEJFVFdFRU4gI3tzdGFydERhdGV9IEFORCAje2VuZERhdGV9XG4gICAgICAgIEdST1VQIEJZIERBVEUoY3JlYXRlX3RpbWUpXG4gICAgICAgIE9SREVSIEJZIERBVEUoY3JlYXRlX3RpbWUpO1xuICAgIDwvc2VsZWN0PlxuXG48L21hcHBlcj5cbi4uLlxuUGF0aDogb2ZmaWNlX3BsYW4uc3FsXG4uLi5cblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YXNrXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBgdGFza2A7XG5DUkVBVEUgVEFCTEUgYHRhc2tgICAoXG4gIGBpZGAgYmlnaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuICBgdGl0bGVgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjhtYjMgQ09MTEFURSB1dGY4bWIzX2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5qCH6aKYJyxcbiAgYGNvZGVgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjhtYjMgQ09MTEFURSB1dGY4bWIzX2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57yW56CBJyxcbiAgYGNhdGVnb3J5X2lkYCBiaWdpbnQgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57G75Z6LSUQnLFxuICBgZGVzY3JpcHRpb25gIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5o+P6L+wJyxcbiAgYHN0YXR1c2AgaW50IE5VTEwgREVGQVVMVCAxIENPTU1FTlQgJ+S7u+WKoeeKtuaAge+8iDE65b6F5YqeLCAyOuW3suWuieaOkiwgMzrlt7LlrozmiJDvvIknLFxuICBgaW1wb3J0YW5jZV9pZGAgYmlnaW50IE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+mHjeimgeaAp+adg+mHjeiuvue9ricsXG4gIGBleGlnZW5jeV9pZGAgYmlnaW50IE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+e0p+aApeaAp+adg+mHjeiuvue9ricsXG4gIGByZXNvdXJjZXNfZGF0YWAganNvbiBOVUxMIENPTU1FTlQgJ+S7u+WKoeaJgOmcgOi1hOa6kOaVsOaNru+8iEpTT07moLzlvI/vvIknLFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvdm8vVGFza1N0YXRpc3RpY3NWTy5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52bztcblxuaW1wb3J0IGxvbWJvay5EYXRhO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTtcblxuQERhdGFcbnB1YmxpYyBjbGFzcyBUYXNrU3RhdGlzdGljc1ZPIHtcbiAgICBwcml2YXRlIExvY2FsRGF0ZSBkYXRlO1xuICAgIHByaXZhdGUgTG9uZyBvdmVyZHVlQ291bnQ7ICAgIC8vIOmAvuacn+S7u+WKoeaVsFxuICAgIHByaXZhdGUgTG9uZyBjb21wbGV0ZWRDb3VudDsgIC8vIOW3suWujOaIkOS7u+WKoeaVsFxufSAuLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi92by9Ob3RpZmljYXRpb25Wby5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52bztcblxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Ob3RpZmljYXRpb247XG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBsb21ib2suU2V0dGVyO1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgTm90aWZpY2F0aW9uVm8gZXh0ZW5kcyBOb3RpZmljYXRpb24ge1xuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIHRhc2tOYW1lO1xuICAgIHByaXZhdGUgTG9uZyB0YXNrSWQ7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tYXBwZXIvUHJpb3JpdHlNYXBwZXIuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUHJpb3JpdHk7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmNvcmUubWFwcGVyLkJhc2VNYXBwZXI7XG5cbi8qKlxuICogPHA+XG4gKiDkvJjlhYjnuqfooaggTWFwcGVyIOaOpeWPo1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFByaW9yaXR5TWFwcGVyIGV4dGVuZHMgQmFzZU1hcHBlcjxQcmlvcml0eT4ge1xuXG4gICAgUGFnZTxQcmlvcml0eT4gc2VhcmNoUHJpb3JpdHkoUGFnZTxQcmlvcml0eT4gcGFnZSwgU3RyaW5nIHNlYXJjaEtleSwgSW50ZWdlciB0eXBlKTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NxbC9vZmZpY2VfcGxhbi5zcWxcbi4uLlxuXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBgdGFza2A7XG5DUkVBVEUgVEFCTEUgYHRhc2tgIChcbiAgYGlkYCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuICBgdGl0bGVgIHZhcmNoYXIoMjU1KSBOT1QgTlVMTCBDT01NRU5UICfku7vliqHmoIfpopgnLFxuICBgY29kZWAgdmFyY2hhcigyNTUpIE5PVCBOVUxMIENPTU1FTlQgJ+S7u+WKoee8lueggScsXG4gIGBjYXRlZ29yeV9pZGAgIGJpZ2ludCgyMCkgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57G75Z6LLi4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVQ5MzlNbzlobWtna3k2YVB6dmZhMXUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkee7p+e7reS6huino+abtOWkmuWFs+S6juS8mOWFiOe6p+WSjOaXpeeoi+WuieaOkueahOS/oeaBr++8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjEyMjg2MTVjLTkyNjgtNDE2ZS1hODA3LWI2MWU3OGMxYmYyNyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFLNVNzSGpSeHJqbkRXb0dDNEVpR3BmIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJcXHU2N2U1XFx1NjI3ZVxcdTUyNGRcXHU3YWVmXFx1NGUwZVxcdTRlZmJcXHU1MmExXFx1NTIxN1xcdTg4NjhcXHU1NDhjXFx1NjM5MlxcdTVlOGZcXHU3NmY4XFx1NTE3M1xcdTc2ODRcXHU0ZWUzXFx1NzgwMVxcdWZmMGNcXHU3Mjc5XFx1NTIyYlxcdTY2MmZWdWVcXHU3ZWM0XFx1NGVmNlxcdTYyMTZBUElcXHU4YzAzXFx1NzUyOFwifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi6K6p5oiR5p+l55yL5LiA5LiL5YmN56uv5Luj56CB77yM5LqG6Kej5aaC5L2V5a6e546w5pm66IO95o6S5bqP5Yqf6IO977yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1ByaW9yaXR5U2VydmljZUltcGwuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDkvJjlhYjnuqfooagg5pyN5Yqh5a6e546w57G7XG4gKiA8L3A+XG4gKi9cbkBTZXJ2aWNlXG5wdWJsaWMgY2xhc3MgUHJpb3JpdHlTZXJ2aWNlSW1wbCBleHRlbmRzIFNlcnZpY2VJbXBsPFByaW9yaXR5TWFwcGVyLCBQcmlvcml0eT4gaW1wbGVtZW50cyBQcmlvcml0eVNlcnZpY2Uge1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgUHJpb3JpdHlNYXBwZXIgcHJpb3JpdHlNYXBwZXI7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxQcmlvcml0eT4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgSW50ZWdlciB0eXBlLCBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIFBhZ2U8UHJpb3JpdHk+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICAgICAgcmV0dXJuIHByaW9yaXR5TWFwcGVyLnNlYXJjaFByaW9yaXR5KHBhZ2UsIHNlYXJjaEtleSwgdHlwZSk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cblxuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuSWRVdGlsO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLmNvbmRpdGlvbnMucXVlcnkuUXVlcnlXcmFwcGVyO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1vZGVsLlVtc0FkbWluO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5zZXJ2aWNlLlVtc0FkbWluU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuQ2F0ZWdvcnk7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlByaW9yaXR5O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5SZXNvdXJjZXM7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlRhc2s7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tYXBwZXIuVGFza01hcHBlcjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5DYXRlZ29yeVNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuUHJpb3JpdHlTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlJlc291cmNlc1NlcnZpY2U7XG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCDmnI3liqHlrp7njrDnsbtcbiAqIDwvcD5cbiAqL1xuQFNlcnZpY2VcbnB1YmxpYyBjbGFzcyBUYXNrU2VydmljZUltcGwgZXh0ZW5kcyBTZXJ2aWNlSW1wbDxUYXNrTWFwcGVyLCBUYXNrPiBpbXBsZW1lbnRzIFRhc2tTZXJ2aWNlIHtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFRhc2tNYXBwZXIgdGFza01hcHBlcjtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIENhdGVnb3J5U2VydmljZSBjYXRlZ29yeVNlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBQcmlvcml0eVNlcnZpY2UgcHJpb3JpdHlTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVW1zQWRtaW5TZXJ2aWNlIHVzZXJTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgUmVzb3VyY2VzU2VydmljZSByZXNvdXJjZXNTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIEBMYXp5XG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFBhZ2U8VGFza1ZvPiBzZWFyY2goSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBMb25nIGNhdGVnb3J5SWQsIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgLy8g5YWI5pu05paw5omA5pyJ5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcbiAgICAgICAgXG4gICAgICAgIFBhZ2U8VGFza1ZvPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIHJldHVybiB0YXNrTWFwcGVyLnNlYXJjaFRhc2socGFnZSwgc2VhcmNoS2V5LCBjYXRlZ29yeUlkKTtcbiAgICB9XG4uLi5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBQcmlvcml0eSBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChleGlnZW5jeVByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldEV4aWdlbmN5TmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YXNrVm9zLmFkZCh0YXNrVm8pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAzLiDmjInkvJjlhYjnuqfliIbmlbDmjpLluo/vvIjku47pq5jliLDkvY7vvIlcbiAgICAgICAgdGFza1Zvcy5zb3J0KChhLCBiKSAtPiBEb3VibGUuY29tcGFyZShiLmdldFByaW9yaXR5U2NvcmUoKSwgYS5nZXRQcmlvcml0eVNjb3JlKCkpKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YXNrVm9zO1xuICAgIH1cbiAgICBcbiAgICBAT3ZlcnJpZGVcbiAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgICBwdWJsaWMgTWFwPExvbmcsIEJvb2xlYW4+IGF1dG9TY2hlZHVsZVRhc2tzKExvY2FsRGF0ZSBkYXRlLCBMb25nIHVzZXJJZCkge1xuICAgICAgICAvLyDnu5PmnpzmmKDlsITvvIzorrDlvZXmr4/kuKrku7vliqHnmoTlronmjpLnu5PmnpxcbiAgICAgICAgTWFwPExvbmcsIEJvb2xlYW4+IHJlc3VsdCA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDEuIOiOt+WPluaOkuW6j+WQjueahOS7u+WKoeWIl+ihqFxuICAgICAgICBMaXN0PFRhc2tWbz4gcHJpb3JpdGl6ZWRUYXNrcyA9IGdldFByaW9yaXRpemVkVGFza3ModXNlcklkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWmguaenOayoeacieW+heWKnuS7u+WKoe+8jOebtOaOpei/lOWbnuepuue7k+aenFxuICAgICAgICBpZiAocHJpb3JpdGl6ZWRUYXNrcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5pel56iL5a6J5o6S6KGoIOacjeWKoeexu1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFNjaGVkdWxlU2VydmljZSBleHRlbmRzIElTZXJ2aWNlPFNjaGVkdWxlPiB7XG5cbiAgICBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpO1xuXG4gICAgQm9vbGVhbiBjcmVhdGUoU2NoZWR1bGUgc2NoZWR1bGUpO1xuXG4gICAgYm9vbGVhbiB1cGRhdGVTY2hlZHVsZShTY2hlZHVsZSBzY2hlZHVsZSk7XG5cbiAgICBMaXN0PFRhc2tWbz4gY29uZmxpY3RMaXN0KExvbmcgaWQsIExpc3Q8TG9uZz4gc2NoZWR1bGVJZHMpO1xuXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBpZCk7XG4gICAgXG4gICAgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gZ2V0U2NoZWR1bGVzQnlNb250aChTdHJpbmcgeWVhck1vbnRoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiDmoLnmja7mnIjku73lkoznlKjmiLfmnYPpmZDojrflj5bml6XnqIvlronmjpJcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geWVhck1vbnRoIOW5tOaciO+8jOagvOW8j+S4uu+8mnl5eXktTU1cbiAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lE77yM5aaC5p6c5piv566h55CG5ZGY5YiZ6I635Y+W5omA5pyJ5pel56iL77yM5ZCm5YiZ5Y+q6I635Y+W5LiO55So5oi355u45YWz55qE5pel56iLXG4gICAgICogQHBhcmFtIGlzQWRtaW4g5piv5ZCm5Li6566h55CG5ZGYXG4gICAgICogQHJldHVybiDml6XmnJ/kuLrplK7vvIzml6XnqIvliJfooajkuLrlgLznmoTmmKDlsIRcbiAgICAgKi9cbiAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCwgYm9vbGVhbiBpc0FkbWluKTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21vZGVsL1ByaW9yaXR5LmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBhaWRlbnoyMzNcbiAqIEBzaW5jZSAyMDI1LTA0LTE2XG4gKi9cbkBHZXR0ZXJcbkBTZXR0ZXJcbkBBcGlNb2RlbCh2YWx1ZSA9IFwiUHJpb3JpdHnlr7nosaFcIiwgZGVzY3JpcHRpb24gPSBcIuS8mOWFiOe6p+ihqFwiKVxucHVibGljIGNsYXNzIFByaW9yaXR5IGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuinhOWImeagh+mimFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuexu+Wei++8iDE66YeN6KaB5oCnLCAyOiDntKfmgKXmgKfvvIlcIilcbiAgICBwcml2YXRlIEludGVnZXIgdHlwZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5YiG5pWwXCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIHNjb3JlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmnYPph41cIilcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgd2VpZ2h0O1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLop4TliJnmj4/ov7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75YqhSURcIilcbiAgICBwcml2YXRlIExvbmcgY2F0ZWdvcnlJZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5pyA5bCP5pe26Ze05Yy66Ze0XCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIG1pbkhvdXJzO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmnIDlpKfml7bpl7TljLrpl7RcIilcbiAgICBwcml2YXRlIEludGVnZXIgbWF4SG91cnM7XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvUHJpb3JpdHlTZXJ2aWNlLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2U7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eTtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnNlcnZpY2UuSVNlcnZpY2U7XG5cbi8qKlxuICogPHA+XG4gKiDkvJjlhYjnuqfooagg5pyN5Yqh57G7XG4gKiA8L3A+XG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgUHJpb3JpdHlTZXJ2aWNlIGV4dGVuZHMgSVNlcnZpY2U8UHJpb3JpdHk+IHtcblxuICAgIFBhZ2U8UHJpb3JpdHk+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIEludGVnZXIgdHlwZSwgU3RyaW5nIHNlYXJjaEtleSk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gcGFnZVJlc3VsdCA9IHNjaGVkdWxlTWFwcGVyLnNlYXJjaFNjaGVkdWxlKHBhZ2Usc2VhcmNoS2V5LCBudWxsKTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZVZvcyA9ICBwYWdlUmVzdWx0LmdldFJlY29yZHMoKTtcblxuICAgICAgICAvLyDmn6Xor6LmiYDmnInku7vliqHvvIznlKjkuo7lhrLnqoHmo4DmtYtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBhbGxTY2hlZHVsZXMgPSBzY2hlZHVsZU1hcHBlci5maW5kQWxsU2NoZWR1bGVzKCk7XG5cbiAgICAgICAgLy8g5Yid5aeL5YyWIE9iamVjdE1hcHBlciDnlKjkuo7op6PmnpAgSlNPTiDlrZfnrKbkuLJcbiAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcblxuICAgICAgICAvLyDojrflj5blvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgICBwdWJsaWMgQm9vbGVhbiBjcmVhdGUoU2NoZWR1bGUgc2NoZWR1bGUpIHtcbiAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAgICAgIC8vIOS/ruaUueS7u+WKoeeKtuaAgVxuICAgICAgICB0YXNrLnNldFN0YXR1cygyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9rue7k+adn+aXtumXtO+8jOWmguaenOacquiuvue9ruWImeiHquWKqOagueaNruS7u+WKoeiAl+aXtuiuoeeul1xuICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpID09IG51bGwgJiYgdGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyDmoLnmja7ku7vliqHpooTkvLDml7bpl7Torr7nva7nu5PmnZ/ml7bpl7RcbiAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkucGx1c01pbnV0ZXModGFzay5nZXRUaW1lU3BlbmQoKSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyDpu5jorqTorr7nva7nu5PmnZ/ml7bpl7TkuLrlvIDlp4vml7bpl7TlkI4x5bCP5pe2XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNIb3VycygxKSk7XG4gICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluWGsueqgeeUqOaIt+WSjOi1hOa6kOeahOivpue7huS/oeaBr1xuICAgICAgICAgICAgICAgICAgICBMaXN0PFVtc0FkbWluPiB1c2VyTGlzdCA9IHVzZXJTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxVbXNBZG1pbj4oKS5sYW1iZGEoKS5pbihVbXNBZG1pbjo6Z2V0SWQsIGNvbmZsaWN0VXNlcklkcykpO1xuICAgICAgICAgICAgICAgICAgICBMaXN0PFJlc291cmNlcz4gcmVzb3VyY2VzTGlzdCA9IHJlc291cmNlc1NlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFJlc291cmNlcz4oKS5sYW1iZGEoKS5pbihSZXNvdXJjZXM6OmdldElkLCBjb25mbGljdFJlc291cmNlSWRzKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u5Yay56qB55So5oi35ZKM6LWE5rqQXG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRVc2VyTGlzdCh1c2VyTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRSZXNvdXJjZXNMaXN0KHJlc291cmNlc0xpc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrVm87XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBpZCkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBwYWdlUmVzdWx0ID0gc2NoZWR1bGVNYXBwZXIuc2VhcmNoU2NoZWR1bGUocGFnZSxzZWFyY2hLZXksIGlkKTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZVZvcyA9ICBwYWdlUmVzdWx0LmdldFJlY29yZHMoKTtcblxuICAgICAgICAvLyDojrflj5blvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuLi4uXG4gICAgICAgIFxuICAgICAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiByZXN1bHQgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmjInml6XmnJ/liIbnu4RcbiAgICAgICAgZm9yIChTY2hlZHVsZVZvIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFN0cmluZyBkYXRlID0gc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkudG9Mb2NhbERhdGUoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmNvbnRhaW5zS2V5KGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXQoZGF0ZSwgbmV3IEFycmF5TGlzdDw+KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQuZ2V0KGRhdGUpLmFkZChzY2hlZHVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5q+P5bCP5pe25qOA5p+l5LiA5qyh5Lu75Yqh5oiq5q2i5pe26Ze077yM5pu05paw6YC+5pyf5Lu75Yqh54q25oCBXG4gICAgICovXG4gICAgQFNjaGVkdWxlZChjcm9uID0gXCIwIDAgKiAqICogP1wiKSAvLyDmr4/lsI/ml7bmiafooYzkuIDmrKFcbiAgICBwdWJsaWMgdm9pZCBjaGVja0FuZFVwZGF0ZU92ZXJkdWVUYXNrcygpIHtcbiAgICAgICAgbG9nLmluZm8oXCLmiafooYzku7vliqHpgL7mnJ/nirbmgIHmo4Dmn6UuLi5cIik7XG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmn6Xor6LmiYDmnInlvoXlip7jgIHlt7LlronmjpLjgIHov5vooYzkuK3nirbmgIHnmoTku7vliqFcbiAgICAgICAgTGlzdDxUYXNrPiB0YXNrcyA9IHRhc2tTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxUYXNrPigpLmxhbWJkYSgpXG4gICAgICAgICAgICAgICAgLmluKFRhc2s6OmdldFN0YXR1cywgQXJyYXlzLmFzTGlzdCgxLCAyLCAzKSkpO1xuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbWFwcGVyL1NjaGVkdWxlTWFwcGVyLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5pel56iL5a6J5o6S6KGoIE1hcHBlciDmjqXlj6NcbiAqIDwvcD5cbiAqL1xucHVibGljIGludGVyZmFjZSBTY2hlZHVsZU1hcHBlciBleHRlbmRzIEJhc2VNYXBwZXI8U2NoZWR1bGU+IHtcblxuICAgIFBhZ2U8U2NoZWR1bGVWbz4gc2VhcmNoU2NoZWR1bGUoUGFnZTxTY2hlZHVsZVZvPiBwYWdlLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIHVzZXJJZCk7XG5cbiAgICBMaXN0PFNjaGVkdWxlVm8+IGZpbmRBbGxTY2hlZHVsZXMoKTtcblxuICAgIExpc3Q8U2NoZWR1bGVWbz4gZmluZEJ5SWRzKExpc3Q8TG9uZz4gaWRzKTtcbiAgICBcbiAgICBMaXN0PFNjaGVkdWxlVm8+IGZpbmRTY2hlZHVsZXNCeU1vbnRoKFN0cmluZyB5ZWFyTW9udGgpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIOagueaNruaciOS7veWSjOeUqOaIt0lE5p+l6K+i5LiO55So5oi355u45YWz55qE5pel56iLXG4gICAgICogQHBhcmFtIHllYXJNb250aCDlubTmnIjvvIzmoLzlvI/kuLrvvJp5eXl5LU1NXG4gICAgICogQHBhcmFtIHVzZXJJZCDnlKjmiLdJRFxuICAgICAqIEByZXR1cm4g5pel56iL5YiX6KGoXG4gICAgICovXG4gICAgTGlzdDxTY2hlZHVsZVZvPiBmaW5kU2NoZWR1bGVzQnlNb250aEFuZFVzZXIoU3RyaW5nIHllYXJNb250aCwgTG9uZyB1c2VySWQpO1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbWFwcGVyL1ByaW9yaXR5TWFwcGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1hcHBlcjtcblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlByaW9yaXR5O1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLm1hcHBlci5CYXNlTWFwcGVyO1xuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoIE1hcHBlciDmjqXlj6NcbiAqIDwvcD5cbiAqL1xucHVibGljIGludGVyZmFjZSBQcmlvcml0eU1hcHBlciBleHRlbmRzIEJhc2VNYXBwZXI8UHJpb3JpdHk+IHtcblxuICAgIFBhZ2U8UHJpb3JpdHk+IHNlYXJjaFByaW9yaXR5KFBhZ2U8UHJpb3JpdHk+IHBhZ2UsIFN0cmluZyBzZWFyY2hLZXksIEludGVnZXIgdHlwZSk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1ByaW9yaXR5Q29udHJvbGxlci5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS8mOWFiOe6p+ihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3ByaW9yaXR5XCIpXG5wdWJsaWMgY2xhc3MgUHJpb3JpdHlDb250cm9sbGVyIHtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBQcmlvcml0eVNlcnZpY2UgcHJpb3JpdHlTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8UHJpb3JpdHk+PiBsaXN0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwidHlwZVwiLCByZXF1aXJlZCA9IGZhbHNlKSBJbnRlZ2VyIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic2VhcmNoS2V5XCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgUGFnZTxQcmlvcml0eT4gcHJpb3JpdHlQYWdlID0gcHJpb3JpdHlTZXJ2aWNlLnNlYXJjaChwYWdlU2l6ZSwgcGFnZU51bSwgdHlwZSwgc2VhcmNoS2V5KTtcblxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MoQ29tbW9uUGFnZS5yZXN0UGFnZShwcmlvcml0eVBhZ2UpKTtcbiAgICB9XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tb2RlbC9TY2hlZHVsZS5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbDtcblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLklkVHlwZTtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5UYWJsZUlkO1xuaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuXG5pbXBvcnQgY29tLmZhc3RlcnhtbC5qYWNrc29uLmFubm90YXRpb24uSnNvbkZvcm1hdDtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsO1xuaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpTW9kZWxQcm9wZXJ0eTtcbmltcG9ydCBsb21ib2suR2V0dGVyO1xuaW1wb3J0IGxvbWJvay5TZXR0ZXI7XG5cbi8qKlxuICogPHA+XG4gKiDml6XnqIvlronmjpLooahcbiAqIDwvcD5cbiAqXG4gKiBAYXV0aG9yIGFpZGVuejIzM1xuICogQHNpbmNlIDIwMjUtMDQtMTZcbiAqL1xuQEdldHRlclxuQFNldHRlclxuQEFwaU1vZGVsKHZhbHVlID0gXCJTY2hlZHVsZeWvueixoVwiLCBkZXNjcmlwdGlvbiA9IFwi5pel56iL5a6J5o6S6KGoXCIpXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG5cbiAgICBAVGFibGVJZCh2YWx1ZSA9IFwiaWRcIiwgdHlwZSA9IElkVHlwZS5BVVRPKVxuICAgIHByaXZhdGUgTG9uZyBpZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75YqhSURcIilcbiAgICBwcml2YXRlIExvbmcgdGFza0lkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLlvIDlp4vml7bpl7RcIilcbiAgICBASnNvbkZvcm1hdChwYXR0ZXJuID0gXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIpXG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIHN0YXJ0VGltZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi57uT5p2f5pe26Ze0XCIpXG4gICAgQEpzb25Gb3JtYXQocGF0dGVybiA9IFwieXl5eS1NTS1kZCBISDptbTpzc1wiKVxuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBlbmRUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLliJvlu7rml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgY3JlYXRlVGltZTtcblxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi92by9TY2hlZHVsZVZvLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvO1xuXG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVWbyBleHRlbmRzIFNjaGVkdWxlIHtcbiAgICBwcml2YXRlIFN0cmluZyB0YXNrTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyB0YXNrQ29kZTtcbiAgICBwcml2YXRlIEludGVnZXIgc3RhdHVzO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBkZWFkbGluZTtcblxuICAgIHByaXZhdGUgQm9vbGVhbiBoYXNDb25mbGljdDtcbiAgICBwcml2YXRlIFN0cmluZyBjb25mbGljdFNjaGVkdWxlSWRzO1xuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJEYXRhO1xuICAgIHByaXZhdGUgU3RyaW5nIHJlc291cmNlc0RhdGE7XG5cbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgZW5kVGltZTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvU2NoZWR1bGVDb250cm9sbGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLmNvbnRyb2xsZXI7XG5cblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIuY29tbW9uLmFwaS5Db21tb25SZXN1bHQ7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlNjaGVkdWxlU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uU2NoZWR1bGVWbztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVGFza1ZvO1xuaW1wb3J0IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLlNlY3VyaXR5VXRpbHM7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3NjaGVkdWxlXCIpXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVDb250cm9sbGVyIHtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zZWFyY2gocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu65pel56iL5a6J5o6SXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2NyZWF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBTY2hlZHVsZSBzY2hlZHVsZSkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmNyZWF0ZShzY2hlZHVsZSkpO1xuICAgIH1cblxuICAgIEBBcGlPcGVyYXRpb24oXCLkv67mlLnml6XnqIvlronmjpJcIilcbiAgICBAUG9zdE1hcHBpbmcoXCIvdXBkYXRlXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiB1cGRhdGUoQFJlcXVlc3RCb2R5IFNjaGVkdWxlIHNjaGVkdWxlKSB7XG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHNjaGVkdWxlU2VydmljZS51cGRhdGVTY2hlZHVsZShzY2hlZHVsZSk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5L+u5pS55pel56iL5pe26Ze0XCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL3VwZGF0ZVRpbWVcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PEJvb2xlYW4+IHVwZGF0ZVRpbWUoQFJlcXVlc3RQYXJhbSBMb25nIGlkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSBTdHJpbmcgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBlbmRUaW1lKSB7XG4gICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gc2NoZWR1bGVTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgICAgICBpZiAoc2NoZWR1bGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2NoZWR1bGUuc2V0U3RhcnRUaW1lKExvY2FsRGF0ZVRpbWUucGFyc2Uoc3RhcnRUaW1lKSk7XG4gICAgICAgICAgICBpZiAoZW5kVGltZSAhPSBudWxsICYmICFlbmRUaW1lLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUoTG9jYWxEYXRlVGltZS5wYXJzZShlbmRUaW1lKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUobnVsbCk7IC8vIOWwhueUseezu+e7n+agueaNruS7u+WKoeaXtumVv+iHquWKqOiuoeeul1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gc2NoZWR1bGVTZXJ2aWNlLnVwZGF0ZUJ5SWQoc2NoZWR1bGUpO1xuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoXCLkv67mlLnlpLHotKXvvIzor7fnqI3lkI7ph43or5VcIik7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuenu+mZpOaXpeeoi+WuieaOklwiKVxuICAgIEBQb3N0TWFwcGluZyhcIi9kZWxldGUve2lkfVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8U3RyaW5nPiBkZWxldGUoQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7XG4gICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gc2NoZWR1bGVTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBzY2hlZHVsZVNlcnZpY2UucmVtb3ZlQnlJZChzY2hlZHVsZSk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoXCLnp7vpmaTlpLHotKXvvIzor7fnqI3lkI7ph43or5VcIik7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuafpeivouaJgOacieWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RBbGxcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PExpc3Q8U2NoZWR1bGU+PiBsaXN0QWxsKCkge1xuICAgICAgICBMaXN0PFNjaGVkdWxlPiBzY2hlZHVsZVZvcyA9IHNjaGVkdWxlU2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHNjaGVkdWxlVm9zKTtcbiAgICB9XG4uLi5cblxuICAgIEBBcGlPcGVyYXRpb24oXCLmoLnmja7mnaHku7bmn6Xor6LliJfooahcIilcbiAgICBAR2V0TWFwcGluZyhcIi91c2VyL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IHVzZXJMaXN0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZU51bVwiLCBkZWZhdWx0VmFsdWUgPSBcIjFcIikgSW50ZWdlciBwYWdlTnVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zZWFyY2hVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIFNlY3VyaXR5VXRpbHMuZ2V0VXNlcigpLmdldElkKCkpO1xuXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHNjaGVkdWxlUGFnZSkpO1xuICAgIH1cbiAgICBcbiAgICBAQXBpT3BlcmF0aW9uKFwi5oyJ5pyI5Lu95p+l6K+i5pel56iL5a6J5o6SXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbW9udGgve3llYXJNb250aH1cIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+PiBnZXRTY2hlZHVsZXNCeU1vbnRoKEBQYXRoVmFyaWFibGUgU3RyaW5nIHllYXJNb250aCkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmdldFNjaGVkdWxlc0J5TW9udGgoeWVhck1vbnRoKSk7XG4gICAgfVxuICAgIFxuICAgIEBBcGlPcGVyYXRpb24oXCLmjInmnIjku73mn6Xor6Lln7rkuo7nlKjmiLfmnYPpmZDnmoTml6XnqIvlronmjpJcIilcbiAgICBAR2V0TWFwcGluZyhcIi9tb250aC91c2VyL3t5ZWFyTW9udGh9XCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+Pj4gZ2V0U2NoZWR1bGVzQnlNb250aEFuZFVzZXIoQFBhdGhWYXJpYWJsZSBTdHJpbmcgeWVhck1vbnRoKSB7XG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeeUqOaIt1xuICAgICAgICBMb25nIHVzZXJJZCA9IFNlY3VyaXR5VXRpbHMuZ2V0VXNlcigpLmdldElkKCk7XG4gICAgICAgIC8vIOWIpOaWreeUqOaIt+eahOinkuiJsu+8jOS7jnVtc19hZG1pbl9yb2xlX3JlbGF0aW9u6KGo6K+75Y+W77yMcm9sZUlkPTHooajnpLrnrqHnkIblkZhcbiAgICAgICAgYm9vbGVhbiBpc0FkbWluID0gZmFsc2U7XG4gICAgICAgIC8vIOatpOWkhOaUueS4uuagueaNrueUqOaIt0lE55u05o6l5Yik5pat5piv5ZCm5Li6MeWPt+eUqOaIt++8iOeuoeeQhuWRmO+8iVxuICAgICAgICBpZiAodXNlcklkICE9IG51bGwgJiYgdXNlcklkID09IDEpIHtcbiAgICAgICAgICAgIGlzQWRtaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmdldFNjaGVkdWxlc0J5TW9udGhBbmRVc2VyKHllYXJNb250aCwgdXNlcklkLCBpc0FkbWluKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5pm66IO95o6S5bqP5pel56iLXG4gICAgICogQHJldHVybiDmjpLluo/lkI7nmoTml6XnqIvliJfooahcbiAgICAgKi9cbiAgICBAR2V0TWFwcGluZyhcIi9zbWFydC1zb3J0XCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxMaXN0PFNjaGVkdWxlPj4gc21hcnRTb3J0U2NoZWR1bGVzKCkge1xuICAgICAgICBMaXN0PFNjaGVkdWxlPiBzb3J0ZWRTY2hlZHVsZXMgPSBzY2hlZHVsZVNlcnZpY2Uuc21hcnRTb3J0U2NoZWR1bGVzKCk7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyhzb3J0ZWRTY2hlZHVsZXMpO1xuICAgIH1cbn1cblxuLi4uXG5QYXRoOiBvZmZpY2VfcGxhbi5zcWxcbi4uLlxuXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4tLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHNjaGVkdWxlXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBgc2NoZWR1bGVgO1xuQ1JFQVRFIFRBQkxFIGBzY2hlZHVsZWAgIChcbiAgYGlkYCBiaWdpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4gIGB0YXNrX2lkYCBiaWdpbnQgTlVMTCBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5Lu75YqhSUQnLFxuICBgc3RhcnRfdGltZWAgZGF0ZXRpbWUgTlVMTCBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5byA5aeL5pe26Ze0JyxcbiAgYGNyZWF0ZV90aW1lYCB0aW1lc3RhbXAgTlVMTCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIENPTU1FTlQgJ+WIm+W7uuaXtumXtCcsXG4gIGBlbmRfdGltZWAgZGF0ZXRpbWUgTlVMTCBERUZBVUxUIE5VTEwgQ09NTUVOVCAn57uT5p2f5pe26Ze0JyxcbiAgUFJJTUFSWSBLRVkgKGBpZGApIFVTSU5HIEJUUkVFXG4pIEVOR0lORSA9IElubm9EQiBBVVRPX0lOQ1JFTUVOVCA9IDggQ0hBUkFDVEVSIFNFVCA9IHV0ZjhtYjMgQ09MTEFURSA9IHV0ZjhtYjNfZ2VuZXJhbF9jaSBDT01NRU5UID0gJ+aXpeeoi+WuieaOkuihqCcgUk9XX0ZPUk1BVCA9IER5bmFtaWM7XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9yZXNvdXJjZXMvbWFwcGVyL3dlYi9TY2hlZHVsZU1hcHBlci54bWxcbi4uLlxuXG4gICAgPCEtLSDpgJrnlKjmn6Xor6LmmKDlsITnu5PmnpwgLS0+XG4gICAgPHJlc3VsdE1hcCBpZD1cIkJhc2VSZXN1bHRNYXBcIiB0eXBlPVwiY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlXCI+XG4gICAgICAgIDxpZCBjb2x1bW49XCJpZFwiIHByb3BlcnR5PVwiaWRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cInRhc2tfaWRcIiBwcm9wZXJ0eT1cInRhc2tJZFwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwic3RhcnRfdGltZVwiIHByb3BlcnR5PVwic3RhcnRUaW1lXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJlbmRfdGltZVwiIHByb3BlcnR5PVwiZW5kVGltZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiY3JlYXRlX3RpbWVcIiBwcm9wZXJ0eT1cImNyZWF0ZVRpbWVcIiAvPlxuICAgIDwvcmVzdWx0TWFwPlxuICAgIDxzZWxlY3QgaWQ9XCJzZWFyY2hTY2hlZHVsZVwiIHJlc3VsdFR5cGU9XCJjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uU2NoZWR1bGVWb1wiPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICAgIHMuKixcbiAgICAgICAgICAgIHQudGl0bGUgQVMgdGFza05hbWUsXG4gICAgICAgICAgICB0LmNvZGUgQVMgdGFza0NvZGUsXG4gICAgICAgICAgICB0LnVzZXJfZGF0YSBBUyB1c2VyRGF0YSxcbiAgICAgICAgICAgIHQucmVzb3VyY2VzX2RhdGEgQVMgcmVzb3VyY2VzRGF0YSxcbiAgICAgICAgICAgIHQuc3RhdHVzIEFTIHN0YXR1cyxcbiAgICAgICAgICAgIHQuZGVhZGxpbmUgQVMgZGVhZGxpbmUsXG4gICAgICAgICAgICBzLmVuZF90aW1lIEFTIGVuZFRpbWVcbiAgICAgICAgRlJPTVxuICAgICAgICAgICAgc2NoZWR1bGUgc1xuICAgICAgICBMRUZUIEpPSU5cbiAgICAgICAgICAgIHRhc2sgdCBPTiB0LmlkID0gcy50YXNrX2lkXG4gICAgICAgIDx3aGVyZT5cbiAgICAgICAgICAgIDxpZiB0ZXN0PVwic2VhcmNoS2V5ICE9IG51bGwgYW5kIHNlYXJjaEtleSAhPSAnJ1wiPlxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbW9kZWwvVGFzay5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgYWlkZW56MjMzXG4gKiBAc2luY2UgMjAyNS0wNC0xNlxuICovXG5AR2V0dGVyXG5AU2V0dGVyXG5AQXBpTW9kZWwodmFsdWUgPSBcIlRhc2vlr7nosaFcIiwgZGVzY3JpcHRpb24gPSBcIuS7u+WKoeihqFwiKVxucHVibGljIGNsYXNzIFRhc2sgaW1wbGVtZW50Li4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTNHcWQ4Mmplelk5N3FydlNwSkJNMlAifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkeafpeeci+S4gOS4i+WJjeerr+S7o+egge+8jOS6huino+WmguS9leWunueOsOaZuuiDveaOkuW6j+WKn+iDve+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjYwYjIyNTMyLWM3NjgtNDk0OS1iMTBhLWZjMGM4M2Q0MWJhZCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFRelJCRjU0cllpWmZveUJBWmZXaTNxIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJcXHU2N2U1XFx1NjI3ZVRhc2tDb250cm9sbGVyLmphdmFcXHU3Njg0XFx1NWI4Y1xcdTY1NzRcXHU1MTg1XFx1NWJiOVxcdWZmMGNcXHU0ZWU1XFx1NTNjYVxcdTRlMGVcXHU0ZWZiXFx1NTJhMVxcdTYzOTJcXHU1ZThmXFx1NzZmOFxcdTUxNzNcXHU3Njg0XFx1NjViOVxcdTZjZDVcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IueOsOWcqOaIkeWvueezu+e7n+acieS6huabtOWFqOmdoueahOS6huino++8jOiuqeaIkeafpeeci+S4gOS4i+aOp+WItuWZqOmDqOWIhu+8jOeci+eci+WmguS9lea3u+WKoOaZuuiDveaOkuW6j+WKn+iDve+8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogd2ViL3NyYy92aWV3cy90YXNrL2luZGV4LnZ1ZVxuLi4uXG4gICAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlU2VhcmNoTGlzdCgpXCJcbiAgICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCI+XG4gICAgICAgICAgICAgIOafpeivouaQnOe0olxuICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgICAgICAgPC9lbC1mb3JtPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZWwtY2FyZD5cbiAgICAgIDxlbC1jYXJkIGNsYXNzPVwib3BlcmF0ZS1jb250YWluZXJcIiBzaGFkb3c9XCJuZXZlclwiPlxuICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tdGlja2V0c1wiPjwvaT5cbiAgICAgICAgPHNwYW4+5Lu75Yqh5YiX6KGoPC9zcGFuPjxlbC10YWcgdHlwZT1cImluZm9cIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxMHB4O1wiIGNsYXNzPVwiZWwtaWNvbi1pbmZvXCI+5bey5oyJ5LyY5YWI57qn5LuO6auY5Yiw5L2O5o6S5YiXPC9lbC10YWc+XG4gICAgICAgIDxlbC1idXR0b24gc2l6ZT1cInNtYWxsXCIgY2xhc3M9XCJidG4tYWRkXCIgQGNsaWNrPVwiaGFuZGxlQWRkKClcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAyMHB4XCIgdHlwZT1cInN1Y2Nlc3NcIj48aSBjbGFzcz1cImVsLWljb24tcGx1c1wiPuWIm+W7uuS7u+WKoTwvaT48L2VsLWJ1dHRvbj5cbiAgICAgIDwvZWwtY2FyZD5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0YWJsZS1jb250YWluZXJcIj5cbiAgICAgICAgPGVsLXRhYmxlIHJlZj1cImFkbWluVGFibGVcIlxuICAgICAgICAgICAgICAgICAgOmRhdGE9XCJsaXN0XCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6IDEwMCU7XCJcbiAgICAgICAgICAgICAgICAgIHYtbG9hZGluZz1cImxpc3RMb2FkaW5nXCIgc3RyaXBlPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gbGFiZWw9XCLnvJblj7dcIiB3aWR0aD1cIjEwMFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8dGVtcGxhdGUgc2xvdC1zY29wZT1cInNjb3BlXCI+e3tzY29wZS5yb3cuaWR9fTwvdGVtcGxhdGU+XG4gICAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4uLi5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHdpZHRoPVwiMTIwXCIgbGFiZWw9XCLmnYPph43liIblgLxcIiBhbGlnbj1cImNlbnRlclwiPlxuICAgICAgICAgICAgPHRlbXBsYXRlIHNsb3Qtc2NvcGU9XCJzY29wZVwiPjxlbC10YWcgdHlwZT1cImRhbmdlclwiPnt7c2NvcGUucm93LnByaW9yaXR5U2NvcmUgfHwgMH19PC9lbC10YWc+PC90ZW1wbGF0ZT5cbiAgICAgICAgICA8L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIGxhYmVsPVwi54q25oCBXCIgd2lkdGg9XCIxNjBcIiBhbGlnbj1cImNlbnRlclwiPlxuICAgICAgICAgICAgPHRlbXBsYXRlIHNsb3Qtc2NvcGU9XCJzY29wZVwiPnt7c2NvcGUucm93LnN0YXR1cyB8IGZvcm1hdFN0YXR1c319PC90ZW1wbGF0ZT5cbiAgICAgICAgICA8L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIGxhYmVsPVwi6aKE5Lyw5pe26Ze0XCIgd2lkdGg9XCIxNjBcIiBhbGlnbj1cImNlbnRlclwiPlxuICAgICAgICAgICAgPHRlbXBsYXRlIHNsb3Qtc2NvcGU9XCJzY29wZVwiPnt7c2NvcGUucm93LnRpbWVTcGVuZH19IOWIhumSnzwvdGVtcGxhdGU+XG4gICAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiB3aWR0aD1cIjMwMFwiIGxhYmVsPVwi5Lu75Yqh5o+P6L+wXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy5kZXNjcmlwdGlvbn19PC90ZW1wbGF0ZT5cbiAgICAgICAgICA8L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIGxhYmVsPVwi5oiq5q2i5pe26Ze0XCIgd2lkdGg9XCIxNjBcIiBhbGlnbj1cImNlbnRlclwiPlxuICAgICAgICAgICAgPHRlbXBsYXRlIHNsb3Qtc2NvcGU9XCJzY29wZVwiPnt7c2NvcGUucm93LmRlYWRsaW5lIHwgZm9ybWF0RGF0ZVRpbWV9fTwvdGVtcGxhdGU+XG4uLi5cbiAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgPC9lbC1mb3JtPlxuICAgICAgICA8c3BhbiBzbG90PVwiZm9vdGVyXCIgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgICAgPGVsLWJ1dHRvbiBAY2xpY2s9XCJkaWFsb2dWaXNpYmxlID0gZmFsc2VcIiBzaXplPVwic21hbGxcIj7lj5Yg5raIPC9lbC1idXR0b24+XG4gICAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwicHJpbWFyeVwiIEBjbGljaz1cImhhbmRsZURpYWxvZ0NvbmZpcm0oKVwiIHNpemU9XCJzbWFsbFwiPuehriDlrpo8L2VsLWJ1dHRvbj5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9lbC1kaWFsb2c+XG4gICAgPC9kaXY+XG4gIDwvdGVtcGxhdGU+XG4gIDxzY3JpcHQ+XG4gICAgaW1wb3J0IHtmZXRjaFRhc2tMaXN0LGNyZWF0ZVRhc2ssdXBkYXRlVGFzayxkZWxldGVUYXNrLGZldGNoQWxsQ2F0ZWdvcnlMaXN0LCBmZXRjaEFsbFByaW9yaXR5TGlzdCwgZmV0Y2hBbGxSZXNvdXJjZUxpc3R9IGZyb20gJ0AvYXBpL2FwaSc7XG4gICAgaW1wb3J0IHtmZXRjaEFsbFVzZXJMaXN0fSBmcm9tICdAL2FwaS9sb2dpbic7XG5cbiAgICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG5cbiAgICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgICAgcGFnZU51bTogMSxcbiAgICAgIHBhZ2VTaXplOiAxMCxcbiAgICAgIHNlYXJjaEtleTogbnVsbCxcbiAgICAgIGNhdGVnb3J5SWQ6IG51bGwsXG4gICAgfTtcbi4uLlxuICAgICAgZmlsdGVyczoge1xuICAgICAgICBmb3JtYXREYXRlVGltZSh0aW1lKSB7XG4gICAgICAgICAgaWYgKHRpbWUgPT0gbnVsbCB8fCB0aW1lID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuICdOL0EnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xuICAgICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tOnNzJylcbiAgICAgICAgfSxcbiAgICAgICAgZm9ybWF0U3RhdHVzKHN0YXR1cykge1xuICAgICAgICAgIC8vIGlmIChzdGF0dXMgPT0gMCkge1xuICAgICAgICAgIC8vICAgcmV0dXJuICflvoXlrqHmoLgnO1xuICAgICAgICAgIC8vIH1cbiAgICAgICAgICBpZiAoc3RhdHVzID09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAn5b6F5YqeJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXR1cyA9PSAyKSB7XG4gICAgICAgICAgICByZXR1cm4gJ+W3suWuieaOkic7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0dXMgPT0gMykge1xuICAgICAgICAgICAgcmV0dXJuICfov5vooYzkuK0nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdHVzID09IDQpIHtcbiAgICAgICAgICAgIHJldHVybiAn5bey5a6M5oiQJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXR1cyA9PSA1KSB7XG4gICAgICAgICAgICByZXR1cm4gJ+W3sumAvuacnyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAn5pyq55+lJztcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBjcmVhdGVkKCkge1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgdGhpcy5nZXRDYXRlZ29yeUxpc3QoKTtcbiAgICAgICAgdGhpcy5nZXRQcmlvcml0eUxpc3QoKTtcbiAgICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpO1xuICAgICAgICB0aGlzLmdldFJlc291cmNlTGlzdCgpO1xuICAgICAgfSxcbiAgICAgIG1ldGhvZHM6IHtcbiAgICAgICAgZ2V0VXNlckxpc3QoKSB7XG4gICAgICAgICAgZmV0Y2hBbGxVc2VyTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy51c2VyTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFJlc291cmNlTGlzdCgpIHtcbiAgICAgICAgICBmZXRjaEFsbFJlc291cmNlTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRQcmlvcml0eUxpc3QoKSB7XG4gICAgICAgICAgZmV0Y2hBbGxQcmlvcml0eUxpc3Qoe3R5cGU6IDF9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0YW5jZUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZldGNoQWxsUHJpb3JpdHlMaXN0KHt0eXBlOiAyfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV4aWdlbmN5TGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZVJlc2V0U2VhcmNoKCkge1xuICAgICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XG4gICAgICAgICAgdGhpcy5nZXRMaXN0KClcbiAgICAgICAgfSxcbi4uLlxuICAgICAgICBoYW5kbGVVcGRhdGUocm93KSB7XG4gICAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByb3cudXNlcklkcyA9IEpTT04ucGFyc2Uocm93LnVzZXJEYXRhKTtcbiAgICAgICAgICAgIHJvdy5yZXNvdXJjZUlkcyA9IEpTT04ucGFyc2Uocm93LnJlc291cmNlc0RhdGEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByb3cudXNlcklkcyA9IFtdO1xuICAgICAgICAgICAgcm93LnJlc291cmNlSWRzID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LHJvdyk7XG4gICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0TGlzdCgpIHtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICBmZXRjaFRhc2tMaXN0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlLCBmaWxlKSB7XG4gICAgICAgICAgLy8g5aSE55CG5LiK5Lyg5oiQ5Yqf5ZCO55qE6YC76L6R77yM6I635Y+W5ZCO56uv6L+U5Zue55qE5paH5Lu26Lev5b6EXG4gICAgICAgICAgY29uc3QgZmlsZVBhdGggPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIHRoaXMuYWRtaW4uaW1hZ2UgPSBgJHtwcm9jZXNzLmVudi5CQVNFX0FQSX0vJHtmaWxlUGF0aH1gO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZmlsZVBhdGgpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDYXRlZ29yeUxpc3QoKSB7XG4gICAgICAgICAgZmV0Y2hBbGxDYXRlZ29yeUxpc3QoKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhXG4gICAgICAgICAgfSlcbiAgICAgICAgfSxcbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvVGFza0NvbnRyb2xsZXIuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDku7vliqHooagg5YmN56uv5o6n5Yi25ZmoXG4gKiA8L3A+XG4gKi9cbkBSZXN0Q29udHJvbGxlclxuQFJlcXVlc3RNYXBwaW5nKFwiL3dlYi90YXNrXCIpXG5wdWJsaWMgY2xhc3MgVGFza0NvbnRyb2xsZXIge1xuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFRhc2tTZXJ2aWNlIHRhc2tTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8VGFza1ZvPj4gbGlzdChAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlU2l6ZVwiLCBkZWZhdWx0VmFsdWUgPSBcIjIwXCIpIEludGVnZXIgcGFnZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZU51bVwiLCBkZWZhdWx0VmFsdWUgPSBcIjFcIikgSW50ZWdlciBwYWdlTnVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcImNhdGVnb3J5SWRcIiwgcmVxdWlyZWQgPSBmYWxzZSkgTG9uZyBjYXRlZ29yeUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInNlYXJjaEtleVwiLCByZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIFBhZ2U8VGFza1ZvPiB0YXNrUGFnZSA9IHRhc2tTZXJ2aWNlLnNlYXJjaChwYWdlU2l6ZSwgcGFnZU51bSwgY2F0ZWdvcnlJZCwgc2VhcmNoS2V5KTtcblxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MoQ29tbW9uUGFnZS5yZXN0UGFnZSh0YXNrUGFnZSkpO1xuICAgIH1cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuICAgICAgLy8g5qC85byP5YyW5bGV56S65pel5pyfXG4gICAgICBmb3JtYXREYXlEYXRlKGRhdGVTdHIpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlLCAneXl5eeW5tE1N5pyIZGTml6UnKTtcbiAgICAgIH0sXG4gICAgICAvLyDmoLzlvI/ljJbml7bpl7TkuLpISDpNTeagvOW8j1xuICAgICAgZm9ybWF0VGltZShkYXRlVGltZVN0cikge1xuICAgICAgICBpZiAoIWRhdGVUaW1lU3RyKSByZXR1cm4gJyc7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVRpbWVTdHIuc3BsaXQoJyAnKTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDIgfHwgIXBhcnRzWzFdKSByZXR1cm4gJyc7XG4gICAgICAgIHJldHVybiBwYXJ0c1sxXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0VGFza0xpc3QocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzKHBhcmFtcylcbiAgICAgICAgdGhpcy50YXNrTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0QWxsVGFza0xpc3QoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbGxUYXNrTGlzdCgpXG4gICAgICAgIHRoaXMudGFza0xpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldFRhc2tJbmZvKGlkKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hUYXNrSW5mbyhpZCk7XG4gICAgICAgIHRoaXMudGFza0luZm8gPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHZpZXdCYXJjb2RlKHJvdykge1xuICAgICAgICB0aGlzLmN1cnJlbnRDb2RlID0gcm93LnRhc2tDb2RlO1xuICAgICAgICBhd2FpdCB0aGlzLmdldFRhc2tJbmZvKHJvdy50YXNrSWQpO1xuICAgICAgICB0aGlzLmJhcmNvZGVEaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4uLi5cbiAgICAgIGdldExpc3QoKSB7XG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICAgICAgcGFnZU51bTogdGhpcy5saXN0UXVlcnkucGFnZU51bSxcbiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5saXN0UXVlcnkucGFnZVNpemVcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXkpIHtcbiAgICAgICAgICBwYXJhbXMuc2VhcmNoS2V5ID0gdGhpcy5saXN0UXVlcnkuc2VhcmNoS2V5O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmZXRjaFNjaGVkdWxlTGlzdChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9ub3RpZmljYXRpb24vaW5kZXgudnVlXG4uLi5cbiAgICBtZXRob2RzOiB7XG4gICAgICBmb3JtYXREYXRlVGltZSh0aW1lKSB7XG4gICAgICAgIGlmICh0aW1lID09IG51bGwgfHwgdGltZSA9PT0gJycpIHtcbiAgICAgICAgICByZXR1cm4gJ+acquefpeaXtumXtCc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW0nKTtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIGFzeW5jIGdldFVzZXJMaXN0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hVc2VyTGlzdCh7cGFnZVNpemU6IDEwMH0pO1xuICAgICAgICAgIHRoaXMudXNlckxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3QgfHwgW107XG4gICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bnlKjmiLfliJfooajlpLHotKU6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgXG4gICAgICBhc3luYyBnZXRUYXNrTGlzdCgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoQWxsVGFza0xpc3QoKTtcbiAgICAgICAgICB0aGlzLnRhc2tMaXN0ID0gcmVzcG9uc2UuZGF0YSB8fCBbXTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluS7u+WKoeWIl+ihqOWksei0pTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIGhhbmRsZVJlc2V0U2VhcmNoKCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIGhhbmRsZVNlYXJjaExpc3QoKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSAxO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4uLi5cblBhdGg6IHdlYi9zcmMvYXBpL2FwaS5qc1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0J1xuXG4vLyDotYTmupDliIbnsbtcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaENhdGVnb3J5TGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2F0ZWdvcnkvbGlzdCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhdGVnb3J5KGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2F0ZWdvcnkvY3JlYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ2F0ZWdvcnkoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jYXRlZ29yeS91cGRhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGFcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUNhdGVnb3J5KGlkKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL2NhdGVnb3J5L2RlbGV0ZS8nICsgaWQsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaEFsbENhdGVnb3J5TGlzdCgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2F0ZWdvcnkvbGlzdEFsbCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuLy8g6aaW6aG15pWw5o2uXG5leHBvcnQgZnVuY3Rpb24gaG9tZURhdGEoKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL2hvbWUnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cblxuLy8g55So5oi3XG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hVc2VyTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdXNlci9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVXNlcihkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3VzZXIvY3JlYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVXNlcihkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3VzZXIvdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVVc2VyKGlkKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3VzZXIvZGVsZXRlLycgKyBpZCxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgfSlcbn1cblxuLy8g6LWE5rqQXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hSZXNvdXJjZUxpc3QocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Jlc291cmNlcy9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUmVzb3VyY2UoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9yZXNvdXJjZXMvY3JlYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUmVzb3VyY2UoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9yZXNvdXJjZXMvdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVSZXNvdXJjZShpZCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9yZXNvdXJjZXMvZGVsZXRlLycgKyBpZCxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsUmVzb3VyY2VMaXN0KCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9yZXNvdXJjZXMvbGlzdEFsbCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuLy8g5p2D6YeNXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hQcmlvcml0eUxpc3QocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3ByaW9yaXR5L2xpc3QnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcmlvcml0eShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3ByaW9yaXR5L2NyZWF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YSxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVByaW9yaXR5KGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcHJpb3JpdHkvdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVQcmlvcml0eShpZCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9wcmlvcml0eS9kZWxldGUvJyArIGlkLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hBbGxQcmlvcml0eUxpc3QocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3ByaW9yaXR5L2xpc3RBbGwnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cblxuLy8g5Lu75YqhXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hUYXNrTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svY3JlYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVGFzayhkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrU3RhdHVzKGlkLCBzdGF0dXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay91cGRhdGVTdGF0dXMnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIHBhcmFtczogeyBpZCwgc3RhdHVzIH1cbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFRhc2tSZW1pbmRlcihpZCwgcmVtaW5kZXJUaW1lKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svc2V0UmVtaW5kZXInLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIHBhcmFtczogeyBpZCwgcmVtaW5kZXJUaW1lIH1cbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVRhc2soaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9kZWxldGUvJyArIGlkLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzKHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL2xpc3RBbGxCeVN0YXR1cycsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsVGFza0xpc3QoKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdEFsbCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVGFza0luZm8oaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9pbmZvLycgKyBpZCxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICB9KVxufVxuXG4vLyDlronmjpJcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFNjaGVkdWxlTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvbGlzdCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVXNlclNjaGVkdWxlTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvdXNlci9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hNb250aFNjaGVkdWxlTGlzdCh5ZWFyTW9udGgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogYC93ZWIvc2NoZWR1bGUvbW9udGgvJHt5ZWFyTW9udGh9YCxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hVc2VyTW9udGhTY2hlZHVsZUxpc3QoeWVhck1vbnRoKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6IGAvd2ViL3NjaGVkdWxlL21vbnRoL3VzZXIvJHt5ZWFyTW9udGh9YCxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2NoZWR1bGUoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS9jcmVhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGEsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVTY2hlZHVsZShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL3VwZGF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YVxuICB9KVxufVxuLi4uXG5QYXRoOiB3ZWIvc3JjL3ZpZXdzL3VzZXJUYXNrL2luZGV4LnZ1ZVxuLi4uXG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgPC9lbC1mb3JtPlxuICAgICAgPHNwYW4gc2xvdD1cImZvb3RlclwiIGNsYXNzPVwiZGlhbG9nLWZvb3RlclwiPlxuICAgICAgICA8ZWwtYnV0dG9uIEBjbGljaz1cImRpYWxvZ1Zpc2libGUgPSBmYWxzZVwiIHNpemU9XCJzbWFsbFwiPuWPliDmtog8L2VsLWJ1dHRvbj5cbiAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwicHJpbWFyeVwiIEBjbGljaz1cImhhbmRsZURpYWxvZ0NvbmZpcm0oKVwiIHNpemU9XCJzbWFsbFwiPuehriDlrpo8L2VsLWJ1dHRvbj5cbiAgICAgIDwvc3Bhbj5cbiAgICA8L2VsLWRpYWxvZz5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuPHNjcmlwdD5cbiAgaW1wb3J0IHtmZXRjaFRhc2tMaXN0LGNyZWF0ZVRhc2ssdXBkYXRlVGFzayxkZWxldGVUYXNrLGZldGNoQWxsQ2F0ZWdvcnlMaXN0LCBmZXRjaEFsbFByaW9yaXR5TGlzdCwgZmV0Y2hBbGxSZXNvdXJjZUxpc3R9IGZyb20gJ0AvYXBpL2FwaSc7XG4gIGltcG9ydCB7ZmV0Y2hBbGxVc2VyTGlzdH0gZnJvbSAnQC9hcGkvbG9naW4nO1xuXG4gIGltcG9ydCB7Zm9ybWF0RGF0ZX0gZnJvbSAnQC91dGlscy9kYXRlJztcblxuICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgIHBhZ2VOdW06IDEsXG4gICAgcGFnZVNpemU6IDEwLFxuICAgIHNlYXJjaEtleTogbnVsbCxcbiAgICBjYXRlZ29yeUlkOiBudWxsLFxuICB9O1xuLi4uXG4gICAgbWV0aG9kczoge1xuICAgICAgZ2V0VXNlckxpc3QoKSB7XG4gICAgICAgIGZldGNoQWxsVXNlckxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLnVzZXJMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0UmVzb3VyY2VMaXN0KCkge1xuICAgICAgICBmZXRjaEFsbFJlc291cmNlTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMucmVzb3VyY2VMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0UHJpb3JpdHlMaXN0KCkge1xuICAgICAgICBmZXRjaEFsbFByaW9yaXR5TGlzdCh7dHlwZTogMX0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMuaW1wb3J0YW5jZUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgICAgZmV0Y2hBbGxQcmlvcml0eUxpc3Qoe3R5cGU6IDJ9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLmV4aWdlbmN5TGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZVJlc2V0U2VhcmNoKCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpO1xuICAgICAgICB0aGlzLmdldExpc3QoKVxuICAgICAgfSxcbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQm9vbGVhbiBjcmVhdGUoVGFzayB0YXNrKSB7XG4gICAgICAgIHRhc2suc2V0Q29kZShJZFV0aWwucmFuZG9tVVVJRCgpKTtcbiAgICAgICAgTGlzdDxQcmlvcml0eT4gcHJpb3JpdGllcyA9IHByaW9yaXR5U2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgLy8g5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcblxuICAgICAgICAvLyDpgY3ljobkvJjlhYjnuqfmlbDmja7vvIzorr7nva4gaW1wb3J0YW5jZUlkIOWSjCBleGlnZW5jeUlkXG4gICAgICAgIGZvciAoUHJpb3JpdHkgcHJpb3JpdHkgOiBwcmlvcml0aWVzKSB7XG4gICAgICAgICAgICAvLyDljLnphY0gaW1wb3J0YW5jZUlkICh0eXBlPTEg5LiUIGNhdGVnb3J5SWQg55u45ZCMKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAxICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKS5lcXVhbHModGFzay5nZXRDYXRlZ29yeUlkKCkpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRJbXBvcnRhbmNlSWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7ku7vliqHliJ3lp4vnirbmgIHkuLrlvoXlip5cbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmUodGFzayk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEJvb2xlYW4gdXBkYXRlVGFzayhUYXNrIHRhc2spIHtcbiAgICAgICAgTGlzdDxQcmlvcml0eT4gcHJpb3JpdGllcyA9IHByaW9yaXR5U2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgLy8g5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcblxuICAgICAgICAvLyDpgY3ljobkvJjlhYjnuqfmlbDmja7vvIzorr7nva4gaW1wb3J0YW5jZUlkIOWSjCBleGlnZW5jeUlkXG4gICAgICAgIGZvciAoUHJpb3JpdHkgcHJpb3JpdHkgOiBwcmlvcml0aWVzKSB7XG4gICAgICAgICAgICAvLyDljLnphY0gaW1wb3J0YW5jZUlkICh0eXBlPTEg5LiUIGNhdGVnb3J5SWQg55u45ZCMKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAxICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKS5lcXVhbHModGFzay5nZXRDYXRlZ29yeUlkKCkpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRJbXBvcnRhbmNlSWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICB9XG4uLi5cbiAgICAgICAgXG4gICAgICAgIC8vIOaIquatouaXtumXtOadg+mHjeiuoeeul1xuICAgICAgICBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgICAgICAgICAgIGxvbmcgaG91cnNVbnRpbERlYWRsaW5lID0gQ2hyb25vVW5pdC5IT1VSUy5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5oiq5q2i5pe26Ze06LaK6L+R77yM5YiG5pWw6LaK6auYXG4gICAgICAgICAgICBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDI0KSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gNTA7IC8vIDI05bCP5pe25YaF6aKd5aSW5YqgNTDliIZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDcyKSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gMzA7IC8vIDcy5bCP5pe25YaF6aKd5aSW5YqgMzDliIZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDE2OCkge1xuICAgICAgICAgICAgICAgIHNjb3JlICs9IDEwOyAvLyDkuIDlkajlhoXpop3lpJbliqAxMOWIhlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2NvcmU7XG4gICAgfVxuICAgIFxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBMaXN0PFRhc2tWbz4gZ2V0UHJpb3JpdGl6ZWRUYXNrcyhMb25nIHVzZXJJZCkge1xuICAgICAgICAvLyAxLiDojrflj5bmiYDmnInlvoXlip7ku7vliqHvvIjnirbmgIHkuLox77yJXG4gICAgICAgIFF1ZXJ5V3JhcHBlcjxUYXNrPiBxdWVyeVdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgICAgICAgcXVlcnlXcmFwcGVyLmVxKFwic3RhdHVzXCIsIDEpO1xuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5oyH5a6a5LqG55So5oi3SUTvvIzliJnlj6rojrflj5bor6XnlKjmiLfnm7jlhbPnmoTku7vliqFcbiAgICAgICAgaWYgKHVzZXJJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyDpnIDopoHmkJzntKJ1c2VyRGF0YeWtl+auteS4reWMheWQq3VzZXJJZOeahOiusOW9lVxuICAgICAgICAgICAgLy8g5rOo5oSP77ya6L+Z56eN5pa55byP5Y+v6IO95LiN5aSf5YeG56Gu77yM5pu05aW955qE5pa55rOV5piv5L2/55SoSlNPTuWHveaVsO+8iOWmguaenOaVsOaNruW6k+aUr+aMge+8iVxuICAgICAgICAgICAgcXVlcnlXcmFwcGVyLmxpa2UoXCJ1c2VyX2RhdGFcIiwgdXNlcklkLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGhpcy5saXN0KHF1ZXJ5V3JhcHBlcik7XG4gICAgICAgIFxuICAgICAgICAvLyAyLiDovazmjaLkuLpUYXNrVm/lubborqHnrpfkvJjlhYjnuqfliIbmlbBcbiAgICAgICAgTGlzdDxUYXNrVm8+IHRhc2tWb3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xuICAgICAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgICAgICAgICAgIEJlYW5VdGlscy5jb3B5UHJvcGVydGllcyh0YXNrLCB0YXNrVm8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDorr7nva7kvJjlhYjnuqfliIbmlbBcbiAgICAgICAgICAgIGRvdWJsZSBwcmlvcml0eVNjb3JlID0gY2FsY3VsYXRlUHJpb3JpdHlTY29yZSh0YXNrKTtcbiAgICAgICAgICAgIHRhc2tWby5zZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5U2NvcmUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDojrflj5bku7vliqHnsbvlnovlkI3np7BcbiAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRDYXRlZ29yeUlkKCkpO1xuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiOt+WPlumHjeimgeaAp+WSjOe0p+aApeaAp+WQjeensFxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChpbXBvcnRhbmNlUHJpb3JpdHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrVm8uc2V0SW1wb3J0YW5jZU5hbWUoaW1wb3J0YW5jZVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGFzay5nZXRFeGlnZW5jeUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aWdlbmN5UHJpb3JpdHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrVm8uc2V0RXhpZ2VuY3lOYW1lKGV4aWdlbmN5UHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRhc2tWb3MuYWRkKHRhc2tWbyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDMuIOaMieS8mOWFiOe6p+WIhuaVsOaOkuW6j++8iOS7jumrmOWIsOS9ju+8iVxuICAgICAgICB0YXNrVm9zLnNvcnQoKGEsIGIpIC0+IERvdWJsZS5jb21wYXJlKGIuZ2V0UHJpb3JpdHlTY29yZSgpLCBhLmdldFByaW9yaXR5U2NvcmUoKSkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRhc2tWb3M7XG4gICAgfVxuICAgIFxuICAgIEBPdmVycmlkZVxuICAgIEBUcmFuc2FjdGlvbmFsKHJvbGxiYWNrRm9yID0gRXhjZXB0aW9uLmNsYXNzKVxuICAgIHB1YmxpYyBNYXA8TG9uZywgQm9vbGVhbj4gYXV0b1NjaGVkdWxlVGFza3MoTG9jYWxEYXRlIGRhdGUsIExvbmcgdXNlcklkKSB7XG4gICAgICAgIC8vIOe7k+aenOaYoOWwhO+8jOiusOW9leavj+S4quS7u+WKoeeahOWuieaOkue7k+aenFxuICAgICAgICBNYXA8TG9uZywgQm9vbGVhbj4gcmVzdWx0ID0gbmV3IEhhc2hNYXA8PigpO1xuICAgICAgICBcbiAgICAgICAgLy8gMS4g6I635Y+W5o6S5bqP5ZCO55qE5Lu75Yqh5YiX6KGoXG4gICAgICAgIExpc3Q8VGFza1ZvPiBwcmlvcml0aXplZFRhc2tzID0gZ2V0UHJpb3JpdGl6ZWRUYXNrcyh1c2VySWQpO1xuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5b6F5Yqe5Lu75Yqh77yM55u05o6l6L+U5Zue56m657uT5p6cXG4gICAgICAgIGlmIChwcmlvcml0aXplZFRhc2tzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuLi4uXG4gICAgICAgIFxuICAgICAgICAvLyA1LiDmoLnmja7kvJjlhYjnuqflkozku7vliqHmiYDpnIDml7bpl7TlronmjpLku7vliqFcbiAgICAgICAgZm9yIChUYXNrVm8gdGFza1ZvIDogcHJpb3JpdGl6ZWRUYXNrcykge1xuICAgICAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKHRhc2tWby5nZXRJZCgpKTtcbiAgICAgICAgICAgIGlmICh0YXNrID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2tWby5nZXRJZCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuoeeul+S7u+WKoeaJgOmcgOaXtumXtOauteaVsOmHj1xuICAgICAgICAgICAgaW50IHJlcXVpcmVkU2xvdHMgPSAxOyAvLyDpu5jorqTljaDnlKgx5Liq5pe26Ze05q6177yIMzDliIbpkp/vvIlcbiAgICAgICAgICAgIGlmICh0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyDmr48zMOWIhumSn+S4gOS4quaXtumXtOaute+8jOWQkeS4iuWPluaVtFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkU2xvdHMgPSAoaW50Li4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUs1U3NIalJ4cmpuRFdvR0M0RWlHcGYifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IueOsOWcqOaIkeWvueezu+e7n+acieS6huabtOWFqOmdoueahOS6huino++8jOiuqeaIkeafpeeci+S4gOS4i+aOp+WItuWZqOmDqOWIhu+8jOeci+eci+WmguS9lea3u+WKoOaZuuiDveaOkuW6j+WKn+iDve+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImMyNGI1YmRkLWI5NzEtNDYyMi04Zjg3LTMxMjRhMDlhMDM2YSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFId3dxQnYzSFBmcnZvWUFYNVJOZXRIIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL1Rhc2tTZXJ2aWNlLmphdmFcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IuWfuuS6juaIkeWvueS7o+eggeeahOWIhuaekO+8jOaIkeeOsOWcqOWwhuWunueOsOaZuuiDveaOkuW6j+WKn+iDveOAguS7peS4i+aYr+aIkeeahOivpue7huiuoeWIku+8mlxuXG4jIyDorqHliJJcblxuMS4g5ZyoIGBUYXNrU2VydmljZWAg5o6l5Y+j5Lit5re75Yqg5pm66IO95o6S5bqP5pa55rOVXG4yLiDlnKggYFRhc2tTZXJ2aWNlSW1wbGAg5Lit5a6e546w5pm66IO95o6S5bqP566X5rOVXG4zLiDlnKggYFRhc2tDb250cm9sbGVyYCDkuK3mt7vliqDmmbrog73mjpLluo/nmoRBUEnnq6/ngrlcbjQuIOWcqOWJjeerr0FQSeaWh+S7tuS4rea3u+WKoOiwg+eUqOaZuuiDveaOkuW6j+eahOaWueazlVxuXG7orqnmiJHku6zlvIDlp4vlrp7njrDvvJpcblxuIyMjIDEuIOabtOaWsCBUYXNrU2VydmljZSDmjqXlj6NcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1Rhc2tDb250cm9sbGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLmNvbnRyb2xsZXI7XG5cblxuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuSWRVdGlsO1xuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuT2JqZWN0VXRpbDtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5jb21tb24uYXBpLkNvbW1vblBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUmVzdWx0O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlRhc2tTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuXG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3Rhc2tcIilcbnB1YmxpYyBjbGFzcyBUYXNrQ29udHJvbGxlciB7XG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVGFza1NlcnZpY2UgdGFza1NlcnZpY2U7XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5qC55o2u5p2h5Lu25p+l6K+i5YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxUYXNrVm8+PiBsaXN0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwiY2F0ZWdvcnlJZFwiLCByZXF1aXJlZCA9IGZhbHNlKSBMb25nIGNhdGVnb3J5SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic2VhcmNoS2V5XCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgUGFnZTxUYXNrVm8+IHRhc2tQYWdlID0gdGFza1NlcnZpY2Uuc2VhcmNoKHBhZ2VTaXplLCBwYWdlTnVtLCBjYXRlZ29yeUlkLCBzZWFyY2hLZXkpO1xuXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHRhc2tQYWdlKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu65Lu75YqhXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2NyZWF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBUYXNrIHRhc2spIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmNyZWF0ZSh0YXNrKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuS/ruaUueS7u+WKoVwiKVxuICAgIEBQb3N0TWFwcGluZyhcIi91cGRhdGVcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PEJvb2xlYW4+IHVwZGF0ZShAUmVxdWVzdEJvZHkgVGFzayB0YXNrKSB7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVUYXNrKHRhc2spKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5L+u5pS55Lu75Yqh54q25oCBXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL3VwZGF0ZVN0YXR1c1wiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gdXBkYXRlU3RhdHVzKEBSZXF1ZXN0UGFyYW0gTG9uZyBpZCwgQFJlcXVlc3RQYXJhbSBJbnRlZ2VyIHN0YXR1cykge1xuICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGlkKTtcbiAgICAgICAgaWYgKHRhc2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoc3RhdHVzKTtcbiAgICAgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LmZhaWxlZChcIuS7u+WKoeS4jeWtmOWcqFwiKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi6K6+572u5Lu75Yqh5o+Q6YaS5pe26Ze0XCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL3NldFJlbWluZGVyXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiBzZXRSZW1pbmRlcihAUmVxdWVzdFBhcmFtIExvbmcgaWQsIEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHJlbWluZGVyVGltZSkge1xuICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGlkKTtcbiAgICAgICAgaWYgKHRhc2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHJlbWluZGVyVGltZSAhPSBudWxsICYmICFyZW1pbmRlclRpbWUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRSZW1pbmRlclRpbWUoamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUucGFyc2UocmVtaW5kZXJUaW1lKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhc2suc2V0UmVtaW5kZXJUaW1lKG51bGwpOyAvLyDlj5bmtojmj5DphpJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LmZhaWxlZChcIuS7u+WKoeS4jeWtmOWcqFwiKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi56e76Zmk5Lu75YqhXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2RlbGV0ZS97aWR9XCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxTdHJpbmc+IGRlbGV0ZShAUGF0aFZhcmlhYmxlIExvbmcgaWQpIHtcbiAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChpZCk7XG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRhc2tTZXJ2aWNlLnJlbW92ZUJ5SWQodGFzayk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoXCLnp7vpmaTlpLHotKXvvIzor7fnqI3lkI7ph43or5VcIik7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuafpeivouaJgOacieWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RBbGxCeVN0YXR1c1wiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrVm8+PiBsaXN0QWxsKEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInN0YXR1c1wiLCByZXF1aXJlZCA9IGZhbHNlKSBJbnRlZ2VyIHN0YXR1cykge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UubGlzdEFsbChzdGF0dXMpKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5p+l6K+i5omA5pyJ5YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdEFsbFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrPj4gbGlzdEFsbCgpIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmxpc3QoKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuafpeivouS7u+WKoeivpuaDhVwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2luZm8ve2lkfVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8VGFza1ZvPiBnZXRJbmZvKEBQYXRoVmFyaWFibGUgTG9uZyBpZCkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UuZ2V0SW5mbyhpZCkpO1xuICAgIH1cbn1cblxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbWFwcGVyL1Rhc2tNYXBwZXIuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5tYXBwZXIuQmFzZU1hcHBlcjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVGFza1ZvO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZDtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmRQaWU7XG5cbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCBNYXBwZXIg5o6l5Y+jXG4gKiA8L3A+XG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgVGFza01hcHBlciBleHRlbmRzIEJhc2VNYXBwZXI8VGFzaz4ge1xuXG4gICAgUGFnZTxUYXNrVm8+IHNlYXJjaFRhc2soUGFnZTxUYXNrVm8+IHBhZ2UsIFN0cmluZyBzZWFyY2hLZXksIExvbmcgY2F0ZWdvcnlJZCk7XG5cbiAgICBMaXN0PFRhc2tWbz4gbGlzdEFsbChJbnRlZ2VyIHN0YXR1cyk7XG5cbiAgICBMaXN0PFRyZW5kUGllPiB0cmVuZFBpZSgpO1xuXG4gICAgTGlzdDxUcmVuZD4gdHJlbmQoU3RyaW5nIHN0YXJ0RGF0ZSwgU3RyaW5nIGVuZERhdGUpO1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCDmnI3liqHlrp7njrDnsbtcbiAqIDwvcD5cbiAqL1xuQFNlcnZpY2VcbnB1YmxpYyBjbGFzcyBUYXNrU2VydmljZUltcGwgZXh0ZW5kcyBTZXJ2aWNlSW1wbDxUYXNrTWFwcGVyLCBUYXNrPiBpbXBsZW1lbnRzIFRhc2tTZXJ2aWNlIHtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFRhc2tNYXBwZXIgdGFza01hcHBlcjtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIENhdGVnb3J5U2VydmljZSBjYXRlZ29yeVNlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBQcmlvcml0eVNlcnZpY2UgcHJpb3JpdHlTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVW1zQWRtaW5TZXJ2aWNlIHVzZXJTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgUmVzb3VyY2VzU2VydmljZSByZXNvdXJjZXNTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIEBMYXp5XG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFBhZ2U8VGFza1ZvPiBzZWFyY2goSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBMb25nIGNhdGVnb3J5SWQsIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgLy8g5YWI5pu05paw5omA5pyJ5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcbiAgICAgICAgXG4gICAgICAgIFBhZ2U8VGFza1ZvPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIHJldHVybiB0YXNrTWFwcGVyLnNlYXJjaFRhc2socGFnZSwgc2VhcmNoS2V5LCBjYXRlZ29yeUlkKTtcbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBCb29sZWFuIGNyZWF0ZShUYXNrIHRhc2spIHtcbiAgICAgICAgdGFzay5zZXRDb2RlKElkVXRpbC5yYW5kb21VVUlEKCkpO1xuICAgICAgICBMaXN0PFByaW9yaXR5PiBwcmlvcml0aWVzID0gcHJpb3JpdHlTZXJ2aWNlLmxpc3QoKTtcblxuICAgICAgICAvLyDlvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOmBjeWOhuS8mOWFiOe6p+aVsOaNru+8jOiuvue9riBpbXBvcnRhbmNlSWQg5ZKMIGV4aWdlbmN5SWRcbiAgICAgICAgZm9yIChQcmlvcml0eSBwcmlvcml0eSA6IHByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgIC8vIOWMuemFjSBpbXBvcnRhbmNlSWQgKHR5cGU9MSDkuJQgY2F0ZWdvcnlJZCDnm7jlkIwpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDEgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpLmVxdWFscyh0YXNrLmdldENhdGVnb3J5SWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrLnNldEltcG9ydGFuY2VJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Yy56YWNIGV4aWdlbmN5SWQgKHR5cGU9MiDkuJQgZGVhZGxpbmUg5Zyo5pe26Ze05Yy66Ze06IyD5Zu05YaFKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAyICYmIHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbG9uZyBob3Vyc0RpZmZlcmVuY2UgPSBEdXJhdGlvbi5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKS50b0hvdXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1pbkhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eS5zZXRNaW5Ib3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eS5zZXRNYXhIb3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnIDlpKflgLzkuLogMO+8jOWImeinhuS4uuato+aXoOept1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gd2l0aGluUmFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldE1heEhvdXJzKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnNEaWZmZXJlbmNlID49IHByaW9yaXR5LmdldE1pbkhvdXJzKCkgJiYgKHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gMCB8fCBob3Vyc0RpZmZlcmVuY2UgPD0gcHJpb3JpdHkuZ2V0TWF4SG91cnMoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhpblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnNEaWZmZXJlbmNlID49IHByaW9yaXR5LmdldE1pbkhvdXJzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhpblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7ku7vliqHliJ3lp4vnirbmgIHkuLrlvoXlip5cbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmUodGFzayk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEJvb2xlYW4gdXBkYXRlVGFzayhUYXNrIHRhc2spIHtcbiAgICAgICAgTGlzdDxQcmlvcml0eT4gcHJpb3JpdGllcyA9IHByaW9yaXR5U2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgLy8g5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcblxuICAgICAgICAvLyDpgY3ljobkvJjlhYjnuqfmlbDmja7vvIzorr7nva4gaW1wb3J0YW5jZUlkIOWSjCBleGlnZW5jeUlkXG4gICAgICAgIGZvciAoUHJpb3JpdHkgcHJpb3JpdHkgOiBwcmlvcml0aWVzKSB7XG4gICAgICAgICAgICAvLyDljLnphY0gaW1wb3J0YW5jZUlkICh0eXBlPTEg5LiUIGNhdGVnb3J5SWQg55u45ZCMKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAxICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKS5lcXVhbHModGFzay5nZXRDYXRlZ29yeUlkKCkpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRJbXBvcnRhbmNlSWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWMuemFjSBleGlnZW5jeUlkICh0eXBlPTIg5LiUIGRlYWRsaW5lIOWcqOaXtumXtOWMuumXtOiMg+WbtOWGhSlcbiAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRUeXBlKCkgPT0gMiAmJiB0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxvbmcgaG91cnNEaWZmZXJlbmNlID0gRHVyYXRpb24uYmV0d2Vlbihub3csIHRhc2suZ2V0RGVhZGxpbmUoKSkudG9Ib3VycygpO1xuICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRNaW5Ib3VycygpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHkuc2V0TWluSG91cnMoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRNYXhIb3VycygpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHkuc2V0TWF4SG91cnMoMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5pyA5aSn5YC85Li6IDDvvIzliJnop4bkuLrmraPml6DnqbdcbiAgICAgICAgICAgICAgICBib29sZWFuIHdpdGhpblJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1pbkhvdXJzKCkgIT0gbnVsbCAmJiBwcmlvcml0eS5nZXRNYXhIb3VycygpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzRGlmZmVyZW5jZSA+PSBwcmlvcml0eS5nZXRNaW5Ib3VycygpICYmIChwcmlvcml0eS5nZXRNYXhIb3VycygpID09IDAgfHwgaG91cnNEaWZmZXJlbmNlIDw9IHByaW9yaXR5LmdldE1heEhvdXJzKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aXRoaW5SYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByaW9yaXR5LmdldE1pbkhvdXJzKCkgIT0gbnVsbCAmJiBwcmlvcml0eS5nZXRNYXhIb3VycygpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzRGlmZmVyZW5jZSA+PSBwcmlvcml0eS5nZXRNaW5Ib3VycygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aXRoaW5SYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAod2l0aGluUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRFeGlnZW5jeUlkKHByaW9yaXR5LmdldElkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5omL5Yqo5bCG5Lu75Yqh6K6+572u5Li65bey5a6M5oiQ77yM5L+d5oyB6K+l54q25oCBXG4gICAgICAgIFRhc2sgb2xkVGFzayA9IHRoaXMuZ2V0QnlJZCh0YXNrLmdldElkKCkpO1xuICAgICAgICBpZiAob2xkVGFzayAhPSBudWxsICYmIG9sZFRhc2suZ2V0U3RhdHVzKCkgIT0gNCAmJiB0YXNrLmdldFN0YXR1cygpICE9IDQpIHtcbiAgICAgICAgICAgIC8vIOiHquWKqOabtOaWsOS7u+WKoeeKtuaAgVxuICAgICAgICAgICAgdXBkYXRlVGFza1N0YXR1cyh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQnlJZCh0YXNrKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog5q+P5aSp5YeM5pmo5omn6KGM5LiA5qyh77yM6Ieq5Yqo5pu05paw5omA5pyJ5Lu75Yqh55qE54q25oCBXG4gICAgICovXG4gICAgQFNjaGVkdWxlZChjcm9uID0gXCIwIDAgMCAqICogP1wiKVxuICAgIHB1YmxpYyB2b2lkIHNjaGVkdWxlZFVwZGF0ZUFsbFRhc2tTdGF0dXMoKSB7XG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog5pu05paw5omA5pyJ5Lu75Yqh55qE54q25oCBXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKSB7XG4gICAgICAgIExpc3Q8VGFzaz4gYWxsVGFza3MgPSB0aGlzLmxpc3QoKTtcbiAgICAgICAgYWxsVGFza3MuZm9yRWFjaCh0aGlzOjp1cGRhdGVUYXNrU3RhdHVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVCYXRjaEJ5SWQoYWxsVGFza3MpO1xuICAgIH1cbi4uLlxuICAgIFxuICAgIC8qKlxuICAgICAqIOiuoeeul+S7u+WKoeeahOS8mOWFiOe6p+WIhuaVsFxuICAgICAqIOWfuuS6juS7u+WKoeeahOmHjeimgeaAp+WSjOe0p+aApeaAp1xuICAgICAqIEBwYXJhbSB0YXNrIOS7u+WKoeWvueixoVxuICAgICAqIEByZXR1cm4g5LyY5YWI57qn5YiG5pWwXG4gICAgICovXG4gICAgcHJpdmF0ZSBkb3VibGUgY2FsY3VsYXRlUHJpb3JpdHlTY29yZShUYXNrIHRhc2spIHtcbiAgICAgICAgZG91YmxlIHNjb3JlID0gMC4wO1xuICAgICAgICBcbiAgICAgICAgLy8g6I635Y+W6YeN6KaB5oCn5ZKM57Sn5oCl5oCn6YWN572uXG4gICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IG51bGw7XG4gICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0YXNrLmdldEV4aWdlbmN5SWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDorqHnrpfliIbmlbBcbiAgICAgICAgaWYgKGltcG9ydGFuY2VQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzY29yZSArPSBpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0U2NvcmUoKSAqIGltcG9ydGFuY2VQcmlvcml0eS5nZXRXZWlnaHQoKS5kb3VibGVWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzY29yZSArPSBleGlnZW5jeVByaW9yaXR5LmdldFNjb3JlKCkgKiBleGlnZW5jeVByaW9yaXR5LmdldFdlaWdodCgpLmRvdWJsZVZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOaIquatouaXtumXtOadg+mHjeiuoeeul1xuICAgICAgICBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgICAgICAgICAgIGxvbmcgaG91cnNVbnRpbERlYWRsaW5lID0gQ2hyb25vVW5pdC5IT1VSUy5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5oiq5q2i5pe26Ze06LaK6L+R77yM5YiG5pWw6LaK6auYXG4gICAgICAgICAgICBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDI0KSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gNTA7IC8vIDI05bCP5pe25YaF6aKd5aSW5YqgNTDliIZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDcyKSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gMzA7IC8vIDcy5bCP5pe25YaF6aKd5aSW5YqgMzDliIZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDE2OCkge1xuICAgICAgICAgICAgICAgIHNjb3JlICs9IDEwOyAvLyDkuIDlkajlhoXpop3lpJbliqAxMOWIhlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2NvcmU7XG4gICAgfVxuICAgIFxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBMaXN0PFRhc2tWbz4gZ2V0UHJpb3JpdGl6ZWRUYXNrcyhMb25nIHVzZXJJZCkge1xuICAgICAgICAvLyAxLiDojrflj5bmiYDmnInlvoXlip7ku7vliqHvvIjnirbmgIHkuLox77yJXG4gICAgICAgIFF1ZXJ5V3JhcHBlcjxUYXNrPiBxdWVyeVdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgICAgICAgcXVlcnlXcmFwcGVyLmVxKFwic3RhdHVzXCIsIDEpO1xuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5oyH5a6a5LqG55So5oi3SUTvvIzliJnlj6rojrflj5bor6XnlKjmiLfnm7jlhbPnmoTku7vliqFcbiAgICAgICAgaWYgKHVzZXJJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyDpnIDopoHmkJzntKJ1c2VyRGF0YeWtl+auteS4reWMheWQq3VzZXJJZOeahOiusOW9lVxuICAgICAgICAgICAgLy8g5rOo5oSP77ya6L+Z56eN5pa55byP5Y+v6IO95LiN5aSf5YeG56Gu77yM5pu05aW955qE5pa55rOV5piv5L2/55SoSlNPTuWHveaVsO+8iOWmguaenOaVsOaNruW6k+aUr+aMge+8iVxuICAgICAgICAgICAgcXVlcnlXcmFwcGVyLmxpa2UoXCJ1c2VyX2RhdGFcIiwgdXNlcklkLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGhpcy5saXN0KHF1ZXJ5V3JhcHBlcik7XG4gICAgICAgIFxuICAgICAgICAvLyAyLiDovazmjaLkuLpUYXNrVm/lubborqHnrpfkvJjlhYjnuqfliIbmlbBcbiAgICAgICAgTGlzdDxUYXNrVm8+IHRhc2tWb3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xuICAgICAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgICAgICAgICAgIEJlYW5VdGlscy5jb3B5UHJvcGVydGllcyh0YXNrLCB0YXNrVm8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDorr7nva7kvJjlhYjnuqfliIbmlbBcbiAgICAgICAgICAgIGRvdWJsZSBwcmlvcml0eVNjb3JlID0gY2FsY3VsYXRlUHJpb3JpdHlTY29yZSh0YXNrKTtcbiAgICAgICAgICAgIHRhc2tWby5zZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5U2NvcmUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDojrflj5bku7vliqHnsbvlnovlkI3np7BcbiAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRDYXRlZ29yeUlkKCkpO1xuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiOt+WPlumHjeimgeaAp+WSjOe0p+aApeaAp+WQjeensFxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChpbXBvcnRhbmNlUHJpb3JpdHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrVm8uc2V0SW1wb3J0YW5jZU5hbWUoaW1wb3J0YW5jZVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGFzay5nZXRFeGlnZW5jeUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aWdlbmN5UHJpb3JpdHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrVm8uc2V0RXhpZ2VuY3lOYW1lKGV4aWdlbmN5UHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRhc2tWb3MuYWRkKHRhc2tWbyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDMuIOaMieS8mOWFiOe6p+WIhuaVsOaOkuW6j++8iOS7jumrmOWIsOS9ju+8iVxuICAgICAgICB0YXNrVm9zLnNvcnQoKGEsIGIpIC0+IERvdWJsZS5jb21wYXJlKGIuZ2V0UHJpb3JpdHlTY29yZSgpLCBhLmdldFByaW9yaXR5U2NvcmUoKSkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRhc2tWb3M7XG4gICAgfVxuICAgIFxuICAgIEBPdmVycmlkZVxuICAgIEBUcmFuc2FjdGlvbmFsKHJvbGxiYWNrRm9yID0gRXhjZXB0aW9uLmNsYXNzKVxuICAgIHB1YmxpYyBNYXA8TG9uZywgQm9vbGVhbj4gYXV0b1NjaGVkdWxlVGFza3MoTG9jYWxEYXRlIGRhdGUsIExvbmcgdXNlcklkKSB7XG4gICAgICAgIC8vIOe7k+aenOaYoOWwhO+8jOiusOW9leavj+S4quS7u+WKoeeahOWuieaOkue7k+aenFxuICAgICAgICBNYXA8TG9uZywgQm9vbGVhbj4gcmVzdWx0ID0gbmV3IEhhc2hNYXA8PigpO1xuICAgICAgICBcbiAgICAgICAgLy8gMS4g6I635Y+W5o6S5bqP5ZCO55qE5Lu75Yqh5YiX6KGoXG4gICAgICAgIExpc3Q8VGFza1ZvPiBwcmlvcml0aXplZFRhc2tzID0gZ2V0UHJpb3JpdGl6ZWRUYXNrcyh1c2VySWQpO1xuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5b6F5Yqe5Lu75Yqh77yM55u05o6l6L+U5Zue56m657uT5p6cXG4gICAgICAgIGlmIChwcmlvcml0aXplZFRhc2tzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuLi4uXG4gICAgICAgIFxuICAgICAgICAvLyA1LiDmoLnmja7kvJjlhYjnuqflkozku7vliqHmiYDpnIDml7bpl7TlronmjpLku7vliqFcbiAgICAgICAgZm9yIChUYXNrVm8gdGFza1ZvIDogcHJpb3JpdGl6ZWRUYXNrcykge1xuICAgICAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKHRhc2tWby5nZXRJZCgpKTtcbiAgICAgICAgICAgIGlmICh0YXNrID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2tWby5nZXRJZCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuoeeul+S7u+WKoeaJgOmcgOaXtumXtOauteaVsOmHj1xuICAgICAgICAgICAgaW50IHJlcXVpcmVkU2xvdHMgPSAxOyAvLyDpu5jorqTljaDnlKgx5Liq5pe26Ze05q6177yIMzDliIbpkp/vvIlcbiAgICAgICAgICAgIGlmICh0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyDmr48zMOWIhumSn+S4gOS4quaXtumXtOaute+8jOWQkeS4iuWPluaVtFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkU2xvdHMgPSAoaW50KSBNYXRoLmNlaWwodGFzay5nZXRUaW1lU3BlbmQoKSAvIDMwLjApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlr7vmib7ov57nu63nmoTnqbrpl7Lml7bpl7TmrrVcbiAgICAgICAgICAgIGludCBzdGFydFNsb3QgPSBmaW5kQXZhaWxhYmxlVGltZVNsb3RzKHRpbWVTbG90T2NjdXBpZWQsIHJlcXVpcmVkU2xvdHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlpoLmnpzmib7kuI3liLDotrPlpJ/nmoTml7bpl7TmrrXvvIzmoIforrDkuLrlronmjpLlpLHotKVcbiAgICAgICAgICAgIGlmIChzdGFydFNsb3QgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2suZ2V0SWQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9UYXNrU2VydmljZS5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnNlcnZpY2UuSVNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmQ7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kUGllO1xuXG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICogPHA+XG4gKiDku7vliqHooagg5pyN5Yqh57G7XG4gKiA8L3A+XG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgVGFza1NlcnZpY2UgZXh0ZW5kcyBJU2VydmljZTxUYXNrPiB7XG5cbiAgICBQYWdlPFRhc2tWbz4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgTG9uZyBjYXRlZ29yeUlkLCBTdHJpbmcgc2VhcmNoS2V5KTtcblxuICAgIExpc3Q8VGFza1ZvPiBsaXN0QWxsKEludGVnZXIgc3RhdHVzKTtcblxuICAgIFRhc2tWbyBnZXRJbmZvKExvbmcgaWQpO1xuXG4gICAgTGlzdDxUcmVuZFBpZT4gdHJlbmRQaWUoKTtcblxuICAgIExpc3Q8VHJlbmQ+IHRyZW5kKFN0cmluZyBzdGFydERhdGUsIFN0cmluZyBlbmREYXRlKTtcblxuICAgIEJvb2xlYW4gY3JlYXRlKFRhc2sgdGFzayk7XG5cbiAgICBCb29sZWFuIHVwZGF0ZVRhc2soVGFzayB0YXNrKTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvUHJpb3JpdHlDb250cm9sbGVyLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoIOWJjeerr+aOp+WItuWZqFxuICogPC9wPlxuICovXG5AUmVzdENvbnRyb2xsZXJcbkBSZXF1ZXN0TWFwcGluZyhcIi93ZWIvcHJpb3JpdHlcIilcbnB1YmxpYyBjbGFzcyBQcmlvcml0eUNvbnRyb2xsZXIge1xuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFByaW9yaXR5U2VydmljZSBwcmlvcml0eVNlcnZpY2U7XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5qC55o2u5p2h5Lu25p+l6K+i5YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxQcmlvcml0eT4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJ0eXBlXCIsIHJlcXVpcmVkID0gZmFsc2UpIEludGVnZXIgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFByaW9yaXR5PiBwcmlvcml0eVBhZ2UgPSBwcmlvcml0eVNlcnZpY2Uuc2VhcmNoKHBhZ2VTaXplLCBwYWdlTnVtLCB0eXBlLCBzZWFyY2hLZXkpO1xuXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHByaW9yaXR5UGFnZSkpO1xuICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvU2NoZWR1bGVDb250cm9sbGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLmNvbnRyb2xsZXI7XG5cblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIuY29tbW9uLmFwaS5Db21tb25SZXN1bHQ7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlNjaGVkdWxlU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uU2NoZWR1bGVWbztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVGFza1ZvO1xuaW1wb3J0IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLlNlY3VyaXR5VXRpbHM7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3NjaGVkdWxlXCIpXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVDb250cm9sbGVyIHtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zZWFyY2gocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9DaGFydENvbnRyb2xsZXIuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuY29udHJvbGxlcjtcblxuXG5pbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUmVzdWx0O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlRhc2tTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZDtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmRQaWU7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuXG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbkBSZXN0Q29udHJvbGxlclxuQFJlcXVlc3RNYXBwaW5nKFwiL3dlYi9jaGFydFwiKVxucHVibGljIGNsYXNzIENoYXJ0Q29udHJvbGxlciB7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBUYXNrU2VydmljZSB0YXNrU2VydmljZTtcblxuICAgIEBBcGlPcGVyYXRpb24oXCLku7vliqHnirbmgIHnu5/orqHmlbDmja5cIilcbiAgICBAR2V0TWFwcGluZyhcIi90cmVuZFBpZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUcmVuZFBpZT4+IHRyZW5kUGllKCkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UudHJlbmRQaWUoKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuS7u+WKoee7n+iuoVwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL3RyZW5kXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxMaXN0PFRyZW5kPj4gdHJlbmQoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic3RhcnREYXRlXCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzdGFydERhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwiZW5kRGF0ZVwiLCByZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgZW5kRGF0ZSl7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS50cmVuZChzdGFydERhdGUsIGVuZERhdGUpKTtcbiAgICB9XG59XG5cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3ZvL1Rhc2tWby5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52bztcblxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgVGFza1ZvIGV4dGVuZHMgVGFzayB7XG4gICAgcHJpdmF0ZSBTdHJpbmcgY2F0ZWdvcnlOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGltcG9ydGFuY2VOYW1lOy4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFRelJCRjU0cllpWmZveUJBWmZXaTNxIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiLln7rkuo7miJHlr7nku6PnoIHnmoTliIbmnpDvvIzmiJHnjrDlnKjlsIblrp7njrDmmbrog73mjpLluo/lip/og73jgILku6XkuIvmmK/miJHnmoTor6bnu4borqHliJLvvJpcblxuIyMg6K6h5YiSXG5cbjEuIOWcqCBgVGFza1NlcnZpY2VgIOaOpeWPo+S4rea3u+WKoOaZuuiDveaOkuW6j+aWueazlVxuMi4g5ZyoIGBUYXNrU2VydmljZUltcGxgIOS4reWunueOsOaZuuiDveaOkuW6j+eul+azlVxuMy4g5ZyoIGBUYXNrQ29udHJvbGxlcmAg5Lit5re75Yqg5pm66IO95o6S5bqP55qEQVBJ56uv54K5XG40LiDlnKjliY3nq69BUEnmlofku7bkuK3mt7vliqDosIPnlKjmmbrog73mjpLluo/nmoTmlrnms5Vcblxu6K6p5oiR5Lus5byA5aeL5a6e546w77yaXG5cbiMjIyAxLiDmm7TmlrAgVGFza1NlcnZpY2Ug5o6l5Y+jXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZTdlM2RhMTItZDQzNS00OWFlLThhNjUtOWJmZjlhMDE5MjZlIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUVweW5IcUdEVFczMWFRcnMydml6U3UiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL1Rhc2tTZXJ2aWNlLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIEJvb2xlYW4gdXBkYXRlVGFzayhUYXNrIHRhc2spO1xcbn1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIEJvb2xlYW4gdXBkYXRlVGFzayhUYXNrIHRhc2spO1xcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIFxcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXHU0ZWZiXFx1NTJhMVxcdTUyMTdcXHU4ODY4XFxuICAgICAqIFxcdTY4MzlcXHU2MzZlXFx1NGVmYlxcdTUyYTFcXHU3Njg0XFx1OTFjZFxcdTg5ODFcXHU2MDI3XFx1MzAwMVxcdTdkMjdcXHU2MDI1XFx1NjAyN1xcdTU0OGNcXHU2MjJhXFx1NmI2MlxcdTY1ZjZcXHU5NWY0XFx1OGZkYlxcdTg4NGNcXHU2MzkyXFx1NWU4ZlxcbiAgICAgKiBAcmV0dXJuIFxcdTYzOTJcXHU1ZThmXFx1NTQwZVxcdTc2ODRcXHU0ZWZiXFx1NTJhMVxcdTUyMTdcXHU4ODY4XFxuICAgICAqL1xcbiAgICBMaXN0PFRhc2tWbz4gc21hcnRTb3J0VGFza3MoKTtcXG59XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAzMSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAzMn1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi546w5Zyo5oiR5bCG5pu05pawIFRhc2tTZXJ2aWNlIOaOpeWPo++8jOa3u+WKoOaZuuiDveaOkuW6j+aWueazle+8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9UYXNrU2VydmljZS5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG4gICAgIDRcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbiAgICAgNVx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5JU2VydmljZTtcbiAgICAgNlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG4gICAgIDdcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmQ7XG4gICAgIDhcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmRQaWU7XG4gICAgIDlcdFxuICAgIDEwXHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMTFcdFxuICAgIDEyXHQvKipcbiAgICAxM1x0ICogPHA+XG4gICAgMTRcdCAqIOS7u+WKoeihqCDmnI3liqHnsbtcbiAgICAxNVx0ICogPC9wPlxuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGludGVyZmFjZSBUYXNrU2VydmljZSBleHRlbmRzIElTZXJ2aWNlPFRhc2s+IHtcbiAgICAxOFx0XG4gICAgMTlcdCAgICBQYWdlPFRhc2tWbz4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgTG9uZyBjYXRlZ29yeUlkLCBTdHJpbmcgc2VhcmNoS2V5KTtcbiAgICAyMFx0XG4gICAgMjFcdCAgICBMaXN0PFRhc2tWbz4gbGlzdEFsbChJbnRlZ2VyIHN0YXR1cyk7XG4gICAgMjJcdFxuICAgIDIzXHQgICAgVGFza1ZvIGdldEluZm8oTG9uZyBpZCk7XG4gICAgMjRcdFxuICAgIDI1XHQgICAgTGlzdDxUcmVuZFBpZT4gdHJlbmRQaWUoKTtcbiAgICAyNlx0XG4gICAgMjdcdCAgICBMaXN0PFRyZW5kPiB0cmVuZChTdHJpbmcgc3RhcnREYXRlLCBTdHJpbmcgZW5kRGF0ZSk7XG4gICAgMjhcdFxuICAgIDI5XHQgICAgQm9vbGVhbiBjcmVhdGUoVGFzayB0YXNrKTtcbiAgICAzMFx0XG4gICAgMzFcdCAgICBCb29sZWFuIHVwZGF0ZVRhc2soVGFzayB0YXNrKTtcbiAgICAzMlx0fVxuICAgIDMzXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMzXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSHd3cUJ2M0hQZnJ2b1lBWDVSTmV0SCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0Ijoi546w5Zyo5oiR5bCG5pu05pawIFRhc2tTZXJ2aWNlIOaOpeWPo++8jOa3u+WKoOaZuuiDveaOkuW6j+aWueazle+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjhmZmFhYzI5LTJhMWItNDFhOC04YmJmLTdjMTJhYjA4OTlkYiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFHZ1ZkdzVXTjc2RHhrQVhBYWphblpXIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJcXHU2N2U1XFx1NjI3ZVRhc2tTZXJ2aWNlSW1wbC5qYXZhXFx1NGUyZFxcdTc2ODRjYWxjdWxhdGVQcmlvcml0eVNjb3JlXFx1NjViOVxcdTZjZDVcXHU1NDhjZ2V0UHJpb3JpdGl6ZWRUYXNrc1xcdTY1YjlcXHU2Y2Q1XFx1NzY4NFxcdTViOGNcXHU2NTc0XFx1NWI5ZVxcdTczYjBcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIyAyLiDlrp7njrAgVGFza1NlcnZpY2VJbXBsIOS4reeahOaZuuiDveaOkuW6j+aWueazlVxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9UYXNrU2VydmljZS5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgMjdcdCAgICBMaXN0PFRyZW5kPiB0cmVuZChTdHJpbmcgc3RhcnREYXRlLCBTdHJpbmcgZW5kRGF0ZSk7XG4gICAgMjhcdFxuICAgIDI5XHQgICAgQm9vbGVhbiBjcmVhdGUoVGFzayB0YXNrKTtcbiAgICAzMFx0XG4gICAgMzFcdCAgICBCb29sZWFuIHVwZGF0ZVRhc2soVGFzayB0YXNrKTtcbiAgICAzMlx0XG4gICAgMzNcdCAgICAvKipcbiAgICAzNFx0ICAgICAqIOaZuuiDveaOkuW6j+S7u+WKoeWIl+ihqFxuICAgIDM1XHQgICAgICog5qC55o2u5Lu75Yqh55qE6YeN6KaB5oCn44CB57Sn5oCl5oCn5ZKM5oiq5q2i5pe26Ze06L+b6KGM5o6S5bqPXG4gICAgMzZcdCAgICAgKiBAcmV0dXJuIOaOkuW6j+WQjueahOS7u+WKoeWIl+ihqFxuICAgIDM3XHQgICAgICovXG4gICAgMzhcdCAgICBMaXN0PFRhc2tWbz4gc21hcnRTb3J0VGFza3MoKTtcbiAgICAzOVx0fVxuICAgIDQwXHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUVweW5IcUdEVFczMWFRcnMydml6U3UifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IiMjIyAyLiDlrp7njrAgVGFza1NlcnZpY2VJbXBsIOS4reeahOaZuuiDveaOkuW6j+aWueazlVxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjZlZTk2NzlkLTMzMTgtNDJhOC04MzU3LTZkMGYxOGE4Yjk1NyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE5TlRjWnVkeTJEbzVHRkNaQ0gzMlRjIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxLCA1MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLnjrDlnKjmiJHlsIblnKggVGFza1NlcnZpY2VJbXBsIOS4reWunueOsOaZuuiDveaOkuW6j+aWueazle+8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5pbXBsO1xuXG5pbXBvcnQgY24uaHV0b29sLmNvcmUudXRpbC5JZFV0aWw7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmNvcmUuY29uZGl0aW9ucy5xdWVyeS5RdWVyeVdyYXBwZXI7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLnNlcnZpY2UuVW1zQWRtaW5TZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5DYXRlZ29yeTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUHJpb3JpdHk7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlJlc291cmNlcztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuU2NoZWR1bGU7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1hcHBlci5UYXNrTWFwcGVyO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLkNhdGVnb3J5U2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5Qcmlvcml0eVNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuUmVzb3VyY2VzU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5UYXNrU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5TY2hlZHVsZVNlcnZpY2U7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5zZXJ2aWNlLmltcGwuU2VydmljZUltcGw7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmQ7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kUGllO1xuaW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5kYXRhYmluZC5PYmplY3RNYXBwZXI7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5CZWFuVXRpbHM7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2NoZWR1bGluZy5hbm5vdGF0aW9uLlNjaGVkdWxlZDtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmNvbnRleHQuYW5ub3RhdGlvbi5MYXp5O1xuXG5pbXBvcnQgamF2YS50aW1lLkR1cmF0aW9uO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmEudXRpbC4qO1xuaW1wb3J0IGphdmEudGltZS50ZW1wb3JhbC5DaHJvbm9Vbml0O1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudHJhbnNhY3Rpb24uYW5ub3RhdGlvbi5UcmFuc2FjdGlvbmFsO1xuXG4vKipcbiAqIDxwPlxuICog5Lu75Yqh6KGoIOacjeWKoeWunueOsOexu1xuICogPC9wPlxuICovXG5AU2VydmljZVxucHVibGljIGNsYXNzIFRhc2tTZXJ2aWNlSW1wbCBleHRlbmRzIFNlcnZpY2VJbXBsPFRhc2tNYXBwZXIsIFRhc2s+IGltcGxlbWVudHMgVGFza1NlcnZpY2Uge1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVGFza01hcHBlciB0YXNrTWFwcGVyO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgQ2F0ZWdvcnlTZXJ2aWNlIGNhdGVnb3J5U2VydmljZTtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFByaW9yaXR5U2VydmljZSBwcmlvcml0eVNlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBVbXNBZG1pblNlcnZpY2UgdXNlclNlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBSZXNvdXJjZXNTZXJ2aWNlIHJlc291cmNlc1NlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgQExhenlcbiAgICBwcml2YXRlIFNjaGVkdWxlU2VydmljZSBzY2hlZHVsZVNlcnZpY2U7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxUYXNrVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIExvbmcgY2F0ZWdvcnlJZCwgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICAvLyDlhYjmm7TmlrDmiYDmnInku7vliqHnirbmgIFcbiAgICAgICAgdXBkYXRlQWxsVGFza1N0YXR1cygpO1xuICAgICAgICBcbiAgICAgICAgUGFnZTxUYXNrVm8+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICAgICAgcmV0dXJuIHRhc2tNYXBwZXIuc2VhcmNoVGFzayhwYWdlLCBzZWFyY2hLZXksIGNhdGVnb3J5SWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBMaXN0PFRhc2tWbz4gbGlzdEFsbChJbnRlZ2VyIHN0YXR1cykge1xuICAgICAgICAvLyDlhYjmm7TmlrDmiYDmnInku7vliqHnirbmgIFcbiAgICAgICAgdXBkYXRlQWxsVGFza1N0YXR1cygpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRhc2tNYXBwZXIubGlzdEFsbChzdGF0dXMpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBUYXNrVm8gZ2V0SW5mbyhMb25nIGlkKSB7XG4gICAgICAgIC8vIOabtOaWsOW9k+WJjeS7u+WKoeeKtuaAgVxuICAgICAgICB1cGRhdGVUYXNrU3RhdHVzKHRoaXMuZ2V0QnlJZChpZCkpO1xuICAgICAgICBcbiAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKGlkKTtcbiAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHRhc2ssIHRhc2tWbyk7XG4gICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRDYXRlZ29yeUlkKCkpO1xuICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xuICAgICAgICB0YXNrVm8uc2V0SW1wb3J0YW5jZU5hbWUoaW1wb3J0YW5jZVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG5cbiAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgICAgICAgU2V0PExvbmc+IHVzZXJJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgICAgICAgU2V0PExvbmc+IHJlc291cmNlSWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFJlc291cmNlc0RhdGEoKSwgb2JqZWN0TWFwcGVyKTtcblxuICAgICAgICBMaXN0PFVtc0FkbWluPiB1c2VyTGlzdCA9IHVzZXJTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxVbXNBZG1pbj4oKS5sYW1iZGEoKS5pbihVbXNBZG1pbjo6Z2V0SWQsIHVzZXJJZHMpKTtcbiAgICAgICAgTGlzdDxSZXNvdXJjZXM+IHJlc291cmNlc0xpc3QgPSByZXNvdXJjZXNTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxSZXNvdXJjZXM+KCkubGFtYmRhKCkuaW4oUmVzb3VyY2VzOjpnZXRJZCwgcmVzb3VyY2VJZHMpKTtcbiAgICAgICAgdGFza1ZvLnNldFVzZXJMaXN0KHVzZXJMaXN0KTtcbiAgICAgICAgdGFza1ZvLnNldFJlc291cmNlc0xpc3QocmVzb3VyY2VzTGlzdCk7XG5cbiAgICAgICAgcmV0dXJuIHRhc2tWbztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTGlzdDxUcmVuZFBpZT4gdHJlbmRQaWUoKSB7XG4gICAgICAgIHJldHVybiB0YXNrTWFwcGVyLnRyZW5kUGllKCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIExpc3Q8VHJlbmQ+IHRyZW5kKFN0cmluZyBzdGFydERhdGUsIFN0cmluZyBlbmREYXRlKSB7XG4gICAgICAgIHJldHVybiB0YXNrTWFwcGVyLnRyZW5kKHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEJvb2xlYW4gY3JlYXRlKFRhc2sgdGFzaykge1xuICAgICAgICB0YXNrLnNldENvZGUoSWRVdGlsLnJhbmRvbVVVSUQoKSk7XG4gICAgICAgIExpc3Q8UHJpb3JpdHk+IHByaW9yaXRpZXMgPSBwcmlvcml0eVNlcnZpY2UubGlzdCgpO1xuXG4gICAgICAgIC8vIOW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG5cbiAgICAgICAgLy8g6YGN5Y6G5LyY5YWI57qn5pWw5o2u77yM6K6+572uIGltcG9ydGFuY2VJZCDlkowgZXhpZ2VuY3lJZFxuICAgICAgICBmb3IgKFByaW9yaXR5IHByaW9yaXR5IDogcHJpb3JpdGllcykge1xuICAgICAgICAgICAgLy8g5Yy56YWNIGltcG9ydGFuY2VJZCAodHlwZT0xIOS4lCBjYXRlZ29yeUlkIOebuOWQjClcbiAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRUeXBlKCkgPT0gMSAmJiBwcmlvcml0eS5nZXRDYXRlZ29yeUlkKCkgIT0gbnVsbCAmJiBwcmlvcml0eS5nZXRDYXRlZ29yeUlkKCkuZXF1YWxzKHRhc2suZ2V0Q2F0ZWdvcnlJZCgpKSkge1xuICAgICAgICAgICAgICAgIHRhc2suc2V0SW1wb3J0YW5jZUlkKHByaW9yaXR5LmdldElkKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDljLnphY0gZXhpZ2VuY3lJZCAodHlwZT0yIOS4lCBkZWFkbGluZSDlnKjml7bpl7TljLrpl7TojIPlm7TlhoUpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDIgJiYgdGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsb25nIGhvdXJzRGlmZmVyZW5jZSA9IER1cmF0aW9uLmJldHdlZW4obm93LCB0YXNrLmdldERlYWRsaW5lKCkpLnRvSG91cnMoKTtcbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5LnNldE1pbkhvdXJzKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0TWF4SG91cnMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5LnNldE1heEhvdXJzKDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIOWmguaenOacgOWkp+WAvOS4uiAw77yM5YiZ6KeG5Li65q2j5peg56m3XG4gICAgICAgICAgICAgICAgYm9vbGVhbiB3aXRoaW5SYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRNaW5Ib3VycygpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0TWF4SG91cnMoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChob3Vyc0RpZmZlcmVuY2UgPj0gcHJpb3JpdHkuZ2V0TWluSG91cnMoKSAmJiAocHJpb3JpdHkuZ2V0TWF4SG91cnMoKSA9PSAwIHx8IGhvdXJzRGlmZmVyZW5jZSA8PSBwcmlvcml0eS5nZXRNYXhIb3VycygpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2l0aGluUmFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcmlvcml0eS5nZXRNaW5Ib3VycygpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0TWF4SG91cnMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChob3Vyc0RpZmZlcmVuY2UgPj0gcHJpb3JpdHkuZ2V0TWluSG91cnMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2l0aGluUmFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhpblJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suc2V0RXhpZ2VuY3lJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9ruS7u+WKoeWIneWni+eKtuaAgeS4uuW+heWKnlxuICAgICAgICBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0YXNrLnNldFN0YXR1cygxKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSh0YXNrKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQm9vbGVhbiB1cGRhdGVUYXNrKFRhc2sgdGFzaykge1xuICAgICAgICBMaXN0PFByaW9yaXR5PiBwcmlvcml0aWVzID0gcHJpb3JpdHlTZXJ2aWNlLmxpc3QoKTtcblxuICAgICAgICAvLyDlvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOmBjeWOhuS8mOWFiOe6p+aVsOaNru+8jOiuvue9riBpbXBvcnRhbmNlSWQg5ZKMIGV4aWdlbmN5SWRcbiAgICAgICAgZm9yIChQcmlvcml0eSBwcmlvcml0eSA6IHByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgIC8vIOWMuemFjSBpbXBvcnRhbmNlSWQgKHR5cGU9MSDkuJQgY2F0ZWdvcnlJZCDnm7jlkIwpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDEgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpLmVxdWFscyh0YXNrLmdldENhdGVnb3J5SWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrLnNldEltcG9ydGFuY2VJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Yy56YWNIGV4aWdlbmN5SWQgKHR5cGU9MiDkuJQgZGVhZGxpbmUg5Zyo5pe26Ze05Yy66Ze06IyD5Zu05YaFKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAyICYmIHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbG9uZyBob3Vyc0RpZmZlcmVuY2UgPSBEdXJhdGlvbi5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKS50b0hvdXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1pbkhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eS5zZXRNaW5Ib3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eS5zZXRNYXhIb3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnIDlpKflgLzkuLogMO+8jOWImeinhuS4uuato+aXoOept1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gd2l0aGluUmFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldE1heEhvdXJzKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnNEaWZmZXJlbmNlID49IHByaW9yaXR5LmdldE1pbkhvdXJzKCkgJiYgKHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gMCB8fCBob3Vyc0RpZmZlcmVuY2UgPD0gcHJpb3JpdHkuZ2V0TWF4SG91cnMoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhpblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnNEaWZmZXJlbmNlID49IHByaW9yaXR5LmdldE1pbkhvdXJzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhpblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmiYvliqjlsIbku7vliqHorr7nva7kuLrlt7LlrozmiJDvvIzkv53mjIHor6XnirbmgIFcbiAgICAgICAgVGFzayBvbGRUYXNrID0gdGhpcy5nZXRCeUlkKHRhc2suZ2V0SWQoKSk7XG4gICAgICAgIGlmIChvbGRUYXNrICE9IG51bGwgJiYgb2xkVGFzay5nZXRTdGF0dXMoKSAhPSA0ICYmIHRhc2suZ2V0U3RhdHVzKCkgIT0gNCkge1xuICAgICAgICAgICAgLy8g6Ieq5Yqo5pu05paw5Lu75Yqh54q25oCBXG4gICAgICAgICAgICB1cGRhdGVUYXNrU3RhdHVzKHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVCeUlkKHRhc2spO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDmr4/lpKnlh4zmmajmiafooYzkuIDmrKHvvIzoh6rliqjmm7TmlrDmiYDmnInku7vliqHnmoTnirbmgIFcbiAgICAgKi9cbiAgICBAU2NoZWR1bGVkKGNyb24gPSBcIjAgMCAwICogKiA/XCIpXG4gICAgcHVibGljIHZvaWQgc2NoZWR1bGVkVXBkYXRlQWxsVGFza1N0YXR1cygpIHtcbiAgICAgICAgdXBkYXRlQWxsVGFza1N0YXR1cygpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmiYDmnInku7vliqHnmoTnirbmgIFcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgdXBkYXRlQWxsVGFza1N0YXR1cygpIHtcbiAgICAgICAgTGlzdDxUYXNrPiBhbGxUYXNrcyA9IHRoaXMubGlzdCgpO1xuICAgICAgICBhbGxUYXNrcy5mb3JFYWNoKHRoaXM6OnVwZGF0ZVRhc2tTdGF0dXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUJhdGNoQnlJZChhbGxUYXNrcyk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIOagueaNruS7u+WKoeeahOaIquatouaXtumXtOiHquWKqOabtOaWsOS7u+WKoeeKtuaAgVxuICAgICAqIOS7u+WKoeeKtuaAge+8mjEt5b6F5YqeLCAyLeW3suWuieaOkiwgMy3ov5vooYzkuK0sIDQt5bey5a6M5oiQLCA1LeW3sumAvuacn1xuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCB1cGRhdGVUYXNrU3RhdHVzKFRhc2sgdGFzaykge1xuICAgICAgICAvLyDlpoLmnpzku7vliqHlt7Lnu4/mmK/lt7LlrozmiJDnirbmgIEoNCnvvIzkuI3lgZrmlLnlj5hcbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmn6Xmib7ku7vliqHlr7nlupTnmoTml6XnqIvlronmjpJcbiAgICAgICAgTGlzdDxTY2hlZHVsZT4gc2NoZWR1bGVzID0gc2NoZWR1bGVTZXJ2aWNlLmxpc3QoXG4gICAgICAgICAgICBuZXcgUXVlcnlXcmFwcGVyPFNjaGVkdWxlPigpLmVxKFwidGFza19pZFwiLCB0YXNrLmdldElkKCkpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmnInml6XnqIvlronmjpLvvIzkvJjlhYjkvb/nlKjml6XnqIvnmoTnu5PmnZ/ml7bpl7TmnaXliKTmlq3mmK/lkKbpgL7mnJ9cbiAgICAgICAgaWYgKCFzY2hlZHVsZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey6YC+5pyf77yI57uT5p2f5pe26Ze05bey6L+H77yJXG4gICAgICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIG5vdy5pc0FmdGVyKHNjaGVkdWxlLmdldEVuZFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInml6XnqIvlronmjpLvvIzliJnkvb/nlKjku7vliqHnmoTmiKrmraLml7bpl7TliKTmlq1cbiAgICAgICAgZWxzZSBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwgJiYgbm93LmlzQWZ0ZXIodGFzay5nZXREZWFkbGluZSgpKSkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzlvZPliY3mmK/lvoXlip4oMSnmiJblt7LlronmjpIoMinvvIzmo4Dmn6XmmK/lkKbpnIDopoHlj5jkuLrov5vooYzkuK0oMylcbiAgICAgICAgaWYgKCh0YXNrLmdldFN0YXR1cygpID09IDEgfHwgdGFzay5nZXRTdGF0dXMoKSA9PSAyKSAmJiBcbiAgICAgICAgICAgIHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWmguaenOemu+aIquatouaXtumXtOS4jeWIsDI05bCP5pe277yM5YiZ6K6+5Li66L+b6KGM5LitXG4gICAgICAgICAgICBsb25nIGhvdXJzRGlmZmVyZW5jZSA9IER1cmF0aW9uLmJldHdlZW4obm93LCB0YXNrLmdldERlYWRsaW5lKCkpLnRvSG91cnMoKTtcbiAgICAgICAgICAgIGlmIChob3Vyc0RpZmZlcmVuY2UgPCAyNCkge1xuICAgICAgICAgICAgICAgIHRhc2suc2V0U3RhdHVzKDMpOyAvLyDov5vooYzkuK1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOi+heWKqeaWueazle+8muWwhiBKU09OIOaVsOe7hOWtl+espuS4suino+aekOS4uiBTZXQ8TG9uZz5cbiAgICBwcml2YXRlIFNldDxMb25nPiBwYXJzZUpzb25BcnJheVRvU2V0KFN0cmluZyBqc29uQXJyYXksIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChqc29uQXJyYXkgPT0gbnVsbCB8fCBqc29uQXJyYXkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLmVtcHR5U2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEhhc2hTZXQ8PihBcnJheXMuYXNMaXN0KG9iamVjdE1hcHBlci5yZWFkVmFsdWUoanNvbkFycmF5LCBMb25nW10uY2xhc3MpKSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLmVtcHR5U2V0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog6K6h566X5Lu75Yqh55qE5LyY5YWI57qn5YiG5pWwXG4gICAgICog5Z+65LqO5Lu75Yqh55qE6YeN6KaB5oCn5ZKM57Sn5oCl5oCnXG4gICAgICogQHBhcmFtIHRhc2sg5Lu75Yqh5a+56LGhXG4gICAgICogQHJldHVybiDkvJjlhYjnuqfliIbmlbBcbiAgICAgKi9cbiAgICBwcml2YXRlIGRvdWJsZSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKFRhc2sgdGFzaykge1xuICAgICAgICBkb3VibGUgc2NvcmUgPSAwLjA7XG4gICAgICAgIFxuICAgICAgICAvLyDojrflj5bph43opoHmgKflkozntKfmgKXmgKfphY3nva5cbiAgICAgICAgUHJpb3JpdHkgaW1wb3J0YW5jZVByaW9yaXR5ID0gbnVsbDtcbiAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICBpZiAodGFzay5nZXRJbXBvcnRhbmNlSWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpbXBvcnRhbmNlUHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEltcG9ydGFuY2VJZCgpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOiuoeeul+WIhuaVsFxuICAgICAgICBpZiAoaW1wb3J0YW5jZVByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNjb3JlICs9IGltcG9ydGFuY2VQcmlvcml0eS5nZXRTY29yZSgpICogaW1wb3J0YW5jZVByaW9yaXR5LmdldFdlaWdodCgpLmRvdWJsZVZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChleGlnZW5jeVByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNjb3JlICs9IGV4aWdlbmN5UHJpb3JpdHkuZ2V0U2NvcmUoKSAqIGV4aWdlbmN5UHJpb3JpdHkuZ2V0V2VpZ2h0KCkuZG91YmxlVmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5oiq5q2i5pe26Ze05p2D6YeN6K6h566XXG4gICAgICAgIGlmICh0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgICAgICAgICAgbG9uZyBob3Vyc1VudGlsRGVhZGxpbmUgPSBDaHJvbm9Vbml0LkhPVVJTLmJldHdlZW4obm93LCB0YXNrLmdldERlYWRsaW5lKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDmiKrmraLml7bpl7Totorov5HvvIzliIbmlbDotorpq5hcbiAgICAgICAgICAgIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMjQpIHtcbiAgICAgICAgICAgICAgICBzY29yZSArPSA1MDsgLy8gMjTlsI/ml7blhoXpop3lpJbliqA1MOWIhlxuICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gNzIpIHtcbiAgICAgICAgICAgICAgICBzY29yZSArPSAzMDsgLy8gNzLlsI/ml7blhoXpop3lpJbliqAzMOWIhlxuICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMTY4KSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gMTA7IC8vIOS4gOWRqOWGhemineWkluWKoDEw5YiGXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzY29yZTtcbiAgICB9XG4gICAgXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIExpc3Q8VGFza1ZvPiBnZXRQcmlvcml0aXplZFRhc2tzKExvbmcgdXNlcklkKSB7XG4gICAgICAgIC8vIDEuIOiOt+WPluaJgOacieW+heWKnuS7u+WKoe+8iOeKtuaAgeS4ujHvvIlcbiAgICAgICAgUXVlcnlXcmFwcGVyPFRhc2s+IHF1ZXJ5V3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xuICAgICAgICBxdWVyeVdyYXBwZXIuZXEoXCJzdGF0dXNcIiwgMSk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmjIflrprkuobnlKjmiLdJRO+8jOWImeWPquiOt+WPluivpeeUqOaIt+ebuOWFs+eahOS7u+WKoVxuICAgICAgICBpZiAodXNlcklkICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIOmcgOimgeaQnOe0onVzZXJEYXRh5a2X5q615Lit5YyF5ZCrdXNlcklk55qE6K6w5b2VXG4gICAgICAgICAgICAvLyDms6jmhI/vvJrov5nnp43mlrnlvI/lj6/og73kuI3lpJ/lh4bnoa7vvIzmm7Tlpb3nmoTmlrnms5XmmK/kvb/nlKhKU09O5Ye95pWw77yI5aaC5p6c5pWw5o2u5bqT5pSv5oyB77yJXG4gICAgICAgICAgICBxdWVyeVdyYXBwZXIubGlrZShcInVzZXJfZGF0YVwiLCB1c2VySWQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIExpc3Q8VGFzaz4gdGFza3MgPSB0aGlzLmxpc3QocXVlcnlXcmFwcGVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDIuIOi9rOaNouS4ulRhc2tWb+W5tuiuoeeul+S8mOWFiOe6p+WIhuaVsFxuICAgICAgICBMaXN0PFRhc2tWbz4gdGFza1ZvcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICBmb3IgKFRhc2sgdGFzayA6IHRhc2tzKSB7XG4gICAgICAgICAgICBUYXNrVm8gdGFza1ZvID0gbmV3IFRhc2tWbygpO1xuICAgICAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHRhc2ssIHRhc2tWbyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuvue9ruS8mOWFiOe6p+WIhuaVsFxuICAgICAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKHRhc2spO1xuICAgICAgICAgICAgdGFza1ZvLnNldFByaW9yaXR5U2NvcmUocHJpb3JpdHlTY29yZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiOt+WPluS7u+WKoeexu+Wei+WQjeensFxuICAgICAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBjYXRlZ29yeVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldENhdGVnb3J5SWQoKSk7XG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhc2tWby5zZXRDYXRlZ29yeU5hbWUoY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6I635Y+W6YeN6KaB5oCn5ZKM57Sn5oCl5oCn5ZCN56ewXG4gICAgICAgICAgICBpZiAodGFzay5nZXRJbXBvcnRhbmNlSWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgUHJpb3JpdHkgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGltcG9ydGFuY2VQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0YXNrLmdldEV4aWdlbmN5SWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0RXhpZ2VuY3lJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRFeGlnZW5jeU5hbWUoZXhpZ2VuY3lQcmlvcml0eS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFza1Zvcy5hZGQodGFza1ZvKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gMy4g5oyJ5LyY5YWI57qn5YiG5pWw5o6S5bqP77yI5LuO6auY5Yiw5L2O77yJXG4gICAgICAgIHRhc2tWb3Muc29ydCgoYSwgYikgLT4gRG91YmxlLmNvbXBhcmUoYi5nZXRQcmlvcml0eVNjb3JlKCksIGEuZ2V0UHJpb3JpdHlTY29yZSgpKSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFza1ZvcztcbiAgICB9XG4gICAgXG4gICAgQE92ZXJyaWRlXG4gICAgQFRyYW5zYWN0aW9uYWwocm9sbGJhY2tGb3IgPSBFeGNlcHRpb24uY2xhc3MpXG4gICAgcHVibGljIE1hcDxMb25nLCBCb29sZWFuPiBhdXRvU2NoZWR1bGVUYXNrcyhMb2NhbERhdGUgZGF0ZSwgTG9uZyB1c2VySWQpIHtcbiAgICAgICAgLy8g57uT5p6c5pig5bCE77yM6K6w5b2V5q+P5Liq5Lu75Yqh55qE5a6J5o6S57uT5p6cXG4gICAgICAgIE1hcDxMb25nLCBCb29sZWFuPiByZXN1bHQgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyAxLiDojrflj5bmjpLluo/lkI7nmoTku7vliqHliJfooahcbiAgICAgICAgTGlzdDxUYXNrVm8+IHByaW9yaXRpemVkVGFza3MgPSBnZXRQcmlvcml0aXplZFRhc2tzKHVzZXJJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInlvoXlip7ku7vliqHvvIznm7TmjqXov5Tlm57nqbrnu5PmnpxcbiAgICAgICAgaWYgKHByaW9yaXRpemVkVGFza3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAyLiDojrflj5bor6Xml6XmnJ/nmoTlt6XkvZzml7bpl7TmrrXojIPlm7TvvIjpu5jorqQ4OjAwLTE4OjAw77yJXG4gICAgICAgIExvY2FsRGF0ZVRpbWUgc3RhcnRXb3JrVGltZSA9IGRhdGUuYXRUaW1lKDgsIDApO1xuICAgICAgICBMb2NhbERhdGVUaW1lIGVuZFdvcmtUaW1lID0gZGF0ZS5hdFRpbWUoMTgsIDApO1xuICAgICAgICBcbiAgICAgICAgLy8gMy4g6I635Y+W6K+l5pel5pyf5bey5pyJ55qE5pel56iL5a6J5o6SXG4gICAgICAgIFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4gc2NoZWR1bGVRdWVyeVdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgICAgICAgc2NoZWR1bGVRdWVyeVdyYXBwZXIuYmV0d2VlbihcInN0YXJ0X3RpbWVcIiwgc3RhcnRXb3JrVGltZSwgZW5kV29ya1RpbWUpO1xuICAgICAgICBMaXN0PFNjaGVkdWxlPiBleGlzdGluZ1NjaGVkdWxlcyA9IHNjaGVkdWxlU2VydmljZS5saXN0KHNjaGVkdWxlUXVlcnlXcmFwcGVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDQuIOaehOW7uuaXtumXtOauteWNoOeUqOaDheWGtVxuICAgICAgICAvLyDlsIblt6XkvZzml7bpl7TliIbmiJDlpJrkuKrml7bpl7TmrrXvvIjmr4/ljYrlsI/ml7bkuIDkuKrvvInvvIzkvovlpoLvvJo4OjAwLTg6MzAsIDg6MzAtOTowMCwgLi4uXG4gICAgICAgIGludCB0b3RhbFNsb3RzID0gMjA7IC8vIDEw5bCP5pe277yM5q+P5Y2K5bCP5pe25LiA5Liq5pe26Ze05q6177yM5YWxMjDkuKrml7bpl7TmrrVcbiAgICAgICAgYm9vbGVhbltdIHRpbWVTbG90T2NjdXBpZWQgPSBuZXcgYm9vbGVhblt0b3RhbFNsb3RzXTtcbiAgICAgICAgXG4gICAgICAgIC8vIOagh+iusOW3suWNoOeUqOeahOaXtumXtOautVxuICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogZXhpc3RpbmdTY2hlZHVsZXMpIHtcbiAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgc2NoZWR1bGVTdGFydCA9IHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpO1xuICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBzY2hlZHVsZUVuZCA9IHNjaGVkdWxlLmdldEVuZFRpbWUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X6K+l5pel56iL5Y2g55So55qE5pe26Ze05q61XG4gICAgICAgICAgICBpbnQgc3RhcnRTbG90ID0gZ2V0VGltZVNsb3Qoc2NoZWR1bGVTdGFydCwgc3RhcnRXb3JrVGltZSk7XG4gICAgICAgICAgICBpbnQgZW5kU2xvdCA9IGdldFRpbWVTbG90KHNjaGVkdWxlRW5kLCBzdGFydFdvcmtUaW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5qCH6K6w5Y2g55SoXG4gICAgICAgICAgICBmb3IgKGludCBpID0gc3RhcnRTbG90OyBpIDw9IGVuZFNsb3QgJiYgaSA8IHRvdGFsU2xvdHM7IGkrKykge1xuICAgICAgICAgICAgICAgIHRpbWVTbG90T2NjdXBpZWRbaV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyA1LiDmoLnmja7kvJjlhYjnuqflkozku7vliqHmiYDpnIDml7bpl7TlronmjpLku7vliqFcbiAgICAgICAgZm9yIChUYXNrVm8gdGFza1ZvIDogcHJpb3JpdGl6ZWRUYXNrcykge1xuICAgICAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKHRhc2tWby5nZXRJZCgpKTtcbiAgICAgICAgICAgIGlmICh0YXNrID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2tWby5nZXRJZCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuoeeul+S7u+WKoeaJgOmcgOaXtumXtOauteaVsOmHj1xuICAgICAgICAgICAgaW50IHJlcXVpcmVkU2xvdHMgPSAxOyAvLyDpu5jorqTljaDnlKgx5Liq5pe26Ze05q6177yIMzDliIbpkp/vvIlcbiAgICAgICAgICAgIGlmICh0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyDmr48zMOWIhumSn+S4gOS4quaXtumXtOaute+8jOWQkeS4iuWPluaVtFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkU2xvdHMgPSAoaW50KSBNYXRoLmNlaWwodGFzay5nZXRUaW1lU3BlbmQoKSAvIDMwLjApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlr7vmib7ov57nu63nmoTnqbrpl7Lml7bpl7TmrrVcbiAgICAgICAgICAgIGludCBzdGFydFNsb3QgPSBmaW5kQXZhaWxhYmxlVGltZVNsb3RzKHRpbWVTbG90T2NjdXBpZWQsIHJlcXVpcmVkU2xvdHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlpoLmnpzmib7kuI3liLDotrPlpJ/nmoTml7bpl7TmrrXvvIzmoIforrDkuLrlronmjpLlpLHotKVcbiAgICAgICAgICAgIGlmIChzdGFydFNsb3QgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2suZ2V0SWQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDliJvlu7rml6XnqIvlronmjpJcbiAgICAgICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gbmV3IFNjaGVkdWxlKCk7XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRUYXNrSWQodGFzay5nZXRJZCgpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X5byA5aeL5ZKM57uT5p2f5pe26Ze0XG4gICAgICAgICAgICBMb2NhbERhdGVUaW1lIHNjaGVkdWxlU3RhcnRUaW1lID0gc3RhcnRXb3JrVGltZS5wbHVzTWludXRlcyhzdGFydFNsb3QgKiAzMCk7XG4gICAgICAgICAgICBMb2NhbERhdGVUaW1lIHNjaGVkdWxlRW5kVGltZSA9IHNjaGVkdWxlU3RhcnRUaW1lLnBsdXNNaW51dGVzKHJlcXVpcmVkU2xvdHMgKiAzMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNjaGVkdWxlLnNldFN0YXJ0VGltZShzY2hlZHVsZVN0YXJ0VGltZSk7XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlRW5kVGltZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOS/neWtmOaXpeeoi1xuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gc2NoZWR1bGVTZXJ2aWNlLmNyZWF0ZShzY2hlZHVsZSk7XG4gICAgICAgICAgICByZXN1bHQucHV0KHRhc2suZ2V0SWQoKSwgc3VjY2Vzcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWmguaenOWuieaOkuaIkOWKn++8jOagh+iusOWvueW6lOeahOaXtumXtOauteS4uuW3suWNoOeUqFxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gc3RhcnRTbG90OyBpIDwgc3RhcnRTbG90ICsgcmVxdWlyZWRTbG90cyAmJiBpIDwgdG90YWxTbG90czsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVTbG90T2NjdXBpZWRbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog6I635Y+W5pe26Ze054K55a+55bqU55qE5pe26Ze05q6157Si5byVXG4gICAgICogQHBhcmFtIHRpbWUg5pe26Ze054K5XG4gICAgICogQHBhcmFtIHN0YXJ0V29ya1RpbWUg5bel5L2c5byA5aeL5pe26Ze0XG4gICAgICogQHJldHVybiDml7bpl7TmrrXntKLlvJXvvIjku44w5byA5aeL77yJXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbnQgZ2V0VGltZVNsb3QoTG9jYWxEYXRlVGltZSB0aW1lLCBMb2NhbERhdGVUaW1lIHN0YXJ0V29ya1RpbWUpIHtcbiAgICAgICAgbG9uZyBtaW51dGVzRGlmZiA9IENocm9ub1VuaXQuTUlOVVRFUy5iZXR3ZWVuKHN0YXJ0V29ya1RpbWUsIHRpbWUpO1xuICAgICAgICByZXR1cm4gKGludCkgTWF0aC5mbG9vcihtaW51dGVzRGlmZiAvIDMwLjApO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDlr7vmib7ov57nu63nmoTlj6/nlKjml7bpl7TmrrVcbiAgICAgKiBAcGFyYW0gdGltZVNsb3RPY2N1cGllZCDml7bpl7TmrrXljaDnlKjmg4XlhrVcbiAgICAgKiBAcGFyYW0gcmVxdWlyZWRTbG90cyDpnIDopoHnmoTov57nu63ml7bpl7TmrrXmlbBcbiAgICAgKiBAcmV0dXJuIOWPr+eUqOaXtumXtOauteeahOi1t+Wni+e0ouW8le+8jOWmguaenOaJvuS4jeWIsOWImei/lOWbni0xXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbnQgZmluZEF2YWlsYWJsZVRpbWVTbG90cyhib29sZWFuW10gdGltZVNsb3RPY2N1cGllZCwgaW50IHJlcXVpcmVkU2xvdHMpIHtcbiAgICAgICAgaW50IGNvbnNlY3V0aXZlRnJlZVNsb3RzQ291bnQgPSAwO1xuICAgICAgICBpbnQgc3RhcnRTbG90ID0gLTE7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRpbWVTbG90T2NjdXBpZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghdGltZVNsb3RPY2N1cGllZFtpXSkge1xuICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+i/nue7reepuumXsuaXtumXtOauteeahOW8gOWni1xuICAgICAgICAgICAgICAgIGlmIChjb25zZWN1dGl2ZUZyZWVTbG90c0NvdW50ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRTbG90ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc2VjdXRpdmVGcmVlU2xvdHNDb3VudCsrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWmguaenOaJvuWIsOi2s+Wkn+eahOi/nue7reepuumXsuaXtumXtOautVxuICAgICAgICAgICAgICAgIGlmIChjb25zZWN1dGl2ZUZyZWVTbG90c0NvdW50ID49IHJlcXVpcmVkU2xvdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0U2xvdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOmHjee9ruiuoeaVsFxuICAgICAgICAgICAgICAgIGNvbnNlY3V0aXZlRnJlZVNsb3RzQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHN0YXJ0U2xvdCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInmib7liLDotrPlpJ/nmoTov57nu63nqbrpl7Lml7bpl7TmrrVcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9Qcmlvcml0eVNlcnZpY2VJbXBsLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoIOacjeWKoeWunueOsOexu1xuICogPC9wPlxuICovXG5AU2VydmljZVxucHVibGljIGNsYXNzIFByaW9yaXR5U2VydmljZUltcGwgZXh0ZW5kcyBTZXJ2aWNlSW1wbDxQcmlvcml0eU1hcHBlciwgUHJpb3JpdHk+IGltcGxlbWVudHMgUHJpb3JpdHlTZXJ2aWNlIHtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFByaW9yaXR5TWFwcGVyIHByaW9yaXR5TWFwcGVyO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFBhZ2U8UHJpb3JpdHk+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIEludGVnZXIgdHlwZSwgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFByaW9yaXR5PiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIHJldHVybiBwcmlvcml0eU1hcHBlci5zZWFyY2hQcmlvcml0eShwYWdlLCBzZWFyY2hLZXksIHR5cGUpO1xuICAgIH1cbn1cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUdnVmR3NVdONzZEeGtBWEFhamFuWlcifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IueOsOWcqOaIkeWwhuWcqCBUYXNrU2VydmljZUltcGwg5Lit5a6e546w5pm66IO95o6S5bqP5pa55rOV77yaXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYTg2NGRhNDAtMzk1YS00NmJmLWFkMGUtMTBiZDc4MjczNzczIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVVwYkJhZlI0dVBhcVRCRlRyMms1UzciLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiaW1wb3J0IGphdmEudGltZS5EdXJhdGlvbjtcXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XFxuaW1wb3J0IGphdmEudXRpbC4qO1wiLCBcIm5ld19zdHJcIjogXCJpbXBvcnQgamF2YS50aW1lLkR1cmF0aW9uO1xcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTtcXG5pbXBvcnQgamF2YS50aW1lLnRlbXBvcmFsLkNocm9ub1VuaXQ7XFxuaW1wb3J0IGphdmEudXRpbC4qO1xcbmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcXG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay50cmFuc2FjdGlvbi5hbm5vdGF0aW9uLlRyYW5zYWN0aW9uYWw7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAzMCwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAzMn1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi546w5Zyo5oiR5bCG5a6e546w5pm66IO95o6S5bqP5pa55rOV77yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmE6XG4gICAgIDFcdHBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuaW1wbDtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLklkVXRpbDtcbiAgICAgNFx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLmNvbmRpdGlvbnMucXVlcnkuUXVlcnlXcmFwcGVyO1xuICAgICA1XHRpbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbiAgICAgNlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbiAgICAgN1x0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5zZXJ2aWNlLlVtc0FkbWluU2VydmljZTtcbiAgICAgOFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5DYXRlZ29yeTtcbiAgICAgOVx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eTtcbiAgICAxMFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5SZXNvdXJjZXM7XG4gICAgMTFcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbiAgICAxMlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5TY2hlZHVsZTtcbiAgICAxM1x0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tYXBwZXIuVGFza01hcHBlcjtcbiAgICAxNFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLkNhdGVnb3J5U2VydmljZTtcbiAgICAxNVx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlByaW9yaXR5U2VydmljZTtcbiAgICAxNlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlJlc291cmNlc1NlcnZpY2U7XG4gICAgMTdcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5UYXNrU2VydmljZTtcbiAgICAxOFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlNjaGVkdWxlU2VydmljZTtcbiAgICAxOVx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5pbXBsLlNlcnZpY2VJbXBsO1xuICAgIDIwXHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbiAgICAyMVx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZDtcbiAgICAyMlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZFBpZTtcbiAgICAyM1x0aW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5kYXRhYmluZC5PYmplY3RNYXBwZXI7XG4gICAgMjRcdGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLkJlYW5VdGlscztcbiAgICAyNVx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiAgICAyNlx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlO1xuICAgIDI3XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zY2hlZHVsaW5nLmFubm90YXRpb24uU2NoZWR1bGVkO1xuICAgIDI4XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jb250ZXh0LmFubm90YXRpb24uTGF6eTtcbiAgICAyOVx0XG4gICAgMzBcdGltcG9ydCBqYXZhLnRpbWUuRHVyYXRpb247XG4gICAgMzFcdGltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbiAgICAzMlx0aW1wb3J0IGphdmEudXRpbC4qO1xuICAgIDMzXHRcbiAgICAzNFx0LyoqXG4gICAgMzVcdCAqIDxwPlxuICAgIDM2XHQgKiDku7vliqHooagg5pyN5Yqh5a6e546w57G7XG4gICAgMzdcdCAqIDwvcD5cbiAgICAzOFx0ICovXG4gICAgMzlcdEBTZXJ2aWNlXG4gICAgNDBcdHB1YmxpYyBjbGFzcyBUYXNrU2VydmljZUltcGwgZXh0ZW5kcyBTZXJ2aWNlSW1wbDxUYXNrTWFwcGVyLCBUYXNrPiBpbXBsZW1lbnRzIFRhc2tTZXJ2aWNlIHtcbiAgICA0MVx0XG4gICAgNDJcdCAgICBAQXV0b3dpcmVkXG4gICAgNDNcdCAgICBwcml2YXRlIFRhc2tNYXBwZXIgdGFza01hcHBlcjtcbiAgICA0NFx0XG4gICAgNDVcdCAgICBAQXV0b3dpcmVkXG4gICAgNDZcdCAgICBwcml2YXRlIENhdGVnb3J5U2VydmljZSBjYXRlZ29yeVNlcnZpY2U7XG4gICAgNDdcdFxuICAgIDQ4XHQgICAgQEF1dG93aXJlZFxuICAgIDQ5XHQgICAgcHJpdmF0ZSBQcmlvcml0eVNlcnZpY2UgcHJpb3JpdHlTZXJ2aWNlO1xuICAgIDUwXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5M1xuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTlOVGNadWR5MkRvNUdGQ1pDSDMyVGMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IueOsOWcqOaIkeWwhuWunueOsOaZuuiDveaOkuW6j+aWueazle+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjBjMjlmODY1LTNlNWYtNDQ5NS1hZDk0LTI1NjUyZjFjY2Q5OCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFTZVlTbXNaVXlNZ0NnY1c3Z0Y4TlhnIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmFcIiwgXCJ2aWV3X3JhbmdlXCI6IFsyOTAsIDI5M119In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLnjrDlnKjmiJHlsIbmt7vliqDmmbrog73mjpLluo/mlrnms5XnmoTlrp7njrDvvJpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDI2XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLlNlcnZpY2U7XG4gICAgMjdcdGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNjaGVkdWxpbmcuYW5ub3RhdGlvbi5TY2hlZHVsZWQ7XG4gICAgMjhcdGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmNvbnRleHQuYW5ub3RhdGlvbi5MYXp5O1xuICAgIDI5XHRcbiAgICAzMFx0aW1wb3J0IGphdmEudGltZS5EdXJhdGlvbjtcbiAgICAzMVx0aW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuICAgIDMyXHRpbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTtcbiAgICAzM1x0aW1wb3J0IGphdmEudGltZS50ZW1wb3JhbC5DaHJvbm9Vbml0O1xuICAgIDM0XHRpbXBvcnQgamF2YS51dGlsLio7XG4gICAgMzVcdGltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcbiAgICAzNlx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudHJhbnNhY3Rpb24uYW5ub3RhdGlvbi5UcmFuc2FjdGlvbmFsO1xuICAgIDM3XHRcbiAgICAzOFx0LyoqXG4gICAgMzlcdCAqIDxwPlxuICAgIDQwXHQgKiDku7vliqHooagg5pyN5Yqh5a6e546w57G7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFVcGJCYWZSNHVQYXFUQkZUcjJrNVM3In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiLnjrDlnKjmiJHlsIbmt7vliqDmmbrog73mjpLluo/mlrnms5XnmoTlrp7njrDvvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlNDBjMGQ1ZC05YzE2LTQzZWMtOTk1NC0zN2VhMTA1NzRhNjUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxRFdEZHBHbm0zVVFYTUFMS2hNaGlOWSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhXCIsIFwidmlld19yYW5nZVwiOiBbMjkwLCAzMDBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi6K6p5oiR5om+5Yiw5paH5Lu255qE5pyr5bC+77yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmE6XG4gICAyOTBcdCAgICAgICAgICAgIHJldHVybiBuZXcgSGFzaFNldDw+KEFycmF5cy5hc0xpc3Qob2JqZWN0TWFwcGVyLnJlYWRWYWx1ZShqc29uQXJyYXksIExvbmdbXS5jbGFzcykpKTtcbiAgIDI5MVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMjkyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjkzXHQgICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5N1xuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVNlWVNtc1pVeU1nQ2djVzdnRjhOWGcifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkeaJvuWIsOaWh+S7tueahOacq+Wwvu+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImZjMTk1NDJjLTc3NjItNDU4My1hMzMzLTZjOGI4NmFjOTg5OSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFXdmN2RW5tbU1lNldBTUw1M1hiajUzIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgICAgfVxcbiAgICB9XFxufVwiLCBcIm5ld19zdHJcIjogXCIgICAgICAgIH1cXG4gICAgfVxcbiAgICBcXG4gICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyBMaXN0PFRhc2tWbz4gc21hcnRTb3J0VGFza3MoKSB7XFxuICAgICAgICAvLyBcXHU1MTQ4XFx1NjZmNFxcdTY1YjBcXHU2MjQwXFx1NjcwOVxcdTRlZmJcXHU1MmExXFx1NzJiNlxcdTYwMDFcXG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gMS4gXFx1ODNiN1xcdTUzZDZcXHU2MjQwXFx1NjcwOVxcdTY3MmFcXHU1YjhjXFx1NjIxMFxcdTc2ODRcXHU0ZWZiXFx1NTJhMVxcdWZmMDhcXHU1MzA1XFx1NjJlY1xcdTVmODVcXHU1MjllXFx1MzAwMVxcdTVkZjJcXHU1Yjg5XFx1NjM5MlxcdTMwMDFcXHU4ZmRiXFx1ODg0Y1xcdTRlMmRcXHUzMDAxXFx1NWRmMlxcdTkwMTdcXHU2NzFmXFx1ZmYwOVxcbiAgICAgICAgUXVlcnlXcmFwcGVyPFRhc2s+IHF1ZXJ5V3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xcbiAgICAgICAgcXVlcnlXcmFwcGVyLmluKFxcXCJzdGF0dXNcXFwiLCBBcnJheXMuYXNMaXN0KDEsIDIsIDMsIDUpKTtcXG4gICAgICAgIExpc3Q8VGFzaz4gdGFza3MgPSB0aGlzLmxpc3QocXVlcnlXcmFwcGVyKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gMi4gXFx1OGY2Y1xcdTYzNjJcXHU0ZTNhVGFza1ZvXFx1NWU3NlxcdThiYTFcXHU3Yjk3XFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTUyMDZcXHU2NTcwXFxuICAgICAgICBMaXN0PFRhc2tWbz4gdGFza1ZvcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xcbiAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xcbiAgICAgICAgICAgIFRhc2tWbyB0YXNrVm8gPSBuZXcgVGFza1ZvKCk7XFxuICAgICAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHRhc2ssIHRhc2tWbyk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gXFx1OGJhMVxcdTdiOTdcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NTIwNlxcdTY1NzBcXG4gICAgICAgICAgICBkb3VibGUgc21hcnRTY29yZSA9IGNhbGN1bGF0ZVNtYXJ0U2NvcmUodGFzayk7XFxuICAgICAgICAgICAgdGFza1ZvLnNldFByaW9yaXR5U2NvcmUoQmlnRGVjaW1hbC52YWx1ZU9mKHNtYXJ0U2NvcmUpKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBcXHU4M2I3XFx1NTNkNlxcdTRlZmJcXHU1MmExXFx1N2M3YlxcdTU3OGJcXHU1NDBkXFx1NzlmMFxcbiAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRDYXRlZ29yeUlkKCkpO1xcbiAgICAgICAgICAgIGlmIChjYXRlZ29yeSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgIHRhc2tWby5zZXRDYXRlZ29yeU5hbWUoY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gXFx1ODNiN1xcdTUzZDZcXHU5MWNkXFx1ODk4MVxcdTYwMjdcXHU1NDhjXFx1N2QyN1xcdTYwMjVcXHU2MDI3XFx1NTQwZFxcdTc5ZjBcXG4gICAgICAgICAgICBpZiAodGFzay5nZXRJbXBvcnRhbmNlSWQoKSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xcbiAgICAgICAgICAgICAgICBpZiAoaW1wb3J0YW5jZVByaW9yaXR5ICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0TmFtZSgpKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpZiAodGFzay5nZXRFeGlnZW5jeUlkKCkgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICBQcmlvcml0eSBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xcbiAgICAgICAgICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgICAgICB0YXNrVm8uc2V0RXhpZ2VuY3lOYW1lKGV4aWdlbmN5UHJpb3JpdHkuZ2V0TmFtZSgpKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBcXHU4OWUzXFx1Njc5MFxcdTc1MjhcXHU2MjM3XFx1NTQ4Y1xcdThkNDRcXHU2ZTkwXFx1NjU3MFxcdTYzNmVcXG4gICAgICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xcbiAgICAgICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XFxuICAgICAgICAgICAgU2V0PExvbmc+IHJlc291cmNlSWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFJlc291cmNlc0RhdGEoKSwgb2JqZWN0TWFwcGVyKTtcXG5cXG4gICAgICAgICAgICBMaXN0PFVtc0FkbWluPiB1c2VyTGlzdCA9IHVzZXJTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxVbXNBZG1pbj4oKS5sYW1iZGEoKS5pbihVbXNBZG1pbjo6Z2V0SWQsIHVzZXJJZHMpKTtcXG4gICAgICAgICAgICBMaXN0PFJlc291cmNlcz4gcmVzb3VyY2VzTGlzdCA9IHJlc291cmNlc1NlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFJlc291cmNlcz4oKS5sYW1iZGEoKS5pbihSZXNvdXJjZXM6OmdldElkLCByZXNvdXJjZUlkcykpO1xcbiAgICAgICAgICAgIHRhc2tWby5zZXRVc2VyTGlzdCh1c2VyTGlzdCk7XFxuICAgICAgICAgICAgdGFza1ZvLnNldFJlc291cmNlc0xpc3QocmVzb3VyY2VzTGlzdCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgdGFza1Zvcy5hZGQodGFza1ZvKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgLy8gMy4gXFx1NjMwOVxcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXHU1MjA2XFx1NjU3MFxcdTYzOTJcXHU1ZThmXFx1ZmYwOFxcdTRlY2VcXHU5YWQ4XFx1NTIzMFxcdTRmNGVcXHVmZjA5XFxuICAgICAgICB0YXNrVm9zLnNvcnQoKGEsIGIpIC0+IGIuZ2V0UHJpb3JpdHlTY29yZSgpLmNvbXBhcmVUbyhhLmdldFByaW9yaXR5U2NvcmUoKSkpO1xcbiAgICAgICAgXFxuICAgICAgICByZXR1cm4gdGFza1ZvcztcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIFxcdThiYTFcXHU3Yjk3XFx1NGVmYlxcdTUyYTFcXHU3Njg0XFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTUyMDZcXHU2NTcwXFxuICAgICAqIFxcdTU3ZmFcXHU0ZThlXFx1NGVmYlxcdTUyYTFcXHU3Njg0XFx1OTFjZFxcdTg5ODFcXHU2MDI3XFx1MzAwMVxcdTdkMjdcXHU2MDI1XFx1NjAyN1xcdTMwMDFcXHU2MjJhXFx1NmI2MlxcdTY1ZjZcXHU5NWY0XFx1NTQ4Y1xcdTcyYjZcXHU2MDAxXFxuICAgICAqIEBwYXJhbSB0YXNrIFxcdTRlZmJcXHU1MmExXFx1NWJmOVxcdThjNjFcXG4gICAgICogQHJldHVybiBcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NTIwNlxcdTY1NzBcXG4gICAgICovXFxuICAgIHByaXZhdGUgZG91YmxlIGNhbGN1bGF0ZVNtYXJ0U2NvcmUoVGFzayB0YXNrKSB7XFxuICAgICAgICBkb3VibGUgc2NvcmUgPSAwLjA7XFxuICAgICAgICBcXG4gICAgICAgIC8vIDEuIFxcdTU3ZmFcXHU3ODQwXFx1NTIwNlxcdTY1NzBcXHVmZjFhXFx1OTFjZFxcdTg5ODFcXHU2MDI3XFx1NTQ4Y1xcdTdkMjdcXHU2MDI1XFx1NjAyN1xcdTY3NDNcXHU5MWNkXFxuICAgICAgICBQcmlvcml0eSBpbXBvcnRhbmNlUHJpb3JpdHkgPSBudWxsO1xcbiAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IG51bGw7XFxuICAgICAgICBcXG4gICAgICAgIGlmICh0YXNrLmdldEltcG9ydGFuY2VJZCgpICE9IG51bGwpIHtcXG4gICAgICAgICAgICBpbXBvcnRhbmNlUHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEltcG9ydGFuY2VJZCgpKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcXG4gICAgICAgICAgICBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyBcXHU4YmExXFx1N2I5N1xcdTkxY2RcXHU4OTgxXFx1NjAyN1xcdTUyMDZcXHU2NTcwXFxuICAgICAgICBpZiAoaW1wb3J0YW5jZVByaW9yaXR5ICE9IG51bGwpIHtcXG4gICAgICAgICAgICBzY29yZSArPSBpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0U2NvcmUoKSAqIGltcG9ydGFuY2VQcmlvcml0eS5nZXRXZWlnaHQoKS5kb3VibGVWYWx1ZSgpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyBcXHU4YmExXFx1N2I5N1xcdTdkMjdcXHU2MDI1XFx1NjAyN1xcdTUyMDZcXHU2NTcwXFxuICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgc2NvcmUgKz0gZXhpZ2VuY3lQcmlvcml0eS5nZXRTY29yZSgpICogZXhpZ2VuY3lQcmlvcml0eS5nZXRXZWlnaHQoKS5kb3VibGVWYWx1ZSgpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyAyLiBcXHU2MjJhXFx1NmI2MlxcdTY1ZjZcXHU5NWY0XFx1Njc0M1xcdTkxY2RcXHU4YmExXFx1N2I5N1xcbiAgICAgICAgaWYgKHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xcbiAgICAgICAgICAgIGxvbmcgaG91cnNVbnRpbERlYWRsaW5lID0gQ2hyb25vVW5pdC5IT1VSUy5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBcXHU2MjJhXFx1NmI2MlxcdTY1ZjZcXHU5NWY0XFx1OGQ4YVxcdThmZDFcXHVmZjBjXFx1NTIwNlxcdTY1NzBcXHU4ZDhhXFx1OWFkOFxcbiAgICAgICAgICAgIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMjQpIHtcXG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gNTA7IC8vIDI0XFx1NWMwZlxcdTY1ZjZcXHU1MTg1XFx1OTg5ZFxcdTU5MTZcXHU1MmEwNTBcXHU1MjA2XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gNzIpIHtcXG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gMzA7IC8vIDcyXFx1NWMwZlxcdTY1ZjZcXHU1MTg1XFx1OTg5ZFxcdTU5MTZcXHU1MmEwMzBcXHU1MjA2XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMTY4KSB7XFxuICAgICAgICAgICAgICAgIHNjb3JlICs9IDEwOyAvLyBcXHU0ZTAwXFx1NTQ2OFxcdTUxODVcXHU5ODlkXFx1NTkxNlxcdTUyYTAxMFxcdTUyMDZcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gXFx1NTk4MlxcdTY3OWNcXHU1ZGYyXFx1N2VjZlxcdTkwMTdcXHU2NzFmXFx1ZmYwY1xcdTk4OWRcXHU1OTE2XFx1NTJhMFxcdTUyMDZcXG4gICAgICAgICAgICBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDwgMCkge1xcbiAgICAgICAgICAgICAgICAvLyBcXHU5MDE3XFx1NjcxZlxcdTY1ZjZcXHU5NWY0XFx1OGQ4YVxcdTk1N2ZcXHVmZjBjXFx1NTIwNlxcdTY1NzBcXHU4ZDhhXFx1OWFkOFxcdWZmMDhcXHU2NzAwXFx1NTkxYVxcdTUyYTAxMDBcXHU1MjA2XFx1ZmYwOVxcbiAgICAgICAgICAgICAgICBsb25nIG92ZXJkdWVEYXlzID0gTWF0aC5hYnMoaG91cnNVbnRpbERlYWRsaW5lKSAvIDI0O1xcbiAgICAgICAgICAgICAgICBzY29yZSArPSBNYXRoLm1pbihvdmVyZHVlRGF5cyAqIDEwLCAxMDApO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgLy8gMy4gXFx1NGVmYlxcdTUyYTFcXHU3MmI2XFx1NjAwMVxcdTY3NDNcXHU5MWNkXFxuICAgICAgICBpZiAodGFzay5nZXRTdGF0dXMoKSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgc3dpdGNoICh0YXNrLmdldFN0YXR1cygpKSB7XFxuICAgICAgICAgICAgICAgIGNhc2UgNTogLy8gXFx1NWRmMlxcdTkwMTdcXHU2NzFmXFxuICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAxMDA7XFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgY2FzZSAzOiAvLyBcXHU4ZmRiXFx1ODg0Y1xcdTRlMmRcXG4gICAgICAgICAgICAgICAgICAgIHNjb3JlICs9IDYwO1xcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgICAgICAgIGNhc2UgMjogLy8gXFx1NWRmMlxcdTViODlcXHU2MzkyXFxuICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAzMDtcXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICBjYXNlIDE6IC8vIFxcdTVmODVcXHU1MjllXFxuICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAxMDtcXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyA0LiBcXHU0ZWZiXFx1NTJhMVxcdTYyNDBcXHU5NzAwXFx1NjVmNlxcdTk1ZjRcXHU2NzQzXFx1OTFjZFxcdWZmMDhcXHU4MDE3XFx1NjVmNlxcdThkOGFcXHU3N2VkXFx1OGQ4YVxcdTUxNDhcXHU1YjhjXFx1NjIxMFxcdWZmMDlcXG4gICAgICAgIGlmICh0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwgJiYgdGFzay5nZXRUaW1lU3BlbmQoKSA+IDApIHtcXG4gICAgICAgICAgICAvLyBcXHU2NWY2XFx1OTVmNFxcdThkOGFcXHU3N2VkXFx1ZmYwY1xcdTUyMDZcXHU2NTcwXFx1OGQ4YVxcdTlhZDhcXHVmZjA4XFx1NjcwMFxcdTU5MWFcXHU1MmEwMjBcXHU1MjA2XFx1ZmYwOVxcbiAgICAgICAgICAgIHNjb3JlICs9IE1hdGgubWF4KDIwIC0gKHRhc2suZ2V0VGltZVNwZW5kKCkgLyAzMCksIDApO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICByZXR1cm4gc2NvcmU7XFxuICAgIH1cXG59XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAyOTQsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjk2fV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLnjrDlnKjmiJHlsIbmt7vliqDmmbrog73mjpLluo/mlrnms5XvvJpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6Ik5vdGU6XG5FbmQgbGluZSAzMDAgZXhjZWVkcyBmaWxlIGxlbmd0aCAoMjk3KS4gQWRqdXN0ZWQgdG8gMjk3LlxuXG5IZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmE6XG4gICAyOTBcdCAgICAgICAgICAgIHJldHVybiBuZXcgSGFzaFNldDw+KEFycmF5cy5hc0xpc3Qob2JqZWN0TWFwcGVyLnJlYWRWYWx1ZShqc29uQXJyYXksIExvbmdbXS5jbGFzcykpKTtcbiAgIDI5MVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMjkyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjkzXHQgICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgIDI5NFx0ICAgICAgICB9XG4gICAyOTVcdCAgICB9XG4gICAyOTZcdH1cbiAgIDI5N1x0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyOTdcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFEV0RkcEdubTNVUVhNQUxLaE1oaU5ZIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiLnjrDlnKjmiJHlsIbmt7vliqDmmbrog73mjpLluo/mlrnms5XvvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2MDY2YjQwYi1mZWVjLTQ2NGYtYjkwZC0yOTA2YjRjYjQ4MWMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTHFoTlVnNWhuSHpFQVpYWGduVjEzQSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9UYXNrQ29udHJvbGxlci5qYXZhXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgMy4g5ZyoIFRhc2tDb250cm9sbGVyIOS4rea3u+WKoOaZuuiDveaOkuW6j+eahEFQSeerr+eCuVxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyOTBcdCAgICAgICAgICAgIHJldHVybiBuZXcgSGFzaFNldDw+KEFycmF5cy5hc0xpc3Qob2JqZWN0TWFwcGVyLnJlYWRWYWx1ZShqc29uQXJyYXksIExvbmdbXS5jbGFzcykpKTtcbiAgIDI5MVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMjkyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjkzXHQgICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgIDI5NFx0ICAgICAgICB9XG4gICAyOTVcdCAgICB9XG4gICAyOTZcdFxuICAgMjk3XHQgICAgQE92ZXJyaWRlXG4gICAyOThcdCAgICBwdWJsaWMgTGlzdDxUYXNrVm8+IHNtYXJ0U29ydFRhc2tzKCkge1xuICAgMjk5XHQgICAgICAgIC8vIOWFiOabtOaWsOaJgOacieS7u+WKoeeKtuaAgVxuICAgMzAwXHQgICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcbiAgIDMwMVx0XG4gICAzMDJcdCAgICAgICAgLy8gMS4g6I635Y+W5omA5pyJ5pyq5a6M5oiQ55qE5Lu75Yqh77yI5YyF5ous5b6F5Yqe44CB5bey5a6J5o6S44CB6L+b6KGM5Lit44CB5bey6YCX5pyf77yJXG4gICAzMDNcdCAgICAgICAgUXVlcnlXcmFwcGVyPFRhc2s+IHF1ZXJ5V3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xuICAgMzA0XHQgICAgICAgIHF1ZXJ5V3JhcHBlci5pbihcInN0YXR1c1wiLCBBcnJheXMuYXNMaXN0KDEsIDIsIDMsIDUpKTtcbiAgIDMwNVx0ICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGhpcy5saXN0KHF1ZXJ5V3JhcHBlcik7XG4gICAzMDZcdFxuICAgMzA3XHQgICAgICAgIC8vIDIuIOi9rOaNouS4ulRhc2tWb+W5tuiuoeeul+aZuuiDveaOkuW6j+WIhuaVsFxuICAgMzA4XHQgICAgICAgIExpc3Q8VGFza1ZvPiB0YXNrVm9zID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAzMDlcdCAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xuICAgMzEwXHQgICAgICAgICAgICBUYXNrVm8gdGFza1ZvID0gbmV3IFRhc2tWbygpO1xuICAgMzExXHQgICAgICAgICAgICBCZWFuVXRpbHMuY29weVByb3BlcnRpZXModGFzaywgdGFza1ZvKTtcbiAgIDMxMlx0XG4gICAzMTNcdCAgICAgICAgICAgIC8vIOiuoeeul+aZuuiDveaOkuW6j+WIhuaVsFxuICAgMzE0XHQgICAgICAgICAgICBkb3VibGUgc21hcnRTY29yZSA9IGNhbGN1bGF0ZVNtYXJ0U2NvcmUodGFzayk7XG4gICAzMTVcdCAgICAgICAgICAgIHRhc2tWby5zZXRQcmlvcml0eVNjb3JlKEJpZ0RlY2ltYWwudmFsdWVPZihzbWFydFNjb3JlKSk7XG4gICAzMTZcdFxuICAgMzE3XHQgICAgICAgICAgICAvLyDojrflj5bku7vliqHnsbvlnovlkI3np7BcbiAgIDMxOFx0ICAgICAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBjYXRlZ29yeVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldENhdGVnb3J5SWQoKSk7XG4gICAzMTlcdCAgICAgICAgICAgIGlmIChjYXRlZ29yeSAhPSBudWxsKSB7XG4gICAzMjBcdCAgICAgICAgICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAzMjFcdCAgICAgICAgICAgIH1cbiAgIDMyMlx0XG4gICAzMjNcdCAgICAgICAgICAgIC8vIOiOt+WPlumHjeimgeaAp+WSjOe0p+aApeaAp+WQjeensFxuICAgMzI0XHQgICAgICAgICAgICBpZiAodGFzay5nZXRJbXBvcnRhbmNlSWQoKSAhPSBudWxsKSB7XG4gICAzMjVcdCAgICAgICAgICAgICAgICBQcmlvcml0eSBpbXBvcnRhbmNlUHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEltcG9ydGFuY2VJZCgpKTtcbiAgIDMyNlx0ICAgICAgICAgICAgICAgIGlmIChpbXBvcnRhbmNlUHJpb3JpdHkgIT0gbnVsbCkge1xuICAgMzI3XHQgICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgIDMyOFx0ICAgICAgICAgICAgICAgIH1cbiAgIDMyOVx0ICAgICAgICAgICAgfVxuICAgMzMwXHRcbiAgIDMzMVx0ICAgICAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgIDMzMlx0ICAgICAgICAgICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAzMzNcdCAgICAgICAgICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAzMzRcdCAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldEV4aWdlbmN5TmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAzMzVcdCAgICAgICAgICAgICAgICB9XG4gICAzMzZcdCAgICAgICAgICAgIH1cbiAgIDMzN1x0XG4gICAzMzhcdCAgICAgICAgICAgIC8vIOino+aekOeUqOaIt+WSjOi1hOa6kOaVsOaNrlxuICAgMzM5XHQgICAgICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgMzQwXHQgICAgICAgICAgICBTZXQ8TG9uZz4gdXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQodGFzay5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMzQxXHQgICAgICAgICAgICBTZXQ8TG9uZz4gcmVzb3VyY2VJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0UmVzb3VyY2VzRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMzQyXHRcbiAgIDM0M1x0ICAgICAgICAgICAgTGlzdDxVbXNBZG1pbj4gdXNlckxpc3QgPSB1c2VyU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8VW1zQWRtaW4+KCkubGFtYmRhKCkuaW4oVW1zQWRtaW46OmdldElkLCB1c2VySWRzKSk7XG4gICAzNDRcdCAgICAgICAgICAgIExpc3Q8UmVzb3VyY2VzPiByZXNvdXJjZXNMaXN0ID0gcmVzb3VyY2VzU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8UmVzb3VyY2VzPigpLmxhbWJkYSgpLmluKFJlc291cmNlczo6Z2V0SWQsIHJlc291cmNlSWRzKSk7XG4gICAzNDVcdCAgICAgICAgICAgIHRhc2tWby5zZXRVc2VyTGlzdCh1c2VyTGlzdCk7XG4gICAzNDZcdCAgICAgICAgICAgIHRhc2tWby5zZXRSZXNvdXJjZXNMaXN0KHJlc291cmNlc0xpc3QpO1xuICAgMzQ3XHRcbiAgIDM0OFx0ICAgICAgICAgICAgdGFza1Zvcy5hZGQodGFza1ZvKTtcbiAgIDM0OVx0ICAgICAgICB9XG4gICAzNTBcdFxuICAgMzUxXHQgICAgICAgIC8vIDMuIOaMieaZuuiDveaOkuW6j+WIhuaVsOaOkuW6j++8iOS7jumrmOWIsOS9ju+8iVxuICAgMzUyXHQgICAgICAgIHRhc2tWb3Muc29ydCgoYSwgYikgLT4gYi5nZXRQcmlvcml0eVNjb3JlKCkuY29tcGFyZVRvKGEuZ2V0UHJpb3JpdHlTY29yZSgpKSk7XG4gICAzNTNcdFxuICAgMzU0XHQgICAgICAgIHJldHVybiB0YXNrVm9zO1xuICAgMzU1XHQgICAgfVxuICAgMzU2XHRcbiAgIDM1N1x0ICAgIC8qKlxuICAgMzU4XHQgICAgICog6K6h566X5Lu75Yqh55qE5pm66IO95o6S5bqP5YiG5pWwXG4gICAzNTlcdCAgICAgKiDln7rkuo7ku7vliqHnmoTph43opoHmgKfjgIHntKfmgKXmgKfjgIHmiKrmraLml7bpl7TlkoznirbmgIFcbiAgIDM2MFx0ICAgICAqIEBwYXJhbSB0YXNrIOS7u+WKoeWvueixoVxuICAgMzYxXHQgICAgICogQHJldHVybiDmmbrog73mjpLluo/liIbmlbBcbiAgIDM2Mlx0ICAgICAqL1xuICAgMzYzXHQgICAgcHJpdmF0ZSBkb3VibGUgY2FsY3VsYXRlU21hcnRTY29yZShUYXNrIHRhc2spIHtcbiAgIDM2NFx0ICAgICAgICBkb3VibGUgc2NvcmUgPSAwLjA7XG4gICAzNjVcdFxuICAgMzY2XHQgICAgICAgIC8vIDEuIOWfuuehgOWIhuaVsO+8mumHjeimgeaAp+WSjOe0p+aApeaAp+adg+mHjVxuICAgMzY3XHQgICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IG51bGw7XG4gICAzNjhcdCAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IG51bGw7XG4gICAzNjlcdFxuICAgMzcwXHQgICAgICAgIGlmICh0YXNrLmdldEltcG9ydGFuY2VJZCgpICE9IG51bGwpIHtcbiAgIDM3MVx0ICAgICAgICAgICAgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAzNzJcdCAgICAgICAgfVxuICAgMzczXHRcbiAgIDM3NFx0ICAgICAgICBpZiAodGFzay5nZXRFeGlnZW5jeUlkKCkgIT0gbnVsbCkge1xuICAgMzc1XHQgICAgICAgICAgICBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgMzc2XHQgICAgICAgIH1cbiAgIDM3N1x0XG4gICAzNzhcdCAgICAgICAgLy8g6K6h566X6YeN6KaB5oCn5YiG5pWwXG4gICAzNzlcdCAgICAgICAgaWYgKGltcG9ydGFuY2VQcmlvcml0eSAhPSBudWxsKSB7XG4gICAzODBcdCAgICAgICAgICAgIHNjb3JlICs9IGltcG9ydGFuY2VQcmlvcml0eS5nZXRTY29yZSgpICogaW1wb3J0YW5jZVByaW9yaXR5LmdldFdlaWdodCgpLmRvdWJsZVZhbHVlKCk7XG4gICAzODFcdCAgICAgICAgfVxuICAgMzgyXHRcbiAgIDM4M1x0ICAgICAgICAvLyDorqHnrpfntKfmgKXmgKfliIbmlbBcbiAgIDM4NFx0ICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAzODVcdCAgICAgICAgICAgIHNjb3JlICs9IGV4aWdlbmN5UHJpb3JpdHkuZ2V0U2NvcmUoKSAqIGV4aWdlbmN5UHJpb3JpdHkuZ2V0V2VpZ2h0KCkuZG91YmxlVmFsdWUoKTtcbiAgIDM4Nlx0ICAgICAgICB9XG4gICAzODdcdFxuICAgMzg4XHQgICAgICAgIC8vIDIuIOaIquatouaXtumXtOadg+mHjeiuoeeul1xuICAgMzg5XHQgICAgICAgIGlmICh0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCkge1xuICAgMzkwXHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAzOTFcdCAgICAgICAgICAgIGxvbmcgaG91cnNVbnRpbERlYWRsaW5lID0gQ2hyb25vVW5pdC5IT1VSUy5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKTtcbiAgIDM5Mlx0XG4gICAzOTNcdCAgICAgICAgICAgIC8vIOaIquatouaXtumXtOi2iui/ke+8jOWIhuaVsOi2iumrmFxuICAgMzk0XHQgICAgICAgICAgICBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDI0KSB7XG4gICAzOTVcdCAgICAgICAgICAgICAgICBzY29yZSArPSA1MDsgLy8gMjTlsI/ml7blhoXpop3lpJbliqA1MOWIhlxuICAgMzk2XHQgICAgICAgICAgICB9IGVsc2UgaWYgKGhvdXJzVW50aWxEZWFkbGluZSA8PSA3Mikge1xuICAgMzk3XHQgICAgICAgICAgICAgICAgc2NvcmUgKz0gMzA7IC8vIDcy5bCP5pe25YaF6aKd5aSW5YqgMzDliIZcbiAgIDM5OFx0ICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMTY4KSB7XG4gICAzOTlcdCAgICAgICAgICAgICAgICBzY29yZSArPSAxMDsgLy8g5LiA5ZGo5YaF6aKd5aSW5YqgMTDliIZcbiAgIDQwMFx0ICAgICAgICAgICAgfVxuICAgNDAxXHRcbiAgIDQwMlx0ICAgICAgICAgICAgLy8g5aaC5p6c5bey57uP6YCX5pyf77yM6aKd5aSW5Yqg5YiGXG4gICA0MDNcdCAgICAgICAgICAgIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPCAwKSB7XG4gICA0MDRcdCAgICAgICAgICAgICAgICAvLyDpgJfmnJ/ml7bpl7Totorplb/vvIzliIbmlbDotorpq5jvvIjmnIDlpJrliqAxMDDliIbvvIlcbiAgIDQwNVx0ICAgICAgICAgICAgICAgIGxvbmcgb3ZlcmR1ZURheXMgPSBNYXRoLmFicyhob3Vyc1VudGlsRGVhZGxpbmUpIC8gMjQ7XG4gICA0MDZcdCAgICAgICAgICAgICAgICBzY29yZSArPSBNYXRoLm1pbihvdmVyZHVlRGF5cyAqIDEwLCAxMDApO1xuICAgNDA3XHQgICAgICAgICAgICB9XG4gICA0MDhcdCAgICAgICAgfVxuICAgNDA5XHRcbiAgIDQxMFx0ICAgICAgICAvLyAzLiDku7vliqHnirbmgIHmnYPph41cbiAgIDQxMVx0ICAgICAgICBpZiAodGFzay5nZXRTdGF0dXMoKSAhPSBudWxsKSB7XG4gICA0MTJcdCAgICAgICAgICAgIHN3aXRjaCAodGFzay5nZXRTdGF0dXMoKSkge1xuICAgNDEzXHQgICAgICAgICAgICAgICAgY2FzZSA1OiAvLyDlt7LpgJfmnJ9cbiAgIDQxNFx0ICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAxMDA7XG4gICA0MTVcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICA0MTZcdCAgICAgICAgICAgICAgICBjYXNlIDM6IC8vIOi/m+ihjOS4rVxuICAgNDE3XHQgICAgICAgICAgICAgICAgICAgIHNjb3JlICs9IDYwO1xuICAgNDE4XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgNDE5XHQgICAgICAgICAgICAgICAgY2FzZSAyOiAvLyDlt7LlronmjpJcbiAgIDQyMFx0ICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAzMDtcbiAgIDQyMVx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgIDQyMlx0ICAgICAgICAgICAgICAgIGNhc2UgMTogLy8g5b6F5YqeXG4gICA0MjNcdCAgICAgICAgICAgICAgICAgICAgc2NvcmUgKz0gMTA7XG4gICA0MjRcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICA0MjVcdCAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgNDI2XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgNDI3XHQgICAgICAgICAgICB9XG4gICA0MjhcdCAgICAgICAgfVxuICAgNDI5XHRcbiAgIDQzMFx0ICAgICAgICAvLyA0LiDku7vliqHmiYDpnIDml7bpl7TmnYPph43vvIjogJfml7botornn63otorlhYjlrozmiJDvvIlcbiAgIDQzMVx0ICAgICAgICBpZiAodGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsICYmIHRhc2suZ2V0VGltZVNwZW5kKCkgPiAwKSB7XG4gICA0MzJcdCAgICAgICAgICAgIC8vIOaXtumXtOi2iuefre+8jOWIhuaVsOi2iumrmO+8iOacgOWkmuWKoDIw5YiG77yJXG4gICA0MzNcdCAgICAgICAgICAgIHNjb3JlICs9IE1hdGgubWF4KDIwIC0gKHRhc2suZ2V0VGltZVNwZW5kKCkgLyAzMCksIDApO1xuICAgNDM0XHQgICAgICAgIH1cbiAgIDQzNVx0XG4gICA0MzZcdCAgICAgICAgcmV0dXJuIHNjb3JlO1xuICAgNDM3XHQgICAgfVxuICAgNDM4XHR9XG4gICA0MzlcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxV3ZjdkVubW1NZTZXQU1MNTNYYmo1MyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiIyMjIDMuIOWcqCBUYXNrQ29udHJvbGxlciDkuK3mt7vliqDmmbrog73mjpLluo/nmoRBUEnnq6/ngrlcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlZjdiNzE3Ni05N2U2LTQyOWYtYjhmZS1kNmZjNzc0ZjYxMWIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxQ04yMWNHbjlHRGRjNzJueWhEUkhiWSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvVGFza0NvbnRyb2xsZXIuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgQEFwaU9wZXJhdGlvbihcXFwiXFx1NjdlNVxcdThiZTJcXHU0ZWZiXFx1NTJhMVxcdThiZTZcXHU2MGM1XFxcIilcXG4gICAgQEdldE1hcHBpbmcoXFxcIi9pbmZvL3tpZH1cXFwiKVxcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PFRhc2tWbz4gZ2V0SW5mbyhAUGF0aFZhcmlhYmxlIExvbmcgaWQpIHtcXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5nZXRJbmZvKGlkKSk7XFxuICAgIH1cXG59XCIsIFwibmV3X3N0clwiOiBcIiAgICBAQXBpT3BlcmF0aW9uKFxcXCJcXHU2N2U1XFx1OGJlMlxcdTRlZmJcXHU1MmExXFx1OGJlNlxcdTYwYzVcXFwiKVxcbiAgICBAR2V0TWFwcGluZyhcXFwiL2luZm8ve2lkfVxcXCIpXFxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8VGFza1ZvPiBnZXRJbmZvKEBQYXRoVmFyaWFibGUgTG9uZyBpZCkge1xcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmdldEluZm8oaWQpKTtcXG4gICAgfVxcbiAgICBcXG4gICAgQEFwaU9wZXJhdGlvbihcXFwiXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTRlZmJcXHU1MmExXFx1NTIxN1xcdTg4NjhcXFwiKVxcbiAgICBAR2V0TWFwcGluZyhcXFwiL3NtYXJ0U29ydFxcXCIpXFxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrVm8+PiBzbWFydFNvcnRUYXNrcygpIHtcXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5zbWFydFNvcnRUYXNrcygpKTtcXG4gICAgfVxcbn1cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEwMywgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxMDh9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IueOsOWcqOaIkeWwhua3u+WKoOaZuuiDveaOkuW6j+eahEFQSeerr+eCue+8mlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9UYXNrQ29udHJvbGxlci5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5jb250cm9sbGVyO1xuICAgICAyXHRcbiAgICAgM1x0XG4gICAgIDRcdGltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLklkVXRpbDtcbiAgICAgNVx0aW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuT2JqZWN0VXRpbDtcbiAgICAgNlx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLmNvbmRpdGlvbnMucXVlcnkuUXVlcnlXcmFwcGVyO1xuICAgICA3XHRpbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbiAgICAgOFx0aW1wb3J0IGNvbS5ib290LndlYi5jb21tb24uYXBpLkNvbW1vblBhZ2U7XG4gICAgIDlcdGltcG9ydCBjb20uYm9vdC53ZWIuY29tbW9uLmFwaS5Db21tb25SZXN1bHQ7XG4gICAgMTBcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbiAgICAxMVx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlRhc2tTZXJ2aWNlO1xuICAgIDEyXHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbiAgICAxM1x0aW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpT3BlcmF0aW9uO1xuICAgIDE0XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuICAgIDE1XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuYmluZC5hbm5vdGF0aW9uLio7XG4gICAgMTZcdFxuICAgIDE3XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMThcdGltcG9ydCBqYXZhLnV0aWwuTWFwO1xuICAgIDE5XHRcbiAgICAyMFx0LyoqXG4gICAgMjFcdCAqIDxwPlxuICAgIDIyXHQgKiDku7vliqHooagg5YmN56uv5o6n5Yi25ZmoXG4gICAgMjNcdCAqIDwvcD5cbiAgICAyNFx0ICovXG4gICAgMjVcdEBSZXN0Q29udHJvbGxlclxuICAgIDI2XHRAUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3Rhc2tcIilcbiAgICAyN1x0cHVibGljIGNsYXNzIFRhc2tDb250cm9sbGVyIHtcbiAgICAyOFx0ICAgIEBBdXRvd2lyZWRcbiAgICAyOVx0ICAgIHByaXZhdGUgVGFza1NlcnZpY2UgdGFza1NlcnZpY2U7XG4gICAgMzBcdFxuICAgIDMxXHQgICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIDMyXHQgICAgQEdldE1hcHBpbmcoXCIvbGlzdFwiKVxuICAgIDMzXHQgICAgcHVibGljIENvbW1vblJlc3VsdDxDb21tb25QYWdlPFRhc2tWbz4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgIDM0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZU51bVwiLCBkZWZhdWx0VmFsdWUgPSBcIjFcIikgSW50ZWdlciBwYWdlTnVtLFxuICAgIDM1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwiY2F0ZWdvcnlJZFwiLCByZXF1aXJlZCA9IGZhbHNlKSBMb25nIGNhdGVnb3J5SWQsXG4gICAgMzZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgIDM3XHQgICAgICAgIFBhZ2U8VGFza1ZvPiB0YXNrUGFnZSA9IHRhc2tTZXJ2aWNlLnNlYXJjaChwYWdlU2l6ZSwgcGFnZU51bSwgY2F0ZWdvcnlJZCwgc2VhcmNoS2V5KTtcbiAgICAzOFx0XG4gICAgMzlcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2UodGFza1BhZ2UpKTtcbiAgICA0MFx0ICAgIH1cbiAgICA0MVx0XG4gICAgNDJcdCAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLliJvlu7rku7vliqFcIilcbiAgICA0M1x0ICAgIEBQb3N0TWFwcGluZyhcIi9jcmVhdGVcIilcbiAgICA0NFx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBUYXNrIHRhc2spIHtcbiAgICA0NVx0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UuY3JlYXRlKHRhc2spKTtcbiAgICA0Nlx0ICAgIH1cbiAgICA0N1x0XG4gICAgNDhcdCAgICBAQXBpT3BlcmF0aW9uKFwi5L+u5pS55Lu75YqhXCIpXG4gICAgNDlcdCAgICBAUG9zdE1hcHBpbmcoXCIvdXBkYXRlXCIpXG4gICAgNTBcdCAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PEJvb2xlYW4+IHVwZGF0ZShAUmVxdWVzdEJvZHkgVGFzayB0YXNrKSB7XG4gICAgNTFcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLnVwZGF0ZVRhc2sodGFzaykpO1xuICAgIDUyXHQgICAgfVxuICAgIDUzXHRcbiAgICA1NFx0ICAgIEBBcGlPcGVyYXRpb24oXCLkv67mlLnku7vliqHnirbmgIFcIilcbiAgICA1NVx0ICAgIEBQb3N0TWFwcGluZyhcIi91cGRhdGVTdGF0dXNcIilcbiAgICA1Nlx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gdXBkYXRlU3RhdHVzKEBSZXF1ZXN0UGFyYW0gTG9uZyBpZCwgQFJlcXVlc3RQYXJhbSBJbnRlZ2VyIHN0YXR1cykge1xuICAgIDU3XHQgICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgIDU4XHQgICAgICAgIGlmICh0YXNrICE9IG51bGwpIHtcbiAgICA1OVx0ICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoc3RhdHVzKTtcbiAgICA2MFx0ICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzaykpO1xuICAgIDYxXHQgICAgICAgIH1cbiAgICA2Mlx0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LmZhaWxlZChcIuS7u+WKoeS4jeWtmOWcqFwiKTtcbiAgICA2M1x0ICAgIH1cbiAgICA2NFx0XG4gICAgNjVcdCAgICBAQXBpT3BlcmF0aW9uKFwi6K6+572u5Lu75Yqh5o+Q6YaS5pe26Ze0XCIpXG4gICAgNjZcdCAgICBAUG9zdE1hcHBpbmcoXCIvc2V0UmVtaW5kZXJcIilcbiAgICA2N1x0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gc2V0UmVtaW5kZXIoQFJlcXVlc3RQYXJhbSBMb25nIGlkLCBAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyByZW1pbmRlclRpbWUpIHtcbiAgICA2OFx0ICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGlkKTtcbiAgICA2OVx0ICAgICAgICBpZiAodGFzayAhPSBudWxsKSB7XG4gICAgNzBcdCAgICAgICAgICAgIGlmIChyZW1pbmRlclRpbWUgIT0gbnVsbCAmJiAhcmVtaW5kZXJUaW1lLmlzRW1wdHkoKSkge1xuICAgIDcxXHQgICAgICAgICAgICAgICAgdGFzay5zZXRSZW1pbmRlclRpbWUoamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUucGFyc2UocmVtaW5kZXJUaW1lKSk7XG4gICAgNzJcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgNzNcdCAgICAgICAgICAgICAgICB0YXNrLnNldFJlbWluZGVyVGltZShudWxsKTsgLy8g5Y+W5raI5o+Q6YaSXG4gICAgNzRcdCAgICAgICAgICAgIH1cbiAgICA3NVx0ICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzaykpO1xuICAgIDc2XHQgICAgICAgIH1cbiAgICA3N1x0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LmZhaWxlZChcIuS7u+WKoeS4jeWtmOWcqFwiKTtcbiAgICA3OFx0ICAgIH1cbiAgICA3OVx0XG4gICAgODBcdCAgICBAQXBpT3BlcmF0aW9uKFwi56e76Zmk5Lu75YqhXCIpXG4gICAgODFcdCAgICBAUG9zdE1hcHBpbmcoXCIvZGVsZXRlL3tpZH1cIilcbiAgICA4Mlx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8U3RyaW5nPiBkZWxldGUoQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7XG4gICAgODNcdCAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChpZCk7XG4gICAgODRcdCAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gdGFza1NlcnZpY2UucmVtb3ZlQnlJZCh0YXNrKTtcbiAgICA4NVx0ICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgIDg2XHQgICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MobnVsbCk7XG4gICAgODdcdCAgICAgICAgfVxuICAgIDg4XHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuZmFpbGVkKFwi56e76Zmk5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VXCIpO1xuICAgIDg5XHQgICAgfVxuICAgIDkwXHRcbiAgICA5MVx0ICAgIEBBcGlPcGVyYXRpb24oXCLmn6Xor6LmiYDmnInliJfooahcIilcbiAgICA5Mlx0ICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RBbGxCeVN0YXR1c1wiKVxuICAgIDkzXHQgICAgcHVibGljIENvbW1vblJlc3VsdDxMaXN0PFRhc2tWbz4+IGxpc3RBbGwoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic3RhdHVzXCIsIHJlcXVpcmVkID0gZmFsc2UpIEludGVnZXIgc3RhdHVzKSB7XG4gICAgOTRcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmxpc3RBbGwoc3RhdHVzKSk7XG4gICAgOTVcdCAgICB9XG4gICAgOTZcdFxuICAgIDk3XHQgICAgQEFwaU9wZXJhdGlvbihcIuafpeivouaJgOacieWIl+ihqFwiKVxuICAgIDk4XHQgICAgQEdldE1hcHBpbmcoXCIvbGlzdEFsbFwiKVxuICAgIDk5XHQgICAgcHVibGljIENvbW1vblJlc3VsdDxMaXN0PFRhc2s+PiBsaXN0QWxsKCkge1xuICAgMTAwXHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5saXN0KCkpO1xuICAgMTAxXHQgICAgfVxuICAgMTAyXHRcbiAgIDEwM1x0ICAgIEBBcGlPcGVyYXRpb24oXCLmn6Xor6Lku7vliqHor6bmg4VcIilcbiAgIDEwNFx0ICAgIEBHZXRNYXBwaW5nKFwiL2luZm8ve2lkfVwiKVxuICAgMTA1XHQgICAgcHVibGljIENvbW1vblJlc3VsdDxUYXNrVm8+IGdldEluZm8oQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7XG4gICAxMDZcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmdldEluZm8oaWQpKTtcbiAgIDEwN1x0ICAgIH1cbiAgIDEwOFx0fVxuICAgMTA5XHRcbiAgIDExMFx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMTBcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFMcWhOVWc1aG5IekVBWlhYZ25WMTNBIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiLnjrDlnKjmiJHlsIbmt7vliqDmmbrog73mjpLluo/nmoRBUEnnq6/ngrnvvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJkYjQ2YmY2OS03M2RlLTQzYmEtYTNmNS05YjQzMzljODZkZjIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxQ3BteEZkWnZKSlpkaEJLRnNvSG1McyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL2FwaS9hcGkuanNcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxNTAsIDIwMF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgNC4g5Zyo5YmN56uvQVBJ5paH5Lu25Lit5re75Yqg6LCD55So5pm66IO95o6S5bqP55qE5pa55rOVXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1Rhc2tDb250cm9sbGVyLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA5OVx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrPj4gbGlzdEFsbCgpIHtcbiAgIDEwMFx0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UubGlzdCgpKTtcbiAgIDEwMVx0ICAgIH1cbiAgIDEwMlx0XG4gICAxMDNcdCAgICBAQXBpT3BlcmF0aW9uKFwi5p+l6K+i5Lu75Yqh6K+m5oOFXCIpXG4gICAxMDRcdCAgICBAR2V0TWFwcGluZyhcIi9pbmZvL3tpZH1cIilcbiAgIDEwNVx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8VGFza1ZvPiBnZXRJbmZvKEBQYXRoVmFyaWFibGUgTG9uZyBpZCkge1xuICAgMTA2XHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5nZXRJbmZvKGlkKSk7XG4gICAxMDdcdCAgICB9XG4gICAxMDhcdFxuICAgMTA5XHQgICAgQEFwaU9wZXJhdGlvbihcIuaZuuiDveaOkuW6j+S7u+WKoeWIl+ihqFwiKVxuICAgMTEwXHQgICAgQEdldE1hcHBpbmcoXCIvc21hcnRTb3J0XCIpXG4gICAxMTFcdCAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PExpc3Q8VGFza1ZvPj4gc21hcnRTb3J0VGFza3MoKSB7XG4gICAxMTJcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLnNtYXJ0U29ydFRhc2tzKCkpO1xuICAgMTEzXHQgICAgfVxuICAgMTE0XHR9XG4gICAxMTVcdFxuICAgMTE2XHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUNOMjFjR245R0RkYzcybnloRFJIYlkifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IiMjIyA0LiDlnKjliY3nq69BUEnmlofku7bkuK3mt7vliqDosIPnlKjmmbrog73mjpLluo/nmoTmlrnms5VcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIyMmMyZGMwMi01MWVkLTQ0ZWItOTA1MC03Zjk5YmI3ZTAzMDciLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSGFDdnFWaXJOejRvQXFhblM1M1hrdSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL2FwaS9hcGkuanNcIiwgXCJ2aWV3X3JhbmdlXCI6IFsyMDAsIDI1MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLorqnmiJHmn6XnnIvmm7TlpJrnmoRBUEnku6PnoIHvvJpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy9hcGkvYXBpLmpzOlxuICAgMTUwXHQgICAgbWV0aG9kOiAncG9zdCcsXG4gICAxNTFcdCAgfSlcbiAgIDE1Mlx0fVxuICAgMTUzXHRcbiAgIDE1NFx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsUHJpb3JpdHlMaXN0KHBhcmFtcykge1xuICAgMTU1XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDE1Nlx0ICAgIHVybDogJy93ZWIvcHJpb3JpdHkvbGlzdEFsbCcsXG4gICAxNTdcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMTU4XHQgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAxNTlcdCAgfSlcbiAgIDE2MFx0fVxuICAgMTYxXHRcbiAgIDE2Mlx0XG4gICAxNjNcdC8vIOS7u+WKoVxuICAgMTY0XHRleHBvcnQgZnVuY3Rpb24gZmV0Y2hUYXNrTGlzdChwYXJhbXMpIHtcbiAgIDE2NVx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAxNjZcdCAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdCcsXG4gICAxNjdcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMTY4XHQgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAxNjlcdCAgfSlcbiAgIDE3MFx0fVxuICAgMTcxXHRcbiAgIDE3Mlx0ZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2soZGF0YSkge1xuICAgMTczXHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDE3NFx0ICAgIHVybDogJy93ZWIvdGFzay9jcmVhdGUnLFxuICAgMTc1XHQgICAgbWV0aG9kOiAncG9zdCcsXG4gICAxNzZcdCAgICBkYXRhOiBkYXRhLFxuICAgMTc3XHQgIH0pXG4gICAxNzhcdH1cbiAgIDE3OVx0XG4gICAxODBcdGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrKGRhdGEpIHtcbiAgIDE4MVx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAxODJcdCAgICB1cmw6ICcvd2ViL3Rhc2svdXBkYXRlJyxcbiAgIDE4M1x0ICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgMTg0XHQgICAgZGF0YTogZGF0YVxuICAgMTg1XHQgIH0pXG4gICAxODZcdH1cbiAgIDE4N1x0XG4gICAxODhcdGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrU3RhdHVzKGlkLCBzdGF0dXMpIHtcbiAgIDE4OVx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAxOTBcdCAgICB1cmw6ICcvd2ViL3Rhc2svdXBkYXRlU3RhdHVzJyxcbiAgIDE5MVx0ICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgMTkyXHQgICAgcGFyYW1zOiB7IGlkLCBzdGF0dXMgfVxuICAgMTkzXHQgIH0pXG4gICAxOTRcdH1cbiAgIDE5NVx0XG4gICAxOTZcdGV4cG9ydCBmdW5jdGlvbiBzZXRUYXNrUmVtaW5kZXIoaWQsIHJlbWluZGVyVGltZSkge1xuICAgMTk3XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDE5OFx0ICAgIHVybDogJy93ZWIvdGFzay9zZXRSZW1pbmRlcicsXG4gICAxOTlcdCAgICBtZXRob2Q6ICdwb3N0JyxcbiAgIDIwMFx0ICAgIHBhcmFtczogeyBpZCwgcmVtaW5kZXJUaW1lIH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDM2NVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUNwbXhGZFp2SkpaZGhCS0Zzb0htTHMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkeafpeeci+abtOWkmueahEFQSeS7o+egge+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjgyYjRiNzMwLTA4NzctNGVhYi04NDQxLWU3M2JkYWVkYzk5NiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFBWEpSOFRiUmQ1cWhneURIZXoyRGJmIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL2FwaS9hcGkuanNcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiZXhwb3J0IGZ1bmN0aW9uIGZldGNoVGFza0luZm8oaWQpIHtcXG4gIHJldHVybiByZXF1ZXN0KHtcXG4gICAgdXJsOiAnL3dlYi90YXNrL2luZm8vJyArIGlkLFxcbiAgICBtZXRob2Q6ICdnZXQnLFxcbiAgfSlcXG59XCIsIFwibmV3X3N0clwiOiBcImV4cG9ydCBmdW5jdGlvbiBmZXRjaFRhc2tJbmZvKGlkKSB7XFxuICByZXR1cm4gcmVxdWVzdCh7XFxuICAgIHVybDogJy93ZWIvdGFzay9pbmZvLycgKyBpZCxcXG4gICAgbWV0aG9kOiAnZ2V0JyxcXG4gIH0pXFxufVxcblxcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFNtYXJ0U29ydFRhc2tzKCkge1xcbiAgcmV0dXJuIHJlcXVlc3Qoe1xcbiAgICB1cmw6ICcvd2ViL3Rhc2svc21hcnRTb3J0JyxcXG4gICAgbWV0aG9kOiAnZ2V0JyxcXG4gIH0pXFxufVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMjI2LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDIzMX1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi546w5Zyo5oiR5bCG5re75Yqg5pm66IO95o6S5bqP55qEQVBJ5pa55rOV77yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvYXBpL2FwaS5qczpcbiAgIDIwMFx0ICAgIHBhcmFtczogeyBpZCwgcmVtaW5kZXJUaW1lIH1cbiAgIDIwMVx0ICB9KVxuICAgMjAyXHR9XG4gICAyMDNcdFxuICAgMjA0XHRleHBvcnQgZnVuY3Rpb24gZGVsZXRlVGFzayhpZCkge1xuICAgMjA1XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDIwNlx0ICAgIHVybDogJy93ZWIvdGFzay9kZWxldGUvJyArIGlkLFxuICAgMjA3XHQgICAgbWV0aG9kOiAncG9zdCcsXG4gICAyMDhcdCAgfSlcbiAgIDIwOVx0fVxuICAgMjEwXHRcbiAgIDIxMVx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cyhwYXJhbXMpIHtcbiAgIDIxMlx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAyMTNcdCAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdEFsbEJ5U3RhdHVzJyxcbiAgIDIxNFx0ICAgIG1ldGhvZDogJ2dldCcsXG4gICAyMTVcdCAgICBwYXJhbXM6IHBhcmFtcyxcbiAgIDIxNlx0ICB9KVxuICAgMjE3XHR9XG4gICAyMThcdFxuICAgMjE5XHRleHBvcnQgZnVuY3Rpb24gZmV0Y2hBbGxUYXNrTGlzdCgpIHtcbiAgIDIyMFx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAyMjFcdCAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdEFsbCcsXG4gICAyMjJcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMjIzXHQgIH0pXG4gICAyMjRcdH1cbiAgIDIyNVx0XG4gICAyMjZcdGV4cG9ydCBmdW5jdGlvbiBmZXRjaFRhc2tJbmZvKGlkKSB7XG4gICAyMjdcdCAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgMjI4XHQgICAgdXJsOiAnL3dlYi90YXNrL2luZm8vJyArIGlkLFxuICAgMjI5XHQgICAgbWV0aG9kOiAnZ2V0JyxcbiAgIDIzMFx0ICB9KVxuICAgMjMxXHR9XG4gICAyMzJcdFxuICAgMjMzXHQvLyDlronmjpJcbiAgIDIzNFx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoU2NoZWR1bGVMaXN0KHBhcmFtcykge1xuICAgMjM1XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDIzNlx0ICAgIHVybDogJy93ZWIvc2NoZWR1bGUvbGlzdCcsXG4gICAyMzdcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMjM4XHQgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAyMzlcdCAgfSlcbiAgIDI0MFx0fVxuICAgMjQxXHRcbiAgIDI0Mlx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoVXNlclNjaGVkdWxlTGlzdChwYXJhbXMpIHtcbiAgIDI0M1x0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAyNDRcdCAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL3VzZXIvbGlzdCcsXG4gICAyNDVcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMjQ2XHQgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAyNDdcdCAgfSlcbiAgIDI0OFx0fVxuICAgMjQ5XHRcbiAgIDI1MFx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoTW9udGhTY2hlZHVsZUxpc3QoeWVhck1vbnRoKSB7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzNjVcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFIYUN2cVZpck56NG9BcWFuUzUzWGt1In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiLnjrDlnKjmiJHlsIbmt7vliqDmmbrog73mjpLluo/nmoRBUEnmlrnms5XvvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3NDQ1MWRkOC0wN2QxLTRlOGItOWRkZi0xMGZkZWIyZTYxM2YiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxRTUyR2tWbm04SkI2eWY3Y3F5Rm8yaSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL3ZpZXdzL3Rhc2svaW5kZXgudnVlXCIsIFwidmlld19yYW5nZVwiOiBbMSwgNTBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIDUuIOWcqOWJjeerr+S7u+WKoeWIl+ihqOmhtemdoua3u+WKoOaZuuiDveaOkuW6j+aMiemSrlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL2FwaS9hcGkuanMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIyMlx0ICAgIG1ldGhvZDogJ2dldCcsXG4gICAyMjNcdCAgfSlcbiAgIDIyNFx0fVxuICAgMjI1XHRcbiAgIDIyNlx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoVGFza0luZm8oaWQpIHtcbiAgIDIyN1x0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAyMjhcdCAgICB1cmw6ICcvd2ViL3Rhc2svaW5mby8nICsgaWQsXG4gICAyMjlcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMjMwXHQgIH0pXG4gICAyMzFcdH1cbiAgIDIzMlx0XG4gICAyMzNcdGV4cG9ydCBmdW5jdGlvbiBmZXRjaFNtYXJ0U29ydFRhc2tzKCkge1xuICAgMjM0XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDIzNVx0ICAgIHVybDogJy93ZWIvdGFzay9zbWFydFNvcnQnLFxuICAgMjM2XHQgICAgbWV0aG9kOiAnZ2V0JyxcbiAgIDIzN1x0ICB9KVxuICAgMjM4XHR9XG4gICAyMzlcdFxuICAgMjQwXHQvLyDlronmjpJcbiAgIDI0MVx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoU2NoZWR1bGVMaXN0KHBhcmFtcykge1xuICAgMjQyXHQgIHJldHVybiByZXF1ZXN0KHtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUFYSlI4VGJSZDVxaGd5REhlejJEYmYifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IiMjIyA1LiDlnKjliY3nq6/ku7vliqHliJfooajpobXpnaLmt7vliqDmmbrog73mjpLluo/mjInpkq5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmNzBiMGViMS1mMDFiLTRlODEtYjc5Mi05YjZlZWE1ZjNhYmMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxMWVvZm1VTjNzeHRZc3VnQ1J0ZVRydSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL3ZpZXdzL3Rhc2svaW5kZXgudnVlXCIsIFwidmlld19yYW5nZVwiOiBbMjAwLCAyNTBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi6K6p5oiR5p+l55yL5LiA5LiL6ISa5pys6YOo5YiG77yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvdmlld3MvdGFzay9pbmRleC52dWU6XG4gICAgIDFcdDx0ZW1wbGF0ZT7CoFxuICAgICAyXHQgICAgPGRpdiBjbGFzcz1cImFwcC1jb250YWluZXJcIj5cbiAgICAgM1x0ICAgICAgPGVsLWNhcmQgY2xhc3M9XCJmaWx0ZXItY29udGFpbmVyXCIgc2hhZG93PVwibmV2ZXJcIj5cbiAgICAgNFx0ICAgICAgICA8ZGl2PlxuICAgICA1XHQgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXNlYXJjaFwiPjwvaT5cbiAgICAgNlx0ICAgICAgICAgIDxzcGFuPuetm+mAieaQnOe0ojwvc3Bhbj5cbiAgICAgN1x0ICAgICAgICA8L2Rpdj5cbiAgICAgOFx0ICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogMTVweFwiPlxuICAgICA5XHQgICAgICAgICAgPGVsLWZvcm0gOmlubGluZT1cInRydWVcIiA6bW9kZWw9XCJsaXN0UXVlcnlcIiBzaXplPVwic21hbGxcIiBsYWJlbC13aWR0aD1cIjEyMHB4XCI+XG4gICAgMTBcdCAgICAgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLliIbnsbvvvJpcIj5cbiAgICAxMVx0ICAgICAgICAgICAgICA8ZWwtc2VsZWN0IGZpbHRlcmFibGUgY2xlYXJhYmxlIHYtbW9kZWw9XCJsaXN0UXVlcnkuY2F0ZWdvcnlJZFwiIEBjaGFuZ2U9XCJnZXRMaXN0XCIgcGxhY2Vob2xkZXI9XCLlhajpg6hcIj5cbiAgICAxMlx0ICAgICAgICAgICAgICAgIDxlbC1vcHRpb24gdi1mb3I9XCJpdGVtIGluIGNhdGVnb3J5TGlzdFwiXG4gICAgMTNcdCAgICAgICAgICAgICAgICA6a2V5PVwiaXRlbS5pZFwiXG4gICAgMTRcdCAgICAgICAgICAgICAgICA6bGFiZWw9XCJpdGVtLm5hbWVcIlxuICAgIDE1XHQgICAgICAgICAgICAgICAgOnZhbHVlPVwiaXRlbS5pZFwiPlxuICAgIDE2XHQgICAgICAgICAgICAgICAgPC9lbC1vcHRpb24+XG4gICAgMTdcdCAgICAgICAgICAgICAgPC9lbC1zZWxlY3Q+XG4gICAgMThcdCAgICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgIDE5XHQgICAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5YWz6ZSu5a2X77yaXCI+XG4gICAgMjBcdCAgICAgICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc2VhcmNoS2V5XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXlhbPplK7lrZdcIiBjbGVhcmFibGU+PC9lbC1pbnB1dD5cbiAgICAyMVx0ICAgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgMjJcdCAgICAgICAgICAgIDxlbC1idXR0b25cbiAgICAyM1x0ICAgICAgICAgICAgICBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxNXB4XCJcbiAgICAyNFx0ICAgICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1yZWZyZXNoXCJcbiAgICAyNVx0ICAgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVSZXNldFNlYXJjaCgpXCJcbiAgICAyNlx0ICAgICAgICAgICAgICBzaXplPVwic21hbGxcIj5cbiAgICAyN1x0ICAgICAgICAgICAgICDph43nva5cbiAgICAyOFx0ICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMjlcdCAgICAgICAgICAgIDxlbC1idXR0b25cbiAgICAzMFx0ICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgMzFcdCAgICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAzMlx0ICAgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVTZWFyY2hMaXN0KClcIlxuICAgIDMzXHQgICAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiPlxuICAgIDM0XHQgICAgICAgICAgICAgIOafpeivouaQnOe0olxuICAgIDM1XHQgICAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAzNlx0ICAgICAgICAgIDwvZWwtZm9ybT5cbiAgICAzN1x0ICAgICAgICA8L2Rpdj5cbiAgICAzOFx0ICAgICAgPC9lbC1jYXJkPlxuICAgIDM5XHQgICAgICA8ZWwtY2FyZCBjbGFzcz1cIm9wZXJhdGUtY29udGFpbmVyXCIgc2hhZG93PVwibmV2ZXJcIj5cbiAgICA0MFx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tdGlja2V0c1wiPjwvaT5cbiAgICA0MVx0ICAgICAgICA8c3Bhbj7ku7vliqHliJfooag8L3NwYW4+PGVsLXRhZyB0eXBlPVwiaW5mb1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IDEwcHg7XCIgY2xhc3M9XCJlbC1pY29uLWluZm9cIj7lt7LmjInkvJjlhYjnuqfku47pq5jliLDkvY7mjpLliJc8L2VsLXRhZz5cbiAgICA0Mlx0ICAgICAgICA8ZWwtYnV0dG9uIHNpemU9XCJzbWFsbFwiIGNsYXNzPVwiYnRuLWFkZFwiIEBjbGljaz1cImhhbmRsZUFkZCgpXCIgc3R5bGU9XCJtYXJnaW4tbGVmdDogMjBweFwiIHR5cGU9XCJzdWNjZXNzXCI+PGkgY2xhc3M9XCJlbC1pY29uLXBsdXNcIj7liJvlu7rku7vliqE8L2k+PC9lbC1idXR0b24+XG4gICAgNDNcdCAgICAgIDwvZWwtY2FyZD5cbiAgICA0NFx0ICAgICAgPGRpdiBjbGFzcz1cInRhYmxlLWNvbnRhaW5lclwiPlxuICAgIDQ1XHQgICAgICAgIDxlbC10YWJsZSByZWY9XCJhZG1pblRhYmxlXCJcbiAgICA0Nlx0ICAgICAgICAgICAgICAgICAgOmRhdGE9XCJsaXN0XCJcbiAgICA0N1x0ICAgICAgICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIlxuICAgIDQ4XHQgICAgICAgICAgICAgICAgICB2LWxvYWRpbmc9XCJsaXN0TG9hZGluZ1wiIHN0cmlwZT5cbiAgICA0OVx0ICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gbGFiZWw9XCLnvJblj7dcIiB3aWR0aD1cIjEwMFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgNTBcdCAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy5pZH19PC90ZW1wbGF0ZT5cblRvdGFsIGxpbmVzIGluIGZpbGU6IDQ5OFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUU1MkdrVm5tOEpCNnlmN2NxeUZvMmkifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkeafpeeci+S4gOS4i+iEmuacrOmDqOWIhu+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijc5ZjVhYjJlLWEyMDktNGIyNy04ODEwLTg0OGYzOTdlNmFkMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFScHF4WlFOQzFkTk4xOWZVV2hTRXBSIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3MvdGFzay9pbmRleC52dWVcIiwgXCJ2aWV3X3JhbmdlXCI6IFszMDAsIDM1MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLorqnmiJHmn6XnnIvmlrnms5Xpg6jliIbvvJpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy90YXNrL2luZGV4LnZ1ZTpcbiAgIDIwMFx0ICAgICAgPC9lbC1kaWFsb2c+XG4gICAyMDFcdCAgICA8L2Rpdj5cbiAgIDIwMlx0ICA8L3RlbXBsYXRlPlxuICAgMjAzXHQgIDxzY3JpcHQ+XG4gICAyMDRcdCAgICBpbXBvcnQge2ZldGNoVGFza0xpc3QsY3JlYXRlVGFzayx1cGRhdGVUYXNrLGRlbGV0ZVRhc2ssZmV0Y2hBbGxDYXRlZ29yeUxpc3QsIGZldGNoQWxsUHJpb3JpdHlMaXN0LCBmZXRjaEFsbFJlc291cmNlTGlzdH0gZnJvbSAnQC9hcGkvYXBpJztcbiAgIDIwNVx0ICAgIGltcG9ydCB7ZmV0Y2hBbGxVc2VyTGlzdH0gZnJvbSAnQC9hcGkvbG9naW4nO1xuICAgMjA2XHRcbiAgIDIwN1x0ICAgIGltcG9ydCB7Zm9ybWF0RGF0ZX0gZnJvbSAnQC91dGlscy9kYXRlJztcbiAgIDIwOFx0XG4gICAyMDlcdCAgICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgMjEwXHQgICAgICBwYWdlTnVtOiAxLFxuICAgMjExXHQgICAgICBwYWdlU2l6ZTogMTAsXG4gICAyMTJcdCAgICAgIHNlYXJjaEtleTogbnVsbCxcbiAgIDIxM1x0ICAgICAgY2F0ZWdvcnlJZDogbnVsbCxcbiAgIDIxNFx0ICAgIH07XG4gICAyMTVcdCAgICBjb25zdCBkZWZhdWx0QWRtaW4gPSB7XG4gICAyMTZcdCAgICAgIGlkOiBudWxsLFxuICAgMjE3XHQgICAgICB0aXRsZTogbnVsbCxcbiAgIDIxOFx0ICAgICAgY29kZTogbnVsbCxcbiAgIDIxOVx0ICAgICAgY2F0ZWdvcnlJZDogbnVsbCxcbiAgIDIyMFx0ICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAyMjFcdCAgICAgIHN0YXR1czogbnVsbCxcbiAgIDIyMlx0ICAgICAgaW1wb3J0YW5jZUlkOiBudWxsLFxuICAgMjIzXHQgICAgICBleGlnZW5jeUlkOiBudWxsLFxuICAgMjI0XHQgICAgICByZXNvdXJjZXNEYXRhOiBudWxsLFxuICAgMjI1XHQgICAgICB1c2VyRGF0YTogbnVsbCxcbiAgIDIyNlx0ICAgICAgdGltZVNwZW5kOiBudWxsLFxuICAgMjI3XHQgICAgICBkZWFkbGluZTogbnVsbCxcbiAgIDIyOFx0ICAgICAgdXNlcklkczogbnVsbCxcbiAgIDIyOVx0ICAgICAgcmVzb3VyY2VJZHM6IG51bGwsXG4gICAyMzBcdCAgICB9O1xuICAgMjMxXHQgICAgZXhwb3J0IGRlZmF1bHQge1xuICAgMjMyXHQgICAgICBuYW1lOiAnVGFza0xpc3QnLFxuICAgMjMzXHQgICAgICBkYXRhKCkge1xuICAgMjM0XHQgICAgICAgIHJldHVybiB7XG4gICAyMzVcdCAgICAgICAgICBsaXN0UXVlcnk6IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpLFxuICAgMjM2XHQgICAgICAgICAgbGlzdDogbnVsbCxcbiAgIDIzN1x0ICAgICAgICAgIHRvdGFsOiBudWxsLFxuICAgMjM4XHQgICAgICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLFxuICAgMjM5XHQgICAgICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAyNDBcdCAgICAgICAgICBhZG1pbjogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEFkbWluKSxcbiAgIDI0MVx0ICAgICAgICAgIGlzRWRpdDogZmFsc2UsXG4gICAyNDJcdCAgICAgICAgICBydWxlczoge1xuICAgMjQzXHQgICAgICAgICAgICB0aXRsZTogW1xuICAgMjQ0XHQgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXku7vliqHlkI3np7AnLCB0cmlnZ2VyOiAnYmx1cicgfVxuICAgMjQ1XHQgICAgICAgICAgICBdLFxuICAgMjQ2XHQgICAgICAgICAgICBjYXRlZ29yeUlkOiBbXG4gICAyNDdcdCAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeS7u+WKoeexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH1cbiAgIDI0OFx0ICAgICAgICAgICAgXSxcbiAgIDI0OVx0ICAgICAgICAgICAgaW1wb3J0YW5jZUlkOiBbXG4gICAyNTBcdCAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqemHjeimgeaApycsIHRyaWdnZXI6ICdjaGFuZ2UnIH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDQ5OFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTFlb2ZtVU4zc3h0WXN1Z0NSdGVUcnUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IuiuqeaIkeafpeeci+aWueazlemDqOWIhu+8mlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImIxMjBlMzkzLTE1YjItNDdiNC04ZThkLTEzNTYxYTE1MjNmNyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE0M3g0akFBeWRZZmVzSEdZckZENDNSIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL3ZpZXdzL3Rhc2svaW5kZXgudnVlXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgIDxlbC1jYXJkIGNsYXNzPVxcXCJvcGVyYXRlLWNvbnRhaW5lclxcXCIgc2hhZG93PVxcXCJuZXZlclxcXCI+XFxuICAgICAgICA8aSBjbGFzcz1cXFwiZWwtaWNvbi10aWNrZXRzXFxcIj48L2k+XFxuICAgICAgICA8c3Bhbj5cXHU0ZWZiXFx1NTJhMVxcdTUyMTdcXHU4ODY4PC9zcGFuPjxlbC10YWcgdHlwZT1cXFwiaW5mb1xcXCIgc3R5bGU9XFxcIm1hcmdpbi1sZWZ0OiAxMHB4O1xcXCIgY2xhc3M9XFxcImVsLWljb24taW5mb1xcXCI+XFx1NWRmMlxcdTYzMDlcXHU0ZjE4XFx1NTE0OFxcdTdlYTdcXHU0ZWNlXFx1OWFkOFxcdTUyMzBcXHU0ZjRlXFx1NjM5MlxcdTUyMTc8L2VsLXRhZz5cXG4gICAgICAgIDxlbC1idXR0b24gc2l6ZT1cXFwic21hbGxcXFwiIGNsYXNzPVxcXCJidG4tYWRkXFxcIiBAY2xpY2s9XFxcImhhbmRsZUFkZCgpXFxcIiBzdHlsZT1cXFwibWFyZ2luLWxlZnQ6IDIwcHhcXFwiIHR5cGU9XFxcInN1Y2Nlc3NcXFwiPjxpIGNsYXNzPVxcXCJlbC1pY29uLXBsdXNcXFwiPlxcdTUyMWJcXHU1ZWZhXFx1NGVmYlxcdTUyYTE8L2k+PC9lbC1idXR0b24+XFxuICAgICAgPC9lbC1jYXJkPlwiLCBcIm5ld19zdHJcIjogXCIgICAgICA8ZWwtY2FyZCBjbGFzcz1cXFwib3BlcmF0ZS1jb250YWluZXJcXFwiIHNoYWRvdz1cXFwibmV2ZXJcXFwiPlxcbiAgICAgICAgPGkgY2xhc3M9XFxcImVsLWljb24tdGlja2V0c1xcXCI+PC9pPlxcbiAgICAgICAgPHNwYW4+XFx1NGVmYlxcdTUyYTFcXHU1MjE3XFx1ODg2ODwvc3Bhbj48ZWwtdGFnIHR5cGU9XFxcImluZm9cXFwiIHN0eWxlPVxcXCJtYXJnaW4tbGVmdDogMTBweDtcXFwiIGNsYXNzPVxcXCJlbC1pY29uLWluZm9cXFwiPlxcdTVkZjJcXHU2MzA5XFx1NGYxOFxcdTUxNDhcXHU3ZWE3XFx1NGVjZVxcdTlhZDhcXHU1MjMwXFx1NGY0ZVxcdTYzOTJcXHU1MjE3PC9lbC10YWc+XFxuICAgICAgICA8ZWwtYnV0dG9uIHNpemU9XFxcInNtYWxsXFxcIiBjbGFzcz1cXFwiYnRuLWFkZFxcXCIgQGNsaWNrPVxcXCJoYW5kbGVBZGQoKVxcXCIgc3R5bGU9XFxcIm1hcmdpbi1sZWZ0OiAyMHB4XFxcIiB0eXBlPVxcXCJzdWNjZXNzXFxcIj48aSBjbGFzcz1cXFwiZWwtaWNvbi1wbHVzXFxcIj5cXHU1MjFiXFx1NWVmYVxcdTRlZmJcXHU1MmExPC9pPjwvZWwtYnV0dG9uPlxcbiAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVxcXCJzbWFsbFxcXCIgQGNsaWNrPVxcXCJoYW5kbGVTbWFydFNvcnQoKVxcXCIgc3R5bGU9XFxcIm1hcmdpbi1sZWZ0OiAxMHB4XFxcIiB0eXBlPVxcXCJwcmltYXJ5XFxcIj48aSBjbGFzcz1cXFwiZWwtaWNvbi1zb3J0XFxcIj5cXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmPC9pPjwvZWwtYnV0dG9uPlxcbiAgICAgIDwvZWwtY2FyZD5cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDM5LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDQzfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiLnjrDlnKjmiJHlsIbkv67mlLnliY3nq6/pobXpnaLvvIzmt7vliqDmmbrog73mjpLluo/mjInpkq7vvJpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy90YXNrL2luZGV4LnZ1ZTpcbiAgIDMwMFx0ICAgICAgICAgIH1cbiAgIDMwMVx0ICAgICAgICAgIGlmIChzdGF0dXMgPT0gNCkge1xuICAgMzAyXHQgICAgICAgICAgICByZXR1cm4gJ+W3suWujOaIkCc7XG4gICAzMDNcdCAgICAgICAgICB9XG4gICAzMDRcdCAgICAgICAgICBpZiAoc3RhdHVzID09IDUpIHtcbiAgIDMwNVx0ICAgICAgICAgICAgcmV0dXJuICflt7LpgL7mnJ8nO1xuICAgMzA2XHQgICAgICAgICAgfVxuICAgMzA3XHQgICAgICAgICAgcmV0dXJuICfmnKrnn6UnO1xuICAgMzA4XHQgICAgICAgIH0sXG4gICAzMDlcdCAgICAgIH0sXG4gICAzMTBcdCAgICAgIGNyZWF0ZWQoKSB7XG4gICAzMTFcdCAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAzMTJcdCAgICAgICAgdGhpcy5nZXRDYXRlZ29yeUxpc3QoKTtcbiAgIDMxM1x0ICAgICAgICB0aGlzLmdldFByaW9yaXR5TGlzdCgpO1xuICAgMzE0XHQgICAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTtcbiAgIDMxNVx0ICAgICAgICB0aGlzLmdldFJlc291cmNlTGlzdCgpO1xuICAgMzE2XHQgICAgICB9LFxuICAgMzE3XHQgICAgICBtZXRob2RzOiB7XG4gICAzMThcdCAgICAgICAgZ2V0VXNlckxpc3QoKSB7XG4gICAzMTlcdCAgICAgICAgICBmZXRjaEFsbFVzZXJMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAzMjBcdCAgICAgICAgICAgIHRoaXMudXNlckxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgMzIxXHQgICAgICAgICAgfSk7XG4gICAzMjJcdCAgICAgICAgfSxcbiAgIDMyM1x0ICAgICAgICBnZXRSZXNvdXJjZUxpc3QoKSB7XG4gICAzMjRcdCAgICAgICAgICBmZXRjaEFsbFJlc291cmNlTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgMzI1XHQgICAgICAgICAgICB0aGlzLnJlc291cmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAzMjZcdCAgICAgICAgICB9KTtcbiAgIDMyN1x0ICAgICAgICB9LFxuICAgMzI4XHQgICAgICAgIGdldFByaW9yaXR5TGlzdCgpIHtcbiAgIDMyOVx0ICAgICAgICAgIGZldGNoQWxsUHJpb3JpdHlMaXN0KHt0eXBlOiAxfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAzMzBcdCAgICAgICAgICAgIHRoaXMuaW1wb3J0YW5jZUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgMzMxXHQgICAgICAgICAgfSk7XG4gICAzMzJcdCAgICAgICAgICBmZXRjaEFsbFByaW9yaXR5TGlzdCh7dHlwZTogMn0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgMzMzXHQgICAgICAgICAgICB0aGlzLmV4aWdlbmN5TGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAzMzRcdCAgICAgICAgICB9KTtcbiAgIDMzNVx0ICAgICAgICB9LFxuICAgMzM2XHQgICAgICAgIGhhbmRsZVJlc2V0U2VhcmNoKCkge1xuICAgMzM3XHQgICAgICAgICAgdGhpcy5saXN0UXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KTtcbiAgIDMzOFx0ICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpXG4gICAzMzlcdCAgICAgICAgfSxcbiAgIDM0MFx0ICAgICAgICBoYW5kbGVVcGRhdGVTdGF0dXMocm93KSB7XG4gICAzNDFcdCAgICAgICAgICB0aGlzLiRjb25maXJtKCfnoa7orqTmk43kvZw/JywgJ+aPkOekuicsIHtcbiAgIDM0Mlx0ICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLFxuICAgMzQzXHQgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJyxcbiAgIDM0NFx0ICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnXG4gICAzNDVcdCAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgIDM0Nlx0ICAgICAgICAgICAgdXBkYXRlVGFzayhyb3cpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgMzQ3XHQgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgMzQ4XHQgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgMzQ5XHQgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+aTjeS9nOaIkOWKnyEnXG4gICAzNTBcdCAgICAgICAgICAgICAgfSk7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA0OThcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFScHF4WlFOQzFkTk4xOWZVV2hTRXBSIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiLnjrDlnKjmiJHlsIbkv67mlLnliY3nq6/pobXpnaLvvIzmt7vliqDmmbrog73mjpLluo/mjInpkq7vvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIzN2Q0ZWEwZS0xYTAxLTQyM2ItODU0OS0xYjUwOTgyYWYxNmIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxN3lwaVhMYXN0dXU3bTMybllDNnV2NCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy90YXNrL2luZGV4LnZ1ZVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgIDxzY3JpcHQ+XFxuICAgIGltcG9ydCB7ZmV0Y2hUYXNrTGlzdCxjcmVhdGVUYXNrLHVwZGF0ZVRhc2ssZGVsZXRlVGFzayxmZXRjaEFsbENhdGVnb3J5TGlzdCwgZmV0Y2hBbGxQcmlvcml0eUxpc3QsIGZldGNoQWxsUmVzb3VyY2VMaXN0fSBmcm9tICdAL2FwaS9hcGknO1wiLCBcIm5ld19zdHJcIjogXCIgIDxzY3JpcHQ+XFxuICAgIGltcG9ydCB7ZmV0Y2hUYXNrTGlzdCxjcmVhdGVUYXNrLHVwZGF0ZVRhc2ssZGVsZXRlVGFzayxmZXRjaEFsbENhdGVnb3J5TGlzdCwgZmV0Y2hBbGxQcmlvcml0eUxpc3QsIGZldGNoQWxsUmVzb3VyY2VMaXN0LCBmZXRjaFNtYXJ0U29ydFRhc2tzfSBmcm9tICdAL2FwaS9hcGknO1wiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMjAzLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDIwNH1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi546w5Zyo5oiR5bCG5re75Yqg5a+85YWl5pm66IO95o6S5bqPQVBJ5ZKM5a6e546w5pm66IO95o6S5bqP5pa55rOV77yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3MvdGFzay9pbmRleC52dWUuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAzNVx0ICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMzZcdCAgICAgICAgICA8L2VsLWZvcm0+XG4gICAgMzdcdCAgICAgICAgPC9kaXY+XG4gICAgMzhcdCAgICAgIDwvZWwtY2FyZD5cbiAgICAzOVx0ICAgICAgPGVsLWNhcmQgY2xhc3M9XCJvcGVyYXRlLWNvbnRhaW5lclwiIHNoYWRvdz1cIm5ldmVyXCI+XG4gICAgNDBcdCAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXRpY2tldHNcIj48L2k+XG4gICAgNDFcdCAgICAgICAgPHNwYW4+5Lu75Yqh5YiX6KGoPC9zcGFuPjxlbC10YWcgdHlwZT1cImluZm9cIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxMHB4O1wiIGNsYXNzPVwiZWwtaWNvbi1pbmZvXCI+5bey5oyJ5LyY5YWI57qn5LuO6auY5Yiw5L2O5o6S5YiXPC9lbC10YWc+XG4gICAgNDJcdCAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVwic21hbGxcIiBjbGFzcz1cImJ0bi1hZGRcIiBAY2xpY2s9XCJoYW5kbGVBZGQoKVwiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IDIwcHhcIiB0eXBlPVwic3VjY2Vzc1wiPjxpIGNsYXNzPVwiZWwtaWNvbi1wbHVzXCI+5Yib5bu65Lu75YqhPC9pPjwvZWwtYnV0dG9uPlxuICAgIDQzXHQgICAgICAgIDxlbC1idXR0b24gc2l6ZT1cInNtYWxsXCIgQGNsaWNrPVwiaGFuZGxlU21hcnRTb3J0KClcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxMHB4XCIgdHlwZT1cInByaW1hcnlcIj48aSBjbGFzcz1cImVsLWljb24tc29ydFwiPuaZuuiDveaOkuW6jzwvaT48L2VsLWJ1dHRvbj5cbiAgICA0NFx0ICAgICAgPC9lbC1jYXJkPlxuICAgIDQ1XHQgICAgICA8ZGl2IGNsYXNzPVwidGFibGUtY29udGFpbmVyXCI+XG4gICAgNDZcdCAgICAgICAgPGVsLXRhYmxlIHJlZj1cImFkbWluVGFibGVcIlxuICAgIDQ3XHQgICAgICAgICAgICAgICAgICA6ZGF0YT1cImxpc3RcIlxuICAgIDQ4XHQgICAgICAgICAgICAgICAgICBzdHlsZT1cIndpZHRoOiAxMDAlO1wiXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE0M3g0akFBeWRZZmVzSEdZckZENDNSIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiLnjrDlnKjmiJHlsIbmt7vliqDlr7zlhaXmmbrog73mjpLluo9BUEnlkozlrp7njrDmmbrog73mjpLluo/mlrnms5XvvJpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJlYjQwZjM2Mi1jNDQ3LTQ0NWMtOGUwMS05MzYwZWY5ODE4Y2EiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNEdFYUgyTHZCZlNDR25oaEhoQTJ2dyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy90YXNrL2luZGV4LnZ1ZVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgIGdldExpc3QoKSB7XFxuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xcbiAgICAgICAgICBmZXRjaFRhc2tMaXN0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHtcXG4gICAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xcbiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xcbiAgICAgICAgICB9KTtcXG4gICAgICAgIH0sXCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgZ2V0TGlzdCgpIHtcXG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XFxuICAgICAgICAgIGZldGNoVGFza0xpc3QodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xcbiAgICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcXG4gICAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XFxuICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgfSxcXG4gICAgICAgIFxcbiAgICAgICAgLy8gXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTY1YjlcXHU2Y2Q1XFxuICAgICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XFxuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xcbiAgICAgICAgICBmZXRjaFNtYXJ0U29ydFRhc2tzKCkudGhlbihyZXNwb25zZSA9PiB7XFxuICAgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xcbiAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGE7XFxuICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XFxuICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTViOGNcXHU2MjEwISdcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xcbiAgICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcXG4gICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcXG4gICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTU5MzFcXHU4ZDI1OiAnICsgZXJyb3JcXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgfSk7XFxuICAgICAgICB9LFwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMzcwLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDM3N31dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50Ijoi5pyA5ZCO77yM5oiR5bCG5re75Yqg5pm66IO95o6S5bqP5pa55rOV55qE5a6e546w77yaXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3MvdGFzay9pbmRleC52dWUuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIwMFx0ICAgICAgICA8L3NwYW4+XG4gICAyMDFcdCAgICAgIDwvZWwtZGlhbG9nPlxuICAgMjAyXHQgICAgPC9kaXY+XG4gICAyMDNcdCAgPC90ZW1wbGF0ZT5cbiAgIDIwNFx0ICA8c2NyaXB0PlxuICAgMjA1XHQgICAgaW1wb3J0IHtmZXRjaFRhc2tMaXN0LGNyZWF0ZVRhc2ssdXBkYXRlVGFzayxkZWxldGVUYXNrLGZldGNoQWxsQ2F0ZWdvcnlMaXN0LCBmZXRjaEFsbFByaW9yaXR5TGlzdCwgZmV0Y2hBbGxSZXNvdXJjZUxpc3QsIGZldGNoU21hcnRTb3J0VGFza3N9IGZyb20gJ0AvYXBpL2FwaSc7XG4gICAyMDZcdCAgICBpbXBvcnQge2ZldGNoQWxsVXNlckxpc3R9IGZyb20gJ0AvYXBpL2xvZ2luJztcbiAgIDIwN1x0XG4gICAyMDhcdCAgICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG4gICAyMDlcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxN3lwaVhMYXN0dXU3bTMybllDNnV2NCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0Ijoi5pyA5ZCO77yM5oiR5bCG5re75Yqg5pm66IO95o6S5bqP5pa55rOV55qE5a6e546w77yaXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZWU3ZDRkNTgtNmJhMy00YjIxLTg5MTgtNDM5OTE3MGE3MzhlIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMg5oC757uTXG5cbuaIkeW3sue7j+aIkOWKn+WunueOsOS6huaZuuiDveaOkuW6j+WKn+iDve+8jOS7peS4i+aYr+aIkeaJgOWBmueahOabtOaUue+8mlxuXG4xLiDlnKggYFRhc2tTZXJ2aWNlYCDmjqXlj6PkuK3mt7vliqDkuoYgYHNtYXJ0U29ydFRhc2tzKClgIOaWueazlVxuMi4g5ZyoIGBUYXNrU2VydmljZUltcGxgIOS4reWunueOsOS6huaZuuiDveaOkuW6j+eul+azle+8jOWMheaLrO+8mlxuICAgLSDojrflj5bmiYDmnInmnKrlrozmiJDnmoTku7vliqHvvIjlvoXlip7jgIHlt7LlronmjpLjgIHov5vooYzkuK3jgIHlt7LpgL7mnJ/vvIlcbiAgIC0g6K6h566X5q+P5Liq5Lu75Yqh55qE5pm66IO95o6S5bqP5YiG5pWw77yM6ICD6JmR5Lul5LiL5Zug57Sg77yaXG4gICAgIC0g6YeN6KaB5oCn5p2D6YeNXG4gICAgIC0g57Sn5oCl5oCn5p2D6YeNXG4gICAgIC0g5oiq5q2i5pe26Ze077yI6LaK6L+R5YiG5pWw6LaK6auY77yJXG4gICAgIC0g5Lu75Yqh54q25oCB77yI5bey6YC+5pyfID4g6L+b6KGM5LitID4g5bey5a6J5o6SID4g5b6F5Yqe77yJXG4gICAgIC0g5Lu75Yqh5omA6ZyA5pe26Ze077yI6ICX5pe26LaK55+t6LaK5YWI5a6M5oiQ77yJXG4gICAtIOaMieWIhuaVsOS7jumrmOWIsOS9juaOkuW6j1xuMy4g5ZyoIGBUYXNrQ29udHJvbGxlcmAg5Lit5re75Yqg5LqGIGAvc21hcnRTb3J0YCBBUEnnq6/ngrlcbjQuIOWcqOWJjeerryBBUEkg5paH5Lu25Lit5re75Yqg5LqG6LCD55So5pm66IO95o6S5bqP55qE5pa55rOVXG41LiDlnKjliY3nq6/ku7vliqHliJfooajpobXpnaLmt7vliqDkuobmmbrog73mjpLluo/mjInpkq7lkozlpITnkIbmlrnms5Vcblxu6L+Z5Liq5pm66IO95o6S5bqP5Yqf6IO95bCG5biu5Yqp55So5oi35pu05pyJ5pWI5Zyw566h55CG5Lu75Yqh77yM5LyY5YWI5aSE55CG6YeN6KaB5LiU57Sn5oCl55qE5Lu75Yqh77yM5o+Q6auY5bel5L2c5pWI546H44CCXG5cbuaYr+WQpumcgOimgeaIkeWvueWunueOsOi/m+ihjOS7u+S9leiwg+aVtOaIluino+mHiu+8n1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL3ZpZXdzL3Rhc2svaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA0MzhcdCAgICAgICAgICB9XG4gICA0MzlcdCAgICAgICAgICB0aGlzLmFkbWluID0gT2JqZWN0LmFzc2lnbih7fSxyb3cpO1xuICAgNDQwXHQgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgIDQ0MVx0ICAgICAgICB9LFxuICAgNDQyXHQgICAgICAgIGdldExpc3QoKSB7XG4gICA0NDNcdCAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgIDQ0NFx0ICAgICAgICAgIGZldGNoVGFza0xpc3QodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgNDQ1XHQgICAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA0NDZcdCAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgIDQ0N1x0ICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICA0NDhcdCAgICAgICAgICB9KTtcbiAgIDQ0OVx0ICAgICAgICB9LFxuICAgNDUwXHRcbiAgIDQ1MVx0ICAgICAgICAvLyDmmbrog73mjpLluo/mlrnms5VcbiAgIDQ1Mlx0ICAgICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XG4gICA0NTNcdCAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgIDQ1NFx0ICAgICAgICAgIGZldGNoU21hcnRTb3J0VGFza3MoKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgIDQ1NVx0ICAgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgNDU2XHQgICAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgNDU3XHQgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgIDQ1OFx0ICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICA0NTlcdCAgICAgICAgICAgICAgbWVzc2FnZTogJ+aZuuiDveaOkuW6j+WujOaIkCEnXG4gICA0NjBcdCAgICAgICAgICAgIH0pO1xuICAgNDYxXHQgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgNDYyXHQgICAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA0NjNcdCAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgNDY0XHQgICAgICAgICAgICAgIHR5cGU6ICdlcnJvcicsXG4gICA0NjVcdCAgICAgICAgICAgICAgbWVzc2FnZTogJ+aZuuiDveaOkuW6j+Wksei0pTogJyArIGVycm9yXG4gICA0NjZcdCAgICAgICAgICAgIH0pO1xuICAgNDY3XHQgICAgICAgICAgfSk7XG4gICA0NjhcdCAgICAgICAgfSxcbiAgIDQ2OVx0ICAgICAgICBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlLCBmaWxlKSB7XG4gICA0NzBcdCAgICAgICAgICAvLyDlpITnkIbkuIrkvKDmiJDlip/lkI7nmoTpgLvovpHvvIzojrflj5blkI7nq6/ov5Tlm57nmoTmlofku7bot6/lvoRcbiAgIDQ3MVx0ICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcmVzcG9uc2UuZGF0YTtcbiAgIDQ3Mlx0ICAgICAgICAgIHRoaXMuYWRtaW4uaW1hZ2UgPSBgJHtwcm9jZXNzLmVudi5CQVNFX0FQSX0vJHtmaWxlUGF0aH1gO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNEdFYUgyTHZCZlNDR25oaEhoQTJ2dyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiIyMg5oC757uTXG5cbuaIkeW3sue7j+aIkOWKn+WunueOsOS6huaZuuiDveaOkuW6j+WKn+iDve+8jOS7peS4i+aYr+aIkeaJgOWBmueahOabtOaUue+8mlxuXG4xLiDlnKggYFRhc2tTZXJ2aWNlYCDmjqXlj6PkuK3mt7vliqDkuoYgYHNtYXJ0U29ydFRhc2tzKClgIOaWueazlVxuMi4g5ZyoIGBUYXNrU2VydmljZUltcGxgIOS4reWunueOsOS6huaZuuiDveaOkuW6j+eul+azle+8jOWMheaLrO+8mlxuICAgLSDojrflj5bmiYDmnInmnKrlrozmiJDnmoTku7vliqHvvIjlvoXlip7jgIHlt7LlronmjpLjgIHov5vooYzkuK3jgIHlt7LpgL7mnJ/vvIlcbiAgIC0g6K6h566X5q+P5Liq5Lu75Yqh55qE5pm66IO95o6S5bqP5YiG5pWw77yM6ICD6JmR5Lul5LiL5Zug57Sg77yaXG4gICAgIC0g6YeN6KaB5oCn5p2D6YeNXG4gICAgIC0g57Sn5oCl5oCn5p2D6YeNXG4gICAgIC0g5oiq5q2i5pe26Ze077yI6LaK6L+R5YiG5pWw6LaK6auY77yJXG4gICAgIC0g5Lu75Yqh54q25oCB77yI5bey6YC+5pyfID4g6L+b6KGM5LitID4g5bey5a6J5o6SID4g5b6F5Yqe77yJXG4gICAgIC0g5Lu75Yqh5omA6ZyA5pe26Ze077yI6ICX5pe26LaK55+t6LaK5YWI5a6M5oiQ77yJXG4gICAtIOaMieWIhuaVsOS7jumrmOWIsOS9juaOkuW6j1xuMy4g5ZyoIGBUYXNrQ29udHJvbGxlcmAg5Lit5re75Yqg5LqGIGAvc21hcnRTb3J0YCBBUEnnq6/ngrlcbjQuIOWcqOWJjeerryBBUEkg5paH5Lu25Lit5re75Yqg5LqG6LCD55So5pm66IO95o6S5bqP55qE5pa55rOVXG41LiDlnKjliY3nq6/ku7vliqHliJfooajpobXpnaLmt7vliqDkuobmmbrog73mjpLluo/mjInpkq7lkozlpITnkIbmlrnms5Vcblxu6L+Z5Liq5pm66IO95o6S5bqP5Yqf6IO95bCG5biu5Yqp55So5oi35pu05pyJ5pWI5Zyw566h55CG5Lu75Yqh77yM5LyY5YWI5aSE55CG6YeN6KaB5LiU57Sn5oCl55qE5Lu75Yqh77yM5o+Q6auY5bel5L2c5pWI546H44CCXG5cbuaYr+WQpumcgOimgeaIkeWvueWunueOsOi/m+ihjOS7u+S9leiwg+aVtOaIluino+mHiu+8n1xuXG5cbi0tLVxuXG4qWW91ciBhY2Nlc3MgZXhwaXJlcyBpbiA0IGRheXMuIFtQdXJjaGFzZSBhIHN1YnNjcmlwdGlvbl0oaHR0cHM6Ly9hcHAuYXVnbWVudGNvZGUuY29tL2FjY291bnQvcGxhbikqIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiYTQ4NTRiNTktZmQ4Yy00MGIwLWFiMjAtZjNkMzgyM2JkMGEzIiwidXVpZCI6ImE4MzhhYWJhLTk1MmItNGQyYi04YjYyLTg2M2U1YjJmYjlhZiIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0NjAwMTU0NDMyMiwidG9UaW1lc3RhbXAiOjE3NDYwMDIwNzE0NDcsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiZDBjYjE3MzUtNmEwZS00NzgxLTk5ODktOTkwOTQ3NGQ3YjRhIiwidXVpZCI6Ijk4YWEwYTdjLWE1MDMtNDJkMy1hNTdlLTgwOGVlZTlmMDM5OSIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0NjAwMjA3MTQ0NywidG9UaW1lc3RhbXAiOjE3NDYwMDIxMzQ4NjIsInNlZW5fc3RhdGUiOiJzZWVuIn1dLCJmZWVkYmFja1N0YXRlcyI6eyJ0ZW1wLWZlLTE5NTRiMDBmLWIzYjctNDU4My05YWE3LWE3MmRiNjE1ZWRiNSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZjZmY2Q0OWMtZmQzMC00MWZkLWIyODctZWU2OGM3MGM5YzI4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS01NmFmMzhmMy0xMTMzLTQyZmMtYTZlZS01NTY2NmZmNzc2MTMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWZmZTg4NGJlLWNmMDEtNDgwMS04ZDcxLTUwOWI4NzdkN2VhNSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNzcwODk3MjgtNDU2Yy00NzUzLWEwMjUtMzQwOGU0MzFiYzk1Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jNjgwN2MxMy03ODAxLTQzMzMtYmUxMi1lNGZlMDc3ZjAwNTMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTc3YjNkNjBjLTE3MDYtNGNlZC1iODBlLTZhOWIyZGNjNzFlNCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTExY2I5ZGItZGRlOS00OTUyLTlhZWMtMDRhODJhZWM0ODkzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1kOWE5ZWFlYS1iNzU5LTRiODktODBmZi0wOGQwYmUzNWE2NDQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTMwYTg0ZGQ4LTcyOTQtNGY0NC1hOThmLTFjZDZhYWM2MTBiYSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYzYyNjY0ZTAtZjcwZS00Zjk2LThlMDUtZjJkMzlmNjdmMmE2Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03ZmRiMDVhOS0yOTAxLTRjODgtODdjZi1kOTFiNGFmNjU3MDIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLThhYmJhMmE0LTI1YjItNGE2NS05MzVlLWYxOTE0OTdiZDRiNCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYzczMTQzMWMtZDJiYi00MWI3LTgzMzItMGUxMmVhMTFlNzEwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0zNDY3MWM4Ny00ZDM2LTQyNmMtOWY4YS0wNjYwNWQwZDkzMzUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTkyZWZiYTE1LTFmODAtNDZjNi05MDI2LTc1YmQ2MTIyMThjYiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtOTg5MTY4Y2QtYjgxMC00ZDAwLTllNTktZjcwYjM2ZTIyYjU2Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1hOGI5Y2Q5Yi04Y2YwLTQwMDYtOGMwMi01YWM5OTgxNmI3NmMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWIwMzZlZTg4LTE2NzgtNDZlZS1iMTdkLTU2Zjk0ZmJmYWIxMCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYzRmZjM4ZWYtMDg2MC00YjliLWIzMGQtYWEwOGViYzNmMmEyIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1hMmZmZGMzOC1kNDAxLTRkZGEtOTA0My02NTI2YWY0YTQxZGMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTNmNjI1ZTFmLTU3MmQtNDI1YS1iNmMyLTMyYzJlYjk4MmYxMCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNjRlNzNhMGItOGI3NS00MzQwLWJlNDUtZjk4YjNjZWJlNmQxIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS04MWU2ZTVlOC03YTIxLTRkN2EtOWM4YS00MGJhOGI4OGVlNmQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTBjYzJhZmZiLTQ1ZDctNGY2MS04OGJjLTk1NmRiMGRiMDM1MyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn19LCJ0b29sVXNlU3RhdGVzIjp7Ijk5MTgyNTUwLTNlYzAtNGM3Mi1hNWI4LTQ0OTRmODgxODNhZTt0b29sdV8wMVQ5MzlNbzlobWtna3k2YVB6dmZhMXUiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YVxuLi4uXG5cbmltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLklkVXRpbDtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuc2VydmljZS5VbXNBZG1pblNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLkNhdGVnb3J5O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5TY2hlZHVsZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyLlRhc2tNYXBwZXI7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuQ2F0ZWdvcnlTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlByaW9yaXR5U2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5SZXNvdXJjZXNTZXJ2aWNlO1xuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDku7vliqHooagg5pyN5Yqh5a6e546w57G7XG4gKiA8L3A+XG4gKi9cbkBTZXJ2aWNlXG5wdWJsaWMgY2xhc3MgVGFza1NlcnZpY2VJbXBsIGV4dGVuZHMgU2VydmljZUltcGw8VGFza01hcHBlciwgVGFzaz4gaW1wbGVtZW50cyBUYXNrU2VydmljZSB7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBUYXNrTWFwcGVyIHRhc2tNYXBwZXI7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBDYXRlZ29yeVNlcnZpY2UgY2F0ZWdvcnlTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgUHJpb3JpdHlTZXJ2aWNlIHByaW9yaXR5U2VydmljZTtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFVtc0FkbWluU2VydmljZSB1c2VyU2VydmljZTtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFJlc291cmNlc1NlcnZpY2UgcmVzb3VyY2VzU2VydmljZTtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBATGF6eVxuICAgIHByaXZhdGUgU2NoZWR1bGVTZXJ2aWNlIHNjaGVkdWxlU2VydmljZTtcblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBQYWdlPFRhc2tWbz4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgTG9uZyBjYXRlZ29yeUlkLCBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIC8vIOWFiOabtOaWsOaJgOacieS7u+WKoeeKtuaAgVxuICAgICAgICB1cGRhdGVBbGxUYXNrU3RhdHVzKCk7XG4gICAgICAgIFxuICAgICAgICBQYWdlPFRhc2tWbz4gcGFnZSA9IG5ldyBQYWdlPD4ocGFnZU51bSwgcGFnZVNpemUpO1xuICAgICAgICByZXR1cm4gdGFza01hcHBlci5zZWFyY2hUYXNrKHBhZ2UsIHNlYXJjaEtleSwgY2F0ZWdvcnlJZCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIExpc3Q8VGFza1ZvPiBsaXN0QWxsKEludGVnZXIgc3RhdHVzKSB7XG4gICAgICAgIC8vIOWFiOabtOaWsOaJgOacieS7u+WKoeeKtuaAgVxuICAgICAgICB1cGRhdGVBbGxUYXNrU3RhdHVzKCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFza01hcHBlci5saXN0QWxsKHN0YXR1cyk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFRhc2tWbyBnZXRJbmZvKExvbmcgaWQpIHtcbiAgICAgICAgLy8g5pu05paw5b2T5YmN5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZVRhc2tTdGF0dXModGhpcy5nZXRCeUlkKGlkKSk7XG4gICAgICAgIFxuICAgICAgICBUYXNrVm8gdGFza1ZvID0gbmV3IFRhc2tWbygpO1xuICAgICAgICBUYXNrIHRhc2sgPSB0aGlzLmdldEJ5SWQoaWQpO1xuICAgICAgICBCZWFuVXRpbHMuY29weVByb3BlcnRpZXModGFzaywgdGFza1ZvKTtcbiAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBjYXRlZ29yeVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldENhdGVnb3J5SWQoKSk7XG4gICAgICAgIHRhc2tWby5zZXRDYXRlZ29yeU5hbWUoY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgUHJpb3JpdHkgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0RXhpZ2VuY3lJZCgpKTtcbiAgICAgICAgdGFza1ZvLnNldEltcG9ydGFuY2VOYW1lKGV4aWdlbmN5UHJpb3JpdHkuZ2V0TmFtZSgpKTtcblxuICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgICAgICBTZXQ8TG9uZz4gdXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQodGFzay5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgICAgICBTZXQ8TG9uZz4gcmVzb3VyY2VJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0UmVzb3VyY2VzRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuXG4gICAgICAgIExpc3Q8VW1zQWRtaW4+IHVzZXJMaXN0ID0gdXNlclNlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFVtc0FkbWluPigpLmxhbWJkYSgpLmluKFVtc0FkbWluOjpnZXRJZCwgdXNlcklkcykpO1xuICAgICAgICBMaXN0PFJlc291cmNlcz4gcmVzb3VyY2VzTGlzdCA9IHJlc291cmNlc1NlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFJlc291cmNlcz4oKS5sYW1iZGEoKS5pbihSZXNvdXJjZXM6OmdldElkLCByZXNvdXJjZUlkcykpO1xuICAgICAgICB0YXNrVm8uc2V0VXNlckxpc3QodXNlckxpc3QpO1xuICAgICAgICB0YXNrVm8uc2V0UmVzb3VyY2VzTGlzdChyZXNvdXJjZXNMaXN0KTtcblxuICAgICAgICByZXR1cm4gdGFza1ZvO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBMaXN0PFRyZW5kUGllPiB0cmVuZFBpZSgpIHtcbiAgICAgICAgcmV0dXJuIHRhc2tNYXBwZXIudHJlbmRQaWUoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTGlzdDxUcmVuZD4gdHJlbmQoU3RyaW5nIHN0YXJ0RGF0ZSwgU3RyaW5nIGVuZERhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRhc2tNYXBwZXIudHJlbmQoc3RhcnREYXRlLCBlbmREYXRlKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQm9vbGVhbiBjcmVhdGUoVGFzayB0YXNrKSB7XG4gICAgICAgIHRhc2suc2V0Q29kZShJZFV0aWwucmFuZG9tVVVJRCgpKTtcbiAgICAgICAgTGlzdDxQcmlvcml0eT4gcHJpb3JpdGllcyA9IHByaW9yaXR5U2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgLy8g5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcblxuICAgICAgICAvLyDpgY3ljobkvJjlhYjnuqfmlbDmja7vvIzorr7nva4gaW1wb3J0YW5jZUlkIOWSjCBleGlnZW5jeUlkXG4gICAgICAgIGZvciAoUHJpb3JpdHkgcHJpb3JpdHkgOiBwcmlvcml0aWVzKSB7XG4gICAgICAgICAgICAvLyDljLnphY0gaW1wb3J0YW5jZUlkICh0eXBlPTEg5LiUIGNhdGVnb3J5SWQg55u45ZCMKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAxICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKS5lcXVhbHModGFzay5nZXRDYXRlZ29yeUlkKCkpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRJbXBvcnRhbmNlSWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7ku7vliqHliJ3lp4vnirbmgIHkuLrlvoXlip5cbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmUodGFzayk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEJvb2xlYW4gdXBkYXRlVGFzayhUYXNrIHRhc2spIHtcbiAgICAgICAgTGlzdDxQcmlvcml0eT4gcHJpb3JpdGllcyA9IHByaW9yaXR5U2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgLy8g5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcblxuICAgICAgICAvLyDpgY3ljobkvJjlhYjnuqfmlbDmja7vvIzorr7nva4gaW1wb3J0YW5jZUlkIOWSjCBleGlnZW5jeUlkXG4gICAgICAgIGZvciAoUHJpb3JpdHkgcHJpb3JpdHkgOiBwcmlvcml0aWVzKSB7XG4gICAgICAgICAgICAvLyDljLnphY0gaW1wb3J0YW5jZUlkICh0eXBlPTEg5LiUIGNhdGVnb3J5SWQg55u45ZCMKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAxICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKS5lcXVhbHModGFzay5nZXRDYXRlZ29yeUlkKCkpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRJbXBvcnRhbmNlSWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICB9XG4uLi5cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmiYvliqjlsIbku7vliqHorr7nva7kuLrlt7LlrozmiJDvvIzkv53mjIHor6XnirbmgIFcbiAgICAgICAgVGFzayBvbGRUYXNrID0gdGhpcy5nZXRCeUlkKHRhc2suZ2V0SWQoKSk7XG4gICAgICAgIGlmIChvbGRUYXNrICE9IG51bGwgJiYgb2xkVGFzay5nZXRTdGF0dXMoKSAhPSA0ICYmIHRhc2suZ2V0U3RhdHVzKCkgIT0gNCkge1xuICAgICAgICAgICAgLy8g6Ieq5Yqo5pu05paw5Lu75Yqh54q25oCBXG4gICAgICAgICAgICB1cGRhdGVUYXNrU3RhdHVzKHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVCeUlkKHRhc2spO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDmr4/lpKnlh4zmmajmiafooYzkuIDmrKHvvIzoh6rliqjmm7TmlrDmiYDmnInku7vliqHnmoTnirbmgIFcbiAgICAgKi9cbiAgICBAU2NoZWR1bGVkKGNyb24gPSBcIjAgMCAwICogKiA/XCIpXG4gICAgcHVibGljIHZvaWQgc2NoZWR1bGVkVXBkYXRlQWxsVGFza1N0YXR1cygpIHtcbiAgICAgICAgdXBkYXRlQWxsVGFza1N0YXR1cygpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmiYDmnInku7vliqHnmoTnirbmgIFcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgdXBkYXRlQWxsVGFza1N0YXR1cygpIHtcbiAgICAgICAgTGlzdDxUYXNrPiBhbGxUYXNrcyA9IHRoaXMubGlzdCgpO1xuICAgICAgICBhbGxUYXNrcy5mb3JFYWNoKHRoaXM6OnVwZGF0ZVRhc2tTdGF0dXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUJhdGNoQnlJZChhbGxUYXNrcyk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIOagueaNruS7u+WKoeeahOaIquatouaXtumXtOiHquWKqOabtOaWsOS7u+WKoeeKtuaAgVxuICAgICAqIOS7u+WKoeeKtuaAge+8mjEt5b6F5YqeLCAyLeW3suWuieaOkiwgMy3ov5vooYzkuK0sIDQt5bey5a6M5oiQLCA1LeW3sumAvuacn1xuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCB1cGRhdGVUYXNrU3RhdHVzKFRhc2sgdGFzaykge1xuICAgICAgICAvLyDlpoLmnpzku7vliqHlt7Lnu4/mmK/lt7LlrozmiJDnirbmgIEoNCnvvIzkuI3lgZrmlLnlj5hcbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmn6Xmib7ku7vliqHlr7nlupTnmoTml6XnqIvlronmjpJcbiAgICAgICAgTGlzdDxTY2hlZHVsZT4gc2NoZWR1bGVzID0gc2NoZWR1bGVTZXJ2aWNlLmxpc3QoXG4gICAgICAgICAgICBuZXcgUXVlcnlXcmFwcGVyPFNjaGVkdWxlPigpLmVxKFwidGFza19pZFwiLCB0YXNrLmdldElkKCkpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmnInml6XnqIvlronmjpLvvIzkvJjlhYjkvb/nlKjml6XnqIvnmoTnu5PmnZ/ml7bpl7TmnaXliKTmlq3mmK/lkKbpgL7mnJ9cbiAgICAgICAgaWYgKCFzY2hlZHVsZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey6YC+5pyf77yI57uT5p2f5pe26Ze05bey6L+H77yJXG4gICAgICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIG5vdy5pc0FmdGVyKHNjaGVkdWxlLmdldEVuZFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInml6XnqIvlronmjpLvvIzliJnkvb/nlKjku7vliqHnmoTmiKrmraLml7bpl7TliKTmlq1cbiAgICAgICAgZWxzZSBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwgJiYgbm93LmlzQWZ0ZXIodGFzay5nZXREZWFkbGluZSgpKSkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4uLi5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBQcmlvcml0eSBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChleGlnZW5jeVByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldEV4aWdlbmN5TmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YXNrVm9zLmFkZCh0YXNrVm8pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAzLiDmjInkvJjlhYjnuqfliIbmlbDmjpLluo/vvIjku47pq5jliLDkvY7vvIlcbiAgICAgICAgdGFza1Zvcy5zb3J0KChhLCBiKSAtPiBEb3VibGUuY29tcGFyZShiLmdldFByaW9yaXR5U2NvcmUoKSwgYS5nZXRQcmlvcml0eVNjb3JlKCkpKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YXNrVm9zO1xuICAgIH1cbiAgICBcbiAgICBAT3ZlcnJpZGVcbiAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgICBwdWJsaWMgTWFwPExvbmcsIEJvb2xlYW4+IGF1dG9TY2hlZHVsZVRhc2tzKExvY2FsRGF0ZSBkYXRlLCBMb25nIHVzZXJJZCkge1xuICAgICAgICAvLyDnu5PmnpzmmKDlsITvvIzorrDlvZXmr4/kuKrku7vliqHnmoTlronmjpLnu5PmnpxcbiAgICAgICAgTWFwPExvbmcsIEJvb2xlYW4+IHJlc3VsdCA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDEuIOiOt+WPluaOkuW6j+WQjueahOS7u+WKoeWIl+ihqFxuICAgICAgICBMaXN0PFRhc2tWbz4gcHJpb3JpdGl6ZWRUYXNrcyA9IGdldFByaW9yaXRpemVkVGFza3ModXNlcklkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWmguaenOayoeacieW+heWKnuS7u+WKoe+8jOebtOaOpei/lOWbnuepuue7k+aenFxuICAgICAgICBpZiAocHJpb3JpdGl6ZWRUYXNrcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbi4uLlxuICAgICAgICBcbiAgICAgICAgLy8gNS4g5qC55o2u5LyY5YWI57qn5ZKM5Lu75Yqh5omA6ZyA5pe26Ze05a6J5o6S5Lu75YqhXG4gICAgICAgIGZvciAoVGFza1ZvIHRhc2tWbyA6IHByaW9yaXRpemVkVGFza3MpIHtcbiAgICAgICAgICAgIFRhc2sgdGFzayA9IHRoaXMuZ2V0QnlJZCh0YXNrVm8uZ2V0SWQoKSk7XG4gICAgICAgICAgICBpZiAodGFzayA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1dCh0YXNrVm8uZ2V0SWQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDorqHnrpfku7vliqHmiYDpnIDml7bpl7TmrrXmlbDph49cbiAgICAgICAgICAgIGludCByZXF1aXJlZFNsb3RzID0gMTsgLy8g6buY6K6k5Y2g55SoMeS4quaXtumXtOaute+8iDMw5YiG6ZKf77yJXG4gICAgICAgICAgICBpZiAodGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgLy8g5q+PMzDliIbpkp/kuIDkuKrml7bpl7TmrrXvvIzlkJHkuIrlj5bmlbRcbiAgICAgICAgICAgICAgICByZXF1aXJlZFNsb3RzID0gKGludCkgTWF0aC5jZWlsKHRhc2suZ2V0VGltZVNwZW5kKCkgLyAzMC4wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5a+75om+6L+e57ut55qE56m66Zey5pe26Ze05q61XG4gICAgICAgICAgICBpbnQgc3RhcnRTbG90ID0gZmluZEF2YWlsYWJsZVRpbWVTbG90cyh0aW1lU2xvdE9jY3VwaWVkLCByZXF1aXJlZFNsb3RzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5aaC5p6c5om+5LiN5Yiw6Laz5aSf55qE5pe26Ze05q6177yM5qCH6K6w5Li65a6J5o6S5aSx6LSlXG4gICAgICAgICAgICBpZiAoc3RhcnRTbG90ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1dCh0YXNrLmdldElkKCksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvVGFza1NlcnZpY2UuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZTtcblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlRhc2s7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5zZXJ2aWNlLklTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZFBpZTtcblxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqIDxwPlxuICog5Lu75Yqh6KGoIOacjeWKoeexu1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFRhc2tTZXJ2aWNlIGV4dGVuZHMgSVNlcnZpY2U8VGFzaz4ge1xuXG4gICAgUGFnZTxUYXNrVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIExvbmcgY2F0ZWdvcnlJZCwgU3RyaW5nIHNlYXJjaEtleSk7XG5cbiAgICBMaXN0PFRhc2tWbz4gbGlzdEFsbChJbnRlZ2VyIHN0YXR1cyk7XG5cbiAgICBUYXNrVm8gZ2V0SW5mbyhMb25nIGlkKTtcblxuICAgIExpc3Q8VHJlbmRQaWU+IHRyZW5kUGllKCk7XG5cbiAgICBMaXN0PFRyZW5kPiB0cmVuZChTdHJpbmcgc3RhcnREYXRlLCBTdHJpbmcgZW5kRGF0ZSk7XG5cbiAgICBCb29sZWFuIGNyZWF0ZShUYXNrIHRhc2spO1xuXG4gICAgQm9vbGVhbiB1cGRhdGVUYXNrKFRhc2sgdGFzayk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tb2RlbC9UYXNrLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uSWRUeXBlO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLlRhYmxlSWQ7XG5pbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcblxuaW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5hbm5vdGF0aW9uLkpzb25Gb3JtYXQ7XG5pbXBvcnQgY29tLmZhc3RlcnhtbC5qYWNrc29uLmFubm90YXRpb24uSnNvblByb3BlcnR5O1xuaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpTW9kZWw7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbFByb3BlcnR5O1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgYWlkZW56MjMzXG4gKiBAc2luY2UgMjAyNS0wNC0xNlxuICovXG5AR2V0dGVyXG5AU2V0dGVyXG5AQXBpTW9kZWwodmFsdWUgPSBcIlRhc2vlr7nosaFcIiwgZGVzY3JpcHRpb24gPSBcIuS7u+WKoeihqFwiKVxucHVibGljIGNsYXNzIFRhc2sgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG5cbiAgICBAVGFibGVJZCh2YWx1ZSA9IFwiaWRcIiwgdHlwZSA9IElkVHlwZS5BVVRPKVxuICAgIHByaXZhdGUgTG9uZyBpZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5qCH6aKYXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgdGl0bGU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoee8lueggVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGNvZGU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoeexu+Wei0lEXCIpXG4gICAgcHJpdmF0ZSBMb25nIGNhdGVnb3J5SWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoeaPj+i/sFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHnirbmgIHvvIgxOuW+heWKniwgMjrlt7LlronmjpIsIDM66L+b6KGM5LitLCA0OuW3suWujOaIkCwgNTrlt7LpgL7mnJ/vvIlcIilcbiAgICBwcml2YXRlIEludGVnZXIgc3RhdHVzO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLph43opoHmgKfmnYPph43orr7nva5cIilcbiAgICBwcml2YXRlIExvbmcgaW1wb3J0YW5jZUlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLntKfmgKXmgKfmnYPph43orr7nva5cIilcbiAgICBwcml2YXRlIExvbmcgZXhpZ2VuY3lJZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5omA6ZyA6LWE5rqQ5pWw5o2u77yISlNPTuagvOW8j++8iVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIHJlc291cmNlc0RhdGE7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoeaJgOmcgOS6uuWRmOaVsOaNru+8iEpTT07moLzlvI/vvIlcIilcbiAgICBwcml2YXRlIFN0cmluZyB1c2VyRGF0YTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5omA6ZyA5pe26Ze05YiG6ZKf5pWwXCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIHRpbWVTcGVuZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5oiq5q2i5pe26Ze0XCIpXG4gICAgQEpzb25Gb3JtYXQocGF0dGVybiA9IFwieXl5eS1NTS1kZCBISDptbTpzc1wiKVxuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBkZWFkbGluZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5o+Q6YaS5pe26Ze0XCIpXG4gICAgQEpzb25Gb3JtYXQocGF0dGVybiA9IFwieXl5eS1NTS1kZCBISDptbTpzc1wiKVxuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSByZW1pbmRlclRpbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuWIm+W7uuaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmm7TmlrDml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgdXBkYXRlVGltZTtcblxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi92by9UYXNrVm8uamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm87XG5cbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlJlc291cmNlcztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbmltcG9ydCBsb21ib2suR2V0dGVyO1xuaW1wb3J0IGxvbWJvay5TZXR0ZXI7XG5cbmltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuQEdldHRlclxuQFNldHRlclxucHVibGljIGNsYXNzIFRhc2tWbyBleHRlbmRzIFRhc2sge1xuICAgIHByaXZhdGUgU3RyaW5nIGNhdGVnb3J5TmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBpbXBvcnRhbmNlTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyBleGlnZW5jeU5hbWU7XG4gICAgcHJpdmF0ZSBCaWdEZWNpbWFsIHByaW9yaXR5U2NvcmU7XG5cbiAgICBwcml2YXRlIExpc3Q8VW1zQWRtaW4+IHVzZXJMaXN0O1xuICAgIHByaXZhdGUgTGlzdDxSZXNvdXJjZXM+IHJlc291cmNlc0xpc3Q7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tYXBwZXIvVGFza01hcHBlci5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tYXBwZXI7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLm1hcHBlci5CYXNlTWFwcGVyO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZFBpZTtcblxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG4vKipcbiAqIDxwPlxuICog5Lu75Yqh6KGoIE1hcHBlciDmjqXlj6NcbiAqIDwvcD5cbiAqL1xucHVibGljIGludGVyZmFjZSBUYXNrTWFwcGVyIGV4dGVuZHMgQmFzZU1hcHBlcjxUYXNrPiB7XG5cbiAgICBQYWdlPFRhc2tWbz4gc2VhcmNoVGFzayhQYWdlPFRhc2tWbz4gcGFnZSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBjYXRlZ29yeUlkKTtcblxuICAgIExpc3Q8VGFza1ZvPiBsaXN0QWxsKEludGVnZXIgc3RhdHVzKTtcblxuICAgIExpc3Q8VHJlbmRQaWU+IHRyZW5kUGllKCk7XG5cbiAgICBMaXN0PFRyZW5kPiB0cmVuZChTdHJpbmcgc3RhcnREYXRlLCBTdHJpbmcgZW5kRGF0ZSk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tYXBwZXIvU2NoZWR1bGVNYXBwZXIuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDml6XnqIvlronmjpLooaggTWFwcGVyIOaOpeWPo1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFNjaGVkdWxlTWFwcGVyIGV4dGVuZHMgQmFzZU1hcHBlcjxTY2hlZHVsZT4ge1xuXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hTY2hlZHVsZShQYWdlPFNjaGVkdWxlVm8+IHBhZ2UsIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKTtcblxuICAgIExpc3Q8U2NoZWR1bGVWbz4gZmluZEFsbFNjaGVkdWxlcygpO1xuXG4gICAgTGlzdDxTY2hlZHVsZVZvPiBmaW5kQnlJZHMoTGlzdDxMb25nPiBpZHMpO1xuICAgIFxuICAgIExpc3Q8U2NoZWR1bGVWbz4gZmluZFNjaGVkdWxlc0J5TW9udGgoU3RyaW5nIHllYXJNb250aCk7XG4gICAgXG4gICAgLyoqXG4gICAgICog5qC55o2u5pyI5Lu95ZKM55So5oi3SUTmn6Xor6LkuI7nlKjmiLfnm7jlhbPnmoTml6XnqItcbiAgICAgKiBAcGFyYW0geWVhck1vbnRoIOW5tOaciO+8jOagvOW8j+S4uu+8mnl5eXktTU1cbiAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lEXG4gICAgICogQHJldHVybiDml6XnqIvliJfooahcbiAgICAgKi9cbiAgICBMaXN0PFNjaGVkdWxlVm8+IGZpbmRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi92by9TY2hlZHVsZVZvLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvO1xuXG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVWbyBleHRlbmRzIFNjaGVkdWxlIHtcbiAgICBwcml2YXRlIFN0cmluZyB0YXNrTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyB0YXNrQ29kZTtcbiAgICBwcml2YXRlIEludGVnZXIgc3RhdHVzO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBkZWFkbGluZTtcblxuICAgIHByaXZhdGUgQm9vbGVhbiBoYXNDb25mbGljdDtcbiAgICBwcml2YXRlIFN0cmluZyBjb25mbGljdFNjaGVkdWxlSWRzO1xuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJEYXRhO1xuICAgIHByaXZhdGUgU3RyaW5nIHJlc291cmNlc0RhdGE7XG5cbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgZW5kVGltZTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL3Jlc291cmNlcy9tYXBwZXIvd2ViL1Rhc2tNYXBwZXIueG1sXG4uLi5cblxuICAgIDwhLS0g6YCa55So5p+l6K+i5pig5bCE57uT5p6cIC0tPlxuICAgIDxyZXN1bHRNYXAgaWQ9XCJCYXNlUmVzdWx0TWFwXCIgdHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrXCI+XG4gICAgICAgIDxpZCBjb2x1bW49XCJpZFwiIHByb3BlcnR5PVwiaWRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cInRpdGxlXCIgcHJvcGVydHk9XCJ0aXRsZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiY29kZVwiIHByb3BlcnR5PVwiY29kZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiY2F0ZWdvcnlfaWRcIiBwcm9wZXJ0eT1cImNhdGVnb3J5SWRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cImRlc2NyaXB0aW9uXCIgcHJvcGVydHk9XCJkZXNjcmlwdGlvblwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwic3RhdHVzXCIgcHJvcGVydHk9XCJzdGF0dXNcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cImltcG9ydGFuY2VfaWRcIiBwcm9wZXJ0eT1cImltcG9ydGFuY2VJZFwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiZXhpZ2VuY3lfaWRcIiBwcm9wZXJ0eT1cImV4aWdlbmN5SWRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cInJlc291cmNlc19kYXRhXCIgcHJvcGVydHk9XCJyZXNvdXJjZXNEYXRhXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJ1c2VyX2RhdGFcIiBwcm9wZXJ0eT1cInVzZXJEYXRhXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJ0aW1lX3NwZW5kXCIgcHJvcGVydHk9XCJ0aW1lU3BlbmRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cImRlYWRsaW5lXCIgcHJvcGVydHk9XCJkZWFkbGluZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiY3JlYXRlX3RpbWVcIiBwcm9wZXJ0eT1cImNyZWF0ZVRpbWVcIiAvPlxuLi4uXG48IS0tICAgICAgICAgICAgPC9pZj4tLT5cbjwhLS0gICAgICAgICAgICA8aWYgdGVzdD1cImNhdGVnb3J5SWQgIT0gbnVsbCBhbmQgY2F0ZWdvcnlJZCAhPSAnJ1wiPi0tPlxuPCEtLSAgICAgICAgICAgICAgICBBTkQgdC5jYXRlZ29yeV9pZCA9ICN7Y2F0ZWdvcnlJZH0tLT5cbjwhLS0gICAgICAgICAgICA8L2lmPi0tPlxuPCEtLSAgICAgICAgPC93aGVyZT4tLT5cbjwhLS0gICAgICAgIG9yZGVyIGJ5IHQuY3JlYXRlX3RpbWUgZGVzYy0tPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgdC4qLFxuICAgICAgICBjLm5hbWUgQVMgY2F0ZWdvcnlOYW1lLFxuICAgICAgICBwaS5uYW1lIEFTIGltcG9ydGFuY2VOYW1lLFxuICAgICAgICBwZS5uYW1lIEFTIGV4aWdlbmN5TmFtZSxcbiAgICAgICAgKHBpLnNjb3JlICogcGkud2VpZ2h0ICsgcGUuc2NvcmUgKiBwZS53ZWlnaHQpIEFTIHByaW9yaXR5U2NvcmVcbiAgICAgICAgRlJPTVxuICAgICAgICB0YXNrIHRcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgIGNhdGVnb3J5IGMgT04gYy5pZCA9IHQuY2F0ZWdvcnlfaWRcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgIHByaW9yaXR5IHBpIE9OIHBpLmlkID0gdC5pbXBvcnRhbmNlX2lkIEFORCBwaS50eXBlID0gMVxuICAgICAgICBMRUZUIEpPSU5cbiAgICAgICAgcHJpb3JpdHkgcGUgT04gcGUuaWQgPSB0LmV4aWdlbmN5X2lkIEFORCBwZS50eXBlID0gMlxuICAgICAgICA8d2hlcmU+XG4gICAgICAgICAgICA8aWYgdGVzdD1cInNlYXJjaEtleSAhPSBudWxsIGFuZCBzZWFyY2hLZXkgIT0gJydcIj5cbiAgICAgICAgICAgICAgICBBTkQgKHQudGl0bGUgTElLRSBDT05DQVQoJyUnLCAje3NlYXJjaEtleX0sICclJylcbiAgICAgICAgICAgICAgICBPUiB0LmNvZGUgTElLRSBDT05DQVQoJyUnLCAje3NlYXJjaEtleX0sICclJylcbiAgICAgICAgICAgICAgICBPUiB0LmRlc2NyaXB0aW9uIExJS0UgQ09OQ0FUKCclJywgI3tzZWFyY2hLZXl9LCAnJScpKVxuICAgICAgICAgICAgPC9pZj5cbiAgICAgICAgICAgIDxpZiB0ZXN0PVwiY2F0ZWdvcnlJZCAhPSBudWxsIGFuZCBjYXRlZ29yeUlkICE9ICcnXCI+XG4gICAgICAgICAgICAgICAgQU5EIHQuY2F0ZWdvcnlfaWQgPSAje2NhdGVnb3J5SWR9XG4gICAgICAgICAgICA8L2lmPlxuICAgICAgICA8L3doZXJlPlxuICAgICAgICBPUkRFUiBCWVxuICAgICAgICBwcmlvcml0eVNjb3JlIERFU0MsXG4gICAgICAgIHQuZGVhZGxpbmUgQVNDXG4gICAgPC9zZWxlY3Q+XG4gICAgPHNlbGVjdCBpZD1cImxpc3RBbGxcIiByZXN1bHRUeXBlPVwiY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWb1wiPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgdC4qLFxuICAgICAgICBjLm5hbWUgQVMgY2F0ZWdvcnlOYW1lLFxuICAgICAgICBwaS5uYW1lIEFTIGltcG9ydGFuY2VOYW1lLFxuICAgICAgICBwZS5uYW1lIEFTIGV4aWdlbmN5TmFtZSxcbiAgICAgICAgKHBpLnNjb3JlICogcGkud2VpZ2h0ICsgcGUuc2NvcmUgKiBwZS53ZWlnaHQpIEFTIHByaW9yaXR5U2NvcmVcbiAgICAgICAgRlJPTVxuICAgICAgICB0YXNrIHRcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgIGNhdGVnb3J5IGMgT04gYy5pZCA9IHQuY2F0ZWdvcnlfaWRcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgIHByaW9yaXR5IHBpIE9OIHBpLmlkID0gdC5pbXBvcnRhbmNlX2lkIEFORCBwaS50eXBlID0gMVxuICAgICAgICBMRUZUIEpPSU5cbiAgICAgICAgcHJpb3JpdHkgcGUgT04gcGUuaWQgPSB0LmV4aWdlbmN5X2lkIEFORCBwZS50eXBlID0gMlxuICAgICAgICA8d2hlcmU+XG4gICAgICAgICAgICA8aWYgdGVzdD1cInN0YXR1cyAhPSBudWxsIGFuZCBzdGF0dXMgIT0gJydcIj5cbiAgICAgICAgICAgICAgICBBTkQgdC5zdGF0dXMgPSAje3N0YXR1c31cbiAgICAgICAgICAgIDwvaWY+XG4gICAgICAgICAgICBBTkQgdC5kZWFkbGluZSA+IE5PVygpXG4gICAgICAgIDwvd2hlcmU+XG4gICAgICAgIE9SREVSIEJZXG4gICAgICAgIHByaW9yaXR5U2NvcmUgREVTQyxcbiAgICAgICAgdC5kZWFkbGluZSBERVNDXG4gICAgPC9zZWxlY3Q+XG4gICAgPHNlbGVjdCBpZD1cInRyZW5kUGllXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZFBpZVwiPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgQ0FTRVxuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDEgVEhFTiAn5b6F5YqeJ1xuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDIgVEhFTiAn5bey5a6J5o6SJ1xuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDMgVEhFTiAn6L+b6KGM5LitJ1xuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDQgVEhFTiAn5bey5a6M5oiQJ1xuICAgICAgICAgICAgV0hFTiB0LnN0YXR1cyA9IDUgVEhFTiAn5bey6YC+5pyfJ1xuICAgICAgICAgICAgRUxTRSAn5pyq55+lJ1xuICAgICAgICBFTkQgQVMgbmFtZSxcbiAgICAgICAgQ09VTlQodC5pZCkgQVMgY291bnRcbiAgICAgICAgRlJPTVxuICAgICAgICB0YXNrIHRcbiAgICAgICAgR1JPVVAgQllcbiAgICAgICAgdC5zdGF0dXNcbiAgICA8L3NlbGVjdD5cbiAgICA8c2VsZWN0IGlkPVwidHJlbmRcIiByZXN1bHRUeXBlPVwiY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICBEQVRFKGNyZWF0ZV90aW1lKSBBUyBkYXRlLFxuICAgICAgICBTVU0oQ0FTRVxuICAgICAgICBXSEVOIHN0YXR1cyA9IDUgVEhFTiAxXG4gICAgICAgIEVMU0UgMFxuICAgICAgICBFTkQpIEFTIGNvdW50TGVmdCxcbiAgICAgICAgU1VNKENBU0VcbiAgICAgICAgV0hFTiBzdGF0dXMgPSA0IFRIRU4gMVxuICAgICAgICBFTFNFIDBcbiAgICAgICAgRU5EKSBBUyBjb3VudFJpZ2h0XG4gICAgICAgIEZST00gYHRhc2tgXG4gICAgICAgIFdIRVJFIGNyZWF0ZV90aW1lIEJFVFdFRU4gI3tzdGFydERhdGV9IEFORCAje2VuZERhdGV9XG4gICAgICAgIEdST1VQIEJZIERBVEUoY3JlYXRlX3RpbWUpXG4gICAgICAgIE9SREVSIEJZIERBVEUoY3JlYXRlX3RpbWUpO1xuICAgIDwvc2VsZWN0PlxuXG48L21hcHBlcj5cbi4uLlxuUGF0aDogb2ZmaWNlX3BsYW4uc3FsXG4uLi5cblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YXNrXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBgdGFza2A7XG5DUkVBVEUgVEFCTEUgYHRhc2tgICAoXG4gIGBpZGAgYmlnaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuICBgdGl0bGVgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjhtYjMgQ09MTEFURSB1dGY4bWIzX2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5qCH6aKYJyxcbiAgYGNvZGVgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjhtYjMgQ09MTEFURSB1dGY4bWIzX2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57yW56CBJyxcbiAgYGNhdGVnb3J5X2lkYCBiaWdpbnQgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57G75Z6LSUQnLFxuICBgZGVzY3JpcHRpb25gIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5o+P6L+wJyxcbiAgYHN0YXR1c2AgaW50IE5VTEwgREVGQVVMVCAxIENPTU1FTlQgJ+S7u+WKoeeKtuaAge+8iDE65b6F5YqeLCAyOuW3suWuieaOkiwgMzrlt7LlrozmiJDvvIknLFxuICBgaW1wb3J0YW5jZV9pZGAgYmlnaW50IE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+mHjeimgeaAp+adg+mHjeiuvue9ricsXG4gIGBleGlnZW5jeV9pZGAgYmlnaW50IE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+e0p+aApeaAp+adg+mHjeiuvue9ricsXG4gIGByZXNvdXJjZXNfZGF0YWAganNvbiBOVUxMIENPTU1FTlQgJ+S7u+WKoeaJgOmcgOi1hOa6kOaVsOaNru+8iEpTT07moLzlvI/vvIknLFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvdm8vVGFza1N0YXRpc3RpY3NWTy5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52bztcblxuaW1wb3J0IGxvbWJvay5EYXRhO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZTtcblxuQERhdGFcbnB1YmxpYyBjbGFzcyBUYXNrU3RhdGlzdGljc1ZPIHtcbiAgICBwcml2YXRlIExvY2FsRGF0ZSBkYXRlO1xuICAgIHByaXZhdGUgTG9uZyBvdmVyZHVlQ291bnQ7ICAgIC8vIOmAvuacn+S7u+WKoeaVsFxuICAgIHByaXZhdGUgTG9uZyBjb21wbGV0ZWRDb3VudDsgIC8vIOW3suWujOaIkOS7u+WKoeaVsFxufSAuLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi92by9Ob3RpZmljYXRpb25Wby5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52bztcblxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Ob3RpZmljYXRpb247XG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBsb21ib2suU2V0dGVyO1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgTm90aWZpY2F0aW9uVm8gZXh0ZW5kcyBOb3RpZmljYXRpb24ge1xuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIHRhc2tOYW1lO1xuICAgIHByaXZhdGUgTG9uZyB0YXNrSWQ7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tYXBwZXIvUHJpb3JpdHlNYXBwZXIuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUHJpb3JpdHk7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmNvcmUubWFwcGVyLkJhc2VNYXBwZXI7XG5cbi8qKlxuICogPHA+XG4gKiDkvJjlhYjnuqfooaggTWFwcGVyIOaOpeWPo1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFByaW9yaXR5TWFwcGVyIGV4dGVuZHMgQmFzZU1hcHBlcjxQcmlvcml0eT4ge1xuXG4gICAgUGFnZTxQcmlvcml0eT4gc2VhcmNoUHJpb3JpdHkoUGFnZTxQcmlvcml0eT4gcGFnZSwgU3RyaW5nIHNlYXJjaEtleSwgSW50ZWdlciB0eXBlKTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NxbC9vZmZpY2VfcGxhbi5zcWxcbi4uLlxuXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBgdGFza2A7XG5DUkVBVEUgVEFCTEUgYHRhc2tgIChcbiAgYGlkYCBiaWdpbnQoMjApIE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuICBgdGl0bGVgIHZhcmNoYXIoMjU1KSBOT1QgTlVMTCBDT01NRU5UICfku7vliqHmoIfpopgnLFxuICBgY29kZWAgdmFyY2hhcigyNTUpIE5PVCBOVUxMIENPTU1FTlQgJ+S7u+WKoee8lueggScsXG4gIGBjYXRlZ29yeV9pZGAgIGJpZ2ludCgyMCkgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57G75Z6LLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOTkzMmEwOGEtN2U3OS00OTZhLWFkZTktYjczYzFlYmIxNjA4O3Rvb2x1XzAxM0dxZDgyamV6WTk3cXJ2U3BKQk0yUCI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1ByaW9yaXR5U2VydmljZUltcGwuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDkvJjlhYjnuqfooagg5pyN5Yqh5a6e546w57G7XG4gKiA8L3A+XG4gKi9cbkBTZXJ2aWNlXG5wdWJsaWMgY2xhc3MgUHJpb3JpdHlTZXJ2aWNlSW1wbCBleHRlbmRzIFNlcnZpY2VJbXBsPFByaW9yaXR5TWFwcGVyLCBQcmlvcml0eT4gaW1wbGVtZW50cyBQcmlvcml0eVNlcnZpY2Uge1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgUHJpb3JpdHlNYXBwZXIgcHJpb3JpdHlNYXBwZXI7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxQcmlvcml0eT4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgSW50ZWdlciB0eXBlLCBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIFBhZ2U8UHJpb3JpdHk+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICAgICAgcmV0dXJuIHByaW9yaXR5TWFwcGVyLnNlYXJjaFByaW9yaXR5KHBhZ2UsIHNlYXJjaEtleSwgdHlwZSk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cblxuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuSWRVdGlsO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLmNvbmRpdGlvbnMucXVlcnkuUXVlcnlXcmFwcGVyO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1vZGVsLlVtc0FkbWluO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5zZXJ2aWNlLlVtc0FkbWluU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuQ2F0ZWdvcnk7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlByaW9yaXR5O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5SZXNvdXJjZXM7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlRhc2s7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tYXBwZXIuVGFza01hcHBlcjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5DYXRlZ29yeVNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuUHJpb3JpdHlTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlJlc291cmNlc1NlcnZpY2U7XG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCDmnI3liqHlrp7njrDnsbtcbiAqIDwvcD5cbiAqL1xuQFNlcnZpY2VcbnB1YmxpYyBjbGFzcyBUYXNrU2VydmljZUltcGwgZXh0ZW5kcyBTZXJ2aWNlSW1wbDxUYXNrTWFwcGVyLCBUYXNrPiBpbXBsZW1lbnRzIFRhc2tTZXJ2aWNlIHtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFRhc2tNYXBwZXIgdGFza01hcHBlcjtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIENhdGVnb3J5U2VydmljZSBjYXRlZ29yeVNlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBQcmlvcml0eVNlcnZpY2UgcHJpb3JpdHlTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVW1zQWRtaW5TZXJ2aWNlIHVzZXJTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgUmVzb3VyY2VzU2VydmljZSByZXNvdXJjZXNTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIEBMYXp5XG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFBhZ2U8VGFza1ZvPiBzZWFyY2goSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBMb25nIGNhdGVnb3J5SWQsIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgLy8g5YWI5pu05paw5omA5pyJ5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcbiAgICAgICAgXG4gICAgICAgIFBhZ2U8VGFza1ZvPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIHJldHVybiB0YXNrTWFwcGVyLnNlYXJjaFRhc2socGFnZSwgc2VhcmNoS2V5LCBjYXRlZ29yeUlkKTtcbiAgICB9XG4uLi5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBQcmlvcml0eSBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChleGlnZW5jeVByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldEV4aWdlbmN5TmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YXNrVm9zLmFkZCh0YXNrVm8pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAzLiDmjInkvJjlhYjnuqfliIbmlbDmjpLluo/vvIjku47pq5jliLDkvY7vvIlcbiAgICAgICAgdGFza1Zvcy5zb3J0KChhLCBiKSAtPiBEb3VibGUuY29tcGFyZShiLmdldFByaW9yaXR5U2NvcmUoKSwgYS5nZXRQcmlvcml0eVNjb3JlKCkpKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0YXNrVm9zO1xuICAgIH1cbiAgICBcbiAgICBAT3ZlcnJpZGVcbiAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgICBwdWJsaWMgTWFwPExvbmcsIEJvb2xlYW4+IGF1dG9TY2hlZHVsZVRhc2tzKExvY2FsRGF0ZSBkYXRlLCBMb25nIHVzZXJJZCkge1xuICAgICAgICAvLyDnu5PmnpzmmKDlsITvvIzorrDlvZXmr4/kuKrku7vliqHnmoTlronmjpLnu5PmnpxcbiAgICAgICAgTWFwPExvbmcsIEJvb2xlYW4+IHJlc3VsdCA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDEuIOiOt+WPluaOkuW6j+WQjueahOS7u+WKoeWIl+ihqFxuICAgICAgICBMaXN0PFRhc2tWbz4gcHJpb3JpdGl6ZWRUYXNrcyA9IGdldFByaW9yaXRpemVkVGFza3ModXNlcklkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWmguaenOayoeacieW+heWKnuS7u+WKoe+8jOebtOaOpei/lOWbnuepuue7k+aenFxuICAgICAgICBpZiAocHJpb3JpdGl6ZWRUYXNrcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5pel56iL5a6J5o6S6KGoIOacjeWKoeexu1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFNjaGVkdWxlU2VydmljZSBleHRlbmRzIElTZXJ2aWNlPFNjaGVkdWxlPiB7XG5cbiAgICBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpO1xuXG4gICAgQm9vbGVhbiBjcmVhdGUoU2NoZWR1bGUgc2NoZWR1bGUpO1xuXG4gICAgYm9vbGVhbiB1cGRhdGVTY2hlZHVsZShTY2hlZHVsZSBzY2hlZHVsZSk7XG5cbiAgICBMaXN0PFRhc2tWbz4gY29uZmxpY3RMaXN0KExvbmcgaWQsIExpc3Q8TG9uZz4gc2NoZWR1bGVJZHMpO1xuXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBpZCk7XG4gICAgXG4gICAgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gZ2V0U2NoZWR1bGVzQnlNb250aChTdHJpbmcgeWVhck1vbnRoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiDmoLnmja7mnIjku73lkoznlKjmiLfmnYPpmZDojrflj5bml6XnqIvlronmjpJcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geWVhck1vbnRoIOW5tOaciO+8jOagvOW8j+S4uu+8mnl5eXktTU1cbiAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lE77yM5aaC5p6c5piv566h55CG5ZGY5YiZ6I635Y+W5omA5pyJ5pel56iL77yM5ZCm5YiZ5Y+q6I635Y+W5LiO55So5oi355u45YWz55qE5pel56iLXG4gICAgICogQHBhcmFtIGlzQWRtaW4g5piv5ZCm5Li6566h55CG5ZGYXG4gICAgICogQHJldHVybiDml6XmnJ/kuLrplK7vvIzml6XnqIvliJfooajkuLrlgLznmoTmmKDlsIRcbiAgICAgKi9cbiAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCwgYm9vbGVhbiBpc0FkbWluKTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21vZGVsL1ByaW9yaXR5LmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBhaWRlbnoyMzNcbiAqIEBzaW5jZSAyMDI1LTA0LTE2XG4gKi9cbkBHZXR0ZXJcbkBTZXR0ZXJcbkBBcGlNb2RlbCh2YWx1ZSA9IFwiUHJpb3JpdHnlr7nosaFcIiwgZGVzY3JpcHRpb24gPSBcIuS8mOWFiOe6p+ihqFwiKVxucHVibGljIGNsYXNzIFByaW9yaXR5IGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuinhOWImeagh+mimFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuexu+Wei++8iDE66YeN6KaB5oCnLCAyOiDntKfmgKXmgKfvvIlcIilcbiAgICBwcml2YXRlIEludGVnZXIgdHlwZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5YiG5pWwXCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIHNjb3JlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmnYPph41cIilcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgd2VpZ2h0O1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLop4TliJnmj4/ov7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75YqhSURcIilcbiAgICBwcml2YXRlIExvbmcgY2F0ZWdvcnlJZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5pyA5bCP5pe26Ze05Yy66Ze0XCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIG1pbkhvdXJzO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmnIDlpKfml7bpl7TljLrpl7RcIilcbiAgICBwcml2YXRlIEludGVnZXIgbWF4SG91cnM7XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvUHJpb3JpdHlTZXJ2aWNlLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2U7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eTtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnNlcnZpY2UuSVNlcnZpY2U7XG5cbi8qKlxuICogPHA+XG4gKiDkvJjlhYjnuqfooagg5pyN5Yqh57G7XG4gKiA8L3A+XG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgUHJpb3JpdHlTZXJ2aWNlIGV4dGVuZHMgSVNlcnZpY2U8UHJpb3JpdHk+IHtcblxuICAgIFBhZ2U8UHJpb3JpdHk+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIEludGVnZXIgdHlwZSwgU3RyaW5nIHNlYXJjaEtleSk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gcGFnZVJlc3VsdCA9IHNjaGVkdWxlTWFwcGVyLnNlYXJjaFNjaGVkdWxlKHBhZ2Usc2VhcmNoS2V5LCBudWxsKTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZVZvcyA9ICBwYWdlUmVzdWx0LmdldFJlY29yZHMoKTtcblxuICAgICAgICAvLyDmn6Xor6LmiYDmnInku7vliqHvvIznlKjkuo7lhrLnqoHmo4DmtYtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBhbGxTY2hlZHVsZXMgPSBzY2hlZHVsZU1hcHBlci5maW5kQWxsU2NoZWR1bGVzKCk7XG5cbiAgICAgICAgLy8g5Yid5aeL5YyWIE9iamVjdE1hcHBlciDnlKjkuo7op6PmnpAgSlNPTiDlrZfnrKbkuLJcbiAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcblxuICAgICAgICAvLyDojrflj5blvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgICBwdWJsaWMgQm9vbGVhbiBjcmVhdGUoU2NoZWR1bGUgc2NoZWR1bGUpIHtcbiAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAgICAgIC8vIOS/ruaUueS7u+WKoeeKtuaAgVxuICAgICAgICB0YXNrLnNldFN0YXR1cygyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9rue7k+adn+aXtumXtO+8jOWmguaenOacquiuvue9ruWImeiHquWKqOagueaNruS7u+WKoeiAl+aXtuiuoeeul1xuICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpID09IG51bGwgJiYgdGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyDmoLnmja7ku7vliqHpooTkvLDml7bpl7Torr7nva7nu5PmnZ/ml7bpl7RcbiAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkucGx1c01pbnV0ZXModGFzay5nZXRUaW1lU3BlbmQoKSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyDpu5jorqTorr7nva7nu5PmnZ/ml7bpl7TkuLrlvIDlp4vml7bpl7TlkI4x5bCP5pe2XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNIb3VycygxKSk7XG4gICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluWGsueqgeeUqOaIt+WSjOi1hOa6kOeahOivpue7huS/oeaBr1xuICAgICAgICAgICAgICAgICAgICBMaXN0PFVtc0FkbWluPiB1c2VyTGlzdCA9IHVzZXJTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxVbXNBZG1pbj4oKS5sYW1iZGEoKS5pbihVbXNBZG1pbjo6Z2V0SWQsIGNvbmZsaWN0VXNlcklkcykpO1xuICAgICAgICAgICAgICAgICAgICBMaXN0PFJlc291cmNlcz4gcmVzb3VyY2VzTGlzdCA9IHJlc291cmNlc1NlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFJlc291cmNlcz4oKS5sYW1iZGEoKS5pbihSZXNvdXJjZXM6OmdldElkLCBjb25mbGljdFJlc291cmNlSWRzKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u5Yay56qB55So5oi35ZKM6LWE5rqQXG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRVc2VyTGlzdCh1c2VyTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRSZXNvdXJjZXNMaXN0KHJlc291cmNlc0xpc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrVm87XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBpZCkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBwYWdlUmVzdWx0ID0gc2NoZWR1bGVNYXBwZXIuc2VhcmNoU2NoZWR1bGUocGFnZSxzZWFyY2hLZXksIGlkKTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZVZvcyA9ICBwYWdlUmVzdWx0LmdldFJlY29yZHMoKTtcblxuICAgICAgICAvLyDojrflj5blvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuLi4uXG4gICAgICAgIFxuICAgICAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiByZXN1bHQgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmjInml6XmnJ/liIbnu4RcbiAgICAgICAgZm9yIChTY2hlZHVsZVZvIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFN0cmluZyBkYXRlID0gc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkudG9Mb2NhbERhdGUoKS50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmNvbnRhaW5zS2V5KGRhdGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXQoZGF0ZSwgbmV3IEFycmF5TGlzdDw+KCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXN1bHQuZ2V0KGRhdGUpLmFkZChzY2hlZHVsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5q+P5bCP5pe25qOA5p+l5LiA5qyh5Lu75Yqh5oiq5q2i5pe26Ze077yM5pu05paw6YC+5pyf5Lu75Yqh54q25oCBXG4gICAgICovXG4gICAgQFNjaGVkdWxlZChjcm9uID0gXCIwIDAgKiAqICogP1wiKSAvLyDmr4/lsI/ml7bmiafooYzkuIDmrKFcbiAgICBwdWJsaWMgdm9pZCBjaGVja0FuZFVwZGF0ZU92ZXJkdWVUYXNrcygpIHtcbiAgICAgICAgbG9nLmluZm8oXCLmiafooYzku7vliqHpgL7mnJ/nirbmgIHmo4Dmn6UuLi5cIik7XG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmn6Xor6LmiYDmnInlvoXlip7jgIHlt7LlronmjpLjgIHov5vooYzkuK3nirbmgIHnmoTku7vliqFcbiAgICAgICAgTGlzdDxUYXNrPiB0YXNrcyA9IHRhc2tTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxUYXNrPigpLmxhbWJkYSgpXG4gICAgICAgICAgICAgICAgLmluKFRhc2s6OmdldFN0YXR1cywgQXJyYXlzLmFzTGlzdCgxLCAyLCAzKSkpO1xuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbWFwcGVyL1NjaGVkdWxlTWFwcGVyLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5pel56iL5a6J5o6S6KGoIE1hcHBlciDmjqXlj6NcbiAqIDwvcD5cbiAqL1xucHVibGljIGludGVyZmFjZSBTY2hlZHVsZU1hcHBlciBleHRlbmRzIEJhc2VNYXBwZXI8U2NoZWR1bGU+IHtcblxuICAgIFBhZ2U8U2NoZWR1bGVWbz4gc2VhcmNoU2NoZWR1bGUoUGFnZTxTY2hlZHVsZVZvPiBwYWdlLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIHVzZXJJZCk7XG5cbiAgICBMaXN0PFNjaGVkdWxlVm8+IGZpbmRBbGxTY2hlZHVsZXMoKTtcblxuICAgIExpc3Q8U2NoZWR1bGVWbz4gZmluZEJ5SWRzKExpc3Q8TG9uZz4gaWRzKTtcbiAgICBcbiAgICBMaXN0PFNjaGVkdWxlVm8+IGZpbmRTY2hlZHVsZXNCeU1vbnRoKFN0cmluZyB5ZWFyTW9udGgpO1xuICAgIFxuICAgIC8qKlxuICAgICAqIOagueaNruaciOS7veWSjOeUqOaIt0lE5p+l6K+i5LiO55So5oi355u45YWz55qE5pel56iLXG4gICAgICogQHBhcmFtIHllYXJNb250aCDlubTmnIjvvIzmoLzlvI/kuLrvvJp5eXl5LU1NXG4gICAgICogQHBhcmFtIHVzZXJJZCDnlKjmiLdJRFxuICAgICAqIEByZXR1cm4g5pel56iL5YiX6KGoXG4gICAgICovXG4gICAgTGlzdDxTY2hlZHVsZVZvPiBmaW5kU2NoZWR1bGVzQnlNb250aEFuZFVzZXIoU3RyaW5nIHllYXJNb250aCwgTG9uZyB1c2VySWQpO1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbWFwcGVyL1ByaW9yaXR5TWFwcGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1hcHBlcjtcblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlByaW9yaXR5O1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLm1hcHBlci5CYXNlTWFwcGVyO1xuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoIE1hcHBlciDmjqXlj6NcbiAqIDwvcD5cbiAqL1xucHVibGljIGludGVyZmFjZSBQcmlvcml0eU1hcHBlciBleHRlbmRzIEJhc2VNYXBwZXI8UHJpb3JpdHk+IHtcblxuICAgIFBhZ2U8UHJpb3JpdHk+IHNlYXJjaFByaW9yaXR5KFBhZ2U8UHJpb3JpdHk+IHBhZ2UsIFN0cmluZyBzZWFyY2hLZXksIEludGVnZXIgdHlwZSk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1ByaW9yaXR5Q29udHJvbGxlci5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS8mOWFiOe6p+ihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3ByaW9yaXR5XCIpXG5wdWJsaWMgY2xhc3MgUHJpb3JpdHlDb250cm9sbGVyIHtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBQcmlvcml0eVNlcnZpY2UgcHJpb3JpdHlTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8UHJpb3JpdHk+PiBsaXN0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwidHlwZVwiLCByZXF1aXJlZCA9IGZhbHNlKSBJbnRlZ2VyIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic2VhcmNoS2V5XCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgUGFnZTxQcmlvcml0eT4gcHJpb3JpdHlQYWdlID0gcHJpb3JpdHlTZXJ2aWNlLnNlYXJjaChwYWdlU2l6ZSwgcGFnZU51bSwgdHlwZSwgc2VhcmNoS2V5KTtcblxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MoQ29tbW9uUGFnZS5yZXN0UGFnZShwcmlvcml0eVBhZ2UpKTtcbiAgICB9XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9tb2RlbC9TY2hlZHVsZS5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbDtcblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLklkVHlwZTtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5UYWJsZUlkO1xuaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuXG5pbXBvcnQgY29tLmZhc3RlcnhtbC5qYWNrc29uLmFubm90YXRpb24uSnNvbkZvcm1hdDtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsO1xuaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpTW9kZWxQcm9wZXJ0eTtcbmltcG9ydCBsb21ib2suR2V0dGVyO1xuaW1wb3J0IGxvbWJvay5TZXR0ZXI7XG5cbi8qKlxuICogPHA+XG4gKiDml6XnqIvlronmjpLooahcbiAqIDwvcD5cbiAqXG4gKiBAYXV0aG9yIGFpZGVuejIzM1xuICogQHNpbmNlIDIwMjUtMDQtMTZcbiAqL1xuQEdldHRlclxuQFNldHRlclxuQEFwaU1vZGVsKHZhbHVlID0gXCJTY2hlZHVsZeWvueixoVwiLCBkZXNjcmlwdGlvbiA9IFwi5pel56iL5a6J5o6S6KGoXCIpXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG5cbiAgICBAVGFibGVJZCh2YWx1ZSA9IFwiaWRcIiwgdHlwZSA9IElkVHlwZS5BVVRPKVxuICAgIHByaXZhdGUgTG9uZyBpZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75YqhSURcIilcbiAgICBwcml2YXRlIExvbmcgdGFza0lkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLlvIDlp4vml7bpl7RcIilcbiAgICBASnNvbkZvcm1hdChwYXR0ZXJuID0gXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIpXG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIHN0YXJ0VGltZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi57uT5p2f5pe26Ze0XCIpXG4gICAgQEpzb25Gb3JtYXQocGF0dGVybiA9IFwieXl5eS1NTS1kZCBISDptbTpzc1wiKVxuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBlbmRUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLliJvlu7rml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgY3JlYXRlVGltZTtcblxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi92by9TY2hlZHVsZVZvLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvO1xuXG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVWbyBleHRlbmRzIFNjaGVkdWxlIHtcbiAgICBwcml2YXRlIFN0cmluZyB0YXNrTmFtZTtcbiAgICBwcml2YXRlIFN0cmluZyB0YXNrQ29kZTtcbiAgICBwcml2YXRlIEludGVnZXIgc3RhdHVzO1xuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBkZWFkbGluZTtcblxuICAgIHByaXZhdGUgQm9vbGVhbiBoYXNDb25mbGljdDtcbiAgICBwcml2YXRlIFN0cmluZyBjb25mbGljdFNjaGVkdWxlSWRzO1xuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJEYXRhO1xuICAgIHByaXZhdGUgU3RyaW5nIHJlc291cmNlc0RhdGE7XG5cbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgZW5kVGltZTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvU2NoZWR1bGVDb250cm9sbGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLmNvbnRyb2xsZXI7XG5cblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIuY29tbW9uLmFwaS5Db21tb25SZXN1bHQ7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlNjaGVkdWxlU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uU2NoZWR1bGVWbztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVGFza1ZvO1xuaW1wb3J0IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLlNlY3VyaXR5VXRpbHM7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3NjaGVkdWxlXCIpXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVDb250cm9sbGVyIHtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zZWFyY2gocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu65pel56iL5a6J5o6SXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2NyZWF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBTY2hlZHVsZSBzY2hlZHVsZSkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmNyZWF0ZShzY2hlZHVsZSkpO1xuICAgIH1cblxuICAgIEBBcGlPcGVyYXRpb24oXCLkv67mlLnml6XnqIvlronmjpJcIilcbiAgICBAUG9zdE1hcHBpbmcoXCIvdXBkYXRlXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiB1cGRhdGUoQFJlcXVlc3RCb2R5IFNjaGVkdWxlIHNjaGVkdWxlKSB7XG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHNjaGVkdWxlU2VydmljZS51cGRhdGVTY2hlZHVsZShzY2hlZHVsZSk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5L+u5pS55pel56iL5pe26Ze0XCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL3VwZGF0ZVRpbWVcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PEJvb2xlYW4+IHVwZGF0ZVRpbWUoQFJlcXVlc3RQYXJhbSBMb25nIGlkLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSBTdHJpbmcgc3RhcnRUaW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBlbmRUaW1lKSB7XG4gICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gc2NoZWR1bGVTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgICAgICBpZiAoc2NoZWR1bGUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2NoZWR1bGUuc2V0U3RhcnRUaW1lKExvY2FsRGF0ZVRpbWUucGFyc2Uoc3RhcnRUaW1lKSk7XG4gICAgICAgICAgICBpZiAoZW5kVGltZSAhPSBudWxsICYmICFlbmRUaW1lLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUoTG9jYWxEYXRlVGltZS5wYXJzZShlbmRUaW1lKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUobnVsbCk7IC8vIOWwhueUseezu+e7n+agueaNruS7u+WKoeaXtumVv+iHquWKqOiuoeeul1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gc2NoZWR1bGVTZXJ2aWNlLnVwZGF0ZUJ5SWQoc2NoZWR1bGUpO1xuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoXCLkv67mlLnlpLHotKXvvIzor7fnqI3lkI7ph43or5VcIik7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuenu+mZpOaXpeeoi+WuieaOklwiKVxuICAgIEBQb3N0TWFwcGluZyhcIi9kZWxldGUve2lkfVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8U3RyaW5nPiBkZWxldGUoQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7XG4gICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gc2NoZWR1bGVTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSBzY2hlZHVsZVNlcnZpY2UucmVtb3ZlQnlJZChzY2hlZHVsZSk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoXCLnp7vpmaTlpLHotKXvvIzor7fnqI3lkI7ph43or5VcIik7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuafpeivouaJgOacieWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RBbGxcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PExpc3Q8U2NoZWR1bGU+PiBsaXN0QWxsKCkge1xuICAgICAgICBMaXN0PFNjaGVkdWxlPiBzY2hlZHVsZVZvcyA9IHNjaGVkdWxlU2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHNjaGVkdWxlVm9zKTtcbiAgICB9XG4uLi5cblxuICAgIEBBcGlPcGVyYXRpb24oXCLmoLnmja7mnaHku7bmn6Xor6LliJfooahcIilcbiAgICBAR2V0TWFwcGluZyhcIi91c2VyL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IHVzZXJMaXN0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZU51bVwiLCBkZWZhdWx0VmFsdWUgPSBcIjFcIikgSW50ZWdlciBwYWdlTnVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zZWFyY2hVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIFNlY3VyaXR5VXRpbHMuZ2V0VXNlcigpLmdldElkKCkpO1xuXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHNjaGVkdWxlUGFnZSkpO1xuICAgIH1cbiAgICBcbiAgICBAQXBpT3BlcmF0aW9uKFwi5oyJ5pyI5Lu95p+l6K+i5pel56iL5a6J5o6SXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbW9udGgve3llYXJNb250aH1cIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+PiBnZXRTY2hlZHVsZXNCeU1vbnRoKEBQYXRoVmFyaWFibGUgU3RyaW5nIHllYXJNb250aCkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmdldFNjaGVkdWxlc0J5TW9udGgoeWVhck1vbnRoKSk7XG4gICAgfVxuICAgIFxuICAgIEBBcGlPcGVyYXRpb24oXCLmjInmnIjku73mn6Xor6Lln7rkuo7nlKjmiLfmnYPpmZDnmoTml6XnqIvlronmjpJcIilcbiAgICBAR2V0TWFwcGluZyhcIi9tb250aC91c2VyL3t5ZWFyTW9udGh9XCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+Pj4gZ2V0U2NoZWR1bGVzQnlNb250aEFuZFVzZXIoQFBhdGhWYXJpYWJsZSBTdHJpbmcgeWVhck1vbnRoKSB7XG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeeUqOaIt1xuICAgICAgICBMb25nIHVzZXJJZCA9IFNlY3VyaXR5VXRpbHMuZ2V0VXNlcigpLmdldElkKCk7XG4gICAgICAgIC8vIOWIpOaWreeUqOaIt+eahOinkuiJsu+8jOS7jnVtc19hZG1pbl9yb2xlX3JlbGF0aW9u6KGo6K+75Y+W77yMcm9sZUlkPTHooajnpLrnrqHnkIblkZhcbiAgICAgICAgYm9vbGVhbiBpc0FkbWluID0gZmFsc2U7XG4gICAgICAgIC8vIOatpOWkhOaUueS4uuagueaNrueUqOaIt0lE55u05o6l5Yik5pat5piv5ZCm5Li6MeWPt+eUqOaIt++8iOeuoeeQhuWRmO+8iVxuICAgICAgICBpZiAodXNlcklkICE9IG51bGwgJiYgdXNlcklkID09IDEpIHtcbiAgICAgICAgICAgIGlzQWRtaW4gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmdldFNjaGVkdWxlc0J5TW9udGhBbmRVc2VyKHllYXJNb250aCwgdXNlcklkLCBpc0FkbWluKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5pm66IO95o6S5bqP5pel56iLXG4gICAgICogQHJldHVybiDmjpLluo/lkI7nmoTml6XnqIvliJfooahcbiAgICAgKi9cbiAgICBAR2V0TWFwcGluZyhcIi9zbWFydC1zb3J0XCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxMaXN0PFNjaGVkdWxlPj4gc21hcnRTb3J0U2NoZWR1bGVzKCkge1xuICAgICAgICBMaXN0PFNjaGVkdWxlPiBzb3J0ZWRTY2hlZHVsZXMgPSBzY2hlZHVsZVNlcnZpY2Uuc21hcnRTb3J0U2NoZWR1bGVzKCk7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyhzb3J0ZWRTY2hlZHVsZXMpO1xuICAgIH1cbn1cblxuLi4uXG5QYXRoOiBvZmZpY2VfcGxhbi5zcWxcbi4uLlxuXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4tLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHNjaGVkdWxlXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBgc2NoZWR1bGVgO1xuQ1JFQVRFIFRBQkxFIGBzY2hlZHVsZWAgIChcbiAgYGlkYCBiaWdpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4gIGB0YXNrX2lkYCBiaWdpbnQgTlVMTCBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5Lu75YqhSUQnLFxuICBgc3RhcnRfdGltZWAgZGF0ZXRpbWUgTlVMTCBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5byA5aeL5pe26Ze0JyxcbiAgYGNyZWF0ZV90aW1lYCB0aW1lc3RhbXAgTlVMTCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QIENPTU1FTlQgJ+WIm+W7uuaXtumXtCcsXG4gIGBlbmRfdGltZWAgZGF0ZXRpbWUgTlVMTCBERUZBVUxUIE5VTEwgQ09NTUVOVCAn57uT5p2f5pe26Ze0JyxcbiAgUFJJTUFSWSBLRVkgKGBpZGApIFVTSU5HIEJUUkVFXG4pIEVOR0lORSA9IElubm9EQiBBVVRPX0lOQ1JFTUVOVCA9IDggQ0hBUkFDVEVSIFNFVCA9IHV0ZjhtYjMgQ09MTEFURSA9IHV0ZjhtYjNfZ2VuZXJhbF9jaSBDT01NRU5UID0gJ+aXpeeoi+WuieaOkuihqCcgUk9XX0ZPUk1BVCA9IER5bmFtaWM7XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9yZXNvdXJjZXMvbWFwcGVyL3dlYi9TY2hlZHVsZU1hcHBlci54bWxcbi4uLlxuXG4gICAgPCEtLSDpgJrnlKjmn6Xor6LmmKDlsITnu5PmnpwgLS0+XG4gICAgPHJlc3VsdE1hcCBpZD1cIkJhc2VSZXN1bHRNYXBcIiB0eXBlPVwiY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlXCI+XG4gICAgICAgIDxpZCBjb2x1bW49XCJpZFwiIHByb3BlcnR5PVwiaWRcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cInRhc2tfaWRcIiBwcm9wZXJ0eT1cInRhc2tJZFwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwic3RhcnRfdGltZVwiIHByb3BlcnR5PVwic3RhcnRUaW1lXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJlbmRfdGltZVwiIHByb3BlcnR5PVwiZW5kVGltZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiY3JlYXRlX3RpbWVcIiBwcm9wZXJ0eT1cImNyZWF0ZVRpbWVcIiAvPlxuICAgIDwvcmVzdWx0TWFwPlxuICAgIDxzZWxlY3QgaWQ9XCJzZWFyY2hTY2hlZHVsZVwiIHJlc3VsdFR5cGU9XCJjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uU2NoZWR1bGVWb1wiPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICAgIHMuKixcbiAgICAgICAgICAgIHQudGl0bGUgQVMgdGFza05hbWUsXG4gICAgICAgICAgICB0LmNvZGUgQVMgdGFza0NvZGUsXG4gICAgICAgICAgICB0LnVzZXJfZGF0YSBBUyB1c2VyRGF0YSxcbiAgICAgICAgICAgIHQucmVzb3VyY2VzX2RhdGEgQVMgcmVzb3VyY2VzRGF0YSxcbiAgICAgICAgICAgIHQuc3RhdHVzIEFTIHN0YXR1cyxcbiAgICAgICAgICAgIHQuZGVhZGxpbmUgQVMgZGVhZGxpbmUsXG4gICAgICAgICAgICBzLmVuZF90aW1lIEFTIGVuZFRpbWVcbiAgICAgICAgRlJPTVxuICAgICAgICAgICAgc2NoZWR1bGUgc1xuICAgICAgICBMRUZUIEpPSU5cbiAgICAgICAgICAgIHRhc2sgdCBPTiB0LmlkID0gcy50YXNrX2lkXG4gICAgICAgIDx3aGVyZT5cbiAgICAgICAgICAgIDxpZiB0ZXN0PVwic2VhcmNoS2V5ICE9IG51bGwgYW5kIHNlYXJjaEtleSAhPSAnJ1wiPlxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbW9kZWwvVGFzay5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgYWlkZW56MjMzXG4gKiBAc2luY2UgMjAyNS0wNC0xNlxuICovXG5AR2V0dGVyXG5AU2V0dGVyXG5AQXBpTW9kZWwodmFsdWUgPSBcIlRhc2vlr7nosaFcIiwgZGVzY3JpcHRpb24gPSBcIuS7u+WKoeihqFwiKVxucHVibGljIGNsYXNzIFRhc2sgaW1wbGVtZW50Li4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMTIyODYxNWMtOTI2OC00MTZlLWE4MDctYjYxZTc4YzFiZjI3O3Rvb2x1XzAxSzVTc0hqUnhyam5EV29HQzRFaUdwZiI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiB3ZWIvc3JjL3ZpZXdzL3Rhc2svaW5kZXgudnVlXG4uLi5cbiAgICAgICAgICAgIDxlbC1idXR0b25cbiAgICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1zZWFyY2hcIlxuICAgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVTZWFyY2hMaXN0KClcIlxuICAgICAgICAgICAgICBzaXplPVwic21hbGxcIj5cbiAgICAgICAgICAgICAg5p+l6K+i5pCc57SiXG4gICAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAgICAgICA8L2VsLWZvcm0+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9lbC1jYXJkPlxuICAgICAgPGVsLWNhcmQgY2xhc3M9XCJvcGVyYXRlLWNvbnRhaW5lclwiIHNoYWRvdz1cIm5ldmVyXCI+XG4gICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi10aWNrZXRzXCI+PC9pPlxuICAgICAgICA8c3Bhbj7ku7vliqHliJfooag8L3NwYW4+PGVsLXRhZyB0eXBlPVwiaW5mb1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IDEwcHg7XCIgY2xhc3M9XCJlbC1pY29uLWluZm9cIj7lt7LmjInkvJjlhYjnuqfku47pq5jliLDkvY7mjpLliJc8L2VsLXRhZz5cbiAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVwic21hbGxcIiBjbGFzcz1cImJ0bi1hZGRcIiBAY2xpY2s9XCJoYW5kbGVBZGQoKVwiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IDIwcHhcIiB0eXBlPVwic3VjY2Vzc1wiPjxpIGNsYXNzPVwiZWwtaWNvbi1wbHVzXCI+5Yib5bu65Lu75YqhPC9pPjwvZWwtYnV0dG9uPlxuICAgICAgPC9lbC1jYXJkPlxuICAgICAgPGRpdiBjbGFzcz1cInRhYmxlLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZWwtdGFibGUgcmVmPVwiYWRtaW5UYWJsZVwiXG4gICAgICAgICAgICAgICAgICA6ZGF0YT1cImxpc3RcIlxuICAgICAgICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIlxuICAgICAgICAgICAgICAgICAgdi1sb2FkaW5nPVwibGlzdExvYWRpbmdcIiBzdHJpcGU+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBsYWJlbD1cIue8luWPt1wiIHdpZHRoPVwiMTAwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy5pZH19PC90ZW1wbGF0ZT5cbiAgICAgICAgICA8L2VsLXRhYmxlLWNvbHVtbj5cbi4uLlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gd2lkdGg9XCIxMjBcIiBsYWJlbD1cIuadg+mHjeWIhuWAvFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8dGVtcGxhdGUgc2xvdC1zY29wZT1cInNjb3BlXCI+PGVsLXRhZyB0eXBlPVwiZGFuZ2VyXCI+e3tzY29wZS5yb3cucHJpb3JpdHlTY29yZSB8fCAwfX08L2VsLXRhZz48L3RlbXBsYXRlPlxuICAgICAgICAgIDwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gbGFiZWw9XCLnirbmgIFcIiB3aWR0aD1cIjE2MFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8dGVtcGxhdGUgc2xvdC1zY29wZT1cInNjb3BlXCI+e3tzY29wZS5yb3cuc3RhdHVzIHwgZm9ybWF0U3RhdHVzfX08L3RlbXBsYXRlPlxuICAgICAgICAgIDwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gbGFiZWw9XCLpooTkvLDml7bpl7RcIiB3aWR0aD1cIjE2MFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8dGVtcGxhdGUgc2xvdC1zY29wZT1cInNjb3BlXCI+e3tzY29wZS5yb3cudGltZVNwZW5kfX0g5YiG6ZKfPC90ZW1wbGF0ZT5cbiAgICAgICAgICA8L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHdpZHRoPVwiMzAwXCIgbGFiZWw9XCLku7vliqHmj4/ov7BcIiBhbGlnbj1cImNlbnRlclwiPlxuICAgICAgICAgICAgPHRlbXBsYXRlIHNsb3Qtc2NvcGU9XCJzY29wZVwiPnt7c2NvcGUucm93LmRlc2NyaXB0aW9ufX08L3RlbXBsYXRlPlxuICAgICAgICAgIDwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gbGFiZWw9XCLmiKrmraLml7bpl7RcIiB3aWR0aD1cIjE2MFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8dGVtcGxhdGUgc2xvdC1zY29wZT1cInNjb3BlXCI+e3tzY29wZS5yb3cuZGVhZGxpbmUgfCBmb3JtYXREYXRlVGltZX19PC90ZW1wbGF0ZT5cbi4uLlxuICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8L2VsLWZvcm0+XG4gICAgICAgIDxzcGFuIHNsb3Q9XCJmb290ZXJcIiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgICA8ZWwtYnV0dG9uIEBjbGljaz1cImRpYWxvZ1Zpc2libGUgPSBmYWxzZVwiIHNpemU9XCJzbWFsbFwiPuWPliDmtog8L2VsLWJ1dHRvbj5cbiAgICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiaGFuZGxlRGlhbG9nQ29uZmlybSgpXCIgc2l6ZT1cInNtYWxsXCI+56GuIOWumjwvZWwtYnV0dG9uPlxuICAgICAgICA8L3NwYW4+XG4gICAgICA8L2VsLWRpYWxvZz5cbiAgICA8L2Rpdj5cbiAgPC90ZW1wbGF0ZT5cbiAgPHNjcmlwdD5cbiAgICBpbXBvcnQge2ZldGNoVGFza0xpc3QsY3JlYXRlVGFzayx1cGRhdGVUYXNrLGRlbGV0ZVRhc2ssZmV0Y2hBbGxDYXRlZ29yeUxpc3QsIGZldGNoQWxsUHJpb3JpdHlMaXN0LCBmZXRjaEFsbFJlc291cmNlTGlzdH0gZnJvbSAnQC9hcGkvYXBpJztcbiAgICBpbXBvcnQge2ZldGNoQWxsVXNlckxpc3R9IGZyb20gJ0AvYXBpL2xvZ2luJztcblxuICAgIGltcG9ydCB7Zm9ybWF0RGF0ZX0gZnJvbSAnQC91dGlscy9kYXRlJztcblxuICAgIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAgICBwYWdlTnVtOiAxLFxuICAgICAgcGFnZVNpemU6IDEwLFxuICAgICAgc2VhcmNoS2V5OiBudWxsLFxuICAgICAgY2F0ZWdvcnlJZDogbnVsbCxcbiAgICB9O1xuLi4uXG4gICAgICBmaWx0ZXJzOiB7XG4gICAgICAgIGZvcm1hdERhdGVUaW1lKHRpbWUpIHtcbiAgICAgICAgICBpZiAodGltZSA9PSBudWxsIHx8IHRpbWUgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ04vQSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW06c3MnKVxuICAgICAgICB9LFxuICAgICAgICBmb3JtYXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgICAgLy8gaWYgKHN0YXR1cyA9PSAwKSB7XG4gICAgICAgICAgLy8gICByZXR1cm4gJ+W+heWuoeaguCc7XG4gICAgICAgICAgLy8gfVxuICAgICAgICAgIGlmIChzdGF0dXMgPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuICflvoXlip4nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdHVzID09IDIpIHtcbiAgICAgICAgICAgIHJldHVybiAn5bey5a6J5o6SJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXR1cyA9PSAzKSB7XG4gICAgICAgICAgICByZXR1cm4gJ+i/m+ihjOS4rSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0dXMgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuICflt7LlrozmiJAnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdHVzID09IDUpIHtcbiAgICAgICAgICAgIHJldHVybiAn5bey6YC+5pyfJztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuICfmnKrnn6UnO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWQoKSB7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpO1xuICAgICAgICB0aGlzLmdldFByaW9yaXR5TGlzdCgpO1xuICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7XG4gICAgICAgIHRoaXMuZ2V0UmVzb3VyY2VMaXN0KCk7XG4gICAgICB9LFxuICAgICAgbWV0aG9kczoge1xuICAgICAgICBnZXRVc2VyTGlzdCgpIHtcbiAgICAgICAgICBmZXRjaEFsbFVzZXJMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVzZXJMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UmVzb3VyY2VMaXN0KCkge1xuICAgICAgICAgIGZldGNoQWxsUmVzb3VyY2VMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFByaW9yaXR5TGlzdCgpIHtcbiAgICAgICAgICBmZXRjaEFsbFByaW9yaXR5TGlzdCh7dHlwZTogMX0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbXBvcnRhbmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZmV0Y2hBbGxQcmlvcml0eUxpc3Qoe3R5cGU6IDJ9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXhpZ2VuY3lMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICAgICAgICAgdGhpcy5saXN0UXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KTtcbiAgICAgICAgICB0aGlzLmdldExpc3QoKVxuICAgICAgICB9LFxuLi4uXG4gICAgICAgIGhhbmRsZVVwZGF0ZShyb3cpIHtcbiAgICAgICAgICB0aGlzLmlzRWRpdCA9IHRydWU7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJvdy51c2VySWRzID0gSlNPTi5wYXJzZShyb3cudXNlckRhdGEpO1xuICAgICAgICAgICAgcm93LnJlc291cmNlSWRzID0gSlNPTi5wYXJzZShyb3cucmVzb3VyY2VzRGF0YSk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJvdy51c2VySWRzID0gW107XG4gICAgICAgICAgICByb3cucmVzb3VyY2VJZHMgPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5hZG1pbiA9IE9iamVjdC5hc3NpZ24oe30scm93KTtcbiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgICBnZXRMaXN0KCkge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgICAgICAgIGZldGNoVGFza0xpc3QodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZVN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUpIHtcbiAgICAgICAgICAvLyDlpITnkIbkuIrkvKDmiJDlip/lkI7nmoTpgLvovpHvvIzojrflj5blkI7nq6/ov5Tlm57nmoTmlofku7bot6/lvoRcbiAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgdGhpcy5hZG1pbi5pbWFnZSA9IGAke3Byb2Nlc3MuZW52LkJBU0VfQVBJfS8ke2ZpbGVQYXRofWA7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihmaWxlUGF0aCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldENhdGVnb3J5TGlzdCgpIHtcbiAgICAgICAgICBmZXRjaEFsbENhdGVnb3J5TGlzdCgpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlMaXN0ID0gcmVzLmRhdGFcbiAgICAgICAgICB9KVxuICAgICAgICB9LFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9UYXNrQ29udHJvbGxlci5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3Rhc2tcIilcbnB1YmxpYyBjbGFzcyBUYXNrQ29udHJvbGxlciB7XG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVGFza1NlcnZpY2UgdGFza1NlcnZpY2U7XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5qC55o2u5p2h5Lu25p+l6K+i5YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxUYXNrVm8+PiBsaXN0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwiY2F0ZWdvcnlJZFwiLCByZXF1aXJlZCA9IGZhbHNlKSBMb25nIGNhdGVnb3J5SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic2VhcmNoS2V5XCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgUGFnZTxUYXNrVm8+IHRhc2tQYWdlID0gdGFza1NlcnZpY2Uuc2VhcmNoKHBhZ2VTaXplLCBwYWdlTnVtLCBjYXRlZ29yeUlkLCBzZWFyY2hLZXkpO1xuXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHRhc2tQYWdlKSk7XG4gICAgfVxuLi4uXG5QYXRoOiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZVxuLi4uXG4gICAgICAvLyDmoLzlvI/ljJblsZXnpLrml6XmnJ9cbiAgICAgIGZvcm1hdERheURhdGUoZGF0ZVN0cikge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl55bm0TU3mnIhkZOaXpScpO1xuICAgICAgfSxcbiAgICAgIC8vIOagvOW8j+WMluaXtumXtOS4ukhIOk1N5qC85byPXG4gICAgICBmb3JtYXRUaW1lKGRhdGVUaW1lU3RyKSB7XG4gICAgICAgIGlmICghZGF0ZVRpbWVTdHIpIHJldHVybiAnJztcbiAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlVGltZVN0ci5zcGxpdCgnICcpO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMiB8fCAhcGFydHNbMV0pIHJldHVybiAnJztcbiAgICAgICAgcmV0dXJuIHBhcnRzWzFdLnN1YnN0cmluZygwLCA1KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRUYXNrTGlzdChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEFsbFRhc2tMaXN0QnlTdGF0dXMocGFyYW1zKVxuICAgICAgICB0aGlzLnRhc2tMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRBbGxUYXNrTGlzdCgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEFsbFRhc2tMaXN0KClcbiAgICAgICAgdGhpcy50YXNrTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0VGFza0luZm8oaWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFRhc2tJbmZvKGlkKTtcbiAgICAgICAgdGhpcy50YXNrSW5mbyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdmlld0JhcmNvZGUocm93KSB7XG4gICAgICAgIHRoaXMuY3VycmVudENvZGUgPSByb3cudGFza0NvZGU7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0VGFza0luZm8ocm93LnRhc2tJZCk7XG4gICAgICAgIHRoaXMuYmFyY29kZURpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgfSxcbi4uLlxuICAgICAgZ2V0TGlzdCgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICBwYWdlTnVtOiB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtLFxuICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleSkge1xuICAgICAgICAgIHBhcmFtcy5zZWFyY2hLZXkgPSB0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGZldGNoU2NoZWR1bGVMaXN0KHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuLi4uXG5QYXRoOiB3ZWIvc3JjL3ZpZXdzL25vdGlmaWNhdGlvbi9pbmRleC52dWVcbi4uLlxuICAgIG1ldGhvZHM6IHtcbiAgICAgIGZvcm1hdERhdGVUaW1lKHRpbWUpIHtcbiAgICAgICAgaWYgKHRpbWUgPT0gbnVsbCB8fCB0aW1lID09PSAnJykge1xuICAgICAgICAgIHJldHVybiAn5pyq55+l5pe26Ze0JztcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xuICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlLCAneXl5eS1NTS1kZCBoaDptbScpO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgYXN5bmMgZ2V0VXNlckxpc3QoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFVzZXJMaXN0KHtwYWdlU2l6ZTogMTAwfSk7XG4gICAgICAgICAgdGhpcy51c2VyTGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdCB8fCBbXTtcbiAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlueUqOaIt+WIl+ihqOWksei0pTonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIGFzeW5jIGdldFRhc2tMaXN0KCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbGxUYXNrTGlzdCgpO1xuICAgICAgICAgIHRoaXMudGFza0xpc3QgPSByZXNwb25zZS5kYXRhIHx8IFtdO1xuICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5Lu75Yqh5YiX6KGo5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFxuICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgfSxcbiAgICAgIFxuICAgICAgaGFuZGxlU2VhcmNoTGlzdCgpIHtcbiAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IDE7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgfSxcbi4uLlxuUGF0aDogd2ViL3NyYy9hcGkvYXBpLmpzXG5pbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnXG5cbi8vIOi1hOa6kOWIhuexu1xuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQ2F0ZWdvcnlMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jYXRlZ29yeS9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2F0ZWdvcnkoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jYXRlZ29yeS9jcmVhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGEsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL2NhdGVnb3J5L3VwZGF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ2F0ZWdvcnkoaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2F0ZWdvcnkvZGVsZXRlLycgKyBpZCxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsQ2F0ZWdvcnlMaXN0KCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jYXRlZ29yeS9saXN0QWxsJyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICB9KVxufVxuXG4vLyDpppbpobXmlbDmja5cbmV4cG9ydCBmdW5jdGlvbiBob21lRGF0YSgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvaG9tZScsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuXG4vLyDnlKjmiLdcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFVzZXJMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi91c2VyL2xpc3QnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVVc2VyKGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdXNlci9jcmVhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGEsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVVc2VyKGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdXNlci91cGRhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGFcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVVzZXIoaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdXNlci9kZWxldGUvJyArIGlkLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9KVxufVxuXG4vLyDotYTmupBcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFJlc291cmNlTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcmVzb3VyY2VzL2xpc3QnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVSZXNvdXJjZShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Jlc291cmNlcy9jcmVhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGEsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVSZXNvdXJjZShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Jlc291cmNlcy91cGRhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGFcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVJlc291cmNlKGlkKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Jlc291cmNlcy9kZWxldGUvJyArIGlkLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hBbGxSZXNvdXJjZUxpc3QoKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Jlc291cmNlcy9saXN0QWxsJyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICB9KVxufVxuXG4vLyDmnYPph41cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFByaW9yaXR5TGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcHJpb3JpdHkvbGlzdCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByaW9yaXR5KGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcHJpb3JpdHkvY3JlYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUHJpb3JpdHkoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9wcmlvcml0eS91cGRhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGFcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVByaW9yaXR5KGlkKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3ByaW9yaXR5L2RlbGV0ZS8nICsgaWQsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaEFsbFByaW9yaXR5TGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcHJpb3JpdHkvbGlzdEFsbCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuXG4vLyDku7vliqFcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFRhc2tMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL2xpc3QnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVUYXNrKGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9jcmVhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGEsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrKGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay91cGRhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGFcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVRhc2tTdGF0dXMoaWQsIHN0YXR1cykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL3VwZGF0ZVN0YXR1cycsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgcGFyYW1zOiB7IGlkLCBzdGF0dXMgfVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VGFza1JlbWluZGVyKGlkLCByZW1pbmRlclRpbWUpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9zZXRSZW1pbmRlcicsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgcGFyYW1zOiB7IGlkLCByZW1pbmRlclRpbWUgfVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlVGFzayhpZCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL2RlbGV0ZS8nICsgaWQsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaEFsbFRhc2tMaXN0QnlTdGF0dXMocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdEFsbEJ5U3RhdHVzJyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hBbGxUYXNrTGlzdCgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9saXN0QWxsJyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hUYXNrSW5mbyhpZCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL2luZm8vJyArIGlkLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cbi8vIOWuieaOklxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoU2NoZWR1bGVMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hVc2VyU2NoZWR1bGVMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS91c2VyL2xpc3QnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaE1vbnRoU2NoZWR1bGVMaXN0KHllYXJNb250aCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiBgL3dlYi9zY2hlZHVsZS9tb250aC8ke3llYXJNb250aH1gLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFVzZXJNb250aFNjaGVkdWxlTGlzdCh5ZWFyTW9udGgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogYC93ZWIvc2NoZWR1bGUvbW9udGgvdXNlci8ke3llYXJNb250aH1gLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTY2hlZHVsZShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL2NyZWF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YSxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNjaGVkdWxlKGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3MvdXNlclRhc2svaW5kZXgudnVlXG4uLi5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICA8L2VsLWZvcm0+XG4gICAgICA8c3BhbiBzbG90PVwiZm9vdGVyXCIgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgIDxlbC1idXR0b24gQGNsaWNrPVwiZGlhbG9nVmlzaWJsZSA9IGZhbHNlXCIgc2l6ZT1cInNtYWxsXCI+5Y+WIOa2iDwvZWwtYnV0dG9uPlxuICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiaGFuZGxlRGlhbG9nQ29uZmlybSgpXCIgc2l6ZT1cInNtYWxsXCI+56GuIOWumjwvZWwtYnV0dG9uPlxuICAgICAgPC9zcGFuPlxuICAgIDwvZWwtZGlhbG9nPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG48c2NyaXB0PlxuICBpbXBvcnQge2ZldGNoVGFza0xpc3QsY3JlYXRlVGFzayx1cGRhdGVUYXNrLGRlbGV0ZVRhc2ssZmV0Y2hBbGxDYXRlZ29yeUxpc3QsIGZldGNoQWxsUHJpb3JpdHlMaXN0LCBmZXRjaEFsbFJlc291cmNlTGlzdH0gZnJvbSAnQC9hcGkvYXBpJztcbiAgaW1wb3J0IHtmZXRjaEFsbFVzZXJMaXN0fSBmcm9tICdAL2FwaS9sb2dpbic7XG5cbiAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuXG4gIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAgcGFnZU51bTogMSxcbiAgICBwYWdlU2l6ZTogMTAsXG4gICAgc2VhcmNoS2V5OiBudWxsLFxuICAgIGNhdGVnb3J5SWQ6IG51bGwsXG4gIH07XG4uLi5cbiAgICBtZXRob2RzOiB7XG4gICAgICBnZXRVc2VyTGlzdCgpIHtcbiAgICAgICAgZmV0Y2hBbGxVc2VyTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMudXNlckxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRSZXNvdXJjZUxpc3QoKSB7XG4gICAgICAgIGZldGNoQWxsUmVzb3VyY2VMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5yZXNvdXJjZUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRQcmlvcml0eUxpc3QoKSB7XG4gICAgICAgIGZldGNoQWxsUHJpb3JpdHlMaXN0KHt0eXBlOiAxfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5pbXBvcnRhbmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgICBmZXRjaEFsbFByaW9yaXR5TGlzdCh7dHlwZTogMn0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMuZXhpZ2VuY3lMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpXG4gICAgICB9LFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBCb29sZWFuIGNyZWF0ZShUYXNrIHRhc2spIHtcbiAgICAgICAgdGFzay5zZXRDb2RlKElkVXRpbC5yYW5kb21VVUlEKCkpO1xuICAgICAgICBMaXN0PFByaW9yaXR5PiBwcmlvcml0aWVzID0gcHJpb3JpdHlTZXJ2aWNlLmxpc3QoKTtcblxuICAgICAgICAvLyDlvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOmBjeWOhuS8mOWFiOe6p+aVsOaNru+8jOiuvue9riBpbXBvcnRhbmNlSWQg5ZKMIGV4aWdlbmN5SWRcbiAgICAgICAgZm9yIChQcmlvcml0eSBwcmlvcml0eSA6IHByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgIC8vIOWMuemFjSBpbXBvcnRhbmNlSWQgKHR5cGU9MSDkuJQgY2F0ZWdvcnlJZCDnm7jlkIwpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDEgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpLmVxdWFscyh0YXNrLmdldENhdGVnb3J5SWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrLnNldEltcG9ydGFuY2VJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhpblJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suc2V0RXhpZ2VuY3lJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9ruS7u+WKoeWIneWni+eKtuaAgeS4uuW+heWKnlxuICAgICAgICBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0YXNrLnNldFN0YXR1cygxKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSh0YXNrKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQm9vbGVhbiB1cGRhdGVUYXNrKFRhc2sgdGFzaykge1xuICAgICAgICBMaXN0PFByaW9yaXR5PiBwcmlvcml0aWVzID0gcHJpb3JpdHlTZXJ2aWNlLmxpc3QoKTtcblxuICAgICAgICAvLyDlvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOmBjeWOhuS8mOWFiOe6p+aVsOaNru+8jOiuvue9riBpbXBvcnRhbmNlSWQg5ZKMIGV4aWdlbmN5SWRcbiAgICAgICAgZm9yIChQcmlvcml0eSBwcmlvcml0eSA6IHByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgIC8vIOWMuemFjSBpbXBvcnRhbmNlSWQgKHR5cGU9MSDkuJQgY2F0ZWdvcnlJZCDnm7jlkIwpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDEgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpLmVxdWFscyh0YXNrLmdldENhdGVnb3J5SWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrLnNldEltcG9ydGFuY2VJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cbi4uLlxuICAgICAgICBcbiAgICAgICAgLy8g5oiq5q2i5pe26Ze05p2D6YeN6K6h566XXG4gICAgICAgIGlmICh0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgICAgICAgICAgbG9uZyBob3Vyc1VudGlsRGVhZGxpbmUgPSBDaHJvbm9Vbml0LkhPVVJTLmJldHdlZW4obm93LCB0YXNrLmdldERlYWRsaW5lKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDmiKrmraLml7bpl7Totorov5HvvIzliIbmlbDotorpq5hcbiAgICAgICAgICAgIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMjQpIHtcbiAgICAgICAgICAgICAgICBzY29yZSArPSA1MDsgLy8gMjTlsI/ml7blhoXpop3lpJbliqA1MOWIhlxuICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gNzIpIHtcbiAgICAgICAgICAgICAgICBzY29yZSArPSAzMDsgLy8gNzLlsI/ml7blhoXpop3lpJbliqAzMOWIhlxuICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMTY4KSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gMTA7IC8vIOS4gOWRqOWGhemineWkluWKoDEw5YiGXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzY29yZTtcbiAgICB9XG4gICAgXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIExpc3Q8VGFza1ZvPiBnZXRQcmlvcml0aXplZFRhc2tzKExvbmcgdXNlcklkKSB7XG4gICAgICAgIC8vIDEuIOiOt+WPluaJgOacieW+heWKnuS7u+WKoe+8iOeKtuaAgeS4ujHvvIlcbiAgICAgICAgUXVlcnlXcmFwcGVyPFRhc2s+IHF1ZXJ5V3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xuICAgICAgICBxdWVyeVdyYXBwZXIuZXEoXCJzdGF0dXNcIiwgMSk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmjIflrprkuobnlKjmiLdJRO+8jOWImeWPquiOt+WPluivpeeUqOaIt+ebuOWFs+eahOS7u+WKoVxuICAgICAgICBpZiAodXNlcklkICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIOmcgOimgeaQnOe0onVzZXJEYXRh5a2X5q615Lit5YyF5ZCrdXNlcklk55qE6K6w5b2VXG4gICAgICAgICAgICAvLyDms6jmhI/vvJrov5nnp43mlrnlvI/lj6/og73kuI3lpJ/lh4bnoa7vvIzmm7Tlpb3nmoTmlrnms5XmmK/kvb/nlKhKU09O5Ye95pWw77yI5aaC5p6c5pWw5o2u5bqT5pSv5oyB77yJXG4gICAgICAgICAgICBxdWVyeVdyYXBwZXIubGlrZShcInVzZXJfZGF0YVwiLCB1c2VySWQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIExpc3Q8VGFzaz4gdGFza3MgPSB0aGlzLmxpc3QocXVlcnlXcmFwcGVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDIuIOi9rOaNouS4ulRhc2tWb+W5tuiuoeeul+S8mOWFiOe6p+WIhuaVsFxuICAgICAgICBMaXN0PFRhc2tWbz4gdGFza1ZvcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICBmb3IgKFRhc2sgdGFzayA6IHRhc2tzKSB7XG4gICAgICAgICAgICBUYXNrVm8gdGFza1ZvID0gbmV3IFRhc2tWbygpO1xuICAgICAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHRhc2ssIHRhc2tWbyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuvue9ruS8mOWFiOe6p+WIhuaVsFxuICAgICAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKHRhc2spO1xuICAgICAgICAgICAgdGFza1ZvLnNldFByaW9yaXR5U2NvcmUocHJpb3JpdHlTY29yZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiOt+WPluS7u+WKoeexu+Wei+WQjeensFxuICAgICAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBjYXRlZ29yeVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldENhdGVnb3J5SWQoKSk7XG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhc2tWby5zZXRDYXRlZ29yeU5hbWUoY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6I635Y+W6YeN6KaB5oCn5ZKM57Sn5oCl5oCn5ZCN56ewXG4gICAgICAgICAgICBpZiAodGFzay5nZXRJbXBvcnRhbmNlSWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgUHJpb3JpdHkgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGltcG9ydGFuY2VQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0YXNrLmdldEV4aWdlbmN5SWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0RXhpZ2VuY3lJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRFeGlnZW5jeU5hbWUoZXhpZ2VuY3lQcmlvcml0eS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFza1Zvcy5hZGQodGFza1ZvKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gMy4g5oyJ5LyY5YWI57qn5YiG5pWw5o6S5bqP77yI5LuO6auY5Yiw5L2O77yJXG4gICAgICAgIHRhc2tWb3Muc29ydCgoYSwgYikgLT4gRG91YmxlLmNvbXBhcmUoYi5nZXRQcmlvcml0eVNjb3JlKCksIGEuZ2V0UHJpb3JpdHlTY29yZSgpKSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFza1ZvcztcbiAgICB9XG4gICAgXG4gICAgQE92ZXJyaWRlXG4gICAgQFRyYW5zYWN0aW9uYWwocm9sbGJhY2tGb3IgPSBFeGNlcHRpb24uY2xhc3MpXG4gICAgcHVibGljIE1hcDxMb25nLCBCb29sZWFuPiBhdXRvU2NoZWR1bGVUYXNrcyhMb2NhbERhdGUgZGF0ZSwgTG9uZyB1c2VySWQpIHtcbiAgICAgICAgLy8g57uT5p6c5pig5bCE77yM6K6w5b2V5q+P5Liq5Lu75Yqh55qE5a6J5o6S57uT5p6cXG4gICAgICAgIE1hcDxMb25nLCBCb29sZWFuPiByZXN1bHQgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyAxLiDojrflj5bmjpLluo/lkI7nmoTku7vliqHliJfooahcbiAgICAgICAgTGlzdDxUYXNrVm8+IHByaW9yaXRpemVkVGFza3MgPSBnZXRQcmlvcml0aXplZFRhc2tzKHVzZXJJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInlvoXlip7ku7vliqHvvIznm7TmjqXov5Tlm57nqbrnu5PmnpxcbiAgICAgICAgaWYgKHByaW9yaXRpemVkVGFza3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4uLi5cbiAgICAgICAgXG4gICAgICAgIC8vIDUuIOagueaNruS8mOWFiOe6p+WSjOS7u+WKoeaJgOmcgOaXtumXtOWuieaOkuS7u+WKoVxuICAgICAgICBmb3IgKFRhc2tWbyB0YXNrVm8gOiBwcmlvcml0aXplZFRhc2tzKSB7XG4gICAgICAgICAgICBUYXNrIHRhc2sgPSB0aGlzLmdldEJ5SWQodGFza1ZvLmdldElkKCkpO1xuICAgICAgICAgICAgaWYgKHRhc2sgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5wdXQodGFza1ZvLmdldElkKCksIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X5Lu75Yqh5omA6ZyA5pe26Ze05q615pWw6YePXG4gICAgICAgICAgICBpbnQgcmVxdWlyZWRTbG90cyA9IDE7IC8vIOm7mOiupOWNoOeUqDHkuKrml7bpl7TmrrXvvIgzMOWIhumSn++8iVxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0VGltZVNwZW5kKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIOavjzMw5YiG6ZKf5LiA5Liq5pe26Ze05q6177yM5ZCR5LiK5Y+W5pW0XG4gICAgICAgICAgICAgICAgcmVxdWlyZWRTbG90cyA9IChpbnQuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI2MGIyMjUzMi1jNzY4LTQ5NDktYjEwYS1mYzBjODNkNDFiYWQ7dG9vbHVfMDFRelJCRjU0cllpWmZveUJBWmZXaTNxIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1Rhc2tDb250cm9sbGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLmNvbnRyb2xsZXI7XG5cblxuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuSWRVdGlsO1xuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuT2JqZWN0VXRpbDtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5jb21tb24uYXBpLkNvbW1vblBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUmVzdWx0O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlRhc2tTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuXG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3Rhc2tcIilcbnB1YmxpYyBjbGFzcyBUYXNrQ29udHJvbGxlciB7XG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVGFza1NlcnZpY2UgdGFza1NlcnZpY2U7XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5qC55o2u5p2h5Lu25p+l6K+i5YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxUYXNrVm8+PiBsaXN0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwiY2F0ZWdvcnlJZFwiLCByZXF1aXJlZCA9IGZhbHNlKSBMb25nIGNhdGVnb3J5SWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic2VhcmNoS2V5XCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgUGFnZTxUYXNrVm8+IHRhc2tQYWdlID0gdGFza1NlcnZpY2Uuc2VhcmNoKHBhZ2VTaXplLCBwYWdlTnVtLCBjYXRlZ29yeUlkLCBzZWFyY2hLZXkpO1xuXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHRhc2tQYWdlKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu65Lu75YqhXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2NyZWF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBUYXNrIHRhc2spIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmNyZWF0ZSh0YXNrKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuS/ruaUueS7u+WKoVwiKVxuICAgIEBQb3N0TWFwcGluZyhcIi91cGRhdGVcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PEJvb2xlYW4+IHVwZGF0ZShAUmVxdWVzdEJvZHkgVGFzayB0YXNrKSB7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVUYXNrKHRhc2spKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5L+u5pS55Lu75Yqh54q25oCBXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL3VwZGF0ZVN0YXR1c1wiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gdXBkYXRlU3RhdHVzKEBSZXF1ZXN0UGFyYW0gTG9uZyBpZCwgQFJlcXVlc3RQYXJhbSBJbnRlZ2VyIHN0YXR1cykge1xuICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGlkKTtcbiAgICAgICAgaWYgKHRhc2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoc3RhdHVzKTtcbiAgICAgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LmZhaWxlZChcIuS7u+WKoeS4jeWtmOWcqFwiKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi6K6+572u5Lu75Yqh5o+Q6YaS5pe26Ze0XCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL3NldFJlbWluZGVyXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiBzZXRSZW1pbmRlcihAUmVxdWVzdFBhcmFtIExvbmcgaWQsIEBSZXF1ZXN0UGFyYW0ocmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHJlbWluZGVyVGltZSkge1xuICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGlkKTtcbiAgICAgICAgaWYgKHRhc2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHJlbWluZGVyVGltZSAhPSBudWxsICYmICFyZW1pbmRlclRpbWUuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRSZW1pbmRlclRpbWUoamF2YS50aW1lLkxvY2FsRGF0ZVRpbWUucGFyc2UocmVtaW5kZXJUaW1lKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhc2suc2V0UmVtaW5kZXJUaW1lKG51bGwpOyAvLyDlj5bmtojmj5DphpJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LmZhaWxlZChcIuS7u+WKoeS4jeWtmOWcqFwiKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi56e76Zmk5Lu75YqhXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2RlbGV0ZS97aWR9XCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxTdHJpbmc+IGRlbGV0ZShAUGF0aFZhcmlhYmxlIExvbmcgaWQpIHtcbiAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChpZCk7XG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRhc2tTZXJ2aWNlLnJlbW92ZUJ5SWQodGFzayk7XG4gICAgICAgIGlmIChzdWNjZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoXCLnp7vpmaTlpLHotKXvvIzor7fnqI3lkI7ph43or5VcIik7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuafpeivouaJgOacieWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RBbGxCeVN0YXR1c1wiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrVm8+PiBsaXN0QWxsKEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInN0YXR1c1wiLCByZXF1aXJlZCA9IGZhbHNlKSBJbnRlZ2VyIHN0YXR1cykge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UubGlzdEFsbChzdGF0dXMpKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5p+l6K+i5omA5pyJ5YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdEFsbFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrPj4gbGlzdEFsbCgpIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmxpc3QoKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuafpeivouS7u+WKoeivpuaDhVwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2luZm8ve2lkfVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8VGFza1ZvPiBnZXRJbmZvKEBQYXRoVmFyaWFibGUgTG9uZyBpZCkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UuZ2V0SW5mbyhpZCkpO1xuICAgIH1cbn1cblxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbWFwcGVyL1Rhc2tNYXBwZXIuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5tYXBwZXIuQmFzZU1hcHBlcjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVGFza1ZvO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZDtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmRQaWU7XG5cbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCBNYXBwZXIg5o6l5Y+jXG4gKiA8L3A+XG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgVGFza01hcHBlciBleHRlbmRzIEJhc2VNYXBwZXI8VGFzaz4ge1xuXG4gICAgUGFnZTxUYXNrVm8+IHNlYXJjaFRhc2soUGFnZTxUYXNrVm8+IHBhZ2UsIFN0cmluZyBzZWFyY2hLZXksIExvbmcgY2F0ZWdvcnlJZCk7XG5cbiAgICBMaXN0PFRhc2tWbz4gbGlzdEFsbChJbnRlZ2VyIHN0YXR1cyk7XG5cbiAgICBMaXN0PFRyZW5kUGllPiB0cmVuZFBpZSgpO1xuXG4gICAgTGlzdDxUcmVuZD4gdHJlbmQoU3RyaW5nIHN0YXJ0RGF0ZSwgU3RyaW5nIGVuZERhdGUpO1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOS7u+WKoeihqCDmnI3liqHlrp7njrDnsbtcbiAqIDwvcD5cbiAqL1xuQFNlcnZpY2VcbnB1YmxpYyBjbGFzcyBUYXNrU2VydmljZUltcGwgZXh0ZW5kcyBTZXJ2aWNlSW1wbDxUYXNrTWFwcGVyLCBUYXNrPiBpbXBsZW1lbnRzIFRhc2tTZXJ2aWNlIHtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFRhc2tNYXBwZXIgdGFza01hcHBlcjtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIENhdGVnb3J5U2VydmljZSBjYXRlZ29yeVNlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBQcmlvcml0eVNlcnZpY2UgcHJpb3JpdHlTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVW1zQWRtaW5TZXJ2aWNlIHVzZXJTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgUmVzb3VyY2VzU2VydmljZSByZXNvdXJjZXNTZXJ2aWNlO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIEBMYXp5XG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFBhZ2U8VGFza1ZvPiBzZWFyY2goSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBMb25nIGNhdGVnb3J5SWQsIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgLy8g5YWI5pu05paw5omA5pyJ5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcbiAgICAgICAgXG4gICAgICAgIFBhZ2U8VGFza1ZvPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIHJldHVybiB0YXNrTWFwcGVyLnNlYXJjaFRhc2socGFnZSwgc2VhcmNoS2V5LCBjYXRlZ29yeUlkKTtcbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBCb29sZWFuIGNyZWF0ZShUYXNrIHRhc2spIHtcbiAgICAgICAgdGFzay5zZXRDb2RlKElkVXRpbC5yYW5kb21VVUlEKCkpO1xuICAgICAgICBMaXN0PFByaW9yaXR5PiBwcmlvcml0aWVzID0gcHJpb3JpdHlTZXJ2aWNlLmxpc3QoKTtcblxuICAgICAgICAvLyDlvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOmBjeWOhuS8mOWFiOe6p+aVsOaNru+8jOiuvue9riBpbXBvcnRhbmNlSWQg5ZKMIGV4aWdlbmN5SWRcbiAgICAgICAgZm9yIChQcmlvcml0eSBwcmlvcml0eSA6IHByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgIC8vIOWMuemFjSBpbXBvcnRhbmNlSWQgKHR5cGU9MSDkuJQgY2F0ZWdvcnlJZCDnm7jlkIwpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDEgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpLmVxdWFscyh0YXNrLmdldENhdGVnb3J5SWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrLnNldEltcG9ydGFuY2VJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Yy56YWNIGV4aWdlbmN5SWQgKHR5cGU9MiDkuJQgZGVhZGxpbmUg5Zyo5pe26Ze05Yy66Ze06IyD5Zu05YaFKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAyICYmIHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbG9uZyBob3Vyc0RpZmZlcmVuY2UgPSBEdXJhdGlvbi5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKS50b0hvdXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1pbkhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eS5zZXRNaW5Ib3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eS5zZXRNYXhIb3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnIDlpKflgLzkuLogMO+8jOWImeinhuS4uuato+aXoOept1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gd2l0aGluUmFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldE1heEhvdXJzKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnNEaWZmZXJlbmNlID49IHByaW9yaXR5LmdldE1pbkhvdXJzKCkgJiYgKHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gMCB8fCBob3Vyc0RpZmZlcmVuY2UgPD0gcHJpb3JpdHkuZ2V0TWF4SG91cnMoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhpblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnNEaWZmZXJlbmNlID49IHByaW9yaXR5LmdldE1pbkhvdXJzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhpblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7ku7vliqHliJ3lp4vnirbmgIHkuLrlvoXlip5cbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0aGlzLnNhdmUodGFzayk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEJvb2xlYW4gdXBkYXRlVGFzayhUYXNrIHRhc2spIHtcbiAgICAgICAgTGlzdDxQcmlvcml0eT4gcHJpb3JpdGllcyA9IHByaW9yaXR5U2VydmljZS5saXN0KCk7XG5cbiAgICAgICAgLy8g5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcblxuICAgICAgICAvLyDpgY3ljobkvJjlhYjnuqfmlbDmja7vvIzorr7nva4gaW1wb3J0YW5jZUlkIOWSjCBleGlnZW5jeUlkXG4gICAgICAgIGZvciAoUHJpb3JpdHkgcHJpb3JpdHkgOiBwcmlvcml0aWVzKSB7XG4gICAgICAgICAgICAvLyDljLnphY0gaW1wb3J0YW5jZUlkICh0eXBlPTEg5LiUIGNhdGVnb3J5SWQg55u45ZCMKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAxICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldENhdGVnb3J5SWQoKS5lcXVhbHModGFzay5nZXRDYXRlZ29yeUlkKCkpKSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRJbXBvcnRhbmNlSWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIOWMuemFjSBleGlnZW5jeUlkICh0eXBlPTIg5LiUIGRlYWRsaW5lIOWcqOaXtumXtOWMuumXtOiMg+WbtOWGhSlcbiAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRUeXBlKCkgPT0gMiAmJiB0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGxvbmcgaG91cnNEaWZmZXJlbmNlID0gRHVyYXRpb24uYmV0d2Vlbihub3csIHRhc2suZ2V0RGVhZGxpbmUoKSkudG9Ib3VycygpO1xuICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRNaW5Ib3VycygpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHkuc2V0TWluSG91cnMoMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRNYXhIb3VycygpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHkuc2V0TWF4SG91cnMoMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c5pyA5aSn5YC85Li6IDDvvIzliJnop4bkuLrmraPml6DnqbdcbiAgICAgICAgICAgICAgICBib29sZWFuIHdpdGhpblJhbmdlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1pbkhvdXJzKCkgIT0gbnVsbCAmJiBwcmlvcml0eS5nZXRNYXhIb3VycygpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzRGlmZmVyZW5jZSA+PSBwcmlvcml0eS5nZXRNaW5Ib3VycygpICYmIChwcmlvcml0eS5nZXRNYXhIb3VycygpID09IDAgfHwgaG91cnNEaWZmZXJlbmNlIDw9IHByaW9yaXR5LmdldE1heEhvdXJzKCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aXRoaW5SYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHByaW9yaXR5LmdldE1pbkhvdXJzKCkgIT0gbnVsbCAmJiBwcmlvcml0eS5nZXRNYXhIb3VycygpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhvdXJzRGlmZmVyZW5jZSA+PSBwcmlvcml0eS5nZXRNaW5Ib3VycygpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aXRoaW5SYW5nZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAod2l0aGluUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRFeGlnZW5jeUlkKHByaW9yaXR5LmdldElkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5omL5Yqo5bCG5Lu75Yqh6K6+572u5Li65bey5a6M5oiQ77yM5L+d5oyB6K+l54q25oCBXG4gICAgICAgIFRhc2sgb2xkVGFzayA9IHRoaXMuZ2V0QnlJZCh0YXNrLmdldElkKCkpO1xuICAgICAgICBpZiAob2xkVGFzayAhPSBudWxsICYmIG9sZFRhc2suZ2V0U3RhdHVzKCkgIT0gNCAmJiB0YXNrLmdldFN0YXR1cygpICE9IDQpIHtcbiAgICAgICAgICAgIC8vIOiHquWKqOabtOaWsOS7u+WKoeeKtuaAgVxuICAgICAgICAgICAgdXBkYXRlVGFza1N0YXR1cyh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlQnlJZCh0YXNrKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog5q+P5aSp5YeM5pmo5omn6KGM5LiA5qyh77yM6Ieq5Yqo5pu05paw5omA5pyJ5Lu75Yqh55qE54q25oCBXG4gICAgICovXG4gICAgQFNjaGVkdWxlZChjcm9uID0gXCIwIDAgMCAqICogP1wiKVxuICAgIHB1YmxpYyB2b2lkIHNjaGVkdWxlZFVwZGF0ZUFsbFRhc2tTdGF0dXMoKSB7XG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog5pu05paw5omA5pyJ5Lu75Yqh55qE54q25oCBXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKSB7XG4gICAgICAgIExpc3Q8VGFzaz4gYWxsVGFza3MgPSB0aGlzLmxpc3QoKTtcbiAgICAgICAgYWxsVGFza3MuZm9yRWFjaCh0aGlzOjp1cGRhdGVUYXNrU3RhdHVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVCYXRjaEJ5SWQoYWxsVGFza3MpO1xuICAgIH1cbi4uLlxuICAgIFxuICAgIC8qKlxuICAgICAqIOiuoeeul+S7u+WKoeeahOS8mOWFiOe6p+WIhuaVsFxuICAgICAqIOWfuuS6juS7u+WKoeeahOmHjeimgeaAp+WSjOe0p+aApeaAp1xuICAgICAqIEBwYXJhbSB0YXNrIOS7u+WKoeWvueixoVxuICAgICAqIEByZXR1cm4g5LyY5YWI57qn5YiG5pWwXG4gICAgICovXG4gICAgcHJpdmF0ZSBkb3VibGUgY2FsY3VsYXRlUHJpb3JpdHlTY29yZShUYXNrIHRhc2spIHtcbiAgICAgICAgZG91YmxlIHNjb3JlID0gMC4wO1xuICAgICAgICBcbiAgICAgICAgLy8g6I635Y+W6YeN6KaB5oCn5ZKM57Sn5oCl5oCn6YWN572uXG4gICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IG51bGw7XG4gICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICh0YXNrLmdldEV4aWdlbmN5SWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDorqHnrpfliIbmlbBcbiAgICAgICAgaWYgKGltcG9ydGFuY2VQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzY29yZSArPSBpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0U2NvcmUoKSAqIGltcG9ydGFuY2VQcmlvcml0eS5nZXRXZWlnaHQoKS5kb3VibGVWYWx1ZSgpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzY29yZSArPSBleGlnZW5jeVByaW9yaXR5LmdldFNjb3JlKCkgKiBleGlnZW5jeVByaW9yaXR5LmdldFdlaWdodCgpLmRvdWJsZVZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOaIquatouaXtumXtOadg+mHjeiuoeeul1xuICAgICAgICBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgICAgICAgICAgIGxvbmcgaG91cnNVbnRpbERlYWRsaW5lID0gQ2hyb25vVW5pdC5IT1VSUy5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5oiq5q2i5pe26Ze06LaK6L+R77yM5YiG5pWw6LaK6auYXG4gICAgICAgICAgICBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDI0KSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gNTA7IC8vIDI05bCP5pe25YaF6aKd5aSW5YqgNTDliIZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDcyKSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gMzA7IC8vIDcy5bCP5pe25YaF6aKd5aSW5YqgMzDliIZcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDE2OCkge1xuICAgICAgICAgICAgICAgIHNjb3JlICs9IDEwOyAvLyDkuIDlkajlhoXpop3lpJbliqAxMOWIhlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc2NvcmU7XG4gICAgfVxuICAgIFxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBMaXN0PFRhc2tWbz4gZ2V0UHJpb3JpdGl6ZWRUYXNrcyhMb25nIHVzZXJJZCkge1xuICAgICAgICAvLyAxLiDojrflj5bmiYDmnInlvoXlip7ku7vliqHvvIjnirbmgIHkuLox77yJXG4gICAgICAgIFF1ZXJ5V3JhcHBlcjxUYXNrPiBxdWVyeVdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgICAgICAgcXVlcnlXcmFwcGVyLmVxKFwic3RhdHVzXCIsIDEpO1xuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5oyH5a6a5LqG55So5oi3SUTvvIzliJnlj6rojrflj5bor6XnlKjmiLfnm7jlhbPnmoTku7vliqFcbiAgICAgICAgaWYgKHVzZXJJZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyDpnIDopoHmkJzntKJ1c2VyRGF0YeWtl+auteS4reWMheWQq3VzZXJJZOeahOiusOW9lVxuICAgICAgICAgICAgLy8g5rOo5oSP77ya6L+Z56eN5pa55byP5Y+v6IO95LiN5aSf5YeG56Gu77yM5pu05aW955qE5pa55rOV5piv5L2/55SoSlNPTuWHveaVsO+8iOWmguaenOaVsOaNruW6k+aUr+aMge+8iVxuICAgICAgICAgICAgcXVlcnlXcmFwcGVyLmxpa2UoXCJ1c2VyX2RhdGFcIiwgdXNlcklkLnRvU3RyaW5nKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGhpcy5saXN0KHF1ZXJ5V3JhcHBlcik7XG4gICAgICAgIFxuICAgICAgICAvLyAyLiDovazmjaLkuLpUYXNrVm/lubborqHnrpfkvJjlhYjnuqfliIbmlbBcbiAgICAgICAgTGlzdDxUYXNrVm8+IHRhc2tWb3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xuICAgICAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgICAgICAgICAgIEJlYW5VdGlscy5jb3B5UHJvcGVydGllcyh0YXNrLCB0YXNrVm8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDorr7nva7kvJjlhYjnuqfliIbmlbBcbiAgICAgICAgICAgIGRvdWJsZSBwcmlvcml0eVNjb3JlID0gY2FsY3VsYXRlUHJpb3JpdHlTY29yZSh0YXNrKTtcbiAgICAgICAgICAgIHRhc2tWby5zZXRQcmlvcml0eVNjb3JlKHByaW9yaXR5U2NvcmUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDojrflj5bku7vliqHnsbvlnovlkI3np7BcbiAgICAgICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRDYXRlZ29yeUlkKCkpO1xuICAgICAgICAgICAgaWYgKGNhdGVnb3J5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiOt+WPlumHjeimgeaAp+WSjOe0p+aApeaAp+WQjeensFxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xuICAgICAgICAgICAgICAgIGlmIChpbXBvcnRhbmNlUHJpb3JpdHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrVm8uc2V0SW1wb3J0YW5jZU5hbWUoaW1wb3J0YW5jZVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAodGFzay5nZXRFeGlnZW5jeUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aWdlbmN5UHJpb3JpdHkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrVm8uc2V0RXhpZ2VuY3lOYW1lKGV4aWdlbmN5UHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRhc2tWb3MuYWRkKHRhc2tWbyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIDMuIOaMieS8mOWFiOe6p+WIhuaVsOaOkuW6j++8iOS7jumrmOWIsOS9ju+8iVxuICAgICAgICB0YXNrVm9zLnNvcnQoKGEsIGIpIC0+IERvdWJsZS5jb21wYXJlKGIuZ2V0UHJpb3JpdHlTY29yZSgpLCBhLmdldFByaW9yaXR5U2NvcmUoKSkpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRhc2tWb3M7XG4gICAgfVxuICAgIFxuICAgIEBPdmVycmlkZVxuICAgIEBUcmFuc2FjdGlvbmFsKHJvbGxiYWNrRm9yID0gRXhjZXB0aW9uLmNsYXNzKVxuICAgIHB1YmxpYyBNYXA8TG9uZywgQm9vbGVhbj4gYXV0b1NjaGVkdWxlVGFza3MoTG9jYWxEYXRlIGRhdGUsIExvbmcgdXNlcklkKSB7XG4gICAgICAgIC8vIOe7k+aenOaYoOWwhO+8jOiusOW9leavj+S4quS7u+WKoeeahOWuieaOkue7k+aenFxuICAgICAgICBNYXA8TG9uZywgQm9vbGVhbj4gcmVzdWx0ID0gbmV3IEhhc2hNYXA8PigpO1xuICAgICAgICBcbiAgICAgICAgLy8gMS4g6I635Y+W5o6S5bqP5ZCO55qE5Lu75Yqh5YiX6KGoXG4gICAgICAgIExpc3Q8VGFza1ZvPiBwcmlvcml0aXplZFRhc2tzID0gZ2V0UHJpb3JpdGl6ZWRUYXNrcyh1c2VySWQpO1xuICAgICAgICBcbiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5b6F5Yqe5Lu75Yqh77yM55u05o6l6L+U5Zue56m657uT5p6cXG4gICAgICAgIGlmIChwcmlvcml0aXplZFRhc2tzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfVxuLi4uXG4gICAgICAgIFxuICAgICAgICAvLyA1LiDmoLnmja7kvJjlhYjnuqflkozku7vliqHmiYDpnIDml7bpl7TlronmjpLku7vliqFcbiAgICAgICAgZm9yIChUYXNrVm8gdGFza1ZvIDogcHJpb3JpdGl6ZWRUYXNrcykge1xuICAgICAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKHRhc2tWby5nZXRJZCgpKTtcbiAgICAgICAgICAgIGlmICh0YXNrID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2tWby5nZXRJZCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuoeeul+S7u+WKoeaJgOmcgOaXtumXtOauteaVsOmHj1xuICAgICAgICAgICAgaW50IHJlcXVpcmVkU2xvdHMgPSAxOyAvLyDpu5jorqTljaDnlKgx5Liq5pe26Ze05q6177yIMzDliIbpkp/vvIlcbiAgICAgICAgICAgIGlmICh0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyDmr48zMOWIhumSn+S4gOS4quaXtumXtOaute+8jOWQkeS4iuWPluaVtFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkU2xvdHMgPSAoaW50KSBNYXRoLmNlaWwodGFzay5nZXRUaW1lU3BlbmQoKSAvIDMwLjApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlr7vmib7ov57nu63nmoTnqbrpl7Lml7bpl7TmrrVcbiAgICAgICAgICAgIGludCBzdGFydFNsb3QgPSBmaW5kQXZhaWxhYmxlVGltZVNsb3RzKHRpbWVTbG90T2NjdXBpZWQsIHJlcXVpcmVkU2xvdHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlpoLmnpzmib7kuI3liLDotrPlpJ/nmoTml7bpl7TmrrXvvIzmoIforrDkuLrlronmjpLlpLHotKVcbiAgICAgICAgICAgIGlmIChzdGFydFNsb3QgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2suZ2V0SWQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9UYXNrU2VydmljZS5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnNlcnZpY2UuSVNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmQ7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kUGllO1xuXG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbi8qKlxuICogPHA+XG4gKiDku7vliqHooagg5pyN5Yqh57G7XG4gKiA8L3A+XG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgVGFza1NlcnZpY2UgZXh0ZW5kcyBJU2VydmljZTxUYXNrPiB7XG5cbiAgICBQYWdlPFRhc2tWbz4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgTG9uZyBjYXRlZ29yeUlkLCBTdHJpbmcgc2VhcmNoS2V5KTtcblxuICAgIExpc3Q8VGFza1ZvPiBsaXN0QWxsKEludGVnZXIgc3RhdHVzKTtcblxuICAgIFRhc2tWbyBnZXRJbmZvKExvbmcgaWQpO1xuXG4gICAgTGlzdDxUcmVuZFBpZT4gdHJlbmRQaWUoKTtcblxuICAgIExpc3Q8VHJlbmQ+IHRyZW5kKFN0cmluZyBzdGFydERhdGUsIFN0cmluZyBlbmREYXRlKTtcblxuICAgIEJvb2xlYW4gY3JlYXRlKFRhc2sgdGFzayk7XG5cbiAgICBCb29sZWFuIHVwZGF0ZVRhc2soVGFzayB0YXNrKTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvUHJpb3JpdHlDb250cm9sbGVyLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoIOWJjeerr+aOp+WItuWZqFxuICogPC9wPlxuICovXG5AUmVzdENvbnRyb2xsZXJcbkBSZXF1ZXN0TWFwcGluZyhcIi93ZWIvcHJpb3JpdHlcIilcbnB1YmxpYyBjbGFzcyBQcmlvcml0eUNvbnRyb2xsZXIge1xuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFByaW9yaXR5U2VydmljZSBwcmlvcml0eVNlcnZpY2U7XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5qC55o2u5p2h5Lu25p+l6K+i5YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxQcmlvcml0eT4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJ0eXBlXCIsIHJlcXVpcmVkID0gZmFsc2UpIEludGVnZXIgdHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFByaW9yaXR5PiBwcmlvcml0eVBhZ2UgPSBwcmlvcml0eVNlcnZpY2Uuc2VhcmNoKHBhZ2VTaXplLCBwYWdlTnVtLCB0eXBlLCBzZWFyY2hLZXkpO1xuXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHByaW9yaXR5UGFnZSkpO1xuICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvU2NoZWR1bGVDb250cm9sbGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLmNvbnRyb2xsZXI7XG5cblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIuY29tbW9uLmFwaS5Db21tb25SZXN1bHQ7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlNjaGVkdWxlU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uU2NoZWR1bGVWbztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVGFza1ZvO1xuaW1wb3J0IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLlNlY3VyaXR5VXRpbHM7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3NjaGVkdWxlXCIpXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVDb250cm9sbGVyIHtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zZWFyY2gocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9DaGFydENvbnRyb2xsZXIuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuY29udHJvbGxlcjtcblxuXG5pbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUmVzdWx0O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlRhc2tTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZDtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmRQaWU7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlPcGVyYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuXG5pbXBvcnQgamF2YS51dGlsLkxpc3Q7XG5cbkBSZXN0Q29udHJvbGxlclxuQFJlcXVlc3RNYXBwaW5nKFwiL3dlYi9jaGFydFwiKVxucHVibGljIGNsYXNzIENoYXJ0Q29udHJvbGxlciB7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBUYXNrU2VydmljZSB0YXNrU2VydmljZTtcblxuICAgIEBBcGlPcGVyYXRpb24oXCLku7vliqHnirbmgIHnu5/orqHmlbDmja5cIilcbiAgICBAR2V0TWFwcGluZyhcIi90cmVuZFBpZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUcmVuZFBpZT4+IHRyZW5kUGllKCkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UudHJlbmRQaWUoKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuS7u+WKoee7n+iuoVwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL3RyZW5kXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxMaXN0PFRyZW5kPj4gdHJlbmQoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic3RhcnREYXRlXCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzdGFydERhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwiZW5kRGF0ZVwiLCByZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgZW5kRGF0ZSl7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS50cmVuZChzdGFydERhdGUsIGVuZERhdGUpKTtcbiAgICB9XG59XG5cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3ZvL1Rhc2tWby5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52bztcblxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgVGFza1ZvIGV4dGVuZHMgVGFzayB7XG4gICAgcHJpdmF0ZSBTdHJpbmcgY2F0ZWdvcnlOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGltcG9ydGFuY2VOYW1lOy4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImMyNGI1YmRkLWI5NzEtNDYyMi04Zjg3LTMxMjRhMDlhMDM2YTt0b29sdV8wMUh3d3FCdjNIUGZydm9ZQVg1Uk5ldEgiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9UYXNrU2VydmljZS5qYXZhOlxuICAgICAxXHRwYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG4gICAgIDRcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbiAgICAgNVx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5JU2VydmljZTtcbiAgICAgNlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG4gICAgIDdcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmQ7XG4gICAgIDhcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmRQaWU7XG4gICAgIDlcdFxuICAgIDEwXHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMTFcdFxuICAgIDEyXHQvKipcbiAgICAxM1x0ICogPHA+XG4gICAgMTRcdCAqIOS7u+WKoeihqCDmnI3liqHnsbtcbiAgICAxNVx0ICogPC9wPlxuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGludGVyZmFjZSBUYXNrU2VydmljZSBleHRlbmRzIElTZXJ2aWNlPFRhc2s+IHtcbiAgICAxOFx0XG4gICAgMTlcdCAgICBQYWdlPFRhc2tWbz4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgTG9uZyBjYXRlZ29yeUlkLCBTdHJpbmcgc2VhcmNoS2V5KTtcbiAgICAyMFx0XG4gICAgMjFcdCAgICBMaXN0PFRhc2tWbz4gbGlzdEFsbChJbnRlZ2VyIHN0YXR1cyk7XG4gICAgMjJcdFxuICAgIDIzXHQgICAgVGFza1ZvIGdldEluZm8oTG9uZyBpZCk7XG4gICAgMjRcdFxuICAgIDI1XHQgICAgTGlzdDxUcmVuZFBpZT4gdHJlbmRQaWUoKTtcbiAgICAyNlx0XG4gICAgMjdcdCAgICBMaXN0PFRyZW5kPiB0cmVuZChTdHJpbmcgc3RhcnREYXRlLCBTdHJpbmcgZW5kRGF0ZSk7XG4gICAgMjhcdFxuICAgIDI5XHQgICAgQm9vbGVhbiBjcmVhdGUoVGFzayB0YXNrKTtcbiAgICAzMFx0XG4gICAgMzFcdCAgICBCb29sZWFuIHVwZGF0ZVRhc2soVGFzayB0YXNrKTtcbiAgICAzMlx0fVxuICAgIDMzXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDMzXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlN2UzZGExMi1kNDM1LTQ5YWUtOGE2NS05YmZmOWEwMTkyNmU7dG9vbHVfMDFFcHluSHFHRFRXMzFhUXJzMnZpelN1Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvVGFza1NlcnZpY2UuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDI3XHQgICAgTGlzdDxUcmVuZD4gdHJlbmQoU3RyaW5nIHN0YXJ0RGF0ZSwgU3RyaW5nIGVuZERhdGUpO1xuICAgIDI4XHRcbiAgICAyOVx0ICAgIEJvb2xlYW4gY3JlYXRlKFRhc2sgdGFzayk7XG4gICAgMzBcdFxuICAgIDMxXHQgICAgQm9vbGVhbiB1cGRhdGVUYXNrKFRhc2sgdGFzayk7XG4gICAgMzJcdFxuICAgIDMzXHQgICAgLyoqXG4gICAgMzRcdCAgICAgKiDmmbrog73mjpLluo/ku7vliqHliJfooahcbiAgICAzNVx0ICAgICAqIOagueaNruS7u+WKoeeahOmHjeimgeaAp+OAgee0p+aApeaAp+WSjOaIquatouaXtumXtOi/m+ihjOaOkuW6j1xuICAgIDM2XHQgICAgICogQHJldHVybiDmjpLluo/lkI7nmoTku7vliqHliJfooahcbiAgICAzN1x0ICAgICAqL1xuICAgIDM4XHQgICAgTGlzdDxUYXNrVm8+IHNtYXJ0U29ydFRhc2tzKCk7XG4gICAgMzlcdH1cbiAgICA0MFx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjhmZmFhYzI5LTJhMWItNDFhOC04YmJmLTdjMTJhYjA4OTlkYjt0b29sdV8wMUdnVmR3NVdONzZEeGtBWEFhamFuWlciOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5pbXBsO1xuXG5pbXBvcnQgY24uaHV0b29sLmNvcmUudXRpbC5JZFV0aWw7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmNvcmUuY29uZGl0aW9ucy5xdWVyeS5RdWVyeVdyYXBwZXI7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLnNlcnZpY2UuVW1zQWRtaW5TZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5DYXRlZ29yeTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUHJpb3JpdHk7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlJlc291cmNlcztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuU2NoZWR1bGU7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1hcHBlci5UYXNrTWFwcGVyO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLkNhdGVnb3J5U2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5Qcmlvcml0eVNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuUmVzb3VyY2VzU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5UYXNrU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5TY2hlZHVsZVNlcnZpY2U7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5zZXJ2aWNlLmltcGwuU2VydmljZUltcGw7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVHJlbmQ7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRyZW5kUGllO1xuaW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5kYXRhYmluZC5PYmplY3RNYXBwZXI7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5CZWFuVXRpbHM7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2NoZWR1bGluZy5hbm5vdGF0aW9uLlNjaGVkdWxlZDtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmNvbnRleHQuYW5ub3RhdGlvbi5MYXp5O1xuXG5pbXBvcnQgamF2YS50aW1lLkR1cmF0aW9uO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmEudXRpbC4qO1xuaW1wb3J0IGphdmEudGltZS50ZW1wb3JhbC5DaHJvbm9Vbml0O1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsudHJhbnNhY3Rpb24uYW5ub3RhdGlvbi5UcmFuc2FjdGlvbmFsO1xuXG4vKipcbiAqIDxwPlxuICog5Lu75Yqh6KGoIOacjeWKoeWunueOsOexu1xuICogPC9wPlxuICovXG5AU2VydmljZVxucHVibGljIGNsYXNzIFRhc2tTZXJ2aWNlSW1wbCBleHRlbmRzIFNlcnZpY2VJbXBsPFRhc2tNYXBwZXIsIFRhc2s+IGltcGxlbWVudHMgVGFza1NlcnZpY2Uge1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVGFza01hcHBlciB0YXNrTWFwcGVyO1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgQ2F0ZWdvcnlTZXJ2aWNlIGNhdGVnb3J5U2VydmljZTtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFByaW9yaXR5U2VydmljZSBwcmlvcml0eVNlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBVbXNBZG1pblNlcnZpY2UgdXNlclNlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBSZXNvdXJjZXNTZXJ2aWNlIHJlc291cmNlc1NlcnZpY2U7XG5cbiAgICBAQXV0b3dpcmVkXG4gICAgQExhenlcbiAgICBwcml2YXRlIFNjaGVkdWxlU2VydmljZSBzY2hlZHVsZVNlcnZpY2U7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxUYXNrVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIExvbmcgY2F0ZWdvcnlJZCwgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICAvLyDlhYjmm7TmlrDmiYDmnInku7vliqHnirbmgIFcbiAgICAgICAgdXBkYXRlQWxsVGFza1N0YXR1cygpO1xuICAgICAgICBcbiAgICAgICAgUGFnZTxUYXNrVm8+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICAgICAgcmV0dXJuIHRhc2tNYXBwZXIuc2VhcmNoVGFzayhwYWdlLCBzZWFyY2hLZXksIGNhdGVnb3J5SWQpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBMaXN0PFRhc2tWbz4gbGlzdEFsbChJbnRlZ2VyIHN0YXR1cykge1xuICAgICAgICAvLyDlhYjmm7TmlrDmiYDmnInku7vliqHnirbmgIFcbiAgICAgICAgdXBkYXRlQWxsVGFza1N0YXR1cygpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRhc2tNYXBwZXIubGlzdEFsbChzdGF0dXMpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBUYXNrVm8gZ2V0SW5mbyhMb25nIGlkKSB7XG4gICAgICAgIC8vIOabtOaWsOW9k+WJjeS7u+WKoeeKtuaAgVxuICAgICAgICB1cGRhdGVUYXNrU3RhdHVzKHRoaXMuZ2V0QnlJZChpZCkpO1xuICAgICAgICBcbiAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKGlkKTtcbiAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHRhc2ssIHRhc2tWbyk7XG4gICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRDYXRlZ29yeUlkKCkpO1xuICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xuICAgICAgICB0YXNrVm8uc2V0SW1wb3J0YW5jZU5hbWUoaW1wb3J0YW5jZVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG5cbiAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgICAgICAgU2V0PExvbmc+IHVzZXJJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgICAgICAgU2V0PExvbmc+IHJlc291cmNlSWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFJlc291cmNlc0RhdGEoKSwgb2JqZWN0TWFwcGVyKTtcblxuICAgICAgICBMaXN0PFVtc0FkbWluPiB1c2VyTGlzdCA9IHVzZXJTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxVbXNBZG1pbj4oKS5sYW1iZGEoKS5pbihVbXNBZG1pbjo6Z2V0SWQsIHVzZXJJZHMpKTtcbiAgICAgICAgTGlzdDxSZXNvdXJjZXM+IHJlc291cmNlc0xpc3QgPSByZXNvdXJjZXNTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxSZXNvdXJjZXM+KCkubGFtYmRhKCkuaW4oUmVzb3VyY2VzOjpnZXRJZCwgcmVzb3VyY2VJZHMpKTtcbiAgICAgICAgdGFza1ZvLnNldFVzZXJMaXN0KHVzZXJMaXN0KTtcbiAgICAgICAgdGFza1ZvLnNldFJlc291cmNlc0xpc3QocmVzb3VyY2VzTGlzdCk7XG5cbiAgICAgICAgcmV0dXJuIHRhc2tWbztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTGlzdDxUcmVuZFBpZT4gdHJlbmRQaWUoKSB7XG4gICAgICAgIHJldHVybiB0YXNrTWFwcGVyLnRyZW5kUGllKCk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIExpc3Q8VHJlbmQ+IHRyZW5kKFN0cmluZyBzdGFydERhdGUsIFN0cmluZyBlbmREYXRlKSB7XG4gICAgICAgIHJldHVybiB0YXNrTWFwcGVyLnRyZW5kKHN0YXJ0RGF0ZSwgZW5kRGF0ZSk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIEJvb2xlYW4gY3JlYXRlKFRhc2sgdGFzaykge1xuICAgICAgICB0YXNrLnNldENvZGUoSWRVdGlsLnJhbmRvbVVVSUQoKSk7XG4gICAgICAgIExpc3Q8UHJpb3JpdHk+IHByaW9yaXRpZXMgPSBwcmlvcml0eVNlcnZpY2UubGlzdCgpO1xuXG4gICAgICAgIC8vIOW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG5cbiAgICAgICAgLy8g6YGN5Y6G5LyY5YWI57qn5pWw5o2u77yM6K6+572uIGltcG9ydGFuY2VJZCDlkowgZXhpZ2VuY3lJZFxuICAgICAgICBmb3IgKFByaW9yaXR5IHByaW9yaXR5IDogcHJpb3JpdGllcykge1xuICAgICAgICAgICAgLy8g5Yy56YWNIGltcG9ydGFuY2VJZCAodHlwZT0xIOS4lCBjYXRlZ29yeUlkIOebuOWQjClcbiAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRUeXBlKCkgPT0gMSAmJiBwcmlvcml0eS5nZXRDYXRlZ29yeUlkKCkgIT0gbnVsbCAmJiBwcmlvcml0eS5nZXRDYXRlZ29yeUlkKCkuZXF1YWxzKHRhc2suZ2V0Q2F0ZWdvcnlJZCgpKSkge1xuICAgICAgICAgICAgICAgIHRhc2suc2V0SW1wb3J0YW5jZUlkKHByaW9yaXR5LmdldElkKCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDljLnphY0gZXhpZ2VuY3lJZCAodHlwZT0yIOS4lCBkZWFkbGluZSDlnKjml7bpl7TljLrpl7TojIPlm7TlhoUpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDIgJiYgdGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBsb25nIGhvdXJzRGlmZmVyZW5jZSA9IER1cmF0aW9uLmJldHdlZW4obm93LCB0YXNrLmdldERlYWRsaW5lKCkpLnRvSG91cnMoKTtcbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5LnNldE1pbkhvdXJzKDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0TWF4SG91cnMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHByaW9yaXR5LnNldE1heEhvdXJzKDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIOWmguaenOacgOWkp+WAvOS4uiAw77yM5YiZ6KeG5Li65q2j5peg56m3XG4gICAgICAgICAgICAgICAgYm9vbGVhbiB3aXRoaW5SYW5nZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRNaW5Ib3VycygpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0TWF4SG91cnMoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChob3Vyc0RpZmZlcmVuY2UgPj0gcHJpb3JpdHkuZ2V0TWluSG91cnMoKSAmJiAocHJpb3JpdHkuZ2V0TWF4SG91cnMoKSA9PSAwIHx8IGhvdXJzRGlmZmVyZW5jZSA8PSBwcmlvcml0eS5nZXRNYXhIb3VycygpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2l0aGluUmFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwcmlvcml0eS5nZXRNaW5Ib3VycygpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0TWF4SG91cnMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChob3Vyc0RpZmZlcmVuY2UgPj0gcHJpb3JpdHkuZ2V0TWluSG91cnMoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2l0aGluUmFuZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhpblJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suc2V0RXhpZ2VuY3lJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9ruS7u+WKoeWIneWni+eKtuaAgeS4uuW+heWKnlxuICAgICAgICBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0YXNrLnNldFN0YXR1cygxKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSh0YXNrKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQm9vbGVhbiB1cGRhdGVUYXNrKFRhc2sgdGFzaykge1xuICAgICAgICBMaXN0PFByaW9yaXR5PiBwcmlvcml0aWVzID0gcHJpb3JpdHlTZXJ2aWNlLmxpc3QoKTtcblxuICAgICAgICAvLyDlvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOmBjeWOhuS8mOWFiOe6p+aVsOaNru+8jOiuvue9riBpbXBvcnRhbmNlSWQg5ZKMIGV4aWdlbmN5SWRcbiAgICAgICAgZm9yIChQcmlvcml0eSBwcmlvcml0eSA6IHByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgIC8vIOWMuemFjSBpbXBvcnRhbmNlSWQgKHR5cGU9MSDkuJQgY2F0ZWdvcnlJZCDnm7jlkIwpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDEgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpLmVxdWFscyh0YXNrLmdldENhdGVnb3J5SWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrLnNldEltcG9ydGFuY2VJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8g5Yy56YWNIGV4aWdlbmN5SWQgKHR5cGU9MiDkuJQgZGVhZGxpbmUg5Zyo5pe26Ze05Yy66Ze06IyD5Zu05YaFKVxuICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldFR5cGUoKSA9PSAyICYmIHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbG9uZyBob3Vyc0RpZmZlcmVuY2UgPSBEdXJhdGlvbi5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKS50b0hvdXJzKCk7XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1pbkhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eS5zZXRNaW5Ib3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBwcmlvcml0eS5zZXRNYXhIb3VycygwKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnIDlpKflgLzkuLogMO+8jOWImeinhuS4uuato+aXoOept1xuICAgICAgICAgICAgICAgIGJvb2xlYW4gd2l0aGluUmFuZ2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldE1heEhvdXJzKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnNEaWZmZXJlbmNlID49IHByaW9yaXR5LmdldE1pbkhvdXJzKCkgJiYgKHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gMCB8fCBob3Vyc0RpZmZlcmVuY2UgPD0gcHJpb3JpdHkuZ2V0TWF4SG91cnMoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhpblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocHJpb3JpdHkuZ2V0TWluSG91cnMoKSAhPSBudWxsICYmIHByaW9yaXR5LmdldE1heEhvdXJzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaG91cnNEaWZmZXJlbmNlID49IHByaW9yaXR5LmdldE1pbkhvdXJzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpdGhpblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh3aXRoaW5SYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldEV4aWdlbmN5SWQocHJpb3JpdHkuZ2V0SWQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmiYvliqjlsIbku7vliqHorr7nva7kuLrlt7LlrozmiJDvvIzkv53mjIHor6XnirbmgIFcbiAgICAgICAgVGFzayBvbGRUYXNrID0gdGhpcy5nZXRCeUlkKHRhc2suZ2V0SWQoKSk7XG4gICAgICAgIGlmIChvbGRUYXNrICE9IG51bGwgJiYgb2xkVGFzay5nZXRTdGF0dXMoKSAhPSA0ICYmIHRhc2suZ2V0U3RhdHVzKCkgIT0gNCkge1xuICAgICAgICAgICAgLy8g6Ieq5Yqo5pu05paw5Lu75Yqh54q25oCBXG4gICAgICAgICAgICB1cGRhdGVUYXNrU3RhdHVzKHRhc2spO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVCeUlkKHRhc2spO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDmr4/lpKnlh4zmmajmiafooYzkuIDmrKHvvIzoh6rliqjmm7TmlrDmiYDmnInku7vliqHnmoTnirbmgIFcbiAgICAgKi9cbiAgICBAU2NoZWR1bGVkKGNyb24gPSBcIjAgMCAwICogKiA/XCIpXG4gICAgcHVibGljIHZvaWQgc2NoZWR1bGVkVXBkYXRlQWxsVGFza1N0YXR1cygpIHtcbiAgICAgICAgdXBkYXRlQWxsVGFza1N0YXR1cygpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDmm7TmlrDmiYDmnInku7vliqHnmoTnirbmgIFcbiAgICAgKi9cbiAgICBwcml2YXRlIHZvaWQgdXBkYXRlQWxsVGFza1N0YXR1cygpIHtcbiAgICAgICAgTGlzdDxUYXNrPiBhbGxUYXNrcyA9IHRoaXMubGlzdCgpO1xuICAgICAgICBhbGxUYXNrcy5mb3JFYWNoKHRoaXM6OnVwZGF0ZVRhc2tTdGF0dXMpO1xuICAgICAgICB0aGlzLnVwZGF0ZUJhdGNoQnlJZChhbGxUYXNrcyk7XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIOagueaNruS7u+WKoeeahOaIquatouaXtumXtOiHquWKqOabtOaWsOS7u+WKoeeKtuaAgVxuICAgICAqIOS7u+WKoeeKtuaAge+8mjEt5b6F5YqeLCAyLeW3suWuieaOkiwgMy3ov5vooYzkuK0sIDQt5bey5a6M5oiQLCA1LeW3sumAvuacn1xuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCB1cGRhdGVUYXNrU3RhdHVzKFRhc2sgdGFzaykge1xuICAgICAgICAvLyDlpoLmnpzku7vliqHlt7Lnu4/mmK/lt7LlrozmiJDnirbmgIEoNCnvvIzkuI3lgZrmlLnlj5hcbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmn6Xmib7ku7vliqHlr7nlupTnmoTml6XnqIvlronmjpJcbiAgICAgICAgTGlzdDxTY2hlZHVsZT4gc2NoZWR1bGVzID0gc2NoZWR1bGVTZXJ2aWNlLmxpc3QoXG4gICAgICAgICAgICBuZXcgUXVlcnlXcmFwcGVyPFNjaGVkdWxlPigpLmVxKFwidGFza19pZFwiLCB0YXNrLmdldElkKCkpXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmnInml6XnqIvlronmjpLvvIzkvJjlhYjkvb/nlKjml6XnqIvnmoTnu5PmnZ/ml7bpl7TmnaXliKTmlq3mmK/lkKbpgL7mnJ9cbiAgICAgICAgaWYgKCFzY2hlZHVsZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey6YC+5pyf77yI57uT5p2f5pe26Ze05bey6L+H77yJXG4gICAgICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIG5vdy5pc0FmdGVyKHNjaGVkdWxlLmdldEVuZFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInml6XnqIvlronmjpLvvIzliJnkvb/nlKjku7vliqHnmoTmiKrmraLml7bpl7TliKTmlq1cbiAgICAgICAgZWxzZSBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwgJiYgbm93LmlzQWZ0ZXIodGFzay5nZXREZWFkbGluZSgpKSkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzlvZPliY3mmK/lvoXlip4oMSnmiJblt7LlronmjpIoMinvvIzmo4Dmn6XmmK/lkKbpnIDopoHlj5jkuLrov5vooYzkuK0oMylcbiAgICAgICAgaWYgKCh0YXNrLmdldFN0YXR1cygpID09IDEgfHwgdGFzay5nZXRTdGF0dXMoKSA9PSAyKSAmJiBcbiAgICAgICAgICAgIHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWmguaenOemu+aIquatouaXtumXtOS4jeWIsDI05bCP5pe277yM5YiZ6K6+5Li66L+b6KGM5LitXG4gICAgICAgICAgICBsb25nIGhvdXJzRGlmZmVyZW5jZSA9IER1cmF0aW9uLmJldHdlZW4obm93LCB0YXNrLmdldERlYWRsaW5lKCkpLnRvSG91cnMoKTtcbiAgICAgICAgICAgIGlmIChob3Vyc0RpZmZlcmVuY2UgPCAyNCkge1xuICAgICAgICAgICAgICAgIHRhc2suc2V0U3RhdHVzKDMpOyAvLyDov5vooYzkuK1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOi+heWKqeaWueazle+8muWwhiBKU09OIOaVsOe7hOWtl+espuS4suino+aekOS4uiBTZXQ8TG9uZz5cbiAgICBwcml2YXRlIFNldDxMb25nPiBwYXJzZUpzb25BcnJheVRvU2V0KFN0cmluZyBqc29uQXJyYXksIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChqc29uQXJyYXkgPT0gbnVsbCB8fCBqc29uQXJyYXkuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLmVtcHR5U2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IEhhc2hTZXQ8PihBcnJheXMuYXNMaXN0KG9iamVjdE1hcHBlci5yZWFkVmFsdWUoanNvbkFycmF5LCBMb25nW10uY2xhc3MpKSk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLmVtcHR5U2V0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog6K6h566X5Lu75Yqh55qE5LyY5YWI57qn5YiG5pWwXG4gICAgICog5Z+65LqO5Lu75Yqh55qE6YeN6KaB5oCn5ZKM57Sn5oCl5oCnXG4gICAgICogQHBhcmFtIHRhc2sg5Lu75Yqh5a+56LGhXG4gICAgICogQHJldHVybiDkvJjlhYjnuqfliIbmlbBcbiAgICAgKi9cbiAgICBwcml2YXRlIGRvdWJsZSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKFRhc2sgdGFzaykge1xuICAgICAgICBkb3VibGUgc2NvcmUgPSAwLjA7XG4gICAgICAgIFxuICAgICAgICAvLyDojrflj5bph43opoHmgKflkozntKfmgKXmgKfphY3nva5cbiAgICAgICAgUHJpb3JpdHkgaW1wb3J0YW5jZVByaW9yaXR5ID0gbnVsbDtcbiAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICBpZiAodGFzay5nZXRJbXBvcnRhbmNlSWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBpbXBvcnRhbmNlUHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEltcG9ydGFuY2VJZCgpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOiuoeeul+WIhuaVsFxuICAgICAgICBpZiAoaW1wb3J0YW5jZVByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNjb3JlICs9IGltcG9ydGFuY2VQcmlvcml0eS5nZXRTY29yZSgpICogaW1wb3J0YW5jZVByaW9yaXR5LmdldFdlaWdodCgpLmRvdWJsZVZhbHVlKCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChleGlnZW5jeVByaW9yaXR5ICE9IG51bGwpIHtcbiAgICAgICAgICAgIHNjb3JlICs9IGV4aWdlbmN5UHJpb3JpdHkuZ2V0U2NvcmUoKSAqIGV4aWdlbmN5UHJpb3JpdHkuZ2V0V2VpZ2h0KCkuZG91YmxlVmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5oiq5q2i5pe26Ze05p2D6YeN6K6h566XXG4gICAgICAgIGlmICh0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgICAgICAgICAgbG9uZyBob3Vyc1VudGlsRGVhZGxpbmUgPSBDaHJvbm9Vbml0LkhPVVJTLmJldHdlZW4obm93LCB0YXNrLmdldERlYWRsaW5lKCkpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDmiKrmraLml7bpl7Totorov5HvvIzliIbmlbDotorpq5hcbiAgICAgICAgICAgIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMjQpIHtcbiAgICAgICAgICAgICAgICBzY29yZSArPSA1MDsgLy8gMjTlsI/ml7blhoXpop3lpJbliqA1MOWIhlxuICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gNzIpIHtcbiAgICAgICAgICAgICAgICBzY29yZSArPSAzMDsgLy8gNzLlsI/ml7blhoXpop3lpJbliqAzMOWIhlxuICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMTY4KSB7XG4gICAgICAgICAgICAgICAgc2NvcmUgKz0gMTA7IC8vIOS4gOWRqOWGhemineWkluWKoDEw5YiGXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzY29yZTtcbiAgICB9XG4gICAgXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIExpc3Q8VGFza1ZvPiBnZXRQcmlvcml0aXplZFRhc2tzKExvbmcgdXNlcklkKSB7XG4gICAgICAgIC8vIDEuIOiOt+WPluaJgOacieW+heWKnuS7u+WKoe+8iOeKtuaAgeS4ujHvvIlcbiAgICAgICAgUXVlcnlXcmFwcGVyPFRhc2s+IHF1ZXJ5V3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xuICAgICAgICBxdWVyeVdyYXBwZXIuZXEoXCJzdGF0dXNcIiwgMSk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmjIflrprkuobnlKjmiLdJRO+8jOWImeWPquiOt+WPluivpeeUqOaIt+ebuOWFs+eahOS7u+WKoVxuICAgICAgICBpZiAodXNlcklkICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIOmcgOimgeaQnOe0onVzZXJEYXRh5a2X5q615Lit5YyF5ZCrdXNlcklk55qE6K6w5b2VXG4gICAgICAgICAgICAvLyDms6jmhI/vvJrov5nnp43mlrnlvI/lj6/og73kuI3lpJ/lh4bnoa7vvIzmm7Tlpb3nmoTmlrnms5XmmK/kvb/nlKhKU09O5Ye95pWw77yI5aaC5p6c5pWw5o2u5bqT5pSv5oyB77yJXG4gICAgICAgICAgICBxdWVyeVdyYXBwZXIubGlrZShcInVzZXJfZGF0YVwiLCB1c2VySWQudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIExpc3Q8VGFzaz4gdGFza3MgPSB0aGlzLmxpc3QocXVlcnlXcmFwcGVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDIuIOi9rOaNouS4ulRhc2tWb+W5tuiuoeeul+S8mOWFiOe6p+WIhuaVsFxuICAgICAgICBMaXN0PFRhc2tWbz4gdGFza1ZvcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICBmb3IgKFRhc2sgdGFzayA6IHRhc2tzKSB7XG4gICAgICAgICAgICBUYXNrVm8gdGFza1ZvID0gbmV3IFRhc2tWbygpO1xuICAgICAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHRhc2ssIHRhc2tWbyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuvue9ruS8mOWFiOe6p+WIhuaVsFxuICAgICAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKHRhc2spO1xuICAgICAgICAgICAgdGFza1ZvLnNldFByaW9yaXR5U2NvcmUocHJpb3JpdHlTY29yZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiOt+WPluS7u+WKoeexu+Wei+WQjeensFxuICAgICAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBjYXRlZ29yeVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldENhdGVnb3J5SWQoKSk7XG4gICAgICAgICAgICBpZiAoY2F0ZWdvcnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhc2tWby5zZXRDYXRlZ29yeU5hbWUoY2F0ZWdvcnkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6I635Y+W6YeN6KaB5oCn5ZKM57Sn5oCl5oCn5ZCN56ewXG4gICAgICAgICAgICBpZiAodGFzay5nZXRJbXBvcnRhbmNlSWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgUHJpb3JpdHkgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKGltcG9ydGFuY2VQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0YXNrLmdldEV4aWdlbmN5SWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0RXhpZ2VuY3lJZCgpKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRFeGlnZW5jeU5hbWUoZXhpZ2VuY3lQcmlvcml0eS5nZXROYW1lKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFza1Zvcy5hZGQodGFza1ZvKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gMy4g5oyJ5LyY5YWI57qn5YiG5pWw5o6S5bqP77yI5LuO6auY5Yiw5L2O77yJXG4gICAgICAgIHRhc2tWb3Muc29ydCgoYSwgYikgLT4gRG91YmxlLmNvbXBhcmUoYi5nZXRQcmlvcml0eVNjb3JlKCksIGEuZ2V0UHJpb3JpdHlTY29yZSgpKSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gdGFza1ZvcztcbiAgICB9XG4gICAgXG4gICAgQE92ZXJyaWRlXG4gICAgQFRyYW5zYWN0aW9uYWwocm9sbGJhY2tGb3IgPSBFeGNlcHRpb24uY2xhc3MpXG4gICAgcHVibGljIE1hcDxMb25nLCBCb29sZWFuPiBhdXRvU2NoZWR1bGVUYXNrcyhMb2NhbERhdGUgZGF0ZSwgTG9uZyB1c2VySWQpIHtcbiAgICAgICAgLy8g57uT5p6c5pig5bCE77yM6K6w5b2V5q+P5Liq5Lu75Yqh55qE5a6J5o6S57uT5p6cXG4gICAgICAgIE1hcDxMb25nLCBCb29sZWFuPiByZXN1bHQgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyAxLiDojrflj5bmjpLluo/lkI7nmoTku7vliqHliJfooahcbiAgICAgICAgTGlzdDxUYXNrVm8+IHByaW9yaXRpemVkVGFza3MgPSBnZXRQcmlvcml0aXplZFRhc2tzKHVzZXJJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInlvoXlip7ku7vliqHvvIznm7TmjqXov5Tlm57nqbrnu5PmnpxcbiAgICAgICAgaWYgKHByaW9yaXRpemVkVGFza3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyAyLiDojrflj5bor6Xml6XmnJ/nmoTlt6XkvZzml7bpl7TmrrXojIPlm7TvvIjpu5jorqQ4OjAwLTE4OjAw77yJXG4gICAgICAgIExvY2FsRGF0ZVRpbWUgc3RhcnRXb3JrVGltZSA9IGRhdGUuYXRUaW1lKDgsIDApO1xuICAgICAgICBMb2NhbERhdGVUaW1lIGVuZFdvcmtUaW1lID0gZGF0ZS5hdFRpbWUoMTgsIDApO1xuICAgICAgICBcbiAgICAgICAgLy8gMy4g6I635Y+W6K+l5pel5pyf5bey5pyJ55qE5pel56iL5a6J5o6SXG4gICAgICAgIFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4gc2NoZWR1bGVRdWVyeVdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgICAgICAgc2NoZWR1bGVRdWVyeVdyYXBwZXIuYmV0d2VlbihcInN0YXJ0X3RpbWVcIiwgc3RhcnRXb3JrVGltZSwgZW5kV29ya1RpbWUpO1xuICAgICAgICBMaXN0PFNjaGVkdWxlPiBleGlzdGluZ1NjaGVkdWxlcyA9IHNjaGVkdWxlU2VydmljZS5saXN0KHNjaGVkdWxlUXVlcnlXcmFwcGVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIDQuIOaehOW7uuaXtumXtOauteWNoOeUqOaDheWGtVxuICAgICAgICAvLyDlsIblt6XkvZzml7bpl7TliIbmiJDlpJrkuKrml7bpl7TmrrXvvIjmr4/ljYrlsI/ml7bkuIDkuKrvvInvvIzkvovlpoLvvJo4OjAwLTg6MzAsIDg6MzAtOTowMCwgLi4uXG4gICAgICAgIGludCB0b3RhbFNsb3RzID0gMjA7IC8vIDEw5bCP5pe277yM5q+P5Y2K5bCP5pe25LiA5Liq5pe26Ze05q6177yM5YWxMjDkuKrml7bpl7TmrrVcbiAgICAgICAgYm9vbGVhbltdIHRpbWVTbG90T2NjdXBpZWQgPSBuZXcgYm9vbGVhblt0b3RhbFNsb3RzXTtcbiAgICAgICAgXG4gICAgICAgIC8vIOagh+iusOW3suWNoOeUqOeahOaXtumXtOautVxuICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogZXhpc3RpbmdTY2hlZHVsZXMpIHtcbiAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgc2NoZWR1bGVTdGFydCA9IHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpO1xuICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBzY2hlZHVsZUVuZCA9IHNjaGVkdWxlLmdldEVuZFRpbWUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X6K+l5pel56iL5Y2g55So55qE5pe26Ze05q61XG4gICAgICAgICAgICBpbnQgc3RhcnRTbG90ID0gZ2V0VGltZVNsb3Qoc2NoZWR1bGVTdGFydCwgc3RhcnRXb3JrVGltZSk7XG4gICAgICAgICAgICBpbnQgZW5kU2xvdCA9IGdldFRpbWVTbG90KHNjaGVkdWxlRW5kLCBzdGFydFdvcmtUaW1lKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5qCH6K6w5Y2g55SoXG4gICAgICAgICAgICBmb3IgKGludCBpID0gc3RhcnRTbG90OyBpIDw9IGVuZFNsb3QgJiYgaSA8IHRvdGFsU2xvdHM7IGkrKykge1xuICAgICAgICAgICAgICAgIHRpbWVTbG90T2NjdXBpZWRbaV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyA1LiDmoLnmja7kvJjlhYjnuqflkozku7vliqHmiYDpnIDml7bpl7TlronmjpLku7vliqFcbiAgICAgICAgZm9yIChUYXNrVm8gdGFza1ZvIDogcHJpb3JpdGl6ZWRUYXNrcykge1xuICAgICAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKHRhc2tWby5nZXRJZCgpKTtcbiAgICAgICAgICAgIGlmICh0YXNrID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2tWby5nZXRJZCgpLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuoeeul+S7u+WKoeaJgOmcgOaXtumXtOauteaVsOmHj1xuICAgICAgICAgICAgaW50IHJlcXVpcmVkU2xvdHMgPSAxOyAvLyDpu5jorqTljaDnlKgx5Liq5pe26Ze05q6177yIMzDliIbpkp/vvIlcbiAgICAgICAgICAgIGlmICh0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAvLyDmr48zMOWIhumSn+S4gOS4quaXtumXtOaute+8jOWQkeS4iuWPluaVtFxuICAgICAgICAgICAgICAgIHJlcXVpcmVkU2xvdHMgPSAoaW50KSBNYXRoLmNlaWwodGFzay5nZXRUaW1lU3BlbmQoKSAvIDMwLjApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlr7vmib7ov57nu63nmoTnqbrpl7Lml7bpl7TmrrVcbiAgICAgICAgICAgIGludCBzdGFydFNsb3QgPSBmaW5kQXZhaWxhYmxlVGltZVNsb3RzKHRpbWVTbG90T2NjdXBpZWQsIHJlcXVpcmVkU2xvdHMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlpoLmnpzmib7kuI3liLDotrPlpJ/nmoTml7bpl7TmrrXvvIzmoIforrDkuLrlronmjpLlpLHotKVcbiAgICAgICAgICAgIGlmIChzdGFydFNsb3QgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHV0KHRhc2suZ2V0SWQoKSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDliJvlu7rml6XnqIvlronmjpJcbiAgICAgICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gbmV3IFNjaGVkdWxlKCk7XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRUYXNrSWQodGFzay5nZXRJZCgpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X5byA5aeL5ZKM57uT5p2f5pe26Ze0XG4gICAgICAgICAgICBMb2NhbERhdGVUaW1lIHNjaGVkdWxlU3RhcnRUaW1lID0gc3RhcnRXb3JrVGltZS5wbHVzTWludXRlcyhzdGFydFNsb3QgKiAzMCk7XG4gICAgICAgICAgICBMb2NhbERhdGVUaW1lIHNjaGVkdWxlRW5kVGltZSA9IHNjaGVkdWxlU3RhcnRUaW1lLnBsdXNNaW51dGVzKHJlcXVpcmVkU2xvdHMgKiAzMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNjaGVkdWxlLnNldFN0YXJ0VGltZShzY2hlZHVsZVN0YXJ0VGltZSk7XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlRW5kVGltZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOS/neWtmOaXpeeoi1xuICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gc2NoZWR1bGVTZXJ2aWNlLmNyZWF0ZShzY2hlZHVsZSk7XG4gICAgICAgICAgICByZXN1bHQucHV0KHRhc2suZ2V0SWQoKSwgc3VjY2Vzcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWmguaenOWuieaOkuaIkOWKn++8jOagh+iusOWvueW6lOeahOaXtumXtOauteS4uuW3suWNoOeUqFxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGludCBpID0gc3RhcnRTbG90OyBpIDwgc3RhcnRTbG90ICsgcmVxdWlyZWRTbG90cyAmJiBpIDwgdG90YWxTbG90czsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVTbG90T2NjdXBpZWRbaV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog6I635Y+W5pe26Ze054K55a+55bqU55qE5pe26Ze05q6157Si5byVXG4gICAgICogQHBhcmFtIHRpbWUg5pe26Ze054K5XG4gICAgICogQHBhcmFtIHN0YXJ0V29ya1RpbWUg5bel5L2c5byA5aeL5pe26Ze0XG4gICAgICogQHJldHVybiDml7bpl7TmrrXntKLlvJXvvIjku44w5byA5aeL77yJXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbnQgZ2V0VGltZVNsb3QoTG9jYWxEYXRlVGltZSB0aW1lLCBMb2NhbERhdGVUaW1lIHN0YXJ0V29ya1RpbWUpIHtcbiAgICAgICAgbG9uZyBtaW51dGVzRGlmZiA9IENocm9ub1VuaXQuTUlOVVRFUy5iZXR3ZWVuKHN0YXJ0V29ya1RpbWUsIHRpbWUpO1xuICAgICAgICByZXR1cm4gKGludCkgTWF0aC5mbG9vcihtaW51dGVzRGlmZiAvIDMwLjApO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiDlr7vmib7ov57nu63nmoTlj6/nlKjml7bpl7TmrrVcbiAgICAgKiBAcGFyYW0gdGltZVNsb3RPY2N1cGllZCDml7bpl7TmrrXljaDnlKjmg4XlhrVcbiAgICAgKiBAcGFyYW0gcmVxdWlyZWRTbG90cyDpnIDopoHnmoTov57nu63ml7bpl7TmrrXmlbBcbiAgICAgKiBAcmV0dXJuIOWPr+eUqOaXtumXtOauteeahOi1t+Wni+e0ouW8le+8jOWmguaenOaJvuS4jeWIsOWImei/lOWbni0xXG4gICAgICovXG4gICAgcHJpdmF0ZSBpbnQgZmluZEF2YWlsYWJsZVRpbWVTbG90cyhib29sZWFuW10gdGltZVNsb3RPY2N1cGllZCwgaW50IHJlcXVpcmVkU2xvdHMpIHtcbiAgICAgICAgaW50IGNvbnNlY3V0aXZlRnJlZVNsb3RzQ291bnQgPSAwO1xuICAgICAgICBpbnQgc3RhcnRTbG90ID0gLTE7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHRpbWVTbG90T2NjdXBpZWQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghdGltZVNsb3RPY2N1cGllZFtpXSkge1xuICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+i/nue7reepuumXsuaXtumXtOauteeahOW8gOWni1xuICAgICAgICAgICAgICAgIGlmIChjb25zZWN1dGl2ZUZyZWVTbG90c0NvdW50ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRTbG90ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc2VjdXRpdmVGcmVlU2xvdHNDb3VudCsrO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIOWmguaenOaJvuWIsOi2s+Wkn+eahOi/nue7reepuumXsuaXtumXtOautVxuICAgICAgICAgICAgICAgIGlmIChjb25zZWN1dGl2ZUZyZWVTbG90c0NvdW50ID49IHJlcXVpcmVkU2xvdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXJ0U2xvdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIOmHjee9ruiuoeaVsFxuICAgICAgICAgICAgICAgIGNvbnNlY3V0aXZlRnJlZVNsb3RzQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHN0YXJ0U2xvdCA9IC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzmsqHmnInmib7liLDotrPlpJ/nmoTov57nu63nqbrpl7Lml7bpl7TmrrVcbiAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9Qcmlvcml0eVNlcnZpY2VJbXBsLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoIOacjeWKoeWunueOsOexu1xuICogPC9wPlxuICovXG5AU2VydmljZVxucHVibGljIGNsYXNzIFByaW9yaXR5U2VydmljZUltcGwgZXh0ZW5kcyBTZXJ2aWNlSW1wbDxQcmlvcml0eU1hcHBlciwgUHJpb3JpdHk+IGltcGxlbWVudHMgUHJpb3JpdHlTZXJ2aWNlIHtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFByaW9yaXR5TWFwcGVyIHByaW9yaXR5TWFwcGVyO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFBhZ2U8UHJpb3JpdHk+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIEludGVnZXIgdHlwZSwgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFByaW9yaXR5PiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIHJldHVybiBwcmlvcml0eU1hcHBlci5zZWFyY2hQcmlvcml0eShwYWdlLCBzZWFyY2hLZXksIHR5cGUpO1xuICAgIH1cbn1cbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNmVlOTY3OWQtMzMxOC00MmE4LTgzNTctNmQwZjE4YThiOTU3O3Rvb2x1XzAxOU5UY1p1ZHkyRG81R0ZDWkNIMzJUYyI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmE6XG4gICAgIDFcdHBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuaW1wbDtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLklkVXRpbDtcbiAgICAgNFx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLmNvbmRpdGlvbnMucXVlcnkuUXVlcnlXcmFwcGVyO1xuICAgICA1XHRpbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbiAgICAgNlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbiAgICAgN1x0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5zZXJ2aWNlLlVtc0FkbWluU2VydmljZTtcbiAgICAgOFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5DYXRlZ29yeTtcbiAgICAgOVx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eTtcbiAgICAxMFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5SZXNvdXJjZXM7XG4gICAgMTFcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbiAgICAxMlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5TY2hlZHVsZTtcbiAgICAxM1x0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tYXBwZXIuVGFza01hcHBlcjtcbiAgICAxNFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLkNhdGVnb3J5U2VydmljZTtcbiAgICAxNVx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlByaW9yaXR5U2VydmljZTtcbiAgICAxNlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlJlc291cmNlc1NlcnZpY2U7XG4gICAgMTdcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5UYXNrU2VydmljZTtcbiAgICAxOFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlNjaGVkdWxlU2VydmljZTtcbiAgICAxOVx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5pbXBsLlNlcnZpY2VJbXBsO1xuICAgIDIwXHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbiAgICAyMVx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZDtcbiAgICAyMlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UcmVuZFBpZTtcbiAgICAyM1x0aW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5kYXRhYmluZC5PYmplY3RNYXBwZXI7XG4gICAgMjRcdGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLkJlYW5VdGlscztcbiAgICAyNVx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiAgICAyNlx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlO1xuICAgIDI3XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zY2hlZHVsaW5nLmFubm90YXRpb24uU2NoZWR1bGVkO1xuICAgIDI4XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jb250ZXh0LmFubm90YXRpb24uTGF6eTtcbiAgICAyOVx0XG4gICAgMzBcdGltcG9ydCBqYXZhLnRpbWUuRHVyYXRpb247XG4gICAgMzFcdGltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbiAgICAzMlx0aW1wb3J0IGphdmEudXRpbC4qO1xuICAgIDMzXHRcbiAgICAzNFx0LyoqXG4gICAgMzVcdCAqIDxwPlxuICAgIDM2XHQgKiDku7vliqHooagg5pyN5Yqh5a6e546w57G7XG4gICAgMzdcdCAqIDwvcD5cbiAgICAzOFx0ICovXG4gICAgMzlcdEBTZXJ2aWNlXG4gICAgNDBcdHB1YmxpYyBjbGFzcyBUYXNrU2VydmljZUltcGwgZXh0ZW5kcyBTZXJ2aWNlSW1wbDxUYXNrTWFwcGVyLCBUYXNrPiBpbXBsZW1lbnRzIFRhc2tTZXJ2aWNlIHtcbiAgICA0MVx0XG4gICAgNDJcdCAgICBAQXV0b3dpcmVkXG4gICAgNDNcdCAgICBwcml2YXRlIFRhc2tNYXBwZXIgdGFza01hcHBlcjtcbiAgICA0NFx0XG4gICAgNDVcdCAgICBAQXV0b3dpcmVkXG4gICAgNDZcdCAgICBwcml2YXRlIENhdGVnb3J5U2VydmljZSBjYXRlZ29yeVNlcnZpY2U7XG4gICAgNDdcdFxuICAgIDQ4XHQgICAgQEF1dG93aXJlZFxuICAgIDQ5XHQgICAgcHJpdmF0ZSBQcmlvcml0eVNlcnZpY2UgcHJpb3JpdHlTZXJ2aWNlO1xuICAgIDUwXHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDI5M1xuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYTg2NGRhNDAtMzk1YS00NmJmLWFkMGUtMTBiZDc4MjczNzczO3Rvb2x1XzAxVXBiQmFmUjR1UGFxVEJGVHIyazVTNyI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAyNlx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlO1xuICAgIDI3XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zY2hlZHVsaW5nLmFubm90YXRpb24uU2NoZWR1bGVkO1xuICAgIDI4XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jb250ZXh0LmFubm90YXRpb24uTGF6eTtcbiAgICAyOVx0XG4gICAgMzBcdGltcG9ydCBqYXZhLnRpbWUuRHVyYXRpb247XG4gICAgMzFcdGltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbiAgICAzMlx0aW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGU7XG4gICAgMzNcdGltcG9ydCBqYXZhLnRpbWUudGVtcG9yYWwuQ2hyb25vVW5pdDtcbiAgICAzNFx0aW1wb3J0IGphdmEudXRpbC4qO1xuICAgIDM1XHRpbXBvcnQgamF2YS5tYXRoLkJpZ0RlY2ltYWw7XG4gICAgMzZcdGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnRyYW5zYWN0aW9uLmFubm90YXRpb24uVHJhbnNhY3Rpb25hbDtcbiAgICAzN1x0XG4gICAgMzhcdC8qKlxuICAgIDM5XHQgKiA8cD5cbiAgICA0MFx0ICog5Lu75Yqh6KGoIOacjeWKoeWunueOsOexu1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIwYzI5Zjg2NS0zZTVmLTQ0OTUtYWQ5NC0yNTY1MmYxY2NkOTg7dG9vbHVfMDFTZVlTbXNaVXlNZ0NnY1c3Z0Y4TlhnIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YTpcbiAgIDI5MFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBIYXNoU2V0PD4oQXJyYXlzLmFzTGlzdChvYmplY3RNYXBwZXIucmVhZFZhbHVlKGpzb25BcnJheSwgTG9uZ1tdLmNsYXNzKSkpO1xuICAgMjkxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAyOTJcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAyOTNcdCAgICAgICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy5lbXB0eVNldCgpO1xuVG90YWwgbGluZXMgaW4gZmlsZTogMjk3XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlNDBjMGQ1ZC05YzE2LTQzZWMtOTk1NC0zN2VhMTA1NzRhNjU7dG9vbHVfMDFEV0RkcEdubTNVUVhNQUxLaE1oaU5ZIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6Ik5vdGU6XG5FbmQgbGluZSAzMDAgZXhjZWVkcyBmaWxlIGxlbmd0aCAoMjk3KS4gQWRqdXN0ZWQgdG8gMjk3LlxuXG5IZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvVGFza1NlcnZpY2VJbXBsLmphdmE6XG4gICAyOTBcdCAgICAgICAgICAgIHJldHVybiBuZXcgSGFzaFNldDw+KEFycmF5cy5hc0xpc3Qob2JqZWN0TWFwcGVyLnJlYWRWYWx1ZShqc29uQXJyYXksIExvbmdbXS5jbGFzcykpKTtcbiAgIDI5MVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMjkyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjkzXHQgICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgIDI5NFx0ICAgICAgICB9XG4gICAyOTVcdCAgICB9XG4gICAyOTZcdH1cbiAgIDI5N1x0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAyOTdcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImZjMTk1NDJjLTc3NjItNDU4My1hMzMzLTZjOGI4NmFjOTg5OTt0b29sdV8wMVd2Y3ZFbm1tTWU2V0FNTDUzWGJqNTMiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1Rhc2tTZXJ2aWNlSW1wbC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyOTBcdCAgICAgICAgICAgIHJldHVybiBuZXcgSGFzaFNldDw+KEFycmF5cy5hc0xpc3Qob2JqZWN0TWFwcGVyLnJlYWRWYWx1ZShqc29uQXJyYXksIExvbmdbXS5jbGFzcykpKTtcbiAgIDI5MVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMjkyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMjkzXHQgICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgIDI5NFx0ICAgICAgICB9XG4gICAyOTVcdCAgICB9XG4gICAyOTZcdFxuICAgMjk3XHQgICAgQE92ZXJyaWRlXG4gICAyOThcdCAgICBwdWJsaWMgTGlzdDxUYXNrVm8+IHNtYXJ0U29ydFRhc2tzKCkge1xuICAgMjk5XHQgICAgICAgIC8vIOWFiOabtOaWsOaJgOacieS7u+WKoeeKtuaAgVxuICAgMzAwXHQgICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcbiAgIDMwMVx0XG4gICAzMDJcdCAgICAgICAgLy8gMS4g6I635Y+W5omA5pyJ5pyq5a6M5oiQ55qE5Lu75Yqh77yI5YyF5ous5b6F5Yqe44CB5bey5a6J5o6S44CB6L+b6KGM5Lit44CB5bey6YCX5pyf77yJXG4gICAzMDNcdCAgICAgICAgUXVlcnlXcmFwcGVyPFRhc2s+IHF1ZXJ5V3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xuICAgMzA0XHQgICAgICAgIHF1ZXJ5V3JhcHBlci5pbihcInN0YXR1c1wiLCBBcnJheXMuYXNMaXN0KDEsIDIsIDMsIDUpKTtcbiAgIDMwNVx0ICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGhpcy5saXN0KHF1ZXJ5V3JhcHBlcik7XG4gICAzMDZcdFxuICAgMzA3XHQgICAgICAgIC8vIDIuIOi9rOaNouS4ulRhc2tWb+W5tuiuoeeul+aZuuiDveaOkuW6j+WIhuaVsFxuICAgMzA4XHQgICAgICAgIExpc3Q8VGFza1ZvPiB0YXNrVm9zID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAzMDlcdCAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xuICAgMzEwXHQgICAgICAgICAgICBUYXNrVm8gdGFza1ZvID0gbmV3IFRhc2tWbygpO1xuICAgMzExXHQgICAgICAgICAgICBCZWFuVXRpbHMuY29weVByb3BlcnRpZXModGFzaywgdGFza1ZvKTtcbiAgIDMxMlx0XG4gICAzMTNcdCAgICAgICAgICAgIC8vIOiuoeeul+aZuuiDveaOkuW6j+WIhuaVsFxuICAgMzE0XHQgICAgICAgICAgICBkb3VibGUgc21hcnRTY29yZSA9IGNhbGN1bGF0ZVNtYXJ0U2NvcmUodGFzayk7XG4gICAzMTVcdCAgICAgICAgICAgIHRhc2tWby5zZXRQcmlvcml0eVNjb3JlKEJpZ0RlY2ltYWwudmFsdWVPZihzbWFydFNjb3JlKSk7XG4gICAzMTZcdFxuICAgMzE3XHQgICAgICAgICAgICAvLyDojrflj5bku7vliqHnsbvlnovlkI3np7BcbiAgIDMxOFx0ICAgICAgICAgICAgQ2F0ZWdvcnkgY2F0ZWdvcnkgPSBjYXRlZ29yeVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldENhdGVnb3J5SWQoKSk7XG4gICAzMTlcdCAgICAgICAgICAgIGlmIChjYXRlZ29yeSAhPSBudWxsKSB7XG4gICAzMjBcdCAgICAgICAgICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAzMjFcdCAgICAgICAgICAgIH1cbiAgIDMyMlx0XG4gICAzMjNcdCAgICAgICAgICAgIC8vIOiOt+WPlumHjeimgeaAp+WSjOe0p+aApeaAp+WQjeensFxuICAgMzI0XHQgICAgICAgICAgICBpZiAodGFzay5nZXRJbXBvcnRhbmNlSWQoKSAhPSBudWxsKSB7XG4gICAzMjVcdCAgICAgICAgICAgICAgICBQcmlvcml0eSBpbXBvcnRhbmNlUHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEltcG9ydGFuY2VJZCgpKTtcbiAgIDMyNlx0ICAgICAgICAgICAgICAgIGlmIChpbXBvcnRhbmNlUHJpb3JpdHkgIT0gbnVsbCkge1xuICAgMzI3XHQgICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShpbXBvcnRhbmNlUHJpb3JpdHkuZ2V0TmFtZSgpKTtcbiAgIDMyOFx0ICAgICAgICAgICAgICAgIH1cbiAgIDMyOVx0ICAgICAgICAgICAgfVxuICAgMzMwXHRcbiAgIDMzMVx0ICAgICAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgIDMzMlx0ICAgICAgICAgICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAzMzNcdCAgICAgICAgICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAzMzRcdCAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldEV4aWdlbmN5TmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAzMzVcdCAgICAgICAgICAgICAgICB9XG4gICAzMzZcdCAgICAgICAgICAgIH1cbiAgIDMzN1x0XG4gICAzMzhcdCAgICAgICAgICAgIC8vIOino+aekOeUqOaIt+WSjOi1hOa6kOaVsOaNrlxuICAgMzM5XHQgICAgICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgMzQwXHQgICAgICAgICAgICBTZXQ8TG9uZz4gdXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQodGFzay5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMzQxXHQgICAgICAgICAgICBTZXQ8TG9uZz4gcmVzb3VyY2VJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0UmVzb3VyY2VzRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMzQyXHRcbiAgIDM0M1x0ICAgICAgICAgICAgTGlzdDxVbXNBZG1pbj4gdXNlckxpc3QgPSB1c2VyU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8VW1zQWRtaW4+KCkubGFtYmRhKCkuaW4oVW1zQWRtaW46OmdldElkLCB1c2VySWRzKSk7XG4gICAzNDRcdCAgICAgICAgICAgIExpc3Q8UmVzb3VyY2VzPiByZXNvdXJjZXNMaXN0ID0gcmVzb3VyY2VzU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8UmVzb3VyY2VzPigpLmxhbWJkYSgpLmluKFJlc291cmNlczo6Z2V0SWQsIHJlc291cmNlSWRzKSk7XG4gICAzNDVcdCAgICAgICAgICAgIHRhc2tWby5zZXRVc2VyTGlzdCh1c2VyTGlzdCk7XG4gICAzNDZcdCAgICAgICAgICAgIHRhc2tWby5zZXRSZXNvdXJjZXNMaXN0KHJlc291cmNlc0xpc3QpO1xuICAgMzQ3XHRcbiAgIDM0OFx0ICAgICAgICAgICAgdGFza1Zvcy5hZGQodGFza1ZvKTtcbiAgIDM0OVx0ICAgICAgICB9XG4gICAzNTBcdFxuICAgMzUxXHQgICAgICAgIC8vIDMuIOaMieaZuuiDveaOkuW6j+WIhuaVsOaOkuW6j++8iOS7jumrmOWIsOS9ju+8iVxuICAgMzUyXHQgICAgICAgIHRhc2tWb3Muc29ydCgoYSwgYikgLT4gYi5nZXRQcmlvcml0eVNjb3JlKCkuY29tcGFyZVRvKGEuZ2V0UHJpb3JpdHlTY29yZSgpKSk7XG4gICAzNTNcdFxuICAgMzU0XHQgICAgICAgIHJldHVybiB0YXNrVm9zO1xuICAgMzU1XHQgICAgfVxuICAgMzU2XHRcbiAgIDM1N1x0ICAgIC8qKlxuICAgMzU4XHQgICAgICog6K6h566X5Lu75Yqh55qE5pm66IO95o6S5bqP5YiG5pWwXG4gICAzNTlcdCAgICAgKiDln7rkuo7ku7vliqHnmoTph43opoHmgKfjgIHntKfmgKXmgKfjgIHmiKrmraLml7bpl7TlkoznirbmgIFcbiAgIDM2MFx0ICAgICAqIEBwYXJhbSB0YXNrIOS7u+WKoeWvueixoVxuICAgMzYxXHQgICAgICogQHJldHVybiDmmbrog73mjpLluo/liIbmlbBcbiAgIDM2Mlx0ICAgICAqL1xuICAgMzYzXHQgICAgcHJpdmF0ZSBkb3VibGUgY2FsY3VsYXRlU21hcnRTY29yZShUYXNrIHRhc2spIHtcbiAgIDM2NFx0ICAgICAgICBkb3VibGUgc2NvcmUgPSAwLjA7XG4gICAzNjVcdFxuICAgMzY2XHQgICAgICAgIC8vIDEuIOWfuuehgOWIhuaVsO+8mumHjeimgeaAp+WSjOe0p+aApeaAp+adg+mHjVxuICAgMzY3XHQgICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IG51bGw7XG4gICAzNjhcdCAgICAgICAgUHJpb3JpdHkgZXhpZ2VuY3lQcmlvcml0eSA9IG51bGw7XG4gICAzNjlcdFxuICAgMzcwXHQgICAgICAgIGlmICh0YXNrLmdldEltcG9ydGFuY2VJZCgpICE9IG51bGwpIHtcbiAgIDM3MVx0ICAgICAgICAgICAgaW1wb3J0YW5jZVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRJbXBvcnRhbmNlSWQoKSk7XG4gICAzNzJcdCAgICAgICAgfVxuICAgMzczXHRcbiAgIDM3NFx0ICAgICAgICBpZiAodGFzay5nZXRFeGlnZW5jeUlkKCkgIT0gbnVsbCkge1xuICAgMzc1XHQgICAgICAgICAgICBleGlnZW5jeVByaW9yaXR5ID0gcHJpb3JpdHlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgMzc2XHQgICAgICAgIH1cbiAgIDM3N1x0XG4gICAzNzhcdCAgICAgICAgLy8g6K6h566X6YeN6KaB5oCn5YiG5pWwXG4gICAzNzlcdCAgICAgICAgaWYgKGltcG9ydGFuY2VQcmlvcml0eSAhPSBudWxsKSB7XG4gICAzODBcdCAgICAgICAgICAgIHNjb3JlICs9IGltcG9ydGFuY2VQcmlvcml0eS5nZXRTY29yZSgpICogaW1wb3J0YW5jZVByaW9yaXR5LmdldFdlaWdodCgpLmRvdWJsZVZhbHVlKCk7XG4gICAzODFcdCAgICAgICAgfVxuICAgMzgyXHRcbiAgIDM4M1x0ICAgICAgICAvLyDorqHnrpfntKfmgKXmgKfliIbmlbBcbiAgIDM4NFx0ICAgICAgICBpZiAoZXhpZ2VuY3lQcmlvcml0eSAhPSBudWxsKSB7XG4gICAzODVcdCAgICAgICAgICAgIHNjb3JlICs9IGV4aWdlbmN5UHJpb3JpdHkuZ2V0U2NvcmUoKSAqIGV4aWdlbmN5UHJpb3JpdHkuZ2V0V2VpZ2h0KCkuZG91YmxlVmFsdWUoKTtcbiAgIDM4Nlx0ICAgICAgICB9XG4gICAzODdcdFxuICAgMzg4XHQgICAgICAgIC8vIDIuIOaIquatouaXtumXtOadg+mHjeiuoeeul1xuICAgMzg5XHQgICAgICAgIGlmICh0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCkge1xuICAgMzkwXHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAzOTFcdCAgICAgICAgICAgIGxvbmcgaG91cnNVbnRpbERlYWRsaW5lID0gQ2hyb25vVW5pdC5IT1VSUy5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKTtcbiAgIDM5Mlx0XG4gICAzOTNcdCAgICAgICAgICAgIC8vIOaIquatouaXtumXtOi2iui/ke+8jOWIhuaVsOi2iumrmFxuICAgMzk0XHQgICAgICAgICAgICBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDI0KSB7XG4gICAzOTVcdCAgICAgICAgICAgICAgICBzY29yZSArPSA1MDsgLy8gMjTlsI/ml7blhoXpop3lpJbliqA1MOWIhlxuICAgMzk2XHQgICAgICAgICAgICB9IGVsc2UgaWYgKGhvdXJzVW50aWxEZWFkbGluZSA8PSA3Mikge1xuICAgMzk3XHQgICAgICAgICAgICAgICAgc2NvcmUgKz0gMzA7IC8vIDcy5bCP5pe25YaF6aKd5aSW5YqgMzDliIZcbiAgIDM5OFx0ICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gMTY4KSB7XG4gICAzOTlcdCAgICAgICAgICAgICAgICBzY29yZSArPSAxMDsgLy8g5LiA5ZGo5YaF6aKd5aSW5YqgMTDliIZcbiAgIDQwMFx0ICAgICAgICAgICAgfVxuICAgNDAxXHRcbiAgIDQwMlx0ICAgICAgICAgICAgLy8g5aaC5p6c5bey57uP6YCX5pyf77yM6aKd5aSW5Yqg5YiGXG4gICA0MDNcdCAgICAgICAgICAgIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPCAwKSB7XG4gICA0MDRcdCAgICAgICAgICAgICAgICAvLyDpgJfmnJ/ml7bpl7Totorplb/vvIzliIbmlbDotorpq5jvvIjmnIDlpJrliqAxMDDliIbvvIlcbiAgIDQwNVx0ICAgICAgICAgICAgICAgIGxvbmcgb3ZlcmR1ZURheXMgPSBNYXRoLmFicyhob3Vyc1VudGlsRGVhZGxpbmUpIC8gMjQ7XG4gICA0MDZcdCAgICAgICAgICAgICAgICBzY29yZSArPSBNYXRoLm1pbihvdmVyZHVlRGF5cyAqIDEwLCAxMDApO1xuICAgNDA3XHQgICAgICAgICAgICB9XG4gICA0MDhcdCAgICAgICAgfVxuICAgNDA5XHRcbiAgIDQxMFx0ICAgICAgICAvLyAzLiDku7vliqHnirbmgIHmnYPph41cbiAgIDQxMVx0ICAgICAgICBpZiAodGFzay5nZXRTdGF0dXMoKSAhPSBudWxsKSB7XG4gICA0MTJcdCAgICAgICAgICAgIHN3aXRjaCAodGFzay5nZXRTdGF0dXMoKSkge1xuICAgNDEzXHQgICAgICAgICAgICAgICAgY2FzZSA1OiAvLyDlt7LpgJfmnJ9cbiAgIDQxNFx0ICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAxMDA7XG4gICA0MTVcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICA0MTZcdCAgICAgICAgICAgICAgICBjYXNlIDM6IC8vIOi/m+ihjOS4rVxuICAgNDE3XHQgICAgICAgICAgICAgICAgICAgIHNjb3JlICs9IDYwO1xuICAgNDE4XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgNDE5XHQgICAgICAgICAgICAgICAgY2FzZSAyOiAvLyDlt7LlronmjpJcbiAgIDQyMFx0ICAgICAgICAgICAgICAgICAgICBzY29yZSArPSAzMDtcbiAgIDQyMVx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgIDQyMlx0ICAgICAgICAgICAgICAgIGNhc2UgMTogLy8g5b6F5YqeXG4gICA0MjNcdCAgICAgICAgICAgICAgICAgICAgc2NvcmUgKz0gMTA7XG4gICA0MjRcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICA0MjVcdCAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgNDI2XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgNDI3XHQgICAgICAgICAgICB9XG4gICA0MjhcdCAgICAgICAgfVxuICAgNDI5XHRcbiAgIDQzMFx0ICAgICAgICAvLyA0LiDku7vliqHmiYDpnIDml7bpl7TmnYPph43vvIjogJfml7botornn63otorlhYjlrozmiJDvvIlcbiAgIDQzMVx0ICAgICAgICBpZiAodGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsICYmIHRhc2suZ2V0VGltZVNwZW5kKCkgPiAwKSB7XG4gICA0MzJcdCAgICAgICAgICAgIC8vIOaXtumXtOi2iuefre+8jOWIhuaVsOi2iumrmO+8iOacgOWkmuWKoDIw5YiG77yJXG4gICA0MzNcdCAgICAgICAgICAgIHNjb3JlICs9IE1hdGgubWF4KDIwIC0gKHRhc2suZ2V0VGltZVNwZW5kKCkgLyAzMCksIDApO1xuICAgNDM0XHQgICAgICAgIH1cbiAgIDQzNVx0XG4gICA0MzZcdCAgICAgICAgcmV0dXJuIHNjb3JlO1xuICAgNDM3XHQgICAgfVxuICAgNDM4XHR9XG4gICA0MzlcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI2MDY2YjQwYi1mZWVjLTQ2NGYtYjkwZC0yOTA2YjRjYjQ4MWM7dG9vbHVfMDFMcWhOVWc1aG5IekVBWlhYZ25WMTNBIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvVGFza0NvbnRyb2xsZXIuamF2YTpcbiAgICAgMVx0cGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuY29udHJvbGxlcjtcbiAgICAgMlx0XG4gICAgIDNcdFxuICAgICA0XHRpbXBvcnQgY24uaHV0b29sLmNvcmUudXRpbC5JZFV0aWw7XG4gICAgIDVcdGltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLk9iamVjdFV0aWw7XG4gICAgIDZcdGltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbiAgICAgN1x0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG4gICAgIDhcdGltcG9ydCBjb20uYm9vdC53ZWIuY29tbW9uLmFwaS5Db21tb25QYWdlO1xuICAgICA5XHRpbXBvcnQgY29tLmJvb3Qud2ViLmNvbW1vbi5hcGkuQ29tbW9uUmVzdWx0O1xuICAgIDEwXHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlRhc2s7XG4gICAgMTFcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5UYXNrU2VydmljZTtcbiAgICAxMlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5UYXNrVm87XG4gICAgMTNcdGltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU9wZXJhdGlvbjtcbiAgICAxNFx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiAgICAxNVx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmJpbmQuYW5ub3RhdGlvbi4qO1xuICAgIDE2XHRcbiAgICAxN1x0aW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgIDE4XHRpbXBvcnQgamF2YS51dGlsLk1hcDtcbiAgICAxOVx0XG4gICAgMjBcdC8qKlxuICAgIDIxXHQgKiA8cD5cbiAgICAyMlx0ICog5Lu75Yqh6KGoIOWJjeerr+aOp+WItuWZqFxuICAgIDIzXHQgKiA8L3A+XG4gICAgMjRcdCAqL1xuICAgIDI1XHRAUmVzdENvbnRyb2xsZXJcbiAgICAyNlx0QFJlcXVlc3RNYXBwaW5nKFwiL3dlYi90YXNrXCIpXG4gICAgMjdcdHB1YmxpYyBjbGFzcyBUYXNrQ29udHJvbGxlciB7XG4gICAgMjhcdCAgICBAQXV0b3dpcmVkXG4gICAgMjlcdCAgICBwcml2YXRlIFRhc2tTZXJ2aWNlIHRhc2tTZXJ2aWNlO1xuICAgIDMwXHRcbiAgICAzMVx0ICAgIEBBcGlPcGVyYXRpb24oXCLmoLnmja7mnaHku7bmn6Xor6LliJfooahcIilcbiAgICAzMlx0ICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICAzM1x0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxUYXNrVm8+PiBsaXN0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICAzNFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAzNVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcImNhdGVnb3J5SWRcIiwgcmVxdWlyZWQgPSBmYWxzZSkgTG9uZyBjYXRlZ29yeUlkLFxuICAgIDM2XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic2VhcmNoS2V5XCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAzN1x0ICAgICAgICBQYWdlPFRhc2tWbz4gdGFza1BhZ2UgPSB0YXNrU2VydmljZS5zZWFyY2gocGFnZVNpemUsIHBhZ2VOdW0sIGNhdGVnb3J5SWQsIHNlYXJjaEtleSk7XG4gICAgMzhcdFxuICAgIDM5XHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHRhc2tQYWdlKSk7XG4gICAgNDBcdCAgICB9XG4gICAgNDFcdFxuICAgIDQyXHQgICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu65Lu75YqhXCIpXG4gICAgNDNcdCAgICBAUG9zdE1hcHBpbmcoXCIvY3JlYXRlXCIpXG4gICAgNDRcdCAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PEJvb2xlYW4+IGNyZWF0ZShAUmVxdWVzdEJvZHkgVGFzayB0YXNrKSB7XG4gICAgNDVcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmNyZWF0ZSh0YXNrKSk7XG4gICAgNDZcdCAgICB9XG4gICAgNDdcdFxuICAgIDQ4XHQgICAgQEFwaU9wZXJhdGlvbihcIuS/ruaUueS7u+WKoVwiKVxuICAgIDQ5XHQgICAgQFBvc3RNYXBwaW5nKFwiL3VwZGF0ZVwiKVxuICAgIDUwXHQgICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiB1cGRhdGUoQFJlcXVlc3RCb2R5IFRhc2sgdGFzaykge1xuICAgIDUxXHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVUYXNrKHRhc2spKTtcbiAgICA1Mlx0ICAgIH1cbiAgICA1M1x0XG4gICAgNTRcdCAgICBAQXBpT3BlcmF0aW9uKFwi5L+u5pS55Lu75Yqh54q25oCBXCIpXG4gICAgNTVcdCAgICBAUG9zdE1hcHBpbmcoXCIvdXBkYXRlU3RhdHVzXCIpXG4gICAgNTZcdCAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PEJvb2xlYW4+IHVwZGF0ZVN0YXR1cyhAUmVxdWVzdFBhcmFtIExvbmcgaWQsIEBSZXF1ZXN0UGFyYW0gSW50ZWdlciBzdGF0dXMpIHtcbiAgICA1N1x0ICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGlkKTtcbiAgICA1OFx0ICAgICAgICBpZiAodGFzayAhPSBudWxsKSB7XG4gICAgNTlcdCAgICAgICAgICAgIHRhc2suc2V0U3RhdHVzKHN0YXR1cyk7XG4gICAgNjBcdCAgICAgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spKTtcbiAgICA2MVx0ICAgICAgICB9XG4gICAgNjJcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoXCLku7vliqHkuI3lrZjlnKhcIik7XG4gICAgNjNcdCAgICB9XG4gICAgNjRcdFxuICAgIDY1XHQgICAgQEFwaU9wZXJhdGlvbihcIuiuvue9ruS7u+WKoeaPkOmGkuaXtumXtFwiKVxuICAgIDY2XHQgICAgQFBvc3RNYXBwaW5nKFwiL3NldFJlbWluZGVyXCIpXG4gICAgNjdcdCAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PEJvb2xlYW4+IHNldFJlbWluZGVyKEBSZXF1ZXN0UGFyYW0gTG9uZyBpZCwgQFJlcXVlc3RQYXJhbShyZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgcmVtaW5kZXJUaW1lKSB7XG4gICAgNjhcdCAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChpZCk7XG4gICAgNjlcdCAgICAgICAgaWYgKHRhc2sgIT0gbnVsbCkge1xuICAgIDcwXHQgICAgICAgICAgICBpZiAocmVtaW5kZXJUaW1lICE9IG51bGwgJiYgIXJlbWluZGVyVGltZS5pc0VtcHR5KCkpIHtcbiAgICA3MVx0ICAgICAgICAgICAgICAgIHRhc2suc2V0UmVtaW5kZXJUaW1lKGphdmEudGltZS5Mb2NhbERhdGVUaW1lLnBhcnNlKHJlbWluZGVyVGltZSkpO1xuICAgIDcyXHQgICAgICAgICAgICB9IGVsc2Uge1xuICAgIDczXHQgICAgICAgICAgICAgICAgdGFzay5zZXRSZW1pbmRlclRpbWUobnVsbCk7IC8vIOWPlua2iOaPkOmGklxuICAgIDc0XHQgICAgICAgICAgICB9XG4gICAgNzVcdCAgICAgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spKTtcbiAgICA3Nlx0ICAgICAgICB9XG4gICAgNzdcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5mYWlsZWQoXCLku7vliqHkuI3lrZjlnKhcIik7XG4gICAgNzhcdCAgICB9XG4gICAgNzlcdFxuICAgIDgwXHQgICAgQEFwaU9wZXJhdGlvbihcIuenu+mZpOS7u+WKoVwiKVxuICAgIDgxXHQgICAgQFBvc3RNYXBwaW5nKFwiL2RlbGV0ZS97aWR9XCIpXG4gICAgODJcdCAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PFN0cmluZz4gZGVsZXRlKEBQYXRoVmFyaWFibGUgTG9uZyBpZCkge1xuICAgIDgzXHQgICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgIDg0XHQgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRhc2tTZXJ2aWNlLnJlbW92ZUJ5SWQodGFzayk7XG4gICAgODVcdCAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgICA4Nlx0ICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKG51bGwpO1xuICAgIDg3XHQgICAgICAgIH1cbiAgICA4OFx0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LmZhaWxlZChcIuenu+mZpOWksei0pe+8jOivt+eojeWQjumHjeivlVwiKTtcbiAgICA4OVx0ICAgIH1cbiAgICA5MFx0XG4gICAgOTFcdCAgICBAQXBpT3BlcmF0aW9uKFwi5p+l6K+i5omA5pyJ5YiX6KGoXCIpXG4gICAgOTJcdCAgICBAR2V0TWFwcGluZyhcIi9saXN0QWxsQnlTdGF0dXNcIilcbiAgICA5M1x0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrVm8+PiBsaXN0QWxsKEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInN0YXR1c1wiLCByZXF1aXJlZCA9IGZhbHNlKSBJbnRlZ2VyIHN0YXR1cykge1xuICAgIDk0XHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5saXN0QWxsKHN0YXR1cykpO1xuICAgIDk1XHQgICAgfVxuICAgIDk2XHRcbiAgICA5N1x0ICAgIEBBcGlPcGVyYXRpb24oXCLmn6Xor6LmiYDmnInliJfooahcIilcbiAgICA5OFx0ICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RBbGxcIilcbiAgICA5OVx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrPj4gbGlzdEFsbCgpIHtcbiAgIDEwMFx0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UubGlzdCgpKTtcbiAgIDEwMVx0ICAgIH1cbiAgIDEwMlx0XG4gICAxMDNcdCAgICBAQXBpT3BlcmF0aW9uKFwi5p+l6K+i5Lu75Yqh6K+m5oOFXCIpXG4gICAxMDRcdCAgICBAR2V0TWFwcGluZyhcIi9pbmZvL3tpZH1cIilcbiAgIDEwNVx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8VGFza1ZvPiBnZXRJbmZvKEBQYXRoVmFyaWFibGUgTG9uZyBpZCkge1xuICAgMTA2XHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5nZXRJbmZvKGlkKSk7XG4gICAxMDdcdCAgICB9XG4gICAxMDhcdH1cbiAgIDEwOVx0XG4gICAxMTBcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTEwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlZjdiNzE3Ni05N2U2LTQyOWYtYjhmZS1kNmZjNzc0ZjYxMWI7dG9vbHVfMDFDTjIxY0duOUdEZGM3Mm55aERSSGJZIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvVGFza0NvbnRyb2xsZXIuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDk5XHQgICAgcHVibGljIENvbW1vblJlc3VsdDxMaXN0PFRhc2s+PiBsaXN0QWxsKCkge1xuICAgMTAwXHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5saXN0KCkpO1xuICAgMTAxXHQgICAgfVxuICAgMTAyXHRcbiAgIDEwM1x0ICAgIEBBcGlPcGVyYXRpb24oXCLmn6Xor6Lku7vliqHor6bmg4VcIilcbiAgIDEwNFx0ICAgIEBHZXRNYXBwaW5nKFwiL2luZm8ve2lkfVwiKVxuICAgMTA1XHQgICAgcHVibGljIENvbW1vblJlc3VsdDxUYXNrVm8+IGdldEluZm8oQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7XG4gICAxMDZcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmdldEluZm8oaWQpKTtcbiAgIDEwN1x0ICAgIH1cbiAgIDEwOFx0XG4gICAxMDlcdCAgICBAQXBpT3BlcmF0aW9uKFwi5pm66IO95o6S5bqP5Lu75Yqh5YiX6KGoXCIpXG4gICAxMTBcdCAgICBAR2V0TWFwcGluZyhcIi9zbWFydFNvcnRcIilcbiAgIDExMVx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxUYXNrVm8+PiBzbWFydFNvcnRUYXNrcygpIHtcbiAgIDExMlx0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2Uuc21hcnRTb3J0VGFza3MoKSk7XG4gICAxMTNcdCAgICB9XG4gICAxMTRcdH1cbiAgIDExNVx0XG4gICAxMTZcdFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJkYjQ2YmY2OS03M2RlLTQzYmEtYTNmNS05YjQzMzljODZkZjI7dG9vbHVfMDFDcG14RmRadkpKWmRoQktGc29IbUxzIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy9hcGkvYXBpLmpzOlxuICAgMTUwXHQgICAgbWV0aG9kOiAncG9zdCcsXG4gICAxNTFcdCAgfSlcbiAgIDE1Mlx0fVxuICAgMTUzXHRcbiAgIDE1NFx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsUHJpb3JpdHlMaXN0KHBhcmFtcykge1xuICAgMTU1XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDE1Nlx0ICAgIHVybDogJy93ZWIvcHJpb3JpdHkvbGlzdEFsbCcsXG4gICAxNTdcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMTU4XHQgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAxNTlcdCAgfSlcbiAgIDE2MFx0fVxuICAgMTYxXHRcbiAgIDE2Mlx0XG4gICAxNjNcdC8vIOS7u+WKoVxuICAgMTY0XHRleHBvcnQgZnVuY3Rpb24gZmV0Y2hUYXNrTGlzdChwYXJhbXMpIHtcbiAgIDE2NVx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAxNjZcdCAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdCcsXG4gICAxNjdcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMTY4XHQgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAxNjlcdCAgfSlcbiAgIDE3MFx0fVxuICAgMTcxXHRcbiAgIDE3Mlx0ZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2soZGF0YSkge1xuICAgMTczXHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDE3NFx0ICAgIHVybDogJy93ZWIvdGFzay9jcmVhdGUnLFxuICAgMTc1XHQgICAgbWV0aG9kOiAncG9zdCcsXG4gICAxNzZcdCAgICBkYXRhOiBkYXRhLFxuICAgMTc3XHQgIH0pXG4gICAxNzhcdH1cbiAgIDE3OVx0XG4gICAxODBcdGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrKGRhdGEpIHtcbiAgIDE4MVx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAxODJcdCAgICB1cmw6ICcvd2ViL3Rhc2svdXBkYXRlJyxcbiAgIDE4M1x0ICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgMTg0XHQgICAgZGF0YTogZGF0YVxuICAgMTg1XHQgIH0pXG4gICAxODZcdH1cbiAgIDE4N1x0XG4gICAxODhcdGV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrU3RhdHVzKGlkLCBzdGF0dXMpIHtcbiAgIDE4OVx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAxOTBcdCAgICB1cmw6ICcvd2ViL3Rhc2svdXBkYXRlU3RhdHVzJyxcbiAgIDE5MVx0ICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgMTkyXHQgICAgcGFyYW1zOiB7IGlkLCBzdGF0dXMgfVxuICAgMTkzXHQgIH0pXG4gICAxOTRcdH1cbiAgIDE5NVx0XG4gICAxOTZcdGV4cG9ydCBmdW5jdGlvbiBzZXRUYXNrUmVtaW5kZXIoaWQsIHJlbWluZGVyVGltZSkge1xuICAgMTk3XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDE5OFx0ICAgIHVybDogJy93ZWIvdGFzay9zZXRSZW1pbmRlcicsXG4gICAxOTlcdCAgICBtZXRob2Q6ICdwb3N0JyxcbiAgIDIwMFx0ICAgIHBhcmFtczogeyBpZCwgcmVtaW5kZXJUaW1lIH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDM2NVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMjJjMmRjMDItNTFlZC00NGViLTkwNTAtN2Y5OWJiN2UwMzA3O3Rvb2x1XzAxSGFDdnFWaXJOejRvQXFhblM1M1hrdSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvYXBpL2FwaS5qczpcbiAgIDIwMFx0ICAgIHBhcmFtczogeyBpZCwgcmVtaW5kZXJUaW1lIH1cbiAgIDIwMVx0ICB9KVxuICAgMjAyXHR9XG4gICAyMDNcdFxuICAgMjA0XHRleHBvcnQgZnVuY3Rpb24gZGVsZXRlVGFzayhpZCkge1xuICAgMjA1XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDIwNlx0ICAgIHVybDogJy93ZWIvdGFzay9kZWxldGUvJyArIGlkLFxuICAgMjA3XHQgICAgbWV0aG9kOiAncG9zdCcsXG4gICAyMDhcdCAgfSlcbiAgIDIwOVx0fVxuICAgMjEwXHRcbiAgIDIxMVx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cyhwYXJhbXMpIHtcbiAgIDIxMlx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAyMTNcdCAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdEFsbEJ5U3RhdHVzJyxcbiAgIDIxNFx0ICAgIG1ldGhvZDogJ2dldCcsXG4gICAyMTVcdCAgICBwYXJhbXM6IHBhcmFtcyxcbiAgIDIxNlx0ICB9KVxuICAgMjE3XHR9XG4gICAyMThcdFxuICAgMjE5XHRleHBvcnQgZnVuY3Rpb24gZmV0Y2hBbGxUYXNrTGlzdCgpIHtcbiAgIDIyMFx0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAyMjFcdCAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdEFsbCcsXG4gICAyMjJcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMjIzXHQgIH0pXG4gICAyMjRcdH1cbiAgIDIyNVx0XG4gICAyMjZcdGV4cG9ydCBmdW5jdGlvbiBmZXRjaFRhc2tJbmZvKGlkKSB7XG4gICAyMjdcdCAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgMjI4XHQgICAgdXJsOiAnL3dlYi90YXNrL2luZm8vJyArIGlkLFxuICAgMjI5XHQgICAgbWV0aG9kOiAnZ2V0JyxcbiAgIDIzMFx0ICB9KVxuICAgMjMxXHR9XG4gICAyMzJcdFxuICAgMjMzXHQvLyDlronmjpJcbiAgIDIzNFx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoU2NoZWR1bGVMaXN0KHBhcmFtcykge1xuICAgMjM1XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDIzNlx0ICAgIHVybDogJy93ZWIvc2NoZWR1bGUvbGlzdCcsXG4gICAyMzdcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMjM4XHQgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAyMzlcdCAgfSlcbiAgIDI0MFx0fVxuICAgMjQxXHRcbiAgIDI0Mlx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoVXNlclNjaGVkdWxlTGlzdChwYXJhbXMpIHtcbiAgIDI0M1x0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAyNDRcdCAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL3VzZXIvbGlzdCcsXG4gICAyNDVcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMjQ2XHQgICAgcGFyYW1zOiBwYXJhbXMsXG4gICAyNDdcdCAgfSlcbiAgIDI0OFx0fVxuICAgMjQ5XHRcbiAgIDI1MFx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoTW9udGhTY2hlZHVsZUxpc3QoeWVhck1vbnRoKSB7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAzNjVcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjgyYjRiNzMwLTA4NzctNGVhYi04NDQxLWU3M2JkYWVkYzk5Njt0b29sdV8wMUFYSlI4VGJSZDVxaGd5REhlejJEYmYiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL2FwaS9hcGkuanMuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDIyMlx0ICAgIG1ldGhvZDogJ2dldCcsXG4gICAyMjNcdCAgfSlcbiAgIDIyNFx0fVxuICAgMjI1XHRcbiAgIDIyNlx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoVGFza0luZm8oaWQpIHtcbiAgIDIyN1x0ICByZXR1cm4gcmVxdWVzdCh7XG4gICAyMjhcdCAgICB1cmw6ICcvd2ViL3Rhc2svaW5mby8nICsgaWQsXG4gICAyMjlcdCAgICBtZXRob2Q6ICdnZXQnLFxuICAgMjMwXHQgIH0pXG4gICAyMzFcdH1cbiAgIDIzMlx0XG4gICAyMzNcdGV4cG9ydCBmdW5jdGlvbiBmZXRjaFNtYXJ0U29ydFRhc2tzKCkge1xuICAgMjM0XHQgIHJldHVybiByZXF1ZXN0KHtcbiAgIDIzNVx0ICAgIHVybDogJy93ZWIvdGFzay9zbWFydFNvcnQnLFxuICAgMjM2XHQgICAgbWV0aG9kOiAnZ2V0JyxcbiAgIDIzN1x0ICB9KVxuICAgMjM4XHR9XG4gICAyMzlcdFxuICAgMjQwXHQvLyDlronmjpJcbiAgIDI0MVx0ZXhwb3J0IGZ1bmN0aW9uIGZldGNoU2NoZWR1bGVMaXN0KHBhcmFtcykge1xuICAgMjQyXHQgIHJldHVybiByZXF1ZXN0KHtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNzQ0NTFkZDgtMDdkMS00ZThiLTlkZGYtMTBmZGViMmU2MTNmO3Rvb2x1XzAxRTUyR2tWbm04SkI2eWY3Y3F5Rm8yaSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvdmlld3MvdGFzay9pbmRleC52dWU6XG4gICAgIDFcdDx0ZW1wbGF0ZT7CoFxuICAgICAyXHQgICAgPGRpdiBjbGFzcz1cImFwcC1jb250YWluZXJcIj5cbiAgICAgM1x0ICAgICAgPGVsLWNhcmQgY2xhc3M9XCJmaWx0ZXItY29udGFpbmVyXCIgc2hhZG93PVwibmV2ZXJcIj5cbiAgICAgNFx0ICAgICAgICA8ZGl2PlxuICAgICA1XHQgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXNlYXJjaFwiPjwvaT5cbiAgICAgNlx0ICAgICAgICAgIDxzcGFuPuetm+mAieaQnOe0ojwvc3Bhbj5cbiAgICAgN1x0ICAgICAgICA8L2Rpdj5cbiAgICAgOFx0ICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLXRvcDogMTVweFwiPlxuICAgICA5XHQgICAgICAgICAgPGVsLWZvcm0gOmlubGluZT1cInRydWVcIiA6bW9kZWw9XCJsaXN0UXVlcnlcIiBzaXplPVwic21hbGxcIiBsYWJlbC13aWR0aD1cIjEyMHB4XCI+XG4gICAgMTBcdCAgICAgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLliIbnsbvvvJpcIj5cbiAgICAxMVx0ICAgICAgICAgICAgICA8ZWwtc2VsZWN0IGZpbHRlcmFibGUgY2xlYXJhYmxlIHYtbW9kZWw9XCJsaXN0UXVlcnkuY2F0ZWdvcnlJZFwiIEBjaGFuZ2U9XCJnZXRMaXN0XCIgcGxhY2Vob2xkZXI9XCLlhajpg6hcIj5cbiAgICAxMlx0ICAgICAgICAgICAgICAgIDxlbC1vcHRpb24gdi1mb3I9XCJpdGVtIGluIGNhdGVnb3J5TGlzdFwiXG4gICAgMTNcdCAgICAgICAgICAgICAgICA6a2V5PVwiaXRlbS5pZFwiXG4gICAgMTRcdCAgICAgICAgICAgICAgICA6bGFiZWw9XCJpdGVtLm5hbWVcIlxuICAgIDE1XHQgICAgICAgICAgICAgICAgOnZhbHVlPVwiaXRlbS5pZFwiPlxuICAgIDE2XHQgICAgICAgICAgICAgICAgPC9lbC1vcHRpb24+XG4gICAgMTdcdCAgICAgICAgICAgICAgPC9lbC1zZWxlY3Q+XG4gICAgMThcdCAgICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgIDE5XHQgICAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5YWz6ZSu5a2X77yaXCI+XG4gICAgMjBcdCAgICAgICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc2VhcmNoS2V5XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXlhbPplK7lrZdcIiBjbGVhcmFibGU+PC9lbC1pbnB1dD5cbiAgICAyMVx0ICAgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgMjJcdCAgICAgICAgICAgIDxlbC1idXR0b25cbiAgICAyM1x0ICAgICAgICAgICAgICBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxNXB4XCJcbiAgICAyNFx0ICAgICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1yZWZyZXNoXCJcbiAgICAyNVx0ICAgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVSZXNldFNlYXJjaCgpXCJcbiAgICAyNlx0ICAgICAgICAgICAgICBzaXplPVwic21hbGxcIj5cbiAgICAyN1x0ICAgICAgICAgICAgICDph43nva5cbiAgICAyOFx0ICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMjlcdCAgICAgICAgICAgIDxlbC1idXR0b25cbiAgICAzMFx0ICAgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgMzFcdCAgICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAzMlx0ICAgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVTZWFyY2hMaXN0KClcIlxuICAgIDMzXHQgICAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiPlxuICAgIDM0XHQgICAgICAgICAgICAgIOafpeivouaQnOe0olxuICAgIDM1XHQgICAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAzNlx0ICAgICAgICAgIDwvZWwtZm9ybT5cbiAgICAzN1x0ICAgICAgICA8L2Rpdj5cbiAgICAzOFx0ICAgICAgPC9lbC1jYXJkPlxuICAgIDM5XHQgICAgICA8ZWwtY2FyZCBjbGFzcz1cIm9wZXJhdGUtY29udGFpbmVyXCIgc2hhZG93PVwibmV2ZXJcIj5cbiAgICA0MFx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tdGlja2V0c1wiPjwvaT5cbiAgICA0MVx0ICAgICAgICA8c3Bhbj7ku7vliqHliJfooag8L3NwYW4+PGVsLXRhZyB0eXBlPVwiaW5mb1wiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IDEwcHg7XCIgY2xhc3M9XCJlbC1pY29uLWluZm9cIj7lt7LmjInkvJjlhYjnuqfku47pq5jliLDkvY7mjpLliJc8L2VsLXRhZz5cbiAgICA0Mlx0ICAgICAgICA8ZWwtYnV0dG9uIHNpemU9XCJzbWFsbFwiIGNsYXNzPVwiYnRuLWFkZFwiIEBjbGljaz1cImhhbmRsZUFkZCgpXCIgc3R5bGU9XCJtYXJnaW4tbGVmdDogMjBweFwiIHR5cGU9XCJzdWNjZXNzXCI+PGkgY2xhc3M9XCJlbC1pY29uLXBsdXNcIj7liJvlu7rku7vliqE8L2k+PC9lbC1idXR0b24+XG4gICAgNDNcdCAgICAgIDwvZWwtY2FyZD5cbiAgICA0NFx0ICAgICAgPGRpdiBjbGFzcz1cInRhYmxlLWNvbnRhaW5lclwiPlxuICAgIDQ1XHQgICAgICAgIDxlbC10YWJsZSByZWY9XCJhZG1pblRhYmxlXCJcbiAgICA0Nlx0ICAgICAgICAgICAgICAgICAgOmRhdGE9XCJsaXN0XCJcbiAgICA0N1x0ICAgICAgICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDogMTAwJTtcIlxuICAgIDQ4XHQgICAgICAgICAgICAgICAgICB2LWxvYWRpbmc9XCJsaXN0TG9hZGluZ1wiIHN0cmlwZT5cbiAgICA0OVx0ICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gbGFiZWw9XCLnvJblj7dcIiB3aWR0aD1cIjEwMFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgNTBcdCAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy5pZH19PC90ZW1wbGF0ZT5cblRvdGFsIGxpbmVzIGluIGZpbGU6IDQ5OFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZjcwYjBlYjEtZjAxYi00ZTgxLWI3OTItOWI2ZWVhNWYzYWJjO3Rvb2x1XzAxMWVvZm1VTjNzeHRZc3VnQ1J0ZVRydSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvdmlld3MvdGFzay9pbmRleC52dWU6XG4gICAyMDBcdCAgICAgIDwvZWwtZGlhbG9nPlxuICAgMjAxXHQgICAgPC9kaXY+XG4gICAyMDJcdCAgPC90ZW1wbGF0ZT5cbiAgIDIwM1x0ICA8c2NyaXB0PlxuICAgMjA0XHQgICAgaW1wb3J0IHtmZXRjaFRhc2tMaXN0LGNyZWF0ZVRhc2ssdXBkYXRlVGFzayxkZWxldGVUYXNrLGZldGNoQWxsQ2F0ZWdvcnlMaXN0LCBmZXRjaEFsbFByaW9yaXR5TGlzdCwgZmV0Y2hBbGxSZXNvdXJjZUxpc3R9IGZyb20gJ0AvYXBpL2FwaSc7XG4gICAyMDVcdCAgICBpbXBvcnQge2ZldGNoQWxsVXNlckxpc3R9IGZyb20gJ0AvYXBpL2xvZ2luJztcbiAgIDIwNlx0XG4gICAyMDdcdCAgICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG4gICAyMDhcdFxuICAgMjA5XHQgICAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgIDIxMFx0ICAgICAgcGFnZU51bTogMSxcbiAgIDIxMVx0ICAgICAgcGFnZVNpemU6IDEwLFxuICAgMjEyXHQgICAgICBzZWFyY2hLZXk6IG51bGwsXG4gICAyMTNcdCAgICAgIGNhdGVnb3J5SWQ6IG51bGwsXG4gICAyMTRcdCAgICB9O1xuICAgMjE1XHQgICAgY29uc3QgZGVmYXVsdEFkbWluID0ge1xuICAgMjE2XHQgICAgICBpZDogbnVsbCxcbiAgIDIxN1x0ICAgICAgdGl0bGU6IG51bGwsXG4gICAyMThcdCAgICAgIGNvZGU6IG51bGwsXG4gICAyMTlcdCAgICAgIGNhdGVnb3J5SWQ6IG51bGwsXG4gICAyMjBcdCAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgMjIxXHQgICAgICBzdGF0dXM6IG51bGwsXG4gICAyMjJcdCAgICAgIGltcG9ydGFuY2VJZDogbnVsbCxcbiAgIDIyM1x0ICAgICAgZXhpZ2VuY3lJZDogbnVsbCxcbiAgIDIyNFx0ICAgICAgcmVzb3VyY2VzRGF0YTogbnVsbCxcbiAgIDIyNVx0ICAgICAgdXNlckRhdGE6IG51bGwsXG4gICAyMjZcdCAgICAgIHRpbWVTcGVuZDogbnVsbCxcbiAgIDIyN1x0ICAgICAgZGVhZGxpbmU6IG51bGwsXG4gICAyMjhcdCAgICAgIHVzZXJJZHM6IG51bGwsXG4gICAyMjlcdCAgICAgIHJlc291cmNlSWRzOiBudWxsLFxuICAgMjMwXHQgICAgfTtcbiAgIDIzMVx0ICAgIGV4cG9ydCBkZWZhdWx0IHtcbiAgIDIzMlx0ICAgICAgbmFtZTogJ1Rhc2tMaXN0JyxcbiAgIDIzM1x0ICAgICAgZGF0YSgpIHtcbiAgIDIzNFx0ICAgICAgICByZXR1cm4ge1xuICAgMjM1XHQgICAgICAgICAgbGlzdFF1ZXJ5OiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KSxcbiAgIDIzNlx0ICAgICAgICAgIGxpc3Q6IG51bGwsXG4gICAyMzdcdCAgICAgICAgICB0b3RhbDogbnVsbCxcbiAgIDIzOFx0ICAgICAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSxcbiAgIDIzOVx0ICAgICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgMjQwXHQgICAgICAgICAgYWRtaW46IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZG1pbiksXG4gICAyNDFcdCAgICAgICAgICBpc0VkaXQ6IGZhbHNlLFxuICAgMjQyXHQgICAgICAgICAgcnVsZXM6IHtcbiAgIDI0M1x0ICAgICAgICAgICAgdGl0bGU6IFtcbiAgIDI0NFx0ICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5Lu75Yqh5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH1cbiAgIDI0NVx0ICAgICAgICAgICAgXSxcbiAgIDI0Nlx0ICAgICAgICAgICAgY2F0ZWdvcnlJZDogW1xuICAgMjQ3XHQgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nku7vliqHnsbvlnosnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XG4gICAyNDhcdCAgICAgICAgICAgIF0sXG4gICAyNDlcdCAgICAgICAgICAgIGltcG9ydGFuY2VJZDogW1xuICAgMjUwXHQgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nph43opoHmgKcnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA0OThcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjc5ZjVhYjJlLWEyMDktNGIyNy04ODEwLTg0OGYzOTdlNmFkMzt0b29sdV8wMVJwcXhaUU5DMWROTjE5ZlVXaFNFcFIiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3Rhc2svaW5kZXgudnVlOlxuICAgMzAwXHQgICAgICAgICAgfVxuICAgMzAxXHQgICAgICAgICAgaWYgKHN0YXR1cyA9PSA0KSB7XG4gICAzMDJcdCAgICAgICAgICAgIHJldHVybiAn5bey5a6M5oiQJztcbiAgIDMwM1x0ICAgICAgICAgIH1cbiAgIDMwNFx0ICAgICAgICAgIGlmIChzdGF0dXMgPT0gNSkge1xuICAgMzA1XHQgICAgICAgICAgICByZXR1cm4gJ+W3sumAvuacnyc7XG4gICAzMDZcdCAgICAgICAgICB9XG4gICAzMDdcdCAgICAgICAgICByZXR1cm4gJ+acquefpSc7XG4gICAzMDhcdCAgICAgICAgfSxcbiAgIDMwOVx0ICAgICAgfSxcbiAgIDMxMFx0ICAgICAgY3JlYXRlZCgpIHtcbiAgIDMxMVx0ICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgIDMxMlx0ICAgICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpO1xuICAgMzEzXHQgICAgICAgIHRoaXMuZ2V0UHJpb3JpdHlMaXN0KCk7XG4gICAzMTRcdCAgICAgICAgdGhpcy5nZXRVc2VyTGlzdCgpO1xuICAgMzE1XHQgICAgICAgIHRoaXMuZ2V0UmVzb3VyY2VMaXN0KCk7XG4gICAzMTZcdCAgICAgIH0sXG4gICAzMTdcdCAgICAgIG1ldGhvZHM6IHtcbiAgIDMxOFx0ICAgICAgICBnZXRVc2VyTGlzdCgpIHtcbiAgIDMxOVx0ICAgICAgICAgIGZldGNoQWxsVXNlckxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgIDMyMFx0ICAgICAgICAgICAgdGhpcy51c2VyTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAzMjFcdCAgICAgICAgICB9KTtcbiAgIDMyMlx0ICAgICAgICB9LFxuICAgMzIzXHQgICAgICAgIGdldFJlc291cmNlTGlzdCgpIHtcbiAgIDMyNFx0ICAgICAgICAgIGZldGNoQWxsUmVzb3VyY2VMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAzMjVcdCAgICAgICAgICAgIHRoaXMucmVzb3VyY2VMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgIDMyNlx0ICAgICAgICAgIH0pO1xuICAgMzI3XHQgICAgICAgIH0sXG4gICAzMjhcdCAgICAgICAgZ2V0UHJpb3JpdHlMaXN0KCkge1xuICAgMzI5XHQgICAgICAgICAgZmV0Y2hBbGxQcmlvcml0eUxpc3Qoe3R5cGU6IDF9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgIDMzMFx0ICAgICAgICAgICAgdGhpcy5pbXBvcnRhbmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAzMzFcdCAgICAgICAgICB9KTtcbiAgIDMzMlx0ICAgICAgICAgIGZldGNoQWxsUHJpb3JpdHlMaXN0KHt0eXBlOiAyfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAzMzNcdCAgICAgICAgICAgIHRoaXMuZXhpZ2VuY3lMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgIDMzNFx0ICAgICAgICAgIH0pO1xuICAgMzM1XHQgICAgICAgIH0sXG4gICAzMzZcdCAgICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICAzMzdcdCAgICAgICAgICB0aGlzLmxpc3RRdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpO1xuICAgMzM4XHQgICAgICAgICAgdGhpcy5nZXRMaXN0KClcbiAgIDMzOVx0ICAgICAgICB9LFxuICAgMzQwXHQgICAgICAgIGhhbmRsZVVwZGF0ZVN0YXR1cyhyb3cpIHtcbiAgIDM0MVx0ICAgICAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOaTjeS9nD8nLCAn5o+Q56S6Jywge1xuICAgMzQyXHQgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsXG4gICAzNDNcdCAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLFxuICAgMzQ0XHQgICAgICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgIDM0NVx0ICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgMzQ2XHQgICAgICAgICAgICB1cGRhdGVUYXNrKHJvdykudGhlbihyZXNwb25zZSA9PiB7XG4gICAzNDdcdCAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAzNDhcdCAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAzNDlcdCAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5pON5L2c5oiQ5YqfISdcbiAgIDM1MFx0ICAgICAgICAgICAgICB9KTtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDQ5OFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYjEyMGUzOTMtMTViMi00N2I0LThlOGQtMTM1NjFhMTUyM2Y3O3Rvb2x1XzAxNDN4NGpBQXlkWWZlc0hHWXJGRDQzUiI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3MvdGFzay9pbmRleC52dWUuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAzNVx0ICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMzZcdCAgICAgICAgICA8L2VsLWZvcm0+XG4gICAgMzdcdCAgICAgICAgPC9kaXY+XG4gICAgMzhcdCAgICAgIDwvZWwtY2FyZD5cbiAgICAzOVx0ICAgICAgPGVsLWNhcmQgY2xhc3M9XCJvcGVyYXRlLWNvbnRhaW5lclwiIHNoYWRvdz1cIm5ldmVyXCI+XG4gICAgNDBcdCAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXRpY2tldHNcIj48L2k+XG4gICAgNDFcdCAgICAgICAgPHNwYW4+5Lu75Yqh5YiX6KGoPC9zcGFuPjxlbC10YWcgdHlwZT1cImluZm9cIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxMHB4O1wiIGNsYXNzPVwiZWwtaWNvbi1pbmZvXCI+5bey5oyJ5LyY5YWI57qn5LuO6auY5Yiw5L2O5o6S5YiXPC9lbC10YWc+XG4gICAgNDJcdCAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVwic21hbGxcIiBjbGFzcz1cImJ0bi1hZGRcIiBAY2xpY2s9XCJoYW5kbGVBZGQoKVwiIHN0eWxlPVwibWFyZ2luLWxlZnQ6IDIwcHhcIiB0eXBlPVwic3VjY2Vzc1wiPjxpIGNsYXNzPVwiZWwtaWNvbi1wbHVzXCI+5Yib5bu65Lu75YqhPC9pPjwvZWwtYnV0dG9uPlxuICAgIDQzXHQgICAgICAgIDxlbC1idXR0b24gc2l6ZT1cInNtYWxsXCIgQGNsaWNrPVwiaGFuZGxlU21hcnRTb3J0KClcIiBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAxMHB4XCIgdHlwZT1cInByaW1hcnlcIj48aSBjbGFzcz1cImVsLWljb24tc29ydFwiPuaZuuiDveaOkuW6jzwvaT48L2VsLWJ1dHRvbj5cbiAgICA0NFx0ICAgICAgPC9lbC1jYXJkPlxuICAgIDQ1XHQgICAgICA8ZGl2IGNsYXNzPVwidGFibGUtY29udGFpbmVyXCI+XG4gICAgNDZcdCAgICAgICAgPGVsLXRhYmxlIHJlZj1cImFkbWluVGFibGVcIlxuICAgIDQ3XHQgICAgICAgICAgICAgICAgICA6ZGF0YT1cImxpc3RcIlxuICAgIDQ4XHQgICAgICAgICAgICAgICAgICBzdHlsZT1cIndpZHRoOiAxMDAlO1wiXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjM3ZDRlYTBlLTFhMDEtNDIzYi04NTQ5LTFiNTA5ODJhZjE2Yjt0b29sdV8wMTd5cGlYTGFzdHV1N20zMm5ZQzZ1djQiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL3ZpZXdzL3Rhc2svaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAyMDBcdCAgICAgICAgPC9zcGFuPlxuICAgMjAxXHQgICAgICA8L2VsLWRpYWxvZz5cbiAgIDIwMlx0ICAgIDwvZGl2PlxuICAgMjAzXHQgIDwvdGVtcGxhdGU+XG4gICAyMDRcdCAgPHNjcmlwdD5cbiAgIDIwNVx0ICAgIGltcG9ydCB7ZmV0Y2hUYXNrTGlzdCxjcmVhdGVUYXNrLHVwZGF0ZVRhc2ssZGVsZXRlVGFzayxmZXRjaEFsbENhdGVnb3J5TGlzdCwgZmV0Y2hBbGxQcmlvcml0eUxpc3QsIGZldGNoQWxsUmVzb3VyY2VMaXN0LCBmZXRjaFNtYXJ0U29ydFRhc2tzfSBmcm9tICdAL2FwaS9hcGknO1xuICAgMjA2XHQgICAgaW1wb3J0IHtmZXRjaEFsbFVzZXJMaXN0fSBmcm9tICdAL2FwaS9sb2dpbic7XG4gICAyMDdcdFxuICAgMjA4XHQgICAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuICAgMjA5XHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZWI0MGYzNjItYzQ0Ny00NDVjLThlMDEtOTM2MGVmOTgxOGNhO3Rvb2x1XzAxNEdFYUgyTHZCZlNDR25oaEhoQTJ2dyI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3MvdGFzay9pbmRleC52dWUuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDQzOFx0ICAgICAgICAgIH1cbiAgIDQzOVx0ICAgICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LHJvdyk7XG4gICA0NDBcdCAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgNDQxXHQgICAgICAgIH0sXG4gICA0NDJcdCAgICAgICAgZ2V0TGlzdCgpIHtcbiAgIDQ0M1x0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgNDQ0XHQgICAgICAgICAgZmV0Y2hUYXNrTGlzdCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICA0NDVcdCAgICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDQ0Nlx0ICAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgNDQ3XHQgICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgIDQ0OFx0ICAgICAgICAgIH0pO1xuICAgNDQ5XHQgICAgICAgIH0sXG4gICA0NTBcdFxuICAgNDUxXHQgICAgICAgIC8vIOaZuuiDveaOkuW6j+aWueazlVxuICAgNDUyXHQgICAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcbiAgIDQ1M1x0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgNDU0XHQgICAgICAgICAgZmV0Y2hTbWFydFNvcnRUYXNrcygpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgNDU1XHQgICAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA0NTZcdCAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICA0NTdcdCAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgNDU4XHQgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgIDQ1OVx0ICAgICAgICAgICAgICBtZXNzYWdlOiAn5pm66IO95o6S5bqP5a6M5oiQISdcbiAgIDQ2MFx0ICAgICAgICAgICAgfSk7XG4gICA0NjFcdCAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICA0NjJcdCAgICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDQ2M1x0ICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICA0NjRcdCAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgIDQ2NVx0ICAgICAgICAgICAgICBtZXNzYWdlOiAn5pm66IO95o6S5bqP5aSx6LSlOiAnICsgZXJyb3JcbiAgIDQ2Nlx0ICAgICAgICAgICAgfSk7XG4gICA0NjdcdCAgICAgICAgICB9KTtcbiAgIDQ2OFx0ICAgICAgICB9LFxuICAgNDY5XHQgICAgICAgIGhhbmRsZVN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUpIHtcbiAgIDQ3MFx0ICAgICAgICAgIC8vIOWkhOeQhuS4iuS8oOaIkOWKn+WQjueahOmAu+i+ke+8jOiOt+WPluWQjuerr+i/lOWbnueahOaWh+S7tui3r+W+hFxuICAgNDcxXHQgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSByZXNwb25zZS5kYXRhO1xuICAgNDcyXHQgICAgICAgICAgdGhpcy5hZG1pbi5pbWFnZSA9IGAke3Byb2Nlc3MuZW52LkJBU0VfQVBJfS8ke2ZpbGVQYXRofWA7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX19LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJzdGF0dXMiOiJkcmFmdCJ9LCJkcmFmdEFjdGl2ZUNvbnRleHRJZHMiOlsiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufL3NlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1NjaGVkdWxlQ29udHJvbGxlci5qYXZhIiwiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufZmFsc2VmYWxzZSIsImFnZW50TWVtb3JpZXMiXSwicmVxdWVzdElkcyI6W10sImlzUGlubmVkIjpmYWxzZSwiaXNTaGFyZWFibGUiOnRydWUsImV4dHJhRGF0YSI6eyJpc0FnZW50Q29udmVyc2F0aW9uIjp0cnVlLCJoYXNEaXJ0eUVkaXRzIjpmYWxzZSwiYmFzZWxpbmVUaW1lc3RhbXAiOjB9LCJwZXJzb25hVHlwZSI6MH0sImViZTQzYWU3LTEwYjctNGRjYy1hYmQwLWZmYTI1ODFjOTJmNyI6eyJpZCI6ImViZTQzYWU3LTEwYjctNGRjYy1hYmQwLWZmYTI1ODFjOTJmNyIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDQtMzBUMDg6NDI6MDUuMzU0WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTAzVDE1OjU2OjM2LjQyMVoiLCJjaGF0SGlzdG9yeSI6W3sicmVxdWVzdF9pZCI6IjFmNTMyNmU3LTBmMzYtNDUxMC1iZWFjLTQ3NDc2NTYyNzJjNSIsInV1aWQiOiIwMzBhYzU0MC01NjAyLTRkYTUtYjZiYi0zYTNkYzU4NGQxMjgiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjAsInRvVGltZXN0YW1wIjoxNzQ2MDAyNTI1MzU1LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiMTI0MzNjNS0xNGQwLTQxZmUtYWUyYy1mNzZmMmEzODcyOGQiLCJyZXF1ZXN0X21lc3NhZ2UiOiJDOlxcVXNlcnNcXDM3NjAyXFxEZXNrdG9wXFzpobnnm65cXOaZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7n1xcc2VydmVyXFxzcmNcXG1haW5cXGphdmFcXGNvbVxcYm9vdFxcd2ViXFxtb2R1bGVzXFx3ZWJcXGNvbnRyb2xsZXJcXFNjaGVkdWxlQ29udHJvbGxlci5qYXZhOjU2OjM2XHJcbmphdmE6IOaJvuS4jeWIsOespuWPt1xyXG4gIOespuWPtzogICDmlrnms5UgZ2V0Q3VycmVudFVzZXJJZCgpXHJcbiAg5L2N572uOiDnsbsgY29tLmJvb3Qud2ViLnNlY3VyaXR5LnV0aWwuU2VjdXJpdHlVdGlscyDkv67mlLlidWciLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoiQzpcXFVzZXJzXFwzNzYwMlxcRGVza3RvcFxc6aG555uuXFzmmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu59cXHNlcnZlclxcc3JjXFxtYWluXFxqYXZhXFxjb21cXGJvb3RcXHdlYlxcbW9kdWxlc1xcd2ViXFxjb250cm9sbGVyXFxTY2hlZHVsZUNvbnRyb2xsZXIuamF2YTo1NjozNlxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJqYXZhOiDmib7kuI3liLDnrKblj7dcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiICDnrKblj7c6ICAg5pa55rOVIGdldEN1cnJlbnRVc2VySWQoKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiIgIOS9jee9rjog57G7IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLlNlY3VyaXR5VXRpbHMg5L+u5pS5YnVnIn1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNHU1azJyeHZleUVzN2hxVjNtTlFGTCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9TY2hlZHVsZUNvbnRyb2xsZXIuamF2YVwiLCBcInZpZXdfcmFuZ2VcIjogWzUwLCA2MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJIHNlZSB0aGF0IHlvdSdyZSBlbmNvdW50ZXJpbmcgYSBjb21waWxhdGlvbiBlcnJvciBpbiB0aGUgYFNjaGVkdWxlQ29udHJvbGxlci5qYXZhYCBmaWxlLiBUaGUgZXJyb3IgaW5kaWNhdGVzIHRoYXQgdGhlIG1ldGhvZCBgZ2V0Q3VycmVudFVzZXJJZCgpYCBjYW5ub3QgYmUgZm91bmQgaW4gdGhlIGBTZWN1cml0eVV0aWxzYCBjbGFzcy4gTGV0IG1lIGhlbHAgeW91IGZpeCB0aGlzIGlzc3VlLlxuXG5GaXJzdCwgbGV0J3MgZXhhbWluZSB0aGUgcmVsZXZhbnQgY29kZSB0byB1bmRlcnN0YW5kIHRoZSBjb250ZXh0IGJldHRlci5cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoiQzpcXFVzZXJzXFwzNzYwMlxcRGVza3RvcFxc6aG555uuXFzmmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu59cXHNlcnZlclxcc3JjXFxtYWluXFxqYXZhXFxjb21cXGJvb3RcXHdlYlxcbW9kdWxlc1xcd2ViXFxjb250cm9sbGVyXFxTY2hlZHVsZUNvbnRyb2xsZXIuamF2YTo1NjozNlxyXG5qYXZhOiDmib7kuI3liLDnrKblj7dcclxuICDnrKblj7c6ICAg5pa55rOVIGdldEN1cnJlbnRVc2VySWQoKVxyXG4gIOS9jee9rjog57G7IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLlNlY3VyaXR5VXRpbHMg5L+u5pS5YnVnIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJJIHNlZSB0aGF0IHlvdSdyZSBlbmNvdW50ZXJpbmcgYSBjb21waWxhdGlvbiBlcnJvciBpbiB0aGUgYFNjaGVkdWxlQ29udHJvbGxlci5qYXZhYCBmaWxlLiBUaGUgZXJyb3IgaW5kaWNhdGVzIHRoYXQgdGhlIG1ldGhvZCBgZ2V0Q3VycmVudFVzZXJJZCgpYCBjYW5ub3QgYmUgZm91bmQgaW4gdGhlIGBTZWN1cml0eVV0aWxzYCBjbGFzcy4gTGV0IG1lIGhlbHAgeW91IGZpeCB0aGlzIGlzc3VlLlxuXG5GaXJzdCwgbGV0J3MgZXhhbWluZSB0aGUgcmVsZXZhbnQgY29kZSB0byB1bmRlcnN0YW5kIHRoZSBjb250ZXh0IGJldHRlci5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2MWY4MTNjYS02NzgwLTRiYmUtYTViMy0yYWZiZGIxMTM4OWEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTHM5TURFSlljSFlGQWhjWWdIa3ZzUSIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgU2VjdXJpdHlVdGlscyBjbGFzcyBhbmQgc2hvdyBpdHMgbWV0aG9kcywgZXNwZWNpYWxseSBmb2N1c2luZyBvbiBhbnkgbWV0aG9kcyByZWxhdGVkIHRvIGdldHRpbmcgdGhlIGN1cnJlbnQgdXNlciBJRFwifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93LCBsZXQncyBjaGVjayB0aGUgYFNlY3VyaXR5VXRpbHNgIGNsYXNzIHRvIHNlZSB3aGF0IG1ldGhvZHMgYXJlIGF2YWlsYWJsZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvU2NoZWR1bGVDb250cm9sbGVyLmphdmE6XG4gICAgNTBcdFxuICAgIDUxXHQgICAgQEFwaU9wZXJhdGlvbihcIueUqOaIt+aXpeeoi+afpeivoiAtIOaZuuiDveaOkuW6j1wiKVxuICAgIDUyXHQgICAgQEdldE1hcHBpbmcoXCIvdXNlci9zbWFydFNvcnRcIilcbiAgICA1M1x0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxTY2hlZHVsZVZvPj4gdXNlclNtYXJ0U29ydChAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlU2l6ZVwiLCBkZWZhdWx0VmFsdWUgPSBcIjIwXCIpIEludGVnZXIgcGFnZVNpemUsXG4gICAgNTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgNTVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgIDU2XHQgICAgICAgIExvbmcgdXNlcklkID0gU2VjdXJpdHlVdGlscy5nZXRDdXJyZW50VXNlcklkKCk7XG4gICAgNTdcdCAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBzY2hlZHVsZVBhZ2UgPSBzY2hlZHVsZVNlcnZpY2Uuc21hcnRTb3J0VXNlcihwYWdlU2l6ZSwgcGFnZU51bSwgc2VhcmNoS2V5LCB1c2VySWQpO1xuICAgIDU4XHRcbiAgICA1OVx0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MoQ29tbW9uUGFnZS5yZXN0UGFnZShzY2hlZHVsZVBhZ2UpKTtcbiAgICA2MFx0ICAgIH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDE1NlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTR1NWsycnh2ZXlFczdocVYzbU5RRkwifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6Ik5vdywgbGV0J3MgY2hlY2sgdGhlIGBTZWN1cml0eVV0aWxzYCBjbGFzcyB0byBzZWUgd2hhdCBtZXRob2RzIGFyZSBhdmFpbGFibGU6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiODZkZDUzODAtNTFlZS00NmJlLWExODctMmVkZDRmMDRmMDgwIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUNYODN4OER0bnNXTGpSbWo0UXBHa0MiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIFVtc0FkbWluIGNsYXNzIGFuZCBzaG93IGl0cyBmaWVsZHMsIGVzcGVjaWFsbHkgZm9jdXNpbmcgb24gdGhlIElEIGZpZWxkXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgY2hlY2sgdGhlIGBVbXNBZG1pbmAgY2xhc3MgdG8gdW5kZXJzdGFuZCB3aGF0IGZpZWxkcyBpdCBoYXMsIGVzcGVjaWFsbHkgYW55IElELXJlbGF0ZWQgZmllbGRzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL3NlY3VyaXR5L3V0aWwvU2VjdXJpdHlVdGlscy5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsO1xuXG5pbXBvcnQgY29tLmJvb3Qud2ViLmRvbWFpbi5BZG1pblVzZXJEZXRhaWxzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBsb21ib2suZXhwZXJpbWVudGFsLlV0aWxpdHlDbGFzcztcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUuQXV0aGVudGljYXRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLmNvbnRleHQuU2VjdXJpdHlDb250ZXh0SG9sZGVyO1xuXG5AVXRpbGl0eUNsYXNzXG5wdWJsaWMgY2xhc3MgU2VjdXJpdHlVdGlscyB7XG5cbiAgICAvKipcbiAgICAgKiDojrflj5ZBdXRoZW50aWNhdGlvblxuICAgICAqL1xuICAgIHB1YmxpYyBBdXRoZW50aWNhdGlvbiBnZXRBdXRoZW50aWNhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFNlY3VyaXR5Q29udGV4dEhvbGRlci5nZXRDb250ZXh0KCkuZ2V0QXV0aGVudGljYXRpb24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5bnlKjmiLdcbiAgICAgKi9cbiAgICBwdWJsaWMgVW1zQWRtaW4gZ2V0VXNlcihBdXRoZW50aWNhdGlvbiBhdXRoZW50aWNhdGlvbikge1xuICAgICAgICBPYmplY3QgcHJpbmNpcGFsID0gYXV0aGVudGljYXRpb24uZ2V0UHJpbmNpcGFsKCk7XG4gICAgICAgIGlmIChwcmluY2lwYWwgaW5zdGFuY2VvZiBBZG1pblVzZXJEZXRhaWxzKSB7XG4gICAgICAgICAgICBBZG1pblVzZXJEZXRhaWxzIGFkbWluVXNlckRldGFpbHMgPSAgKEFkbWluVXNlckRldGFpbHMpIHByaW5jaXBhbDtcbiAgICAgICAgICAgIHJldHVybiBhZG1pblVzZXJEZXRhaWxzLmdldFVtc0FkbWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W55So5oi3XG4gICAgICovXG4gICAgcHVibGljIFVtc0FkbWluIGdldFVzZXIoKSB7XG4gICAgICAgIEF1dGhlbnRpY2F0aW9uIGF1dGhlbnRpY2F0aW9uID0gZ2V0QXV0aGVudGljYXRpb24oKTtcbiAgICAgICAgaWYgKGF1dGhlbnRpY2F0aW9uID09IG51bGwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBnZXRVc2VyKGF1dGhlbnRpY2F0aW9uKTtcbiAgICB9XG5cbn0uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9zZWN1cml0eS91dGlsL1NwcmluZ1V0aWwuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIuc2VjdXJpdHkudXRpbDtcblxuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuQmVhbnNFeGNlcHRpb247XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jb250ZXh0LkFwcGxpY2F0aW9uQ29udGV4dDtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmNvbnRleHQuQXBwbGljYXRpb25Db250ZXh0QXdhcmU7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLkNvbXBvbmVudDtcblxuLyoqXG4gKiBTcHJpbmflt6XlhbfnsbtcbiAqL1xuQENvbXBvbmVudFxucHVibGljIGNsYXNzIFNwcmluZ1V0aWwgaW1wbGVtZW50cyBBcHBsaWNhdGlvbkNvbnRleHRBd2FyZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBBcHBsaWNhdGlvbkNvbnRleHQgYXBwbGljYXRpb25Db250ZXh0O1xuXG4gICAgLy8g6I635Y+WYXBwbGljYXRpb25Db250ZXh0XG4gICAgcHVibGljIHN0YXRpYyBBcHBsaWNhdGlvbkNvbnRleHQgZ2V0QXBwbGljYXRpb25Db250ZXh0KCkge1xuICAgICAgICByZXR1cm4gYXBwbGljYXRpb25Db250ZXh0O1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIHNldEFwcGxpY2F0aW9uQ29udGV4dChBcHBsaWNhdGlvbkNvbnRleHQgYXBwbGljYXRpb25Db250ZXh0KSB0aHJvd3MgQmVhbnNFeGNlcHRpb24ge1xuICAgICAgICBpZiAoU3ByaW5nVXRpbC5hcHBsaWNhdGlvbkNvbnRleHQgPT0gbnVsbCkge1xuICAgICAgICAgICAgU3ByaW5nVXRpbC5hcHBsaWNhdGlvbkNvbnRleHQgPSBhcHBsaWNhdGlvbkNvbnRleHQ7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDpgJrov4duYW1l6I635Y+WQmVhblxuICAgIHB1YmxpYyBzdGF0aWMgT2JqZWN0IGdldEJlYW4oU3RyaW5nIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIGdldEFwcGxpY2F0aW9uQ29udGV4dCgpLmdldEJlYW4obmFtZSk7XG4gICAgfVxuXG4gICAgLy8g6YCa6L+HY2xhc3Pojrflj5ZCZWFuXG4gICAgcHVibGljIHN0YXRpYyA8VD4gVCBnZXRCZWFuKENsYXNzPFQ+IGNsYXp6KSB7XG4gICAgICAgIHJldHVybiBnZXRBcHBsaWNhdGlvbkNvbnRleHQoKS5nZXRCZWFuKGNsYXp6KTtcbiAgICB9XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9zZWN1cml0eS91dGlsL0p3dFRva2VuVXRpbC5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsO1xuXG5pbXBvcnQgY24uaHV0b29sLmNvcmUuZGF0ZS5EYXRlVXRpbDtcbmltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLlN0clV0aWw7XG5pbXBvcnQgaW8uanNvbndlYnRva2VuLkNsYWltcztcbmltcG9ydCBpby5qc29ud2VidG9rZW4uSnd0cztcbmltcG9ydCBpby5qc29ud2VidG9rZW4uU2lnbmF0dXJlQWxnb3JpdGhtO1xuaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7XG5pbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uVmFsdWU7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLnVzZXJkZXRhaWxzLlVzZXJEZXRhaWxzO1xuXG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7XG5pbXBvcnQgamF2YS51dGlsLk1hcDtcblxuLyoqXG4gKiBKd3RUb2tlbueUn+aIkOeahOW3peWFt+exu1xuICogSldUIHRva2Vu55qE5qC85byP77yaaGVhZGVyLnBheWxvYWQuc2lnbmF0dXJlXG4gKiBoZWFkZXLnmoTmoLzlvI/vvIjnrpfms5XjgIF0b2tlbueahOexu+Wei++8ie+8mlxuICoge1wiYWxnXCI6IFwiSFM1MTJcIixcInR5cFwiOiBcIkpXVFwifVxuICogcGF5bG9hZOeahOagvOW8j++8iOeUqOaIt+WQjeOAgeWIm+W7uuaXtumXtOOAgeeUn+aIkOaXtumXtO+8ie+8mlxuICoge1wic3ViXCI6XCJ3YW5nXCIsXCJjcmVhdGVkXCI6MTQ4OTA3OTk4MTM5MyxcImV4cFwiOjE0ODk2ODQ3ODF9XG4gKiBzaWduYXR1cmXnmoTnlJ/miJDnrpfms5XvvJpcbiAqIEhNQUNTSEE1MTIoYmFzZTY0VXJsRW5jb2RlKGhlYWRlcikgKyBcIi5cIiArYmFzZTY0VXJsRW5jb2RlKHBheWxvYWQpLHNlY3JldClcbiAqL1xucHVibGljIGNsYXNzIEp3dFRva2VuVXRpbCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPR0dFUiA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEp3dFRva2VuVXRpbC5jbGFzcyk7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIENMQUlNX0tFWV9VU0VSTkFNRSA9IFwic3ViXCI7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIENMQUlNX0tFWV9DUkVBVEVEID0gXCJjcmVhdGVkXCI7XG4gICAgQFZhbHVlKFwiJHtqd3Quc2VjcmV0fVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIHNlY3JldDtcbiAgICBAVmFsdWUoXCIke2p3dC5leHBpcmF0aW9ufVwiKVxuICAgIHByaXZhdGUgTG9uZyBleHBpcmF0aW9uO1xuICAgIEBWYWx1ZShcIiR7and0LnRva2VuSGVhZH1cIilcbiAgICBwcml2YXRlIFN0cmluZyB0b2tlbkhlYWQ7XG5cbiAgICAvKipcbiAgICAgKiDmoLnmja7otJ/otKPnlJ/miJBKV1TnmoR0b2tlblxuICAgICAqL1xuICAgIHByaXZhdGUgU3RyaW5nIGdlbmVyYXRlVG9rZW4oTWFwPFN0cmluZywgT2JqZWN0PiBjbGFpbXMpIHtcbiAgICAgICAgcmV0dXJuIEp3dHMuYnVpbGRlcigpXG4gICAgICAgICAgICAgICAgLnNldENsYWltcyhjbGFpbXMpXG4gICAgICAgICAgICAgICAgLnNldEV4cGlyYXRpb24oZ2VuZXJhdGVFeHBpcmF0aW9uRGF0ZSgpKVxuICAgICAgICAgICAgICAgIC5zaWduV2l0aChTaWduYXR1cmVBbGdvcml0aG0uSFM1MTIsIHNlY3JldClcbiAgICAgICAgICAgICAgICAuY29tcGFjdCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOS7jnRva2Vu5Lit6I635Y+WSldU5Lit55qE6LSf6L29XG4gICAgICovXG4gICAgcHJpdmF0ZSBDbGFpbXMgZ2V0Q2xhaW1zRnJvbVRva2VuKFN0cmluZyB0b2tlbikge1xuICAgICAgICBDbGFpbXMgY2xhaW1zID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNsYWltcyA9IEp3dHMucGFyc2VyKClcbiAgICAgICAgICAgICAgICAgICAgLnNldFNpZ25pbmdLZXkoc2VjcmV0KVxuICAgICAgICAgICAgICAgICAgICAucGFyc2VDbGFpbXNKd3ModG9rZW4pXG4gICAgICAgICAgICAgICAgICAgIC5nZXRCb2R5KCk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBMT0dHRVIuaW5mbyhcIkpXVOagvOW8j+mqjOivgeWksei0pTp7fVwiLCB0b2tlbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsYWltcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDnlJ/miJB0b2tlbueahOi/h+acn+aXtumXtFxuICAgICAqL1xuICAgIHByaXZhdGUgRGF0ZSBnZW5lcmF0ZUV4cGlyYXRpb25EYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzKCkgKyBleHBpcmF0aW9uICogMTAwMCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5LuOdG9rZW7kuK3ojrflj5bnmbvlvZXnlKjmiLflkI1cbiAgICAgKi9cbiAgICBwdWJsaWMgU3RyaW5nIGdldFVzZXJOYW1lRnJvbVRva2VuKFN0cmluZyB0b2tlbikge1xuICAgICAgICBTdHJpbmcgdXNlcm5hbWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBDbGFpbXMgY2xhaW1zID0gZ2V0Q2xhaW1zRnJvbVRva2VuKHRva2VuKTtcbiAgICAgICAgICAgIHVzZXJuYW1lID0gY2xhaW1zLmdldFN1YmplY3QoKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIHVzZXJuYW1lID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXNlcm5hbWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6aqM6K+BdG9rZW7mmK/lkKbov5jmnInmlYhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB0b2tlbiAgICAgICDlrqLmiLfnq6/kvKDlhaXnmoR0b2tlblxuICAgICAqIEBwYXJhbSB1c2VyRGV0YWlscyDku47mlbDmja7lupPkuK3mn6Xor6Llh7rmnaXnmoTnlKjmiLfkv6Hmga9cbiAgICAgKi9cbiAgICBwdWJsaWMgYm9vbGVhbiB2YWxpZGF0ZVRva2VuKFN0cmluZyB0b2tlbiwgVXNlckRldGFpbHMgdXNlckRldGFpbHMpIHtcbiAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gZ2V0VXNlck5hbWVGcm9tVG9rZW4odG9rZW4pO1xuICAgICAgICByZXR1cm4gdXNlcm5hbWUuZXF1YWxzKHVzZXJEZXRhaWxzLmdldFVzZXJuYW1lKCkpICYmICFpc1Rva2VuRXhwaXJlZCh0b2tlbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5Yik5patdG9rZW7mmK/lkKblt7Lnu4/lpLHmlYhcbiAgICAgKi9cbiAgICBwcml2YXRlIGJvb2xlYW4gaXNUb2tlbkV4cGlyZWQoU3RyaW5nIHRva2VuKSB7XG4gICAgICAgIERhdGUgZXhwaXJlZERhdGUgPSBnZXRFeHBpcmVkRGF0ZUZyb21Ub2tlbih0b2tlbik7XG4gICAgICAgIHJldHVybiBleHBpcmVkRGF0ZS5iZWZvcmUobmV3IERhdGUoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5LuOdG9rZW7kuK3ojrflj5bov4fmnJ/ml7bpl7RcbiAgICAgKi9cbiAgICBwcml2YXRlIERhdGUgZ2V0RXhwaXJlZERhdGVGcm9tVG9rZW4oU3RyaW5nIHRva2VuKSB7XG4gICAgICAgIENsYWltcyBjbGFpbXMgPSBnZXRDbGFpbXNGcm9tVG9rZW4odG9rZW4pO1xuICAgICAgICByZXR1cm4gY2xhaW1zLmdldEV4cGlyYXRpb24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmoLnmja7nlKjmiLfkv6Hmga/nlJ/miJB0b2tlblxuICAgICAqL1xuICAgIHB1YmxpYyBTdHJpbmcgZ2VuZXJhdGVUb2tlbihVc2VyRGV0YWlscyB1c2VyRGV0YWlscykge1xuICAgICAgICBNYXA8U3RyaW5nLCBPYmplY3Q+IGNsYWltcyA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgICAgICAgY2xhaW1zLnB1dChDTEFJTV9LRVlfVVNFUk5BTUUsIHVzZXJEZXRhaWxzLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICBjbGFpbXMucHV0KENMQUlNX0tFWV9DUkVBVEVELCBuZXcgRGF0ZSgpKTtcbiAgICAgICAgcmV0dXJuIGdlbmVyYXRlVG9rZW4oY2xhaW1zKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlvZPljp/mnaXnmoR0b2tlbuayoei/h+acn+aXtuaYr+WPr+S7peWIt+aWsOeahFxuICAgICAqXG4gICAgICogQHBhcmFtIG9sZFRva2VuIOW4pnRva2VuSGVhZOeahHRva2VuXG4gICAgICovXG4gICAgcHVibGljIFN0cmluZyByZWZyZXNoSGVhZFRva2VuKFN0cmluZyBvbGRUb2tlbikge1xuICAgICAgICBpZihTdHJVdGlsLmlzRW1wdHkob2xkVG9rZW4pKXtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIFN0cmluZyB0b2tlbiA9IG9sZFRva2VuLnN1YnN0cmluZyh0b2tlbkhlYWQubGVuZ3RoKCkpO1xuICAgICAgICBpZihTdHJVdGlsLmlzRW1wdHkodG9rZW4pKXtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIC8vdG9rZW7moKHpqozkuI3pgJrov4dcbiAgICAgICAgQ2xhaW1zIGNsYWltcyA9IGdldENsYWltc0Zyb21Ub2tlbih0b2tlbik7XG4gICAgICAgIGlmKGNsYWltcz09bnVsbCl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvL+WmguaenHRva2Vu5bey57uP6L+H5pyf77yM5LiN5pSv5oyB5Yi35pawXG4gICAgICAgIGlmKGlzVG9rZW5FeHBpcmVkKHRva2VuKSl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvL+WmguaenHRva2Vu5ZyoMzDliIbpkp/kuYvlhoXliJrliLfmlrDov4fvvIzov5Tlm57ljp90b2tlblxuICAgICAgICBpZih0b2tlblJlZnJlc2hKdXN0QmVmb3JlKHRva2VuLDMwKjYwKSl7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgY2xhaW1zLnB1dChDTEFJTV9LRVlfQ1JFQVRFRCwgbmV3IERhdGUoKSk7XG4gICAgICAgICAgICByZXR1cm4gZ2VuZXJhdGVUb2tlbihjbGFpbXMpO1xuICAgICAgICB9XG4gICAgfVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvY29uZmlnL01hbGxTZWN1cml0eUNvbmZpZy5qYXZhXG4uLi5cblxuLyoqXG4gKiBtYWxsLXNlY3VyaXR55qih5Z2X55u45YWz6YWN572uXG4gKiDoh6rlrprkuYnphY3nva7vvIznlKjkuo7phY3nva7lpoLkvZXojrflj5bnlKjmiLfkv6Hmga/lj4rliqjmgIHmnYPpmZBcbiAqL1xuQENvbmZpZ3VyYXRpb25cbnB1YmxpYyBjbGFzcyBNYWxsU2VjdXJpdHlDb25maWcge1xuXG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVW1zQWRtaW5TZXJ2aWNlIGFkbWluU2VydmljZTtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBVbXNSZXNvdXJjZVNlcnZpY2UgcmVzb3VyY2VTZXJ2aWNlO1xuXG4gICAgQEJlYW5cbiAgICBwdWJsaWMgVXNlckRldGFpbHNTZXJ2aWNlIHVzZXJEZXRhaWxzU2VydmljZSgpIHtcbiAgICAgICAgLy/ojrflj5bnmbvlvZXnlKjmiLfkv6Hmga9cbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lIC0+IGFkbWluU2VydmljZS5sb2FkVXNlckJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL3NlY3VyaXR5L2NvbXBvbmVudC9Kd3RBdXRoZW50aWNhdGlvblRva2VuRmlsdGVyLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLnNlY3VyaXR5LmNvbXBvbmVudDtcblxuaW1wb3J0IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLkp3dFRva2VuVXRpbDtcbmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5WYWx1ZTtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmF1dGhlbnRpY2F0aW9uLlVzZXJuYW1lUGFzc3dvcmRBdXRoZW50aWNhdGlvblRva2VuO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS5jb250ZXh0LlNlY3VyaXR5Q29udGV4dEhvbGRlcjtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUudXNlcmRldGFpbHMuVXNlckRldGFpbHM7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLnVzZXJkZXRhaWxzLlVzZXJEZXRhaWxzU2VydmljZTtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LndlYi5hdXRoZW50aWNhdGlvbi5XZWJBdXRoZW50aWNhdGlvbkRldGFpbHNTb3VyY2U7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay53ZWIuZmlsdGVyLk9uY2VQZXJSZXF1ZXN0RmlsdGVyO1xuXG5pbXBvcnQgamF2YXguc2VydmxldC5GaWx0ZXJDaGFpbjtcbmltcG9ydCBqYXZheC5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247XG5pbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDtcbmltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTtcbmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uO1xuXG4vKipcbiAqIEpXVOeZu+W9leaOiOadg+i/h+a7pOWZqFxuICovXG5wdWJsaWMgY2xhc3MgSnd0QXV0aGVudGljYXRpb25Ub2tlbkZpbHRlciBleHRlbmRzIE9uY2VQZXJSZXF1ZXN0RmlsdGVyIHtcbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBMb2dnZXIgTE9HR0VSID0gTG9nZ2VyRmFjdG9yeS5nZXRMb2dnZXIoSnd0QXV0aGVudGljYXRpb25Ub2tlbkZpbHRlci5jbGFzcyk7XG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVXNlckRldGFpbHNTZXJ2aWNlIHVzZXJEZXRhaWxzU2VydmljZTtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBKd3RUb2tlblV0aWwgand0VG9rZW5VdGlsO1xuICAgIEBWYWx1ZShcIiR7and0LnRva2VuSGVhZGVyfVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIHRva2VuSGVhZGVyO1xuICAgIEBWYWx1ZShcIiR7and0LnRva2VuSGVhZH1cIilcbiAgICBwcml2YXRlIFN0cmluZyB0b2tlbkhlYWQ7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwcm90ZWN0ZWQgdm9pZCBkb0ZpbHRlckludGVybmFsKEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZpbHRlckNoYWluIGNoYWluKSB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24ge1xuICAgICAgICBTdHJpbmcgYXV0aEhlYWRlciA9IHJlcXVlc3QuZ2V0SGVhZGVyKHRoaXMudG9rZW5IZWFkZXIpO1xuICAgICAgICBpZiAoYXV0aEhlYWRlciAhPSBudWxsICYmIGF1dGhIZWFkZXIuc3RhcnRzV2l0aCh0aGlzLnRva2VuSGVhZCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBhdXRoVG9rZW4gPSBhdXRoSGVhZGVyLnN1YnN0cmluZyh0aGlzLnRva2VuSGVhZC5sZW5ndGgoKSk7Ly8gVGhlIHBhcnQgYWZ0ZXIgXCJCZWFyZXIgXCJcbiAgICAgICAgICAgIFN0cmluZyB1c2VybmFtZSA9IGp3dFRva2VuVXRpbC5nZXRVc2VyTmFtZUZyb21Ub2tlbihhdXRoVG9rZW4pO1xuICAgICAgICAgICAgTE9HR0VSLmluZm8oXCJjaGVja2luZyB1c2VybmFtZTp7fVwiLCB1c2VybmFtZSk7XG4gICAgICAgICAgICBpZiAodXNlcm5hbWUgIT0gbnVsbCAmJiBTZWN1cml0eUNvbnRleHRIb2xkZXIuZ2V0Q29udGV4dCgpLmdldEF1dGhlbnRpY2F0aW9uKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFVzZXJEZXRhaWxzIHVzZXJEZXRhaWxzID0gdGhpcy51c2VyRGV0YWlsc1NlcnZpY2UubG9hZFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoand0VG9rZW5VdGlsLnZhbGlkYXRlVG9rZW4oYXV0aFRva2VuLCB1c2VyRGV0YWlscykpIHtcbiAgICAgICAgICAgICAgICAgICAgVXNlcm5hbWVQYXNzd29yZEF1dGhlbnRpY2F0aW9uVG9rZW4gYXV0aGVudGljYXRpb24gPSBuZXcgVXNlcm5hbWVQYXNzd29yZEF1dGhlbnRpY2F0aW9uVG9rZW4odXNlckRldGFpbHMsIG51bGwsIHVzZXJEZXRhaWxzLmdldEF1dGhvcml0aWVzKCkpO1xuICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvbi5zZXREZXRhaWxzKG5ldyBXZWJBdXRoZW50aWNhdGlvbkRldGFpbHNTb3VyY2UoKS5idWlsZERldGFpbHMocmVxdWVzdCkpO1xuICAgICAgICAgICAgICAgICAgICBMT0dHRVIuaW5mbyhcImF1dGhlbnRpY2F0ZWQgdXNlcjp7fVwiLCB1c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIFNlY3VyaXR5Q29udGV4dEhvbGRlci5nZXRDb250ZXh0KCkuc2V0QXV0aGVudGljYXRpb24oYXV0aGVudGljYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjaGFpbi5kb0ZpbHRlcihyZXF1ZXN0LCByZXNwb25zZSk7XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvc2VjdXJpdHkvY29uZmlnL1NlY3VyaXR5Q29uZmlnLmphdmFcbi4uLlxuXG4gICAgQEJlYW5cbiAgICBTZWN1cml0eUZpbHRlckNoYWluIGZpbHRlckNoYWluKEh0dHBTZWN1cml0eSBodHRwU2VjdXJpdHkpIHRocm93cyBFeGNlcHRpb24ge1xuICAgICAgICBFeHByZXNzaW9uVXJsQXV0aG9yaXphdGlvbkNvbmZpZ3VyZXI8SHR0cFNlY3VyaXR5Pi5FeHByZXNzaW9uSW50ZXJjZXB0VXJsUmVnaXN0cnkgcmVnaXN0cnkgPSBodHRwU2VjdXJpdHlcbiAgICAgICAgICAgICAgICAuYXV0aG9yaXplUmVxdWVzdHMoKTtcbiAgICAgICAgLy/kuI3pnIDopoHkv53miqTnmoTotYTmupDot6/lvoTlhYHorrjorr/pl65cbiAgICAgICAgZm9yIChTdHJpbmcgdXJsIDogaWdub3JlVXJsc0NvbmZpZy5nZXRVcmxzKCkpIHtcbiAgICAgICAgICAgIHJlZ2lzdHJ5LmFudE1hdGNoZXJzKHVybCkucGVybWl0QWxsKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy/lhYHorrjot6jln5/or7fmsYLnmoRPUFRJT05T6K+35rGCXG4gICAgICAgIHJlZ2lzdHJ5LmFudE1hdGNoZXJzKEh0dHBNZXRob2QuT1BUSU9OUylcbiAgICAgICAgICAgICAgICAucGVybWl0QWxsKCk7XG4gICAgICAgIC8vIOS7u+S9leivt+axgumcgOimgei6q+S7veiupOivgVxuICAgICAgICByZWdpc3RyeS5hbmQoKVxuICAgICAgICAgICAgICAgIC5hdXRob3JpemVSZXF1ZXN0cygpXG4gICAgICAgICAgICAgICAgLmFueVJlcXVlc3QoKVxuICAgICAgICAgICAgICAgIC5hdXRoZW50aWNhdGVkKClcbiAgICAgICAgICAgICAgICAvLyDlhbPpl63ot6jnq5nor7fmsYLpmLLmiqTlj4rkuI3kvb/nlKhzZXNzaW9uXG4gICAgICAgICAgICAgICAgLmFuZCgpXG4gICAgICAgICAgICAgICAgLmNzcmYoKVxuICAgICAgICAgICAgICAgIC5kaXNhYmxlKClcbiAgICAgICAgICAgICAgICAuc2Vzc2lvbk1hbmFnZW1lbnQoKVxuICAgICAgICAgICAgICAgIC5zZXNzaW9uQ3JlYXRpb25Qb2xpY3koU2Vzc2lvbkNyZWF0aW9uUG9saWN5LlNUQVRFTEVTUylcbiAgICAgICAgICAgICAgICAvLyDoh6rlrprkuYnmnYPpmZDmi5Lnu53lpITnkIbnsbtcbiAgICAgICAgICAgICAgICAuYW5kKClcbiAgICAgICAgICAgICAgICAuZXhjZXB0aW9uSGFuZGxpbmcoKVxuICAgICAgICAgICAgICAgIC5hY2Nlc3NEZW5pZWRIYW5kbGVyKHJlc3RmdWxBY2Nlc3NEZW5pZWRIYW5kbGVyKVxuICAgICAgICAgICAgICAgIC5hdXRoZW50aWNhdGlvbkVudHJ5UG9pbnQocmVzdEF1dGhlbnRpY2F0aW9uRW50cnlQb2ludClcbiAgICAgICAgICAgICAgICAvLyDoh6rlrprkuYnmnYPpmZDmi6bmiKrlmahKV1Tov4fmu6TlmahcbiAgICAgICAgICAgICAgICAuYW5kKClcbiAgICAgICAgICAgICAgICAuYWRkRmlsdGVyQmVmb3JlKGp3dEF1dGhlbnRpY2F0aW9uVG9rZW5GaWx0ZXIsIFVzZXJuYW1lUGFzc3dvcmRBdXRoZW50aWNhdGlvbkZpbHRlci5jbGFzcyk7XG4gICAgICAgIC8v5pyJ5Yqo5oCB5p2D6ZmQ6YWN572u5pe25re75Yqg5Yqo5oCB5p2D6ZmQ5qCh6aqM6L+H5ruk5ZmoXG4gICAgICAgIGlmKGR5bmFtaWNTZWN1cml0eVNlcnZpY2UhPW51bGwpe1xuICAgICAgICAgICAgcmVnaXN0cnkuYW5kKCkuYWRkRmlsdGVyQmVmb3JlKGR5bmFtaWNTZWN1cml0eUZpbHRlciwgRmlsdGVyU2VjdXJpdHlJbnRlcmNlcHRvci5jbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0dHBTZWN1cml0eS5idWlsZCgpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogd2ViL3NyYy91dGlscy9hdXRoLmpzXG5pbXBvcnQgQ29va2llcyBmcm9tICdqcy1jb29raWUnXG5cbmNvbnN0IFRva2VuS2V5ID0gJ2xvZ2luVG9rZW4nXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUb2tlbigpIHtcbiAgcmV0dXJuIENvb2tpZXMuZ2V0KFRva2VuS2V5KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0VG9rZW4odG9rZW4pIHtcbiAgcmV0dXJuIENvb2tpZXMuc2V0KFRva2VuS2V5LCB0b2tlbilcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVRva2VuKCkge1xuICByZXR1cm4gQ29va2llcy5yZW1vdmUoVG9rZW5LZXkpXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9zZWN1cml0eS9jb25maWcvQ29tbW9uU2VjdXJpdHlDb25maWcuamF2YVxuLi4uXG5cbi8qKlxuICogU3ByaW5nU2VjdXJpdHnpgJrnlKjphY3nva5cbiAqIOWMheaLrOmAmueUqEJlYW7jgIFTZWN1cml0eemAmueUqEJlYW7lj4rliqjmgIHmnYPpmZDpgJrnlKhCZWFuXG4gKi9cbkBDb25maWd1cmF0aW9uXG5wdWJsaWMgY2xhc3MgQ29tbW9uU2VjdXJpdHlDb25maWcge1xuXG4gICAgQEJlYW5cbiAgICBwdWJsaWMgUGFzc3dvcmRFbmNvZGVyIHBhc3N3b3JkRW5jb2RlcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCQ3J5cHRQYXNzd29yZEVuY29kZXIoKTtcbiAgICB9XG5cbiAgICBAQmVhblxuICAgIHB1YmxpYyBJZ25vcmVVcmxzQ29uZmlnIGlnbm9yZVVybHNDb25maWcoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSWdub3JlVXJsc0NvbmZpZygpO1xuICAgIH1cblxuICAgIEBCZWFuXG4gICAgcHVibGljIEp3dFRva2VuVXRpbCBqd3RUb2tlblV0aWwoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSnd0VG9rZW5VdGlsKCk7XG4gICAgfVxuXG4gICAgQEJlYW5cbiAgICBwdWJsaWMgUmVzdGZ1bEFjY2Vzc0RlbmllZEhhbmRsZXIgcmVzdGZ1bEFjY2Vzc0RlbmllZEhhbmRsZXIoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzdGZ1bEFjY2Vzc0RlbmllZEhhbmRsZXIoKTtcbiAgICB9XG5cbiAgICBAQmVhblxuICAgIHB1YmxpYyBSZXN0QXV0aGVudGljYXRpb25FbnRyeVBvaW50IHJlc3RBdXRoZW50aWNhdGlvbkVudHJ5UG9pbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzdEF1dGhlbnRpY2F0aW9uRW50cnlQb2ludCgpO1xuICAgIH1cblxuICAgIEBCZWFuXG4gICAgcHVibGljIEp3dEF1dGhlbnRpY2F0aW9uVG9rZW5GaWx0ZXIgand0QXV0aGVudGljYXRpb25Ub2tlbkZpbHRlcigpe1xuICAgICAgICByZXR1cm4gbmV3IEp3dEF1dGhlbnRpY2F0aW9uVG9rZW5GaWx0ZXIoKTtcbiAgICB9XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9zZWN1cml0eS9jb21wb25lbnQvRHluYW1pY1NlY3VyaXR5TWV0YWRhdGFTb3VyY2UuamF2YVxuLi4uXG5cbi8qKlxuICog5Yqo5oCB5p2D6ZmQ5pWw5o2u5rqQ77yM55So5LqO6I635Y+W5Yqo5oCB5p2D6ZmQ6KeE5YiZXG4gKi9cbnB1YmxpYyBjbGFzcyBEeW5hbWljU2VjdXJpdHlNZXRhZGF0YVNvdXJjZSBpbXBsZW1lbnRzIEZpbHRlckludm9jYXRpb25TZWN1cml0eU1ldGFkYXRhU291cmNlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIE1hcDxTdHJpbmcsIENvbmZpZ0F0dHJpYnV0ZT4gY29uZmlnQXR0cmlidXRlTWFwID0gbnVsbDtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBEeW5hbWljU2VjdXJpdHlTZXJ2aWNlIGR5bmFtaWNTZWN1cml0eVNlcnZpY2U7XG5cbiAgICBAUG9zdENvbnN0cnVjdFxuICAgIHB1YmxpYyB2b2lkIGxvYWREYXRhU291cmNlKCkge1xuICAgICAgICBjb25maWdBdHRyaWJ1dGVNYXAgPSBkeW5hbWljU2VjdXJpdHlTZXJ2aWNlLmxvYWREYXRhU291cmNlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHZvaWQgY2xlYXJEYXRhU291cmNlKCkge1xuICAgICAgICBjb25maWdBdHRyaWJ1dGVNYXAuY2xlYXIoKTtcbiAgICAgICAgY29uZmlnQXR0cmlidXRlTWFwID0gbnVsbDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ29sbGVjdGlvbjxDb25maWdBdHRyaWJ1dGU+IGdldEF0dHJpYnV0ZXMoT2JqZWN0IG8pIHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24ge1xuICAgICAgICBpZiAoY29uZmlnQXR0cmlidXRlTWFwID09IG51bGwpIHRoaXMubG9hZERhdGFTb3VyY2UoKTtcbiAgICAgICAgTGlzdDxDb25maWdBdHRyaWJ1dGU+ICBjb25maWdBdHRyaWJ1dGVzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIC8v6I635Y+W5b2T5YmN6K6/6Zeu55qE6Lev5b6EXG4gICAgICAgIFN0cmluZyB1cmwgPSAoKEZpbHRlckludm9jYXRpb24pIG8pLmdldFJlcXVlc3RVcmwoKTtcbiAgICAgICAgU3RyaW5nIHBhdGggPSBVUkxVdGlsLmdldFBhdGgodXJsKTtcbiAgICAgICAgUGF0aE1hdGNoZXIgcGF0aE1hdGNoZXIgPSBuZXcgQW50UGF0aE1hdGNoZXIoKTtcbiAgICAgICAgSXRlcmF0b3I8U3RyaW5nPiBpdGVyYXRvciA9IGNvbmZpZ0F0dHJpYnV0ZU1hcC5rZXlTZXQoKS5pdGVyYXRvcigpO1xuICAgICAgICAvL+iOt+WPluiuv+mXruivpei3r+W+hOaJgOmcgOi1hOa6kFxuICAgICAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XG4gICAgICAgICAgICBTdHJpbmcgcGF0dGVybiA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIGlmIChwYXRoTWF0Y2hlci5tYXRjaChwYXR0ZXJuLCBwYXRoKSkge1xuICAgICAgICAgICAgICAgIGNvbmZpZ0F0dHJpYnV0ZXMuYWRkKGNvbmZpZ0F0dHJpYnV0ZU1hcC5nZXQocGF0dGVybikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIOacquiuvue9ruaTjeS9nOivt+axguadg+mZkO+8jOi/lOWbnuepuumbhuWQiFxuICAgICAgICByZXR1cm4gY29uZmlnQXR0cmlidXRlcztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ29sbGVjdGlvbjxDb25maWdBdHRyaWJ1dGU+IGdldEFsbENvbmZpZ0F0dHJpYnV0ZXMoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL3NlY3VyaXR5L2NvbXBvbmVudC9EeW5hbWljQWNjZXNzRGVjaXNpb25NYW5hZ2VyLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZGVjaWRlKEF1dGhlbnRpY2F0aW9uIGF1dGhlbnRpY2F0aW9uLCBPYmplY3Qgb2JqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICBDb2xsZWN0aW9uPENvbmZpZ0F0dHJpYnV0ZT4gY29uZmlnQXR0cmlidXRlcykgdGhyb3dzIEFjY2Vzc0RlbmllZEV4Y2VwdGlvbiwgSW5zdWZmaWNpZW50QXV0aGVudGljYXRpb25FeGNlcHRpb24ge1xuICAgICAgICAvLyDlvZPmjqXlj6PmnKrooqvphY3nva7otYTmupDml7bnm7TmjqXmlL7ooYxcbiAgICAgICAgaWYgKENvbGxVdGlsLmlzRW1wdHkoY29uZmlnQXR0cmlidXRlcykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBJdGVyYXRvcjxDb25maWdBdHRyaWJ1dGU+IGl0ZXJhdG9yID0gY29uZmlnQXR0cmlidXRlcy5pdGVyYXRvcigpO1xuICAgICAgICB3aGlsZSAoaXRlcmF0b3IuaGFzTmV4dCgpKSB7XG4gICAgICAgICAgICBDb25maWdBdHRyaWJ1dGUgY29uZmlnQXR0cmlidXRlID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgLy/lsIborr/pl67miYDpnIDotYTmupDmiJbnlKjmiLfmi6XmnInotYTmupDov5vooYzmr5Tlr7lcbiAgICAgICAgICAgIFN0cmluZyBuZWVkQXV0aG9yaXR5ID0gY29uZmlnQXR0cmlidXRlLmdldEF0dHJpYnV0ZSgpO1xuICAgICAgICAgICAgZm9yIChHcmFudGVkQXV0aG9yaXR5IGdyYW50ZWRBdXRob3JpdHkgOiBhdXRoZW50aWNhdGlvbi5nZXRBdXRob3JpdGllcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5lZWRBdXRob3JpdHkudHJpbSgpLmVxdWFscyhncmFudGVkQXV0aG9yaXR5LmdldEF1dGhvcml0eSgpKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBBY2Nlc3NEZW5pZWRFeGNlcHRpb24oXCLmirHmrYnvvIzmgqjmsqHmnInorr/pl67mnYPpmZBcIik7XG4gICAgfVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvc2VjdXJpdHkvY29tcG9uZW50L0R5bmFtaWNTZWN1cml0eUZpbHRlci5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRvRmlsdGVyKFNlcnZsZXRSZXF1ZXN0IHNlcnZsZXRSZXF1ZXN0LCBTZXJ2bGV0UmVzcG9uc2Ugc2VydmxldFJlc3BvbnNlLCBGaWx0ZXJDaGFpbiBmaWx0ZXJDaGFpbikgdGhyb3dzIElPRXhjZXB0aW9uLCBTZXJ2bGV0RXhjZXB0aW9uIHtcbiAgICAgICAgSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QgPSAoSHR0cFNlcnZsZXRSZXF1ZXN0KSBzZXJ2bGV0UmVxdWVzdDtcbiAgICAgICAgRmlsdGVySW52b2NhdGlvbiBmaSA9IG5ldyBGaWx0ZXJJbnZvY2F0aW9uKHNlcnZsZXRSZXF1ZXN0LCBzZXJ2bGV0UmVzcG9uc2UsIGZpbHRlckNoYWluKTtcbiAgICAgICAgLy9PUFRJT05T6K+35rGC55u05o6l5pS+6KGMXG4gICAgICAgIGlmKHJlcXVlc3QuZ2V0TWV0aG9kKCkuZXF1YWxzKEh0dHBNZXRob2QuT1BUSU9OUy50b1N0cmluZygpKSl7XG4gICAgICAgICAgICBmaS5nZXRDaGFpbigpLmRvRmlsdGVyKGZpLmdldFJlcXVlc3QoKSwgZmkuZ2V0UmVzcG9uc2UoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy/nmb3lkI3ljZXor7fmsYLnm7TmjqXmlL7ooYxcbiAgICAgICAgUGF0aE1hdGNoZXIgcGF0aE1hdGNoZXIgPSBuZXcgQW50UGF0aE1hdGNoZXIoKTtcbiAgICAgICAgZm9yIChTdHJpbmcgcGF0aCA6IGlnbm9yZVVybHNDb25maWcuZ2V0VXJscygpKSB7XG4gICAgICAgICAgICBpZihwYXRoTWF0Y2hlci5tYXRjaChwYXRoLHJlcXVlc3QuZ2V0UmVxdWVzdFVSSSgpKSl7XG4gICAgICAgICAgICAgICAgZmkuZ2V0Q2hhaW4oKS5kb0ZpbHRlcihmaS5nZXRSZXF1ZXN0KCksIGZpLmdldFJlc3BvbnNlKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvL+atpOWkhOS8muiwg+eUqEFjY2Vzc0RlY2lzaW9uTWFuYWdlcuS4reeahGRlY2lkZeaWueazlei/m+ihjOmJtOadg+aTjeS9nFxuICAgICAgICBJbnRlcmNlcHRvclN0YXR1c1Rva2VuIHRva2VuID0gc3VwZXIuYmVmb3JlSW52b2NhdGlvbihmaSk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaS5nZXRDaGFpbigpLmRvRmlsdGVyKGZpLmdldFJlcXVlc3QoKSwgZmkuZ2V0UmVzcG9uc2UoKSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICBzdXBlci5hZnRlckludm9jYXRpb24odG9rZW4sIG51bGwpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZGVzdHJveSgpIHtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgQ2xhc3M8Pz4gZ2V0U2VjdXJlT2JqZWN0Q2xhc3MoKSB7XG4gICAgICAgIHJldHVybiBGaWx0ZXJJbnZvY2F0aW9uLmNsYXNzO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBTZWN1cml0eU1ldGFkYXRhU291cmNlIG9idGFpblNlY3VyaXR5TWV0YWRhdGFTb3VyY2UoKSB7XG4gICAgICAgIHJldHVybiBkeW5hbWljU2VjdXJpdHlNZXRhZGF0YVNvdXJjZTtcbiAgICB9XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL3NlcnZpY2UvaW1wbC9VbXNBZG1pblNlcnZpY2VJbXBsLmphdmFcbi4uLlxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tYXBwZXIuVW1zUmVzb3VyY2VNYXBwZXI7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1hcHBlci5VbXNSb2xlTWFwcGVyO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC4qO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5zZXJ2aWNlLlVtc0FkbWluQ2FjaGVTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5zZXJ2aWNlLlVtc0FkbWluUm9sZVJlbGF0aW9uU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuc2VydmljZS5VbXNBZG1pblNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLnNlcnZpY2UuVW1zUm9sZVNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLnNlY3VyaXR5LnV0aWwuSnd0VG9rZW5VdGlsO1xuaW1wb3J0IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLlNwcmluZ1V0aWw7XG5pbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjtcbmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLkJlYW5VdGlscztcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jb250ZXh0LmFubm90YXRpb24uTGF6eTtcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFN0cmluZyBsb2dpbihTdHJpbmcgdXNlcm5hbWUsIFN0cmluZyBwYXNzd29yZCkge1xuICAgICAgICBTdHJpbmcgdG9rZW4gPSBudWxsO1xuICAgICAgICAvL+WvhueggemcgOimgeWuouaIt+err+WKoOWvhuWQjuS8oOmAklxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgVXNlckRldGFpbHMgdXNlckRldGFpbHMgPSBsb2FkVXNlckJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgaWYoIXBhc3N3b3JkRW5jb2Rlci5tYXRjaGVzKHBhc3N3b3JkLHVzZXJEZXRhaWxzLmdldFBhc3N3b3JkKCkpKXtcbiAgICAgICAgICAgICAgICBBc3NlcnRzLmZhaWwoXCLlr4bnoIHkuI3mraPnoa5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZighdXNlckRldGFpbHMuaXNFbmFibGVkKCkpe1xuICAgICAgICAgICAgICAgIEFzc2VydHMuZmFpbChcIuW4kOWPt+W3suiiq+emgeeUqCzor7fkuI7kurrlipvnrqHnkIblkZjmiJbnu4/nkIbov5vooYzljY/llYbvvIFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBVc2VybmFtZVBhc3N3b3JkQXV0aGVudGljYXRpb25Ub2tlbiBhdXRoZW50aWNhdGlvbiA9IG5ldyBVc2VybmFtZVBhc3N3b3JkQXV0aGVudGljYXRpb25Ub2tlbih1c2VyRGV0YWlscywgbnVsbCwgdXNlckRldGFpbHMuZ2V0QXV0aG9yaXRpZXMoKSk7XG4gICAgICAgICAgICBTZWN1cml0eUNvbnRleHRIb2xkZXIuZ2V0Q29udGV4dCgpLnNldEF1dGhlbnRpY2F0aW9uKGF1dGhlbnRpY2F0aW9uKTtcbiAgICAgICAgICAgIHRva2VuID0gand0VG9rZW5VdGlsLmdlbmVyYXRlVG9rZW4odXNlckRldGFpbHMpO1xuICAgICAgICAgICAgdXBkYXRlTG9naW5UaW1lQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICBpbnNlcnRMb2dpbkxvZyh1c2VybmFtZSk7XG4gICAgICAgIH0gY2F0Y2ggKEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIExPR0dFUi53YXJuKFwi55m75b2V5byC5bi4Ont9XCIsIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG9rZW47XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgVXNlckRldGFpbHMgbG9hZFVzZXJCeVVzZXJuYW1lKFN0cmluZyB1c2VybmFtZSl7XG4gICAgICAgIC8v6I635Y+W55So5oi35L+h5oGvXG4gICAgICAgIFVtc0FkbWluIGFkbWluID0gZ2V0QWRtaW5CeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgaWYgKGFkbWluICE9IG51bGwpIHtcbiAgICAgICAgICAgIExpc3Q8VW1zUmVzb3VyY2U+IHJlc291cmNlTGlzdCA9IGdldFJlc291cmNlTGlzdChhZG1pbi5nZXRJZCgpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWRtaW5Vc2VyRGV0YWlscyhhZG1pbixyZXNvdXJjZUxpc3QpO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBVc2VybmFtZU5vdEZvdW5kRXhjZXB0aW9uKFwi55So5oi35ZCN5oiW5a+G56CB6ZSZ6K+vXCIpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBVbXNBZG1pbkNhY2hlU2VydmljZSBnZXRDYWNoZVNlcnZpY2UoKSB7XG4gICAgICAgIHJldHVybiBTcHJpbmdVdGlsLmdldEJlYW4oVW1zQWRtaW5DYWNoZVNlcnZpY2UuY2xhc3MpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogd2ViL3NyYy91dGlscy9zdXBwb3J0LmpzXG5pbXBvcnQgQ29va2llcyBmcm9tIFwianMtY29va2llXCI7XG5jb25zdCBTdXBwb3J0S2V5PSdzdXBwb3J0S2V5JztcbmV4cG9ydCBmdW5jdGlvbiBnZXRTdXBwb3J0KCkge1xuICByZXR1cm4gQ29va2llcy5nZXQoU3VwcG9ydEtleSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFN1cHBvcnQoaXNTdXBwb3J0KSB7XG4gIHJldHVybiBDb29raWVzLnNldChTdXBwb3J0S2V5LCBpc1N1cHBvcnQseyBleHBpcmVzOiAzIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRDb29raWUoa2V5LHZhbHVlLGV4cGlyZXMpIHtcbiAgcmV0dXJuIENvb2tpZXMuc2V0KGtleSwgdmFsdWUseyBleHBpcmVzOiBleHBpcmVzfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvb2tpZShrZXkpIHtcbiAgcmV0dXJuIENvb2tpZXMuZ2V0KGtleSlcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL2RvbWFpbi9BZG1pblVzZXJEZXRhaWxzLmphdmFcbi4uLlxuXG4vKipcbiAqIFNwcmluZ1NlY3VyaXR56ZyA6KaB55qE55So5oi36K+m5oOFXG4gKi9cbnB1YmxpYyBjbGFzcyBBZG1pblVzZXJEZXRhaWxzIGltcGxlbWVudHMgVXNlckRldGFpbHMge1xuXG4gICAgQEdldHRlclxuICAgIHByaXZhdGUgVW1zQWRtaW4gdW1zQWRtaW47XG4gICAgcHJpdmF0ZSBMaXN0PFVtc1Jlc291cmNlPiByZXNvdXJjZUxpc3Q7XG4gICAgcHVibGljIEFkbWluVXNlckRldGFpbHMoVW1zQWRtaW4gdW1zQWRtaW4sIExpc3Q8VW1zUmVzb3UuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTHM5TURFSlljSFlGQWhjWWdIa3ZzUSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIHRoZSBgVW1zQWRtaW5gIGNsYXNzIHRvIHVuZGVyc3RhbmQgd2hhdCBmaWVsZHMgaXQgaGFzLCBlc3BlY2lhbGx5IGFueSBJRC1yZWxhdGVkIGZpZWxkczpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIwZjBiM2U0Ni0yZGU1LTQ4MjItOTI4NS1jZjgwZmFiMDA4MjciLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVWl6bVg2Y2tpWjN5TkNQblNpamNKdiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL3NlY3VyaXR5L3V0aWwvU2VjdXJpdHlVdGlscy5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcInBhY2thZ2UgY29tLmJvb3Qud2ViLnNlY3VyaXR5LnV0aWw7XFxuXFxuaW1wb3J0IGNvbS5ib290LndlYi5kb21haW4uQWRtaW5Vc2VyRGV0YWlscztcXG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1vZGVsLlVtc0FkbWluO1xcbmltcG9ydCBsb21ib2suZXhwZXJpbWVudGFsLlV0aWxpdHlDbGFzcztcXG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLkF1dGhlbnRpY2F0aW9uO1xcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUuY29udGV4dC5TZWN1cml0eUNvbnRleHRIb2xkZXI7XFxuXFxuQFV0aWxpdHlDbGFzc1xcbnB1YmxpYyBjbGFzcyBTZWN1cml0eVV0aWxzIHtcXG5cXG4gICAgLyoqXFxuICAgICAqIFxcdTgzYjdcXHU1M2Q2QXV0aGVudGljYXRpb25cXG4gICAgICovXFxuICAgIHB1YmxpYyBBdXRoZW50aWNhdGlvbiBnZXRBdXRoZW50aWNhdGlvbigpIHtcXG4gICAgICAgIHJldHVybiBTZWN1cml0eUNvbnRleHRIb2xkZXIuZ2V0Q29udGV4dCgpLmdldEF1dGhlbnRpY2F0aW9uKCk7XFxuICAgIH1cXG5cXG4gICAgLyoqXFxuICAgICAqIFxcdTgzYjdcXHU1M2Q2XFx1NzUyOFxcdTYyMzdcXG4gICAgICovXFxuICAgIHB1YmxpYyBVbXNBZG1pbiBnZXRVc2VyKEF1dGhlbnRpY2F0aW9uIGF1dGhlbnRpY2F0aW9uKSB7XFxuICAgICAgICBPYmplY3QgcHJpbmNpcGFsID0gYXV0aGVudGljYXRpb24uZ2V0UHJpbmNpcGFsKCk7XFxuICAgICAgICBpZiAocHJpbmNpcGFsIGluc3RhbmNlb2YgQWRtaW5Vc2VyRGV0YWlscykge1xcbiAgICAgICAgICAgIEFkbWluVXNlckRldGFpbHMgYWRtaW5Vc2VyRGV0YWlscyA9ICAoQWRtaW5Vc2VyRGV0YWlscykgcHJpbmNpcGFsO1xcbiAgICAgICAgICAgIHJldHVybiBhZG1pblVzZXJEZXRhaWxzLmdldFVtc0FkbWluKCk7XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcblxcbiAgICAvKipcXG4gICAgICogXFx1ODNiN1xcdTUzZDZcXHU3NTI4XFx1NjIzN1xcbiAgICAgKi9cXG4gICAgcHVibGljIFVtc0FkbWluIGdldFVzZXIoKSB7XFxuICAgICAgICBBdXRoZW50aWNhdGlvbiBhdXRoZW50aWNhdGlvbiA9IGdldEF1dGhlbnRpY2F0aW9uKCk7XFxuICAgICAgICBpZiAoYXV0aGVudGljYXRpb24gPT0gbnVsbCkge1xcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIGdldFVzZXIoYXV0aGVudGljYXRpb24pO1xcbiAgICB9XFxuXFxufVwiLCBcIm5ld19zdHJcIjogXCJwYWNrYWdlIGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsO1xcblxcbmltcG9ydCBjb20uYm9vdC53ZWIuZG9tYWluLkFkbWluVXNlckRldGFpbHM7XFxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcXG5pbXBvcnQgbG9tYm9rLmV4cGVyaW1lbnRhbC5VdGlsaXR5Q2xhc3M7XFxuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS5BdXRoZW50aWNhdGlvbjtcXG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLmNvbnRleHQuU2VjdXJpdHlDb250ZXh0SG9sZGVyO1xcblxcbkBVdGlsaXR5Q2xhc3NcXG5wdWJsaWMgY2xhc3MgU2VjdXJpdHlVdGlscyB7XFxuXFxuICAgIC8qKlxcbiAgICAgKiBcXHU4M2I3XFx1NTNkNkF1dGhlbnRpY2F0aW9uXFxuICAgICAqL1xcbiAgICBwdWJsaWMgQXV0aGVudGljYXRpb24gZ2V0QXV0aGVudGljYXRpb24oKSB7XFxuICAgICAgICByZXR1cm4gU2VjdXJpdHlDb250ZXh0SG9sZGVyLmdldENvbnRleHQoKS5nZXRBdXRoZW50aWNhdGlvbigpO1xcbiAgICB9XFxuXFxuICAgIC8qKlxcbiAgICAgKiBcXHU4M2I3XFx1NTNkNlxcdTc1MjhcXHU2MjM3XFxuICAgICAqL1xcbiAgICBwdWJsaWMgVW1zQWRtaW4gZ2V0VXNlcihBdXRoZW50aWNhdGlvbiBhdXRoZW50aWNhdGlvbikge1xcbiAgICAgICAgT2JqZWN0IHByaW5jaXBhbCA9IGF1dGhlbnRpY2F0aW9uLmdldFByaW5jaXBhbCgpO1xcbiAgICAgICAgaWYgKHByaW5jaXBhbCBpbnN0YW5jZW9mIEFkbWluVXNlckRldGFpbHMpIHtcXG4gICAgICAgICAgICBBZG1pblVzZXJEZXRhaWxzIGFkbWluVXNlckRldGFpbHMgPSAgKEFkbWluVXNlckRldGFpbHMpIHByaW5jaXBhbDtcXG4gICAgICAgICAgICByZXR1cm4gYWRtaW5Vc2VyRGV0YWlscy5nZXRVbXNBZG1pbigpO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIG51bGw7XFxuICAgIH1cXG5cXG4gICAgLyoqXFxuICAgICAqIFxcdTgzYjdcXHU1M2Q2XFx1NzUyOFxcdTYyMzdcXG4gICAgICovXFxuICAgIHB1YmxpYyBVbXNBZG1pbiBnZXRVc2VyKCkge1xcbiAgICAgICAgQXV0aGVudGljYXRpb24gYXV0aGVudGljYXRpb24gPSBnZXRBdXRoZW50aWNhdGlvbigpO1xcbiAgICAgICAgaWYgKGF1dGhlbnRpY2F0aW9uID09IG51bGwpIHtcXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBnZXRVc2VyKGF1dGhlbnRpY2F0aW9uKTtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIFxcdTgzYjdcXHU1M2Q2XFx1NWY1M1xcdTUyNGRcXHU3NTI4XFx1NjIzN0lEXFxuICAgICAqL1xcbiAgICBwdWJsaWMgTG9uZyBnZXRDdXJyZW50VXNlcklkKCkge1xcbiAgICAgICAgVW1zQWRtaW4gYWRtaW4gPSBnZXRVc2VyKCk7XFxuICAgICAgICByZXR1cm4gYWRtaW4gIT0gbnVsbCA/IGFkbWluLmdldElkKCkgOiBudWxsO1xcbiAgICB9XFxuXFxufVwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAzOX1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMsIEkgY2FuIHNlZSB0aGF0IHRoZSBgU2VjdXJpdHlVdGlsc2AgY2xhc3MgZG9lc24ndCBoYXZlIGEgYGdldEN1cnJlbnRVc2VySWQoKWAgbWV0aG9kLCBidXQgaXQgZG9lcyBoYXZlIGEgYGdldFVzZXIoKWAgbWV0aG9kIHRoYXQgcmV0dXJucyBhIGBVbXNBZG1pbmAgb2JqZWN0LiBUaGUgYFVtc0FkbWluYCBjbGFzcyBoYXMgYW4gYGlkYCBmaWVsZCB0aGF0IHJlcHJlc2VudHMgdGhlIHVzZXIgSUQuXG5cbkxldCdzIG1vZGlmeSB0aGUgYFNlY3VyaXR5VXRpbHNgIGNsYXNzIHRvIGFkZCB0aGUgbWlzc2luZyBgZ2V0Q3VycmVudFVzZXJJZCgpYCBtZXRob2Q6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy91bXMvbW9kZWwvVW1zQWRtaW4uamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWw7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5UYWJsZU5hbWU7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uSWRUeXBlO1xuXG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uVGFibGVJZDtcbmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTtcblxuaW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5hbm5vdGF0aW9uLkpzb25Gb3JtYXQ7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbDtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsUHJvcGVydHk7XG5pbXBvcnQgbG9tYm9rLkRhdGE7XG5pbXBvcnQgbG9tYm9rLkVxdWFsc0FuZEhhc2hDb2RlO1xuXG4vKipcbiAqIDxwPlxuICog5ZCO5Y+w55So5oi36KGoXG4gKiA8L3A+XG4gKi9cbkBEYXRhXG5ARXF1YWxzQW5kSGFzaENvZGUoY2FsbFN1cGVyID0gZmFsc2UpXG5AVGFibGVOYW1lKFwidW1zX2FkbWluXCIpXG5AQXBpTW9kZWwodmFsdWU9XCJVbXNBZG1pbuWvueixoVwiLCBkZXNjcmlwdGlvbj1cIuWQjuWPsOeUqOaIt+ihqFwiKVxucHVibGljIGNsYXNzIFVtc0FkbWluIGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRD0xTDtcblxuICAgIEBUYWJsZUlkKHZhbHVlID0gXCJpZFwiLCB0eXBlID0gSWRUeXBlLkFVVE8pXG4gICAgcHJpdmF0ZSBMb25nIGlkO1xuXG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG5cbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLlpLTlg49cIilcbiAgICBwcml2YXRlIFN0cmluZyBpY29uO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIumCrueusVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGVtYWlsO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuaYteensFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIG5pY2tOYW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuaAp+WIq1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIGdlbmRlcjtcblxuICAgIEBKc29uRm9ybWF0KHBhdHRlcm4gPSBcInl5eXktTU0tZGRcIiwgdGltZXpvbmUgPSBcIkdNVCs4XCIpXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIueUn+aXpVwiKVxuICAgIHByaXZhdGUgRGF0ZSBiaXJ0aGRheTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLlubTpvoRcIilcbiAgICBwcml2YXRlIEludGVnZXIgYWdlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuiBlOezu+aWueW8j1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIHBob25lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWutuW6reS9j+WdgFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5aSH5rOo5L+h5oGvXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgbm90ZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLliJvlu7rml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgY3JlYXRlVGltZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLmnIDlkI7nmbvlvZXml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgbG9naW5UaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuW4kOWPt+WQr+eUqOeKtuaAge+8mjAtPuemgeeUqO+8mzEtPuWQr+eUqFwiKVxuICAgIHByaXZhdGUgSW50ZWdlciBzdGF0dXM7XG4gICAgXG4gICAgLyogXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuinkuiJsklE77yaMS0+566h55CG5ZGYXCIpXG4gICAgcHJpdmF0ZSBMb25nIHJvbGVJZDtcbiAgICAqL1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy91bXMvdm8vVW1zQWRtaW5SZXNwb25zZS5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy52bztcblxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsUHJvcGVydHk7XG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBsb21ib2suU2V0dGVyO1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgVW1zQWRtaW5SZXNwb25zZSBleHRlbmRzIFVtc0FkbWluIHtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi56eR5a6k5ZCN56ewXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgZGVwdE5hbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuenkeWupOe8luWPt+S7o+eggVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGRlcHRDb2RlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLnp5HlrqTmj4/ov7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBkZXB0RGVzYztcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL2R0by9VbXNBZG1pblBhcmFtLmphdmFcbi4uLlxuXG4vKipcbiAqIOeUqOaIt+eZu+W9leWPguaVsFxuICovXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgVW1zQWRtaW5QYXJhbSB7XG4gICAgQE5vdEVtcHR5XG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIueUqOaIt+WQjVwiLCByZXF1aXJlZCA9IHRydWUpXG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG4gICAgQE5vdEVtcHR5XG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWvhueggVwiLCByZXF1aXJlZCA9IHRydWUpXG4gICAgcHJpdmF0ZSBTdHJpbmcgcGFzc3dvcmQ7XG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIueUqOaIt+WktOWDj1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIGljb247XG4gICAgQEVtYWlsXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIumCrueusVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGVtYWlsO1xuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLnlKjmiLfmmLXnp7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBuaWNrTmFtZTtcbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5oCn5YirXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2VuZGVyO1xuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLnlJ/ml6VcIilcbiAgICBwcml2YXRlIExvY2FsRGF0ZSBiaXJ0aGRheTtcbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5aSH5rOoXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgbm90ZTtcbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5bm06b6EXCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIGFnZTtcbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi6IGU57O75pa55byPXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgcGhvbmU7XG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWutuW6reS9j+WdgFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL21hcHBlci9VbXNBZG1pbk1hcHBlci5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tYXBwZXI7XG5cbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmNvcmUubWFwcGVyLkJhc2VNYXBwZXI7XG5pbXBvcnQgb3JnLmFwYWNoZS5pYmF0aXMuYW5ub3RhdGlvbnMuUGFyYW07XG5cbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKiA8cD5cbiAqIOWQjuWPsOeUqOaIt+ihqCBNYXBwZXIg5o6l5Y+jXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBtYWNyb1xuICogQHNpbmNlIDIwMjUtMDMtMjdcbiAqL1xucHVibGljIGludGVyZmFjZSBVbXNBZG1pbk1hcHBlciBleHRlbmRzIEJhc2VNYXBwZXI8VW1zQWRtaW4+IHtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlui1hOa6kOebuOWFs+eUqOaIt0lE5YiX6KGoXG4gICAgICovXG4gICAgTGlzdDxMb25nPiBnZXRBZG1pbklkTGlzdChAUGFyYW0oXCJyZXNvdXJjZUlkXCIpIExvbmcgcmVzb3VyY2VJZCk7XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL21vZGVsL1Vtc1JvbGUuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDlkI7lj7DnlKjmiLfop5LoibLooahcbiAqIDwvcD5cbiAqXG4gKiBAYXV0aG9yIG1hY3JvXG4gKiBAc2luY2UgMjAyNS0wMy0yN1xuICovXG5ARGF0YVxuQEVxdWFsc0FuZEhhc2hDb2RlKGNhbGxTdXBlciA9IGZhbHNlKVxuQFRhYmxlTmFtZShcInVtc19yb2xlXCIpXG5AQXBpTW9kZWwodmFsdWU9XCJVbXNSb2xl5a+56LGhXCIsIGRlc2NyaXB0aW9uPVwi5ZCO5Y+w55So5oi36KeS6Imy6KGoXCIpXG5wdWJsaWMgY2xhc3MgVW1zUm9sZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQ9MUw7XG5cbiAgICBAVGFibGVJZCh2YWx1ZSA9IFwiaWRcIiwgdHlwZSA9IElkVHlwZS5BVVRPKVxuICAgIHByaXZhdGUgTG9uZyBpZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLlkI3np7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuaPj+i/sFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWQjuWPsOeUqOaIt+aVsOmHj1wiKVxuICAgIHByaXZhdGUgSW50ZWdlciBhZG1pbkNvdW50O1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWIm+W7uuaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWQr+eUqOeKtuaAge+8mjAtPuemgeeUqO+8mzEtPuWQr+eUqFwiKVxuICAgIHByaXZhdGUgSW50ZWdlciBzdGF0dXM7XG5cbiAgICBwcml2YXRlIEludGVnZXIgc29ydDtcblxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9tb2RlbC9VbXNBZG1pbkxvZ2luTG9nLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1vZGVsO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uVGFibGVOYW1lO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLklkVHlwZTtcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5UYWJsZUlkO1xuaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlO1xuaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpTW9kZWw7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbFByb3BlcnR5O1xuaW1wb3J0IGxvbWJvay5EYXRhO1xuaW1wb3J0IGxvbWJvay5FcXVhbHNBbmRIYXNoQ29kZTtcblxuLyoqXG4gKiA8cD5cbiAqIOWQjuWPsOeUqOaIt+eZu+W9leaXpeW/l+ihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgbWFjcm9cbiAqIEBzaW5jZSAyMDI1LTAzLTI3XG4gKi9cbkBEYXRhXG5ARXF1YWxzQW5kSGFzaENvZGUoY2FsbFN1cGVyID0gZmFsc2UpXG5AVGFibGVOYW1lKFwidW1zX2FkbWluX2xvZ2luX2xvZ1wiKVxuQEFwaU1vZGVsKHZhbHVlPVwiVW1zQWRtaW5Mb2dpbkxvZ+WvueixoVwiLCBkZXNjcmlwdGlvbj1cIuWQjuWPsOeUqOaIt+eZu+W9leaXpeW/l+ihqFwiKVxucHVibGljIGNsYXNzIFVtc0FkbWluTG9naW5Mb2cgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEPTFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBwcml2YXRlIExvbmcgYWRtaW5JZDtcblxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG4gICAgcHJpdmF0ZSBTdHJpbmcgaXA7XG5cbiAgICBwcml2YXRlIFN0cmluZyBhZGRyZXNzO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIua1j+iniOWZqOeZu+W9leexu+Wei1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJBZ2VudDtcblxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcWwvYmFzZS5zcWxcbi4uLlxuXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4tLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHVtc19hZG1pblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuRFJPUCBUQUJMRSBJRiBFWElTVFMgYHVtc19hZG1pbmA7XG5DUkVBVEUgVEFCTEUgYHVtc19hZG1pbmAgKFxuICBgaWRgIGJpZ2ludCgyMCkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4gIGB1c2VybmFtZWAgdmFyY2hhcig2NCkgREVGQVVMVCBOVUxMLFxuICBgcGFzc3dvcmRgIHRleHQgREVGQVVMVCBOVUxMLFxuICBgaWNvbmAgdmFyY2hhcig1MDApIERFRkFVTFQgTlVMTCBDT01NRU5UICflpLTlg48nLFxuICBgZW1haWxgIHZhcmNoYXIoMTAwKSBERUZBVUxUIE5VTEwgQ09NTUVOVCAn6YKu566xJyxcbiAgYG5pY2tfbmFtZWAgdmFyY2hhcigyMDApIERFRkFVTFQgTlVMTCBDT01NRU5UICfmmLXnp7AnLFxuICBgZ2VuZGVyYCB2YXJjaGFyKDE2KSBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5oCn5YirJyxcbiAgYGJpcnRoZGF5YCBEQVRFIERFRkFVTFQgTlVMTCBDT01NRU5UICfnlJ/ml6UnLFxuICBgYWdlYCBpbnQoMTApIERFRkFVTFQgTlVMTCBDT01NRU5UICflubTpvoQnLFxuICBgcGhvbmVgIHZhcmNoYXIoMTEpIERFRkFVTFQgTlVMTCBDT01NRU5UICfogZTns7vmlrnlvI8nLFxuICBgYWRkcmVzc2AgdmFyY2hhcig1MDApIERFRkFVTFQgTlVMTCBDT01NRU5UICflrrbluq3kvY/lnYAnLFxuICBgbm90ZWAgdmFyY2hhcig1MDApIERFRkFVTFQgTlVMTCBDT01NRU5UICfpg6jpl6jogYzkvY3nrYnkv6Hmga8nLFxuICBgY3JlYXRlX3RpbWVgIGRhdGV0aW1lIERFRkFVTFQgTlVMTCBDT01NRU5UICfliJvlu7rml7bpl7QnLFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy91bXMvbW9kZWwvVW1zTWVudS5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOWQjuWPsOiPnOWNleihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgbWFjcm9cbiAqIEBzaW5jZSAyMDI1LTAzLTI3XG4gKi9cbkBEYXRhXG5ARXF1YWxzQW5kSGFzaENvZGUoY2FsbFN1cGVyID0gZmFsc2UpXG5AVGFibGVOYW1lKFwidW1zX21lbnVcIilcbkBBcGlNb2RlbCh2YWx1ZT1cIlVtc01lbnXlr7nosaFcIiwgZGVzY3JpcHRpb249XCLlkI7lj7Doj5zljZXooahcIilcbnB1YmxpYyBjbGFzcyBVbXNNZW51IGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRD0xTDtcblxuICAgIEBUYWJsZUlkKHZhbHVlID0gXCJpZFwiLCB0eXBlID0gSWRUeXBlLkFVVE8pXG4gICAgcHJpdmF0ZSBMb25nIGlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIueItue6p0lEXCIpXG4gICAgcHJpdmF0ZSBMb25nIHBhcmVudElkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWIm+W7uuaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuiPnOWNleWQjeensFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIHRpdGxlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuiPnOWNlee6p+aVsFwiKVxuICAgIHByaXZhdGUgSW50ZWdlciBsZXZlbDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLoj5zljZXmjpLluo9cIilcbiAgICBwcml2YXRlIEludGVnZXIgc29ydDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLliY3nq6/lkI3np7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWJjeerr+Wbvuagh1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIGljb247XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9tb2RlbC9VbXNBZG1pblJvbGVSZWxhdGlvbi5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbDtcblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLlRhYmxlTmFtZTtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5JZFR5cGU7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uVGFibGVJZDtcbmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsO1xuaW1wb3J0IGxvbWJvay5EYXRhO1xuaW1wb3J0IGxvbWJvay5FcXVhbHNBbmRIYXNoQ29kZTtcblxuLyoqXG4gKiA8cD5cbiAqIOWQjuWPsOeUqOaIt+WSjOinkuiJsuWFs+ezu+ihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgbWFjcm9cbiAqIEBzaW5jZSAyMDI1LTAzLTI3XG4gKi9cbkBEYXRhXG5ARXF1YWxzQW5kSGFzaENvZGUoY2FsbFN1cGVyID0gZmFsc2UpXG5AVGFibGVOYW1lKFwidW1zX2FkbWluX3JvbGVfcmVsYXRpb25cIilcbkBBcGlNb2RlbCh2YWx1ZT1cIlVtc0FkbWluUm9sZVJlbGF0aW9u5a+56LGhXCIsIGRlc2NyaXB0aW9uPVwi5ZCO5Y+w55So5oi35ZKM6KeS6Imy5YWz57O76KGoXCIpXG5wdWJsaWMgY2xhc3MgVW1zQWRtaW5Sb2xlUmVsYXRpb24gaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEPTFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBwcml2YXRlIExvbmcgYWRtaW5JZDtcblxuICAgIHByaXZhdGUgTG9uZyByb2xlSWQ7XG5cblxufVxuLi4uXG5QYXRoOiBvZmZpY2VfcGxhbi5zcWxcbi4uLlxuXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4tLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHVtc19hZG1pblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuRFJPUCBUQUJMRSBJRiBFWElTVFMgYHVtc19hZG1pbmA7XG5DUkVBVEUgVEFCTEUgYHVtc19hZG1pbmAgIChcbiAgYGlkYCBiaWdpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4gIGB1c2VybmFtZWAgdmFyY2hhcig2NCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgREVGQVVMVCBOVUxMLFxuICBgcGFzc3dvcmRgIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwsXG4gIGBpY29uYCB2YXJjaGFyKDUwMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+WktOWDjycsXG4gIGBlbWFpbGAgdmFyY2hhcigxMDApIENIQVJBQ1RFUiBTRVQgdXRmOG1iMyBDT0xMQVRFIHV0ZjhtYjNfZ2VuZXJhbF9jaSBOVUxMIERFRkFVTFQgTlVMTCBDT01NRU5UICfpgq7nrrEnLFxuICBgbmlja19uYW1lYCB2YXJjaGFyKDIwMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+aYteensCcsXG4uLi5cblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLS0gUmVjb3JkcyBvZiB1bXNfYWRtaW5cbi0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbklOU0VSVCBJTlRPIGB1bXNfYWRtaW5gIFZBTFVFUyAoMSwgJ2FkbWluJywgJyQyYSQxMCROWjVvN3IyRS5heVQyWm94Z2psSS5lSjZPRVlxakg3SU5SL0YubVhEYmpaSmk5SEYwWUNWRycsICdodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzAvODgvMDNiMGQzOTU4M2Y0ODIwNjc2OGE3NTM0ZTU1YmNwbmcucG5nJywgJ3Rlc3RAcXEuY29tJywgJ+euoeeQhuWRmCcsICfnlLcnLCAnMjAyNS0wMy0yNycsIDE4LCAnMTMwODg4ODY2NjYnLCAn5YyX5Lqs5biCJywgTlVMTCwgJzIwMjUtMDQtMjkgMDU6MDE6NTknLCAnMjAyNS0wNC0zMCAxMzowMzoxMycsIDEpO1xuSU5TRVJUIElOVE8gYHVtc19hZG1pbmAgVkFMVUVTICgyLCAndXNlcjEnLCAnJDJhJDEwJHhPcllBcmxqcTBWeUdKVmh0ckVaeXVnMmZGOTdXWTVoU0FyQTA4M3Iva3liZC5DYUJLQmR1JywgJ2h0dHBzOi8vY3ViZS5lbGVtZWNkbi5jb20vMC84OC8wM2IwZDM5NTgzZjQ4MjA2NzY4YTc1MzRlNTViY3BuZy5wbmcnLCAndXNlcjFAZXhhbXBsZS5jb20nLCAn5byg5LyfJywgJ+eUtycsICcxOTkwLTAxLTE1JywgMzUsICcxMzgwMDAwMDAwMScsICfljJfkuqzluILmnJ3pmLPljLrmnJvkuqzooZfpgZMnLCAn5oqA5pyv6YOo5ZCO56uv5byA5Y+R5bel56iL5biIJywgJzIwMjUtMDQtMjkgMDU6MDE6NTknLCAnMjAyNS0wNC0zMCAxMzowNzowMicsIDEpO1xuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vcmVzb3VyY2VzL21hcHBlci91bXMvVW1zQWRtaW5NYXBwZXIueG1sXG4uLi5cblxuICAgIDwhLS0g6YCa55So5p+l6K+i5pig5bCE57uT5p6cIC0tPlxuICAgIDxyZXN1bHRNYXAgaWQ9XCJCYXNlUmVzdWx0TWFwXCIgdHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pblwiPlxuICAgICAgICA8aWQgY29sdW1uPVwiaWRcIiBwcm9wZXJ0eT1cImlkXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJ1c2VybmFtZVwiIHByb3BlcnR5PVwidXNlcm5hbWVcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cInBhc3N3b3JkXCIgcHJvcGVydHk9XCJwYXNzd29yZFwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiaWNvblwiIHByb3BlcnR5PVwiaWNvblwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiZW1haWxcIiBwcm9wZXJ0eT1cImVtYWlsXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJuaWNrX25hbWVcIiBwcm9wZXJ0eT1cIm5pY2tOYW1lXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJnZW5kZXJcIiBwcm9wZXJ0eT1cImdlbmRlclwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiYmlydGhkYXlcIiBwcm9wZXJ0eT1cImJpcnRoZGF5XCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJhZ2VcIiBwcm9wZXJ0eT1cImFnZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwicGhvbmVcIiBwcm9wZXJ0eT1cInBob25lXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJhZGRyZXNzXCIgcHJvcGVydHk9XCJhZGRyZXNzXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJub3RlXCIgcHJvcGVydHk9XCJub3RlXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJjcmVhdGVfdGltZVwiIHByb3BlcnR5PVwiY3JlYXRlVGltZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwibG9naW5fdGltZVwiIHByb3BlcnR5PVwibG9naW5UaW1lXCIgLz5cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL3NlcnZpY2UvaW1wbC9VbXNBZG1pblNlcnZpY2VJbXBsLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLnNlcnZpY2UuaW1wbDtcblxuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLmNvbGxlY3Rpb24uQ29sbFV0aWw7XG5pbXBvcnQgY24uaHV0b29sLmNvcmUudXRpbC5PYmplY3RVdGlsO1xuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuU3RyVXRpbDtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LkxhbWJkYVF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5pbXBsLlNlcnZpY2VJbXBsO1xuaW1wb3J0IGNvbS5ib290LndlYi5jb21tb24uZXhjZXB0aW9uLkFzc2VydHM7XG5pbXBvcnQgY29tLmJvb3Qud2ViLmRvbWFpbi5BZG1pblVzZXJEZXRhaWxzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5kdG8uVW1zQWRtaW5QYXJhbTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuZHRvLlVwZGF0ZUFkbWluUGFzc3dvcmRQYXJhbTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubWFwcGVyLlVtc0FkbWluTG9naW5Mb2dNYXBwZXI7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1hcHBlci5VbXNBZG1pbk1hcHBlcjtcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFVtc0FkbWluIHJlZ2lzdGVyKFVtc0FkbWluUGFyYW0gdW1zQWRtaW5QYXJhbSkge1xuICAgICAgICBVbXNBZG1pbiB1bXNBZG1pbiA9IG5ldyBVbXNBZG1pbigpO1xuICAgICAgICBCZWFuVXRpbHMuY29weVByb3BlcnRpZXModW1zQWRtaW5QYXJhbSwgdW1zQWRtaW4pO1xuICAgICAgICB1bXNBZG1pbi5zZXRDcmVhdGVUaW1lKG5ldyBEYXRlKCkpO1xuICAgICAgICB1bXNBZG1pbi5zZXRTdGF0dXMoMSk7XG4gICAgICAgIHVtc0FkbWluLnNldEljb24oXCJodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzAvODgvMDNiMGQzOTU4M2Y0ODIwNjc2OGE3NTM0ZTU1YmNwbmcucG5nXCIpO1xuICAgICAgICAvL+afpeivouaYr+WQpuacieebuOWQjOeUqOaIt+WQjeeahOeUqOaIt1xuICAgICAgICBRdWVyeVdyYXBwZXI8VW1zQWRtaW4+IHdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgICAgICAgd3JhcHBlci5sYW1iZGEoKS5lcShVbXNBZG1pbjo6Z2V0VXNlcm5hbWUsdW1zQWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgIExpc3Q8VW1zQWRtaW4+IHVtc0FkbWluTGlzdCA9IGxpc3Qod3JhcHBlcik7XG4gICAgICAgIGlmICh1bXNBZG1pbkxpc3Quc2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy/lsIblr4bnoIHov5vooYzliqDlr4bmk43kvZxcbiAgICAgICAgU3RyaW5nIGVuY29kZVBhc3N3b3JkID0gcGFzc3dvcmRFbmNvZGVyLmVuY29kZSh1bXNBZG1pbi5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgdW1zQWRtaW4uc2V0UGFzc3dvcmQoZW5jb2RlUGFzc3dvcmQpO1xuICAgICAgICBsb25nIGFkbWluSWQgPSBiYXNlTWFwcGVyLmluc2VydCh1bXNBZG1pbik7XG4vLyAgICAgICAgTGlzdDxMb25nPiByb2xlSWRMaXN0ID0gcm9sZVNlcnZpY2UubGlzdCgpLnN0cmVhbSgpLm1hcChVbXNSb2xlOjpnZXRJZCkuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICAgICAgTGlzdDxMb25nPiByb2xlSWRMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIHJvbGVJZExpc3QuYWRkKDJMKTtcbiAgICAgICAgdGhpcy51cGRhdGVSb2xlKHVtc0FkbWluLmdldElkKCksIHJvbGVJZExpc3QpO1xuICAgICAgICByZXR1cm4gdW1zQWRtaW47XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxVbXNBZG1pbj4gbGlzdChTdHJpbmcga2V5d29yZCwgSW50ZWdlciBzdGF0dXMsIEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSkge1xuICAgICAgICBQYWdlPFVtc0FkbWluPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLHBhZ2VTaXplKTtcbiAgICAgICAgUXVlcnlXcmFwcGVyPFVtc0FkbWluPiB3cmFwcGVyID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICAgICAgIExhbWJkYVF1ZXJ5V3JhcHBlcjxVbXNBZG1pbj4gbGFtYmRhID0gd3JhcHBlci5sYW1iZGEoKTtcbiAgICAgICAgaWYoU3RyVXRpbC5pc05vdEVtcHR5KGtleXdvcmQpKXtcbiAgICAgICAgICAgIGxhbWJkYS5saWtlKFVtc0FkbWluOjpnZXRVc2VybmFtZSxrZXl3b3JkKTtcbiAgICAgICAgICAgIGxhbWJkYS5vcigpLmxpa2UoVW1zQWRtaW46OmdldE5pY2tOYW1lLGtleXdvcmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3RVdGlsLmlzTm90RW1wdHkoc3RhdHVzKSkge1xuICAgICAgICAgICAgbGFtYmRhLmVxKFVtc0FkbWluOjpnZXRTdGF0dXMsIHN0YXR1cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGFnZShwYWdlLHdyYXBwZXIpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBib29sZWFuIHVwZGF0ZShMb25nIGlkLCBVbXNBZG1pbiBhZG1pbikge1xuICAgICAgICBhZG1pbi5zZXRJZChpZCk7XG4gICAgICAgIFVtc0FkbWluIHJhd0FkbWluID0gZ2V0QnlJZChpZCk7XG4gICAgICAgIGlmKHJhd0FkbWluLmdldFBhc3N3b3JkKCkuZXF1YWxzKGFkbWluLmdldFBhc3N3b3JkKCkpKXtcbiAgICAgICAgICAgIC8v5LiO5Y6f5Yqg5a+G5a+G56CB55u45ZCM55qE5LiN6ZyA6KaB5L+u5pS5XG4gICAgICAgICAgICBhZG1pbi5zZXRQYXNzd29yZChudWxsKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL+S4juWOn+WKoOWvhuWvhueggeS4jeWQjOeahOmcgOimgeWKoOWvhuS/ruaUuVxuICAgICAgICAgICAgaWYoU3RyVXRpbC5pc0VtcHR5KGFkbWluLmdldFBhc3N3b3JkKCkpKXtcbiAgICAgICAgICAgICAgICBhZG1pbi5zZXRQYXNzd29yZChudWxsKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGFkbWluLnNldFBhc3N3b3JkKHBhc3N3b3JkRW5jb2Rlci5lbmNvZGUoYWRtaW4uZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHVwZGF0ZUJ5SWQoYWRtaW4pO1xuICAgICAgICBnZXRDYWNoZVNlcnZpY2UoKS5kZWxBZG1pbihpZCk7XG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBib29sZWFuIGRlbGV0ZShMb25nIGlkKSB7XG4gICAgICAgIGdldENhY2hlU2VydmljZSgpLmRlbEFkbWluKGlkKTtcbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gcmVtb3ZlQnlJZChpZCk7XG4gICAgICAgIGdldENhY2hlU2VydmljZSgpLmRlbFJlc291cmNlTGlzdChpZCk7XG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL3NlcnZpY2UvVW1zQWRtaW5TZXJ2aWNlLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLnNlcnZpY2U7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5JU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuZHRvLlVtc0FkbWluUGFyYW07XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLmR0by5VcGRhdGVBZG1pblBhc3N3b3JkUGFyYW07XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1vZGVsLlVtc0FkbWluO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNSZXNvdXJjZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zUm9sZTtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUudXNlcmRldGFpbHMuVXNlckRldGFpbHM7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay50cmFuc2FjdGlvbi5hbm5vdGF0aW9uLlRyYW5zYWN0aW9uYWw7XG5cbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKiDlkI7lj7DnrqHnkIblkZjnrqHnkIZTZXJ2aWNlXG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgVW1zQWRtaW5TZXJ2aWNlIGV4dGVuZHMgSVNlcnZpY2U8VW1zQWRtaW4+IHtcbiAgICAvKipcbiAgICAgKiDmoLnmja7nlKjmiLflkI3ojrflj5blkI7lj7DnrqHnkIblkZhcbiAgICAgKi9cbiAgICBVbXNBZG1pbiBnZXRBZG1pbkJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKTtcblxuICAgIC8qKlxuICAgICAqIOazqOWGjOWKn+iDvVxuICAgICAqL1xuICAgIFVtc0FkbWluIHJlZ2lzdGVyKFVtc0FkbWluUGFyYW0gdW1zQWRtaW5QYXJhbSk7XG5cbiAgICAvKipcbiAgICAgKiDnmbvlvZXlip/og71cbiAgICAgKiBAcGFyYW0gdXNlcm5hbWUg55So5oi35ZCNXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIOWvhueggVxuICAgICAqIEByZXR1cm4g55Sf5oiQ55qESldU55qEdG9rZW5cbiAgICAgKi9cbiAgICBTdHJpbmcgbG9naW4oU3RyaW5nIHVzZXJuYW1lLFN0cmluZyBwYXNzd29yZCk7XG5cbiAgICAvKipcbiAgICAgKiDliLfmlrB0b2tlbueahOWKn+iDvVxuICAgICAqIEBwYXJhbSBvbGRUb2tlbiDml6fnmoR0b2tlblxuICAgICAqL1xuICAgIFN0cmluZyByZWZyZXNoVG9rZW4oU3RyaW5nIG9sZFRva2VuKTtcblxuICAgIC8qKlxuICAgICAqIOagueaNrueUqOaIt+WQjeaIluaYteensOWIhumhteafpeivoueUqOaIt1xuICAgICAqL1xuICAgIFBhZ2U8VW1zQWRtaW4+IGxpc3QoU3RyaW5nIGtleXdvcmQsIEludGVnZXIgc3RhdHVzLCBJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0pO1xuXG4gICAgLyoqXG4gICAgICog5L+u5pS55oyH5a6a55So5oi35L+h5oGvXG4gICAgICovXG4gICAgYm9vbGVhbiB1cGRhdGUoTG9uZyBpZCwgVW1zQWRtaW4gYWRtaW4pO1xuXG4gICAgLyoqXG4gICAgICog5Yig6Zmk5oyH5a6a55So5oi3XG4gICAgICovXG4gICAgYm9vbGVhbiBkZWxldGUoTG9uZyBpZCk7XG5cbiAgICAvKipcbiAgICAgKiDkv67mlLnnlKjmiLfop5LoibLlhbPns7tcbiAgICAgKi9cbiAgICBAVHJhbnNhY3Rpb25hbFxuICAgIGludCB1cGRhdGVSb2xlKExvbmcgYWRtaW5JZCwgTGlzdDxMb25nPiByb2xlSWRzKTtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlueUqOaIt+WvueS6juinkuiJslxuICAgICAqL1xuICAgIExpc3Q8VW1zUm9sZT4gZ2V0Um9sZUxpc3QoTG9uZyBhZG1pbklkKTtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPluaMh+WumueUqOaIt+eahOWPr+iuv+mXrui1hOa6kFxuICAgICAqL1xuICAgIExpc3Q8VW1zUmVzb3VyY2U+IGdldFJlc291cmNlTGlzdChMb25nIGFkbWluSWQpO1xuXG4gICAgLyoqXG4gICAgICog5L+u5pS55a+G56CBXG4gICAgICovXG4gICAgaW50IHVwZGF0ZVBhc3N3b3JkKFVwZGF0ZUFkbWluUGFzc3dvcmRQYXJhbSB1cGRhdGVQYXNzd29yZFBhcmFtKTtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlueUqOaIt+S/oeaBr1xuICAgICAqL1xuICAgIFVzZXJEZXRhaWxzIGxvYWRVc2VyQnlVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpO1xuXG4gICAgLyoqXG4gICAgICog6I635Y+W57yT5a2Y5pyN5YqhXG4gICAgICovXG4gICAgVW1zQWRtaW5DYWNoZVNlcnZpY2UgZ2V0Q2FjaGVTZXJ2aWNlKCk7XG59XG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3MvdW1zL2FkbWluL2luZGV4LnZ1ZVxuLi4uXG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBuYW1lOiAnYWRtaW5MaXN0JyxcbiAgICBkYXRhKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGlzdFF1ZXJ5OiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KSxcbiAgICAgICAgbGlzdDogbnVsbCxcbiAgICAgICAgdG90YWw6IG51bGwsXG4gICAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIGFkbWluOiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWRtaW4pLFxuICAgICAgICBpc0VkaXQ6IGZhbHNlLFxuICAgICAgICBhbGxvY0RpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBhbGxvY1JvbGVJZHM6W10sXG4gICAgICAgIGFsbFJvbGVMaXN0OltdLFxuICAgICAgICBhbGxvY0FkbWluSWQ6bnVsbFxuICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlZCgpIHtcbiAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgdGhpcy5nZXRBbGxSb2xlTGlzdCgpO1xuICAgIH0sXG4gICAgZmlsdGVyczoge1xuICAgICAgZm9ybWF0RGF0ZVRpbWUodGltZSkge1xuICAgICAgICBpZiAodGltZSA9PSBudWxsIHx8IHRpbWUgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuICdOL0EnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tOnNzJylcbiAgICAgIH1cbiAgICB9LFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy91bXMvY29udHJvbGxlci9VbXNBZG1pbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLojrflj5blvZPliY3nmbvlvZXnlKjmiLfkv6Hmga9cIilcbiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSBcIi9pbmZvXCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuR0VUKVxuICAgIEBSZXNwb25zZUJvZHlcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0IGdldEFkbWluSW5mbyhQcmluY2lwYWwgcHJpbmNpcGFsKSB7XG4gICAgICAgIGlmIChwcmluY2lwYWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC51bmF1dGhvcml6ZWQobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gcHJpbmNpcGFsLmdldE5hbWUoKTtcbiAgICAgICAgVW1zQWRtaW4gdW1zQWRtaW4gPSBhZG1pblNlcnZpY2UuZ2V0QWRtaW5CeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgTWFwPFN0cmluZywgT2JqZWN0PiBkYXRhID0gbmV3IEhhc2hNYXA8PigpO1xuICAgICAgICBkYXRhLnB1dChcInVzZXJuYW1lXCIsIHVtc0FkbWluLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICBkYXRhLnB1dChcIm1lbnVzXCIsIHJvbGVTZXJ2aWNlLmdldE1lbnVMaXN0KHVtc0FkbWluLmdldElkKCkpKTtcbiAgICAgICAgZGF0YS5wdXQoXCJpY29uXCIsIHVtc0FkbWluLmdldEljb24oKSk7XG4gICAgICAgIExpc3Q8VW1zUm9sZT4gcm9sZUxpc3QgPSBhZG1pblNlcnZpY2UuZ2V0Um9sZUxpc3QodW1zQWRtaW4uZ2V0SWQoKSk7XG4gICAgICAgIGlmIChDb2xsVXRpbC5pc05vdEVtcHR5KHJvbGVMaXN0KSkge1xuICAgICAgICAgICAgTGlzdDxTdHJpbmc+IHJvbGVzID0gcm9sZUxpc3Quc3RyZWFtKCkubWFwKFVtc1JvbGU6OmdldE5hbWUpLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSk7XG4gICAgICAgICAgICBkYXRhLnB1dChcInJvbGVzXCIsIHJvbGVzKTtcbiAgICAgICAgfVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5p+l6K+i5omA5pyJ55So5oi35YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdEFsbFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxVbXNBZG1pbj4+IGxpc3RBbGwoKSB7XG4gICAgICAgIExpc3Q8VW1zQWRtaW4+IGFkbWluTGlzdCA9IGFkbWluU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8VW1zQWRtaW4+KCkubGFtYmRhKCkubmUoVW1zQWRtaW46OmdldElkLCAxKSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKGFkbWluTGlzdCk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi6I635Y+W5b2T5YmN55m75b2V6K+m57uG5L+h5oGvXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvdXNlckluZm9cIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PFVtc0FkbWluPiBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKFNlY3VyaXR5VXRpbHMuZ2V0VXNlcigpKTtcbiAgICB9XG5cbn1cblxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvZG9tYWluL0FkbWluVXNlckRldGFpbHMuamF2YVxuLi4uXG5cbi8qKlxuICogU3ByaW5nU2VjdXJpdHnpnIDopoHnmoTnlKjmiLfor6bmg4VcbiAqL1xucHVibGljIGNsYXNzIEFkbWluVXNlckRldGFpbHMgaW1wbGVtZW50cyBVc2VyRGV0YWlscyB7XG5cbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBVbXNBZG1pbiB1bXNBZG1pbjtcbiAgICBwcml2YXRlIExpc3Q8VW1zUmVzb3VyY2U+IHJlc291cmNlTGlzdDtcbiAgICBwdWJsaWMgQWRtaW5Vc2VyRGV0YWlscyhVbXNBZG1pbiB1bXNBZG1pbiwgTGlzdDxVbXNSZXNvdXJjZT4gcmVzb3VyY2VMaXN0KSB7XG4gICAgICAgIHRoaXMudW1zQWRtaW4gPSB1bXNBZG1pbjtcbiAgICAgICAgdGhpcy5yZXNvdXJjZUxpc3QgPSByZXNvdXJjZUxpc3Q7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIENvbGxlY3Rpb248PyBleHRlbmRzIEdyYW50ZWRBdXRob3JpdHk+IGdldEF1dGhvcml0aWVzKCkge1xuICAgICAgICAvL+i/lOWbnuW9k+WJjeeUqOaIt+eahOinkuiJslxuICAgICAgICByZXR1cm4gcmVzb3VyY2VMaXN0LnN0cmVhbSgpXG4gICAgICAgICAgICAgICAgLm1hcChyb2xlIC0+bmV3IFNpbXBsZUdyYW50ZWRBdXRob3JpdHkocm9sZS5nZXRJZCgpK1wiOlwiK3JvbGUuZ2V0TmFtZSgpKSlcbiAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU3RyaW5nIGdldFBhc3N3b3JkKCkge1xuICAgICAgICByZXR1cm4gdW1zQWRtaW4uZ2V0UGFzc3dvcmQoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU3RyaW5nIGdldFVzZXJuYW1lKCkge1xuICAgICAgICByZXR1cm4gdW1zQWRtaW4uZ2V0VXNlcm5hbWUoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgYm9vbGVhbiBpc0FjY291bnROb25FeHBpcmVkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9zZXJ2aWNlL2ltcGwvVW1zQWRtaW5DYWNoZVNlcnZpY2VJbXBsLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZGVsUmVzb3VyY2VMaXN0QnlSZXNvdXJjZShMb25nIHJlc291cmNlSWQpIHtcbiAgICAgICAgTGlzdDxMb25nPiBhZG1pbklkTGlzdCA9IGFkbWluTWFwcGVyLmdldEFkbWluSWRMaXN0KHJlc291cmNlSWQpO1xuICAgICAgICBpZiAoQ29sbFV0aWwuaXNOb3RFbXB0eShhZG1pbklkTGlzdCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBrZXlQcmVmaXggPSBSRURJU19EQVRBQkFTRSArIFwiOlwiICsgUkVESVNfS0VZX1JFU09VUkNFX0xJU1QgKyBcIjpcIjtcbiAgICAgICAgICAgIExpc3Q8U3RyaW5nPiBrZXlzID0gYWRtaW5JZExpc3Quc3RyZWFtKCkubWFwKGFkbWluSWQgLT4ga2V5UHJlZml4ICsgYWRtaW5JZCkuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICAgICAgICAgIHJlZGlzU2VydmljZS5kZWwoa2V5cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgVW1zQWRtaW4gZ2V0QWRtaW4oU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIFN0cmluZyBrZXkgPSBSRURJU19EQS4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFDWDgzeDhEdG5zV0xqUm1qNFFwR2tDIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJCYXNlZCBvbiBteSBhbmFseXNpcywgSSBjYW4gc2VlIHRoYXQgdGhlIGBTZWN1cml0eVV0aWxzYCBjbGFzcyBkb2Vzbid0IGhhdmUgYSBgZ2V0Q3VycmVudFVzZXJJZCgpYCBtZXRob2QsIGJ1dCBpdCBkb2VzIGhhdmUgYSBgZ2V0VXNlcigpYCBtZXRob2QgdGhhdCByZXR1cm5zIGEgYFVtc0FkbWluYCBvYmplY3QuIFRoZSBgVW1zQWRtaW5gIGNsYXNzIGhhcyBhbiBgaWRgIGZpZWxkIHRoYXQgcmVwcmVzZW50cyB0aGUgdXNlciBJRC5cblxuTGV0J3MgbW9kaWZ5IHRoZSBgU2VjdXJpdHlVdGlsc2AgY2xhc3MgdG8gYWRkIHRoZSBtaXNzaW5nIGBnZXRDdXJyZW50VXNlcklkKClgIG1ldGhvZDpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI0MWI4MWZjMy1mOTQyLTQ5YWMtYmIzYS0wYzM1ZmM5NzI2MjUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJJ3ZlIHN1Y2Nlc3NmdWxseSBhZGRlZCB0aGUgYGdldEN1cnJlbnRVc2VySWQoKWAgbWV0aG9kIHRvIHRoZSBgU2VjdXJpdHlVdGlsc2AgY2xhc3MuIFRoaXMgbWV0aG9kIHJldHJpZXZlcyB0aGUgY3VycmVudCB1c2VyIHVzaW5nIHRoZSBleGlzdGluZyBgZ2V0VXNlcigpYCBtZXRob2QgYW5kIHRoZW4gcmV0dXJucyB0aGUgdXNlcidzIElEIGlmIHRoZSB1c2VyIGV4aXN0cywgb3IgbnVsbCBpZiBubyB1c2VyIGlzIGZvdW5kLlxuXG5UaGUgbWV0aG9kIGltcGxlbWVudGF0aW9uIGlzOlxuYGBgamF2YVxuLyoqXG4gKiDojrflj5blvZPliY3nlKjmiLdJRFxuICovXG5wdWJsaWMgTG9uZyBnZXRDdXJyZW50VXNlcklkKCkge1xuICAgIFVtc0FkbWluIGFkbWluID0gZ2V0VXNlcigpO1xuICAgIHJldHVybiBhZG1pbiAhPSBudWxsID8gYWRtaW4uZ2V0SWQoKSA6IG51bGw7XG59XG5gYGBcblxuVGhpcyBzaG91bGQgZml4IHRoZSBjb21waWxhdGlvbiBlcnJvciBpbiB0aGUgYFNjaGVkdWxlQ29udHJvbGxlci5qYXZhYCBmaWxlLiBUaGUgZXJyb3Igd2FzIG9jY3VycmluZyBiZWNhdXNlIHRoZSBjb2RlIHdhcyB0cnlpbmcgdG8gY2FsbCBhIG1ldGhvZCB0aGF0IGRpZG4ndCBleGlzdCBpbiB0aGUgYFNlY3VyaXR5VXRpbHNgIGNsYXNzLlxuXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBoZWxwIHdpdGggYW55dGhpbmcgZWxzZSByZWxhdGVkIHRvIHRoaXMgaXNzdWU/XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9zZWN1cml0eS91dGlsL1NlY3VyaXR5VXRpbHMuamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgICAxXHRwYWNrYWdlIGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGNvbS5ib290LndlYi5kb21haW4uQWRtaW5Vc2VyRGV0YWlscztcbiAgICAgNFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbiAgICAgNVx0aW1wb3J0IGxvbWJvay5leHBlcmltZW50YWwuVXRpbGl0eUNsYXNzO1xuICAgICA2XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLkF1dGhlbnRpY2F0aW9uO1xuICAgICA3XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLmNvbnRleHQuU2VjdXJpdHlDb250ZXh0SG9sZGVyO1xuICAgICA4XHRcbiAgICAgOVx0QFV0aWxpdHlDbGFzc1xuICAgIDEwXHRwdWJsaWMgY2xhc3MgU2VjdXJpdHlVdGlscyB7XG4gICAgMTFcdFxuICAgIDEyXHQgICAgLyoqXG4gICAgMTNcdCAgICAgKiDojrflj5ZBdXRoZW50aWNhdGlvblxuICAgIDE0XHQgICAgICovXG4gICAgMTVcdCAgICBwdWJsaWMgQXV0aGVudGljYXRpb24gZ2V0QXV0aGVudGljYXRpb24oKSB7XG4gICAgMTZcdCAgICAgICAgcmV0dXJuIFNlY3VyaXR5Q29udGV4dEhvbGRlci5nZXRDb250ZXh0KCkuZ2V0QXV0aGVudGljYXRpb24oKTtcbiAgICAxN1x0ICAgIH1cbiAgICAxOFx0XG4gICAgMTlcdCAgICAvKipcbiAgICAyMFx0ICAgICAqIOiOt+WPlueUqOaIt1xuICAgIDIxXHQgICAgICovXG4gICAgMjJcdCAgICBwdWJsaWMgVW1zQWRtaW4gZ2V0VXNlcihBdXRoZW50aWNhdGlvbiBhdXRoZW50aWNhdGlvbikge1xuICAgIDIzXHQgICAgICAgIE9iamVjdCBwcmluY2lwYWwgPSBhdXRoZW50aWNhdGlvbi5nZXRQcmluY2lwYWwoKTtcbiAgICAyNFx0ICAgICAgICBpZiAocHJpbmNpcGFsIGluc3RhbmNlb2YgQWRtaW5Vc2VyRGV0YWlscykge1xuICAgIDI1XHQgICAgICAgICAgICBBZG1pblVzZXJEZXRhaWxzIGFkbWluVXNlckRldGFpbHMgPSAgKEFkbWluVXNlckRldGFpbHMpIHByaW5jaXBhbDtcbiAgICAyNlx0ICAgICAgICAgICAgcmV0dXJuIGFkbWluVXNlckRldGFpbHMuZ2V0VW1zQWRtaW4oKTtcbiAgICAyN1x0ICAgICAgICB9XG4gICAgMjhcdCAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgMjlcdCAgICB9XG4gICAgMzBcdFxuICAgIDMxXHQgICAgLyoqXG4gICAgMzJcdCAgICAgKiDojrflj5bnlKjmiLdcbiAgICAzM1x0ICAgICAqL1xuICAgIDM0XHQgICAgcHVibGljIFVtc0FkbWluIGdldFVzZXIoKSB7XG4gICAgMzVcdCAgICAgICAgQXV0aGVudGljYXRpb24gYXV0aGVudGljYXRpb24gPSBnZXRBdXRoZW50aWNhdGlvbigpO1xuICAgIDM2XHQgICAgICAgIGlmIChhdXRoZW50aWNhdGlvbiA9PSBudWxsKSB7XG4gICAgMzdcdCAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgIDM4XHQgICAgICAgIH1cbiAgICAzOVx0ICAgICAgICByZXR1cm4gZ2V0VXNlcihhdXRoZW50aWNhdGlvbik7XG4gICAgNDBcdCAgICB9XG4gICAgNDFcdFxuICAgIDQyXHQgICAgLyoqXG4gICAgNDNcdCAgICAgKiDojrflj5blvZPliY3nlKjmiLdJRFxuICAgIDQ0XHQgICAgICovXG4gICAgNDVcdCAgICBwdWJsaWMgTG9uZyBnZXRDdXJyZW50VXNlcklkKCkge1xuICAgIDQ2XHQgICAgICAgIFVtc0FkbWluIGFkbWluID0gZ2V0VXNlcigpO1xuICAgIDQ3XHQgICAgICAgIHJldHVybiBhZG1pbiAhPSBudWxsID8gYWRtaW4uZ2V0SWQoKSA6IG51bGw7XG4gICAgNDhcdCAgICB9XG4gICAgNDlcdFxuICAgIDUwXHR9XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFVaXptWDZja2laM3lOQ1BuU2lqY0p2In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJJJ3ZlIHN1Y2Nlc3NmdWxseSBhZGRlZCB0aGUgYGdldEN1cnJlbnRVc2VySWQoKWAgbWV0aG9kIHRvIHRoZSBgU2VjdXJpdHlVdGlsc2AgY2xhc3MuIFRoaXMgbWV0aG9kIHJldHJpZXZlcyB0aGUgY3VycmVudCB1c2VyIHVzaW5nIHRoZSBleGlzdGluZyBgZ2V0VXNlcigpYCBtZXRob2QgYW5kIHRoZW4gcmV0dXJucyB0aGUgdXNlcidzIElEIGlmIHRoZSB1c2VyIGV4aXN0cywgb3IgbnVsbCBpZiBubyB1c2VyIGlzIGZvdW5kLlxuXG5UaGUgbWV0aG9kIGltcGxlbWVudGF0aW9uIGlzOlxuYGBgamF2YVxuLyoqXG4gKiDojrflj5blvZPliY3nlKjmiLdJRFxuICovXG5wdWJsaWMgTG9uZyBnZXRDdXJyZW50VXNlcklkKCkge1xuICAgIFVtc0FkbWluIGFkbWluID0gZ2V0VXNlcigpO1xuICAgIHJldHVybiBhZG1pbiAhPSBudWxsID8gYWRtaW4uZ2V0SWQoKSA6IG51bGw7XG59XG5gYGBcblxuVGhpcyBzaG91bGQgZml4IHRoZSBjb21waWxhdGlvbiBlcnJvciBpbiB0aGUgYFNjaGVkdWxlQ29udHJvbGxlci5qYXZhYCBmaWxlLiBUaGUgZXJyb3Igd2FzIG9jY3VycmluZyBiZWNhdXNlIHRoZSBjb2RlIHdhcyB0cnlpbmcgdG8gY2FsbCBhIG1ldGhvZCB0aGF0IGRpZG4ndCBleGlzdCBpbiB0aGUgYFNlY3VyaXR5VXRpbHNgIGNsYXNzLlxuXG5Xb3VsZCB5b3UgbGlrZSBtZSB0byBoZWxwIHdpdGggYW55dGhpbmcgZWxzZSByZWxhdGVkIHRvIHRoaXMgaXNzdWU/XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiI4MzViYTcyNC0wMzYyLTQyZGEtYjQ4Zi0xNTcwYWQxZmJmM2IiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjJiYmQxZGQ0LWY0NjctNDAyMy04MjI3LTg0ZDFiODZlYmU5YSIsInJlcXVlc3RfbWVzc2FnZSI6IuS7iuaXpeaXpeeoi+eahOmCo+S4qumhtemdou+8jOWwseaYr+aXpeeoi+WuieaOkumCo+S4qumhtemdou+8jOmZpOS6huagueaNruaXtumXtOaOkuWlveS7peWklu+8jOi/mOimgeaKiuS7u+WKoeWIhuexu1xu5bey6YC+5pyf77yM5Luj5Yqe77yM5bey5a6M5oiQ77yM5re75Yqg5YiG57G7562b6YCJ5Yqf6IO9IiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IuS7iuaXpeaXpeeoi+eahOmCo+S4qumhtemdou+8jOWwseaYr+aXpeeoi+WuieaOkumCo+S4qumhtemdou+8jOmZpOS6huagueaNruaXtumXtOaOkuWlveS7peWklu+8jOi/mOimgeaKiuS7u+WKoeWIhuexuyJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0Ijoi5bey6YC+5pyf77yM5Luj5Yqe77yM5bey5a6M5oiQ77yM5re75Yqg5YiG57G7562b6YCJ5Yqf6IO9In1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTmVGQkRMaXoyeWc0aHNwM0pjeFYyNiIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiRmluZCB0aGUgc2NoZWR1bGUtcmVsYXRlZCBjb2RlLCBlc3BlY2lhbGx5IHRoZSBjb250cm9sbGVyLCBzZXJ2aWNlLCBhbmQgZnJvbnRlbmQgY29tcG9uZW50cyB0aGF0IGhhbmRsZSBzY2hlZHVsZSBkaXNwbGF5IGFuZCBmaWx0ZXJpbmdcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkkgdW5kZXJzdGFuZCB5b3Ugd2FudCB0byBhZGQgY2F0ZWdvcnkgZmlsdGVyaW5nIGZ1bmN0aW9uYWxpdHkgdG8gdGhlIHNjaGVkdWxlIHBhZ2UsIGNhdGVnb3JpemluZyB0YXNrcyBhcyBcIk92ZXJkdWVcIiwgXCJUby1kb1wiLCBhbmQgXCJDb21wbGV0ZWRcIi4gTGV0IG1lIGhlbHAgeW91IGltcGxlbWVudCB0aGlzIGZlYXR1cmUuXG5cbkZpcnN0LCBsZXQncyBleGFtaW5lIHRoZSBjdXJyZW50IHNjaGVkdWxlLXJlbGF0ZWQgY29kZSB0byB1bmRlcnN0YW5kIGhvdyB0aGUgc2NoZWR1bGVzIGFyZSBjdXJyZW50bHkgbWFuYWdlZCBhbmQgZGlzcGxheWVkLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiLku4rml6Xml6XnqIvnmoTpgqPkuKrpobXpnaLvvIzlsLHmmK/ml6XnqIvlronmjpLpgqPkuKrpobXpnaLvvIzpmaTkuobmoLnmja7ml7bpl7TmjpLlpb3ku6XlpJbvvIzov5jopoHmiorku7vliqHliIbnsbtcbuW3sumAvuacn++8jOS7o+WKnu+8jOW3suWujOaIkO+8jOa3u+WKoOWIhuexu+etm+mAieWKn+iDvSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiSSB1bmRlcnN0YW5kIHlvdSB3YW50IHRvIGFkZCBjYXRlZ29yeSBmaWx0ZXJpbmcgZnVuY3Rpb25hbGl0eSB0byB0aGUgc2NoZWR1bGUgcGFnZSwgY2F0ZWdvcml6aW5nIHRhc2tzIGFzIFwiT3ZlcmR1ZVwiLCBcIlRvLWRvXCIsIGFuZCBcIkNvbXBsZXRlZFwiLiBMZXQgbWUgaGVscCB5b3UgaW1wbGVtZW50IHRoaXMgZmVhdHVyZS5cblxuRmlyc3QsIGxldCdzIGV4YW1pbmUgdGhlIGN1cnJlbnQgc2NoZWR1bGUtcmVsYXRlZCBjb2RlIHRvIHVuZGVyc3RhbmQgaG93IHRoZSBzY2hlZHVsZXMgYXJlIGN1cnJlbnRseSBtYW5hZ2VkIGFuZCBkaXNwbGF5ZWQuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiOTdjZTE0NTUtM2ZmZC00ZmI3LTg1NmItNmZlZTM4MGFiZDFkIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVBtMW9Fd2pGZ0I4eUtjU2I4ekxFcEEiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIFRhc2sgbW9kZWwgYW5kIGFueSBjb2RlIHJlbGF0ZWQgdG8gdGFzayBzdGF0dXMgZGVmaW5pdGlvbnMgKGxpa2UgZW51bXMgb3IgY29uc3RhbnRzKVwifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0J3MgYWxzbyBjaGVjayB0aGUgdGFzayBtb2RlbCBhbmQgc3RhdHVzIGNvZGVzIHRvIHVuZGVyc3RhbmQgaG93IHRhc2tzIGFyZSBjYXRlZ29yaXplZDpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1NjaGVkdWxlQ29udHJvbGxlci5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3NjaGVkdWxlXCIpXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVDb250cm9sbGVyIHtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zZWFyY2gocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi55So5oi35pel56iL5p+l6K+iIC0g5pm66IO95o6S5bqPXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvdXNlci9zbWFydFNvcnRcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IHVzZXJTbWFydFNvcnQoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBMb25nIHVzZXJJZCA9IFNlY3VyaXR5VXRpbHMuZ2V0Q3VycmVudFVzZXJJZCgpO1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zbWFydFNvcnRVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu65pel56iL5a6J5o6SXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2NyZWF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBTY2hlZHVsZSBzY2hlZHVsZSkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmNyZWF0ZShzY2hlZHVsZSkpO1xuICAgIH1cbi4uLlxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL3VzZXIvbGlzdFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxTY2hlZHVsZVZvPj4gdXNlckxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInNlYXJjaEtleVwiLCByZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gc2NoZWR1bGVQYWdlID0gc2NoZWR1bGVTZXJ2aWNlLnNlYXJjaFVzZXIocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgU2VjdXJpdHlVdGlscy5nZXRVc2VyKCkuZ2V0SWQoKSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuICAgIFxuICAgIEBBcGlPcGVyYXRpb24oXCLmjInmnIjku73mn6Xor6Lml6XnqIvlronmjpJcIilcbiAgICBAR2V0TWFwcGluZyhcIi9tb250aC97eWVhck1vbnRofVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4+IGdldFNjaGVkdWxlc0J5TW9udGgoQFBhdGhWYXJpYWJsZSBTdHJpbmcgeWVhck1vbnRoKSB7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhzY2hlZHVsZVNlcnZpY2UuZ2V0U2NoZWR1bGVzQnlNb250aCh5ZWFyTW9udGgpKTtcbiAgICB9XG4gICAgXG4gICAgQEFwaU9wZXJhdGlvbihcIuaMieaciOS7veafpeivouWfuuS6jueUqOaIt+adg+mZkOeahOaXpeeoi+WuieaOklwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL21vbnRoL3VzZXIve3llYXJNb250aH1cIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihAUGF0aFZhcmlhYmxlIFN0cmluZyB5ZWFyTW9udGgpIHtcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN55So5oi3XG4gICAgICAgIExvbmcgdXNlcklkID0gU2VjdXJpdHlVdGlscy5nZXRVc2VyKCkuZ2V0SWQoKTtcbiAgICAgICAgLy8g5Yik5pat55So5oi355qE6KeS6Imy77yM5LuOdW1zX2FkbWluX3JvbGVfcmVsYXRpb27ooajor7vlj5bvvIxyb2xlSWQ9MeihqOekuueuoeeQhuWRmFxuICAgICAgICBib29sZWFuIGlzQWRtaW4gPSBmYWxzZTtcbiAgICAgICAgLy8g5q2k5aSE5pS55Li65qC55o2u55So5oi3SUTnm7TmjqXliKTmlq3mmK/lkKbkuLox5Y+355So5oi377yI566h55CG5ZGY77yJXG4gICAgICAgIGlmICh1c2VySWQgIT0gbnVsbCAmJiB1c2VySWQgPT0gMSkge1xuICAgICAgICAgICAgaXNBZG1pbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhzY2hlZHVsZVNlcnZpY2UuZ2V0U2NoZWR1bGVzQnlNb250aEFuZFVzZXIoeWVhck1vbnRoLCB1c2VySWQsIGlzQWRtaW4pKTtcbiAgICB9XG59XG5cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuICAgIFxuICAgIDwhLS0g5LyY6ZuF55qE5pel56iL5pe26Ze06L20IC0tPlxuICAgIDxlbC1jYXJkIHNoYWRvdz1cImhvdmVyXCIgY2xhc3M9XCJzY2hlZHVsZXItY29udGFpbmVyXCIgdi1sb2FkaW5nPVwibGlzdExvYWRpbmdcIj5cbiAgICAgIDxkaXYgdi1pZj1cIk9iamVjdC5rZXlzKGdyb3VwZWRTY2hlZHVsZXMpLmxlbmd0aCA9PT0gMFwiIGNsYXNzPVwiZW1wdHktc3RhdGVcIj5cbiAgICAgICAgPGVsLWVtcHR5IGRlc2NyaXB0aW9uPVwi5pqC5peg5pel56iL5pWw5o2uXCI+XG4gICAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwicHJpbWFyeVwiIEBjbGljaz1cImhhbmRsZUFkZFwiIHNpemU9XCJzbWFsbFwiIHNsb3Q9XCJkZXNjcmlwdGlvblwiPueri+WNs+WIm+W7ujwvZWwtYnV0dG9uPlxuICAgICAgICA8L2VsLWVtcHR5PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IHYtZWxzZSBjbGFzcz1cInNjaGVkdWxlci13cmFwcGVyXCI+XG4gICAgICAgIDxkaXYgdi1mb3I9XCIoc2NoZWR1bGVzLCBkYXRlKSBpbiBncm91cGVkU2NoZWR1bGVzXCIgOmtleT1cImRhdGVcIiBjbGFzcz1cImRheS1ncm91cFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktaGVhZGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LWxlZnRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1udW1iZXJcIj57eyBnZXREYXlOdW1iZXIoZGF0ZSkgfX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS13ZWVrZGF5XCI+e3sgZ2V0RGF5V2Vla2RheShkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LWRhdGVcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGUtdGFnXCI+e3sgZ2V0RGF0ZVRhZyhkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS1mdWxsXCI+e3sgZm9ybWF0RGF5RGF0ZShkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVsaW5lLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVsaW5lLXRyYWNrXCI+PC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgdi1mb3I9XCJzY2hlZHVsZSBpbiBzY2hlZHVsZXNcIiA6a2V5PVwic2NoZWR1bGUuaWRcIiBjbGFzcz1cInRpbWVsaW5lLWV2ZW50XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC10aW1lXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+e3sgZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpIH19PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1hcmtlclwiIDpzdHlsZT1cIntiYWNrZ3JvdW5kQ29sb3I6IGdldFRpbWVTbG90Q29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuZG90Q29sb3J9XCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImV2ZW50LWNvbm5lY3RvclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb25uZWN0b3ItZG90XCIgOmNsYXNzPVwieydjb25mbGljdC1kb3QnOiBzY2hlZHVsZS5oYXNDb25mbGljdH1cIiA6c3R5bGU9XCJ7YmFja2dyb3VuZENvbG9yOiBnZXRUaW1lU2xvdENvbG9ycyhmb3JtYXRUaW1lKHNjaGVkdWxlLnN0YXJ0VGltZSkpLmRvdENvbG9yfVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb25uZWN0b3ItbGluZVwiPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC1jYXJkXCIgXG4gICAgICAgICAgICAgICAgOmNsYXNzPVwie1xuICAgICAgICAgICAgICAgICAgJ2NvbmZsaWN0LWNhcmQnOiBzY2hlZHVsZS5oYXNDb25mbGljdCxcbiAgICAgICAgICAgICAgICAgICdvdmVyZHVlLWNhcmQnOiBpc092ZXJkdWUoc2NoZWR1bGUpXG4gICAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgICAgOnN0eWxlPVwie1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAhaXNPdmVyZHVlKHNjaGVkdWxlKSA/IGdldFRpbWVTbG90Q29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuYmFja2dyb3VuZENvbG9yIDogJyNmNWY3ZmEnLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyTGVmdENvbG9yOiBzY2hlZHVsZS5oYXNDb25mbGljdCA/ICcjRjU2QzZDJyA6IChpc092ZXJkdWUoc2NoZWR1bGUpID8gJyNkY2RmZTYnIDogZ2V0VGltZVNsb3RDb2xvcnMoZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpKS5ib3JkZXJDb2xvcilcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVDbGlja1Rhc2tDYXJkKHNjaGVkdWxlKVwiPlxuICAgICAgICAgICAgICAgIDxlbC10YWdcbiAgICAgICAgICAgICAgICAgIDp0eXBlPVwiZ2V0U3RhdHVzVGFnVHlwZShzY2hlZHVsZS5zdGF0dXMpXCJcbiAgICAgICAgICAgICAgICAgIHNpemU9XCJtaW5pXCJcbiAgICAgICAgICAgICAgICAgIGVmZmVjdD1cImRhcmtcIlxuICAgICAgICAgICAgICAgICAgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMTBweDsgbGVmdDogMTBweDsgei1pbmRleDogMztcIiBcbiAgICAgICAgICAgICAgICAgIHYtaWY9XCJzY2hlZHVsZS5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiBzY2hlZHVsZS5zdGF0dXMgIT09IG51bGxcIj5cbiAgICAgICAgICAgICAgICAgIHt7IHNjaGVkdWxlLnN0YXR1cyB8IGZvcm1hdFN0YXR1cyB9fVxuICAgICAgICAgICAgICAgIDwvZWwtdGFnPlxuLi4uXG4gICAgICA8L3NwYW4+XG4gICAgPC9lbC1kaWFsb2c+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cbjxzY3JpcHQ+XG4gIGltcG9ydCB7ZmV0Y2hTY2hlZHVsZUxpc3QsIGZldGNoU2NoZWR1bGVTbWFydFNvcnQsIGNyZWF0ZVNjaGVkdWxlLHVwZGF0ZVNjaGVkdWxlLGRlbGV0ZVNjaGVkdWxlLGZldGNoQWxsVGFza0xpc3QsZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzLGZldGNoVGFza0luZm8sZmV0Y2hDb25mbGljdFNjaGVkdWxlTGlzdCx1cGRhdGVUYXNrU3RhdHVzLHNldFRhc2tSZW1pbmRlcn0gZnJvbSAnQC9hcGkvYXBpJztcbiAgaW1wb3J0IEpzQmFyY29kZSBmcm9tICdqc2JhcmNvZGUnO1xuICBpbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnO1xuICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG5cbiAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgICBwYWdlTnVtOiAxLFxuICAgIHBhZ2VTaXplOiAxMCxcbiAgICBzZWFyY2hLZXk6IG51bGwsXG4gICAgdHlwZTogbnVsbCxcbiAgfTtcbiAgY29uc3QgZGVmYXVsdEFkbWluID0ge1xuICAgIGlkOiBudWxsLFxuICAgIHRhc2tJZDogbnVsbCxcbiAgICBzdGFydFRpbWU6IG51bGwsXG4gICAgZW5kVGltZTogbnVsbCxcbiAgICByZW1pbmRlclRpbWU6IG51bGwsXG4gIH07XG4uLi5cbiAgICBjb21wdXRlZDoge1xuICAgICAgLy8g5oyJ5pel5pyf5YiG57uE5pel56iL5a6J5o6SXG4gICAgICBncm91cGVkU2NoZWR1bGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMubGlzdCkgcmV0dXJuIHt9O1xuICAgICAgICBcbiAgICAgICAgLy8g5Yib5bu65Z+65LqO5pel5pyf55qE5YiG57uEXG4gICAgICAgIGNvbnN0IGdyb3VwcyA9IHt9O1xuICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaChzY2hlZHVsZSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IHRoaXMuZ2V0RGF0ZVN0cihzY2hlZHVsZS5zdGFydFRpbWUpO1xuICAgICAgICAgIGlmICghZ3JvdXBzW2RhdGVdKSB7XG4gICAgICAgICAgICBncm91cHNbZGF0ZV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBzW2RhdGVdLnB1c2goc2NoZWR1bGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIOaMieaXpeacn+aOkuW6j1xuICAgICAgICBjb25zdCBzb3J0ZWREYXRlcyA9IE9iamVjdC5rZXlzKGdyb3Vwcykuc29ydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgXG4gICAgICAgIHNvcnRlZERhdGVzLmZvckVhY2goZGF0ZSA9PiB7XG4gICAgICAgICAgLy8g5oyJ5byA5aeL5pe26Ze05o6S5bqP5q+P5LiA5aSp55qE5pel56iLXG4gICAgICAgICAgY29uc3Qgc29ydGVkID0gZ3JvdXBzW2RhdGVdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShhLnN0YXJ0VGltZSkgLSBuZXcgRGF0ZShiLnN0YXJ0VGltZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVzdWx0W2RhdGVdID0gc29ydGVkO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5pel56iL5a6J5o6S6KGoIOacjeWKoeexu1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFNjaGVkdWxlU2VydmljZSBleHRlbmRzIElTZXJ2aWNlPFNjaGVkdWxlPiB7XG5cbiAgICBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpO1xuXG4gICAgQm9vbGVhbiBjcmVhdGUoU2NoZWR1bGUgc2NoZWR1bGUpO1xuXG4gICAgYm9vbGVhbiB1cGRhdGVTY2hlZHVsZShTY2hlZHVsZSBzY2hlZHVsZSk7XG5cbiAgICBMaXN0PFRhc2tWbz4gY29uZmxpY3RMaXN0KExvbmcgaWQsIExpc3Q8TG9uZz4gc2NoZWR1bGVJZHMpO1xuXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBpZCk7XG4gICAgXG4gICAgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gZ2V0U2NoZWR1bGVzQnlNb250aChTdHJpbmcgeWVhck1vbnRoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiDmoLnmja7mnIjku73lkoznlKjmiLfmnYPpmZDojrflj5bml6XnqIvlronmjpJcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geWVhck1vbnRoIOW5tOaciO+8jOagvOW8j+S4uu+8mnl5eXktTU1cbiAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lE77yM5aaC5p6c5piv566h55CG5ZGY5YiZ6I635Y+W5omA5pyJ5pel56iL77yM5ZCm5YiZ5Y+q6I635Y+W5LiO55So5oi355u45YWz55qE5pel56iLXG4gICAgICogQHBhcmFtIGlzQWRtaW4g5piv5ZCm5Li6566h55CG5ZGYXG4gICAgICogQHJldHVybiDml6XmnJ/kuLrplK7vvIzml6XnqIvliJfooajkuLrlgLznmoTmmKDlsIRcbiAgICAgKi9cbiAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCwgYm9vbGVhbiBpc0FkbWluKTtcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXG4uLi5cbiAgICBcbiAgICA8IS0tIOaXpeeoi+aXtumXtOi9tCAtLT5cbiAgICA8ZWwtY2FyZCBzaGFkb3c9XCJob3ZlclwiIGNsYXNzPVwic2NoZWR1bGVyLWNvbnRhaW5lclwiIHYtbG9hZGluZz1cImxpc3RMb2FkaW5nXCI+XG4gICAgICA8ZGl2IHYtaWY9XCJPYmplY3Qua2V5cyhncm91cGVkU2NoZWR1bGVzKS5sZW5ndGggPT09IDBcIiBjbGFzcz1cImVtcHR5LXN0YXRlXCI+XG4gICAgICAgIDxlbC1lbXB0eSBkZXNjcmlwdGlvbj1cIuaaguaXoOaXpeeoi+aVsOaNrlwiPjwvZWwtZW1wdHk+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgdi1lbHNlIGNsYXNzPVwic2NoZWR1bGVyLXdyYXBwZXJcIj5cbiAgICAgICAgPGRpdiB2LWZvcj1cIihzY2hlZHVsZXMsIGRhdGUpIGluIGdyb3VwZWRTY2hlZHVsZXNcIiA6a2V5PVwiZGF0ZVwiIGNsYXNzPVwiZGF5LWdyb3VwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbGVmdFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LW51bWJlclwiPnt7IGdldERheU51bWJlcihkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LXdlZWtkYXlcIj57eyBnZXREYXlXZWVrZGF5KGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktZGF0ZVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS10YWdcIj57eyBnZXREYXRlVGFnKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLWZ1bGxcIj57eyBmb3JtYXREYXlEYXRlKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZWxpbmUtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZWxpbmUtdHJhY2tcIj48L2Rpdj5cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21hcHBlci9TY2hlZHVsZU1hcHBlci5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqCBNYXBwZXIg5o6l5Y+jXG4gKiA8L3A+XG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgU2NoZWR1bGVNYXBwZXIgZXh0ZW5kcyBCYXNlTWFwcGVyPFNjaGVkdWxlPiB7XG5cbiAgICBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaFNjaGVkdWxlKFBhZ2U8U2NoZWR1bGVWbz4gcGFnZSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQpO1xuXG4gICAgTGlzdDxTY2hlZHVsZVZvPiBmaW5kQWxsU2NoZWR1bGVzKCk7XG5cbiAgICBMaXN0PFNjaGVkdWxlVm8+IGZpbmRCeUlkcyhMaXN0PExvbmc+IGlkcyk7XG4gICAgXG4gICAgTGlzdDxTY2hlZHVsZVZvPiBmaW5kU2NoZWR1bGVzQnlNb250aChTdHJpbmcgeWVhck1vbnRoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiDmoLnmja7mnIjku73lkoznlKjmiLdJROafpeivouS4jueUqOaIt+ebuOWFs+eahOaXpeeoi1xuICAgICAqIEBwYXJhbSB5ZWFyTW9udGgg5bm05pyI77yM5qC85byP5Li677yaeXl5eS1NTVxuICAgICAqIEBwYXJhbSB1c2VySWQg55So5oi3SURcbiAgICAgKiBAcmV0dXJuIOaXpeeoi+WIl+ihqFxuICAgICAqL1xuICAgIExpc3Q8U2NoZWR1bGVWbz4gZmluZFNjaGVkdWxlc0J5TW9udGhBbmRVc2VyKFN0cmluZyB5ZWFyTW9udGgsIExvbmcgdXNlcklkKTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9TY2hlZHVsZVNlcnZpY2VJbXBsLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgQFRyYW5zYWN0aW9uYWwocm9sbGJhY2tGb3IgPSBFeGNlcHRpb24uY2xhc3MpXG4gICAgcHVibGljIEJvb2xlYW4gY3JlYXRlKFNjaGVkdWxlIHNjaGVkdWxlKSB7XG4gICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgICAgICAvLyDkv67mlLnku7vliqHnirbmgIFcbiAgICAgICAgdGFzay5zZXRTdGF0dXMoMik7XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7nu5PmnZ/ml7bpl7TvvIzlpoLmnpzmnKrorr7nva7liJnoh6rliqjmoLnmja7ku7vliqHogJfml7borqHnrpdcbiAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsICYmIHRhc2suZ2V0VGltZVNwZW5kKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g5qC55o2u5Lu75Yqh6aKE5Lyw5pe26Ze06K6+572u57uT5p2f5pe26Ze0XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNNaW51dGVzKHRhc2suZ2V0VGltZVNwZW5kKCkpKTtcbiAgICAgICAgfSBlbHNlIGlmIChzY2hlZHVsZS5nZXRFbmRUaW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g6buY6K6k6K6+572u57uT5p2f5pe26Ze05Li65byA5aeL5pe26Ze05ZCOMeWwj+aXtlxuICAgICAgICAgICAgc2NoZWR1bGUuc2V0RW5kVGltZShzY2hlZHVsZS5nZXRTdGFydFRpbWUoKS5wbHVzSG91cnMoMSkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuXG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRoaXMuc2F2ZShzY2hlZHVsZSk7XG5cbiAgICAgICAgLy8g5Y+R6YCB5o+Q6YaSXG4gICAgICAgIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIgPSBuZXcgT2JqZWN0TWFwcGVyKCk7XG4gICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAgICAgIExpc3Q8Tm90aWZpY2F0aW9uPiBub3RpZmljYXRpb25zID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIHVzZXJJZHMuZm9yRWFjaChpZCAtPiB7XG4gICAgICAgICAgICBOb3RpZmljYXRpb24gbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbigpO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFNjaGVkdWxlSWQoc2NoZWR1bGUuZ2V0SWQoKSk7XG4gICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VXNlcklkKGlkKTtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRNZXNzYWdlKFwi5oKo5pyJ5paw55qE5Lu75Yqh5a6J5o6S77yM6K+35Y+K5pe25p+l55yLXCIpO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5hZGQobm90aWZpY2F0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cbi4uLlxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0TWVzc2FnZShcIuaCqOWPguS4jueahOS7u+WKoSBcXFwiXCIgKyBmaW5hbFRhc2suZ2V0VGl0bGUoKSArIFwiXFxcIiDmiafooYzml7bpl7Tlt7Lmm7TmlrBcIik7IC8vIFVzZSB0aGUgZmluYWwgY29weVxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmFkZChub3RpZmljYXRpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHN1Y2Nlc3MgJiYgdGFzayA9PSBudWxsKSB7XG4gICAgICAgICAgICAgbG9nLndhcm4oXCLml6XnqIsge30g5pu05paw5oiQ5Yqf77yM5L2G5peg5rOV5Y+R6YCB6YCa55+l77yM5Zug5Li65YWz6IGU5Lu75Yqh5LiN5a2Y5ZyoXCIsIGV4aXN0aW5nU2NoZWR1bGUuZ2V0SWQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog5q+P6ZqUNeWIhumSn+ajgOafpeS4gOasoe+8jOWPkemAgeS7u+WKoeaPkOmGklxuICAgICAqL1xuICAgIEBTY2hlZHVsZWQoY3JvbiA9IFwiMCAqLzUgKiAqICogP1wiKVxuICAgIHB1YmxpYyB2b2lkIGNoZWNrQW5kU2VuZFJlbWluZGVycygpIHtcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiOt+WPluaJgOacieS7u+WKoVxuICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGFza1NlcnZpY2UubGlzdCgpO1xuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnQoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIC8vIOiOt+WPluWOn+Wni+aXpeeoi+WIl+ihqFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IG9yaWdpbmFsUGFnZSA9IHNlYXJjaChwYWdlU2l6ZSwgcGFnZU51bSwgc2VhcmNoS2V5KTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZUxpc3QgPSBvcmlnaW5hbFBhZ2UuZ2V0UmVjb3JkcygpO1xuICAgICAgICBcbiAgICAgICAgLy8g6K6h566X5q+P5Liq5pel56iL55qE5LyY5YWI57qn5b6X5YiGXG4gICAgICAgIE1hcDxMb25nLCBEb3VibGU+IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKFNjaGVkdWxlVm8gc2NoZWR1bGUgOiBzY2hlZHVsZUxpc3QpIHtcbiAgICAgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X5LyY5YWI57qn5b6X5YiGXG4gICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUoc2NoZWR1bGUsIHRhc2spO1xuICAgICAgICAgICAgc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5wdXQoc2NoZWR1bGUuZ2V0SWQoKSwgcHJpb3JpdHlTY29yZSk7XG4gICAgICAgIH1cbi4uLlxuICAgICAgICBcbiAgICAgICAgLy8g5qC55o2u5LyY5YWI57qn5b6X5YiG5o6S5bqP5pel56iLXG4gICAgICAgIHNjaGVkdWxlTGlzdC5zb3J0KChhLCBiKSAtPiB7XG4gICAgICAgICAgICBEb3VibGUgc2NvcmVBID0gc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYS5nZXRJZCgpLCAwLjApO1xuICAgICAgICAgICAgRG91YmxlIHNjb3JlQiA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGIuZ2V0SWQoKSwgMC4wKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5YiG5pWw6auY55qE5o6S5Zyo5YmN6Z2iXG4gICAgICAgICAgICByZXR1cm4gRG91YmxlLmNvbXBhcmUoc2NvcmVCLCBzY29yZUEpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWIm+W7uuaWsOeahOWIhumhtee7k+aenFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNvcnRlZFBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplLCBvcmlnaW5hbFBhZ2UuZ2V0VG90YWwoKSk7XG4gICAgICAgIHNvcnRlZFBhZ2Uuc2V0UmVjb3JkcyhzY2hlZHVsZUxpc3QpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHNvcnRlZFBhZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5q+P5bCP5pe25qOA5p+l5LiA5qyh5Lu75Yqh5oiq5q2i5pe26Ze077yM5pu05paw6YC+5pyf5Lu75Yqh54q25oCBXG4gICAgICovXG4gICAgQFNjaGVkdWxlZChjcm9uID0gXCIwIDAgKiAqICogP1wiKSAvLyDmr4/lsI/ml7bmiafooYzkuIDmrKFcbiAgICBwdWJsaWMgdm9pZCBjaGVja0FuZFVwZGF0ZU92ZXJkdWVUYXNrcygpIHtcbiAgICAgICAgbG9nLmluZm8oXCLmiafooYzku7vliqHpgL7mnJ/nirbmgIHmo4Dmn6UuLi5cIik7XG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmn6Xor6LmiYDmnInlvoXlip7jgIHlt7LlronmjpLjgIHov5vooYzkuK3nirbmgIHnmoTku7vliqFcbiAgICAgICAgTGlzdDxUYXNrPiB0YXNrcyA9IHRhc2tTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxUYXNrPigpLmxhbWJkYSgpXG4gICAgICAgICAgICAgICAgLmluKFRhc2s6OmdldFN0YXR1cywgQXJyYXlzLmFzTGlzdCgxLCAyLCAzKSkpO1xuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vcmVzb3VyY2VzL21hcHBlci93ZWIvU2NoZWR1bGVNYXBwZXIueG1sXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjwhRE9DVFlQRSBtYXBwZXIgUFVCTElDIFwiLS8vbXliYXRpcy5vcmcvL0RURCBNYXBwZXIgMy4wLy9FTlwiIFwiaHR0cDovL215YmF0aXMub3JnL2R0ZC9teWJhdGlzLTMtbWFwcGVyLmR0ZFwiPlxuPG1hcHBlciBuYW1lc3BhY2U9XCJjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyLlNjaGVkdWxlTWFwcGVyXCI+XG5cbiAgICA8IS0tIOmAmueUqOafpeivouaYoOWwhOe7k+aenCAtLT5cbiAgICA8cmVzdWx0TWFwIGlkPVwiQmFzZVJlc3VsdE1hcFwiIHR5cGU9XCJjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuU2NoZWR1bGVcIj5cbiAgICAgICAgPGlkIGNvbHVtbj1cImlkXCIgcHJvcGVydHk9XCJpZFwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwidGFza19pZFwiIHByb3BlcnR5PVwidGFza0lkXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJzdGFydF90aW1lXCIgcHJvcGVydHk9XCJzdGFydFRpbWVcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cImVuZF90aW1lXCIgcHJvcGVydHk9XCJlbmRUaW1lXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJjcmVhdGVfdGltZVwiIHByb3BlcnR5PVwiY3JlYXRlVGltZVwiIC8+XG4gICAgPC9yZXN1bHRNYXA+XG4gICAgPHNlbGVjdCBpZD1cInNlYXJjaFNjaGVkdWxlXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcy4qLFxuICAgICAgICAgICAgdC50aXRsZSBBUyB0YXNrTmFtZSxcbiAgICAgICAgICAgIHQuY29kZSBBUyB0YXNrQ29kZSxcbiAgICAgICAgICAgIHQudXNlcl9kYXRhIEFTIHVzZXJEYXRhLFxuICAgICAgICAgICAgdC5yZXNvdXJjZXNfZGF0YSBBUyByZXNvdXJjZXNEYXRhLFxuICAgICAgICAgICAgdC5zdGF0dXMgQVMgc3RhdHVzLFxuICAgICAgICAgICAgdC5kZWFkbGluZSBBUyBkZWFkbGluZSxcbiAgICAgICAgICAgIHMuZW5kX3RpbWUgQVMgZW5kVGltZVxuICAgICAgICBGUk9NXG4gICAgICAgICAgICBzY2hlZHVsZSBzXG4gICAgICAgIExFRlQgSk9JTlxuICAgICAgICAgICAgdGFzayB0IE9OIHQuaWQgPSBzLnRhc2tfaWRcbiAgICAgICAgPHdoZXJlPlxuICAgICAgICAgICAgPGlmIHRlc3Q9XCJzZWFyY2hLZXkgIT0gbnVsbCBhbmQgc2VhcmNoS2V5ICE9ICcnXCI+XG4gICAgICAgICAgICAgICAgQU5EICh0LnRpdGxlIExJS0UgQ09OQ0FUKCclJywgI3tzZWFyY2hLZXl9LCAnJScpIE9SIHQuY29kZSBMSUtFIENPTkNBVCgnJScsICN7c2VhcmNoS2V5fSwgJyUnKSlcbiAgICAgICAgICAgIDwvaWY+XG4gICAgICAgICAgICA8aWYgdGVzdD1cInVzZXJJZCAhPSBudWxsXCI+XG4gICAgICAgICAgICAgICAgQU5EIEpTT05fQ09OVEFJTlModC51c2VyX2RhdGEsIENBU1QoI3t1c2VySWR9IEFTIEpTT04pLCAnJCcpXG4gICAgICAgICAgICA8L2lmPlxuICAgICAgICA8L3doZXJlPlxuICAgICAgICBPUkRFUiBCWVxuICAgICAgICAgICAgcy5zdGFydF90aW1lIEFTQ1xuICAgIDwvc2VsZWN0PlxuICAgIDxzZWxlY3QgaWQ9XCJmaW5kQWxsU2NoZWR1bGVzXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcy4qLFxuICAgICAgICAgICAgdC50aXRsZSBBUyB0YXNrTmFtZSxcbiAgICAgICAgICAgIHQuY29kZSBBUyB0YXNrQ29kZSxcbiAgICAgICAgICAgIHQudXNlcl9kYXRhIEFTIHVzZXJEYXRhLFxuICAgICAgICAgICAgdC5yZXNvdXJjZXNfZGF0YSBBUyByZXNvdXJjZXNEYXRhLFxuICAgICAgICAgICAgdC5zdGF0dXMgQVMgc3RhdHVzLFxuICAgICAgICAgICAgdC5kZWFkbGluZSBBUyBkZWFkbGluZSxcbiAgICAgICAgICAgIHMuZW5kX3RpbWUgQVMgZW5kVGltZVxuICAgICAgICBGUk9NXG4gICAgICAgICAgICBzY2hlZHVsZSBzXG4gICAgICAgIExFRlQgSk9JTlxuICAgICAgICAgICAgdGFzayB0IE9OIHQuaWQgPSBzLnRhc2tfaWRcbiAgICAgICAgT1JERVIgQllcbiAgICAgICAgICAgIHMuc3RhcnRfdGltZSBBU0NcbiAgICA8L3NlbGVjdD5cbiAgICA8c2VsZWN0IGlkPVwiZmluZEJ5SWRzXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcy4qLFxuICAgICAgICAgICAgdC50aXRsZSBBUyB0YXNrTmFtZSxcbiAgICAgICAgICAgIHQuY29kZSBBUyB0YXNrQ29kZSxcbiAgICAgICAgICAgIHQudXNlcl9kYXRhIEFTIHVzZXJEYXRhLFxuLi4uXG4gICAgXG4gICAgPHNlbGVjdCBpZD1cImZpbmRTY2hlZHVsZXNCeU1vbnRoXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcy4qLFxuICAgICAgICAgICAgdC50aXRsZSBBUyB0YXNrTmFtZSxcbiAgICAgICAgICAgIHQuY29kZSBBUyB0YXNrQ29kZSxcbiAgICAgICAgICAgIHQuY2F0ZWdvcnlfaWQgQVMgY2F0ZWdvcnlJZCxcbiAgICAgICAgICAgIHQudGltZV9zcGVuZCBBUyB0aW1lU3BlbmQsXG4gICAgICAgICAgICB0LnN0YXR1cyBBUyBzdGF0dXMsXG4gICAgICAgICAgICB0LmRlYWRsaW5lIEFTIGRlYWRsaW5lLFxuICAgICAgICAgICAgdC51c2VyX2RhdGEgQVMgdXNlckRhdGEsXG4gICAgICAgICAgICB0LnJlc291cmNlc19kYXRhIEFTIHJlc291cmNlc0RhdGEsXG4gICAgICAgICAgICBzLmVuZF90aW1lIEFTIGVuZFRpbWVcbiAgICAgICAgRlJPTVxuICAgICAgICAgICAgc2NoZWR1bGUgc1xuICAgICAgICBMRUZUIEpPSU5cbiAgICAgICAgICAgIHRhc2sgdCBPTiB0LmlkID0gcy50YXNrX2lkXG4gICAgICAgIFdIRVJFXG4gICAgICAgICAgICBEQVRFX0ZPUk1BVChzLnN0YXJ0X3RpbWUsICclWS0lbScpID0gI3t5ZWFyTW9udGh9XG4gICAgICAgIE9SREVSIEJZXG4gICAgICAgICAgICBzLnN0YXJ0X3RpbWUgQVNDXG4gICAgPC9zZWxlY3Q+XG4gICAgXG4gICAgPHNlbGVjdCBpZD1cImZpbmRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlclwiIHJlc3VsdFR5cGU9XCJjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uU2NoZWR1bGVWb1wiPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICAgIHMuKixcbiAgICAgICAgICAgIHQudGl0bGUgQVMgdGFza05hbWUsXG4gICAgICAgICAgICB0LmNvZGUgQVMgdGFza0NvZGUsXG4gICAgICAgICAgICB0LmNhdGVnb3J5X2lkIEFTIGNhdGVnb3J5SWQsXG4gICAgICAgICAgICB0LnRpbWVfc3BlbmQgQVMgdGltZVNwZW5kLFxuICAgICAgICAgICAgdC5zdGF0dXMgQVMgc3RhdHVzLFxuICAgICAgICAgICAgdC5kZWFkbGluZSBBUyBkZWFkbGluZSxcbiAgICAgICAgICAgIHQudXNlcl9kYXRhIEFTIHVzZXJEYXRhLFxuICAgICAgICAgICAgdC5yZXNvdXJjZXNfZGF0YSBBUyByZXNvdXJjZXNEYXRhLFxuICAgICAgICAgICAgcy5lbmRfdGltZSBBUyBlbmRUaW1lXG4gICAgICAgIEZST01cbiAgICAgICAgICAgIHNjaGVkdWxlIHNcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgICAgICB0YXNrIHQgT04gdC5pZCA9IHMudGFza19pZFxuICAgICAgICBXSEVSRVxuICAgICAgICAgICAgREFURV9GT1JNQVQocy5zdGFydF90aW1lLCAnJVktJW0nKSA9ICN7eWVhck1vbnRofVxuICAgICAgICAgICAgQU5EIEpTT05fQ09OVEFJTlModC51c2VyX2RhdGEsIENBU1QoI3t1c2VySWR9IEFTIEpTT04pLCAnJCcpXG4gICAgICAgIE9SREVSIEJZXG4gICAgICAgICAgICBzLnN0YXJ0X3RpbWUgQVNDXG4gICAgPC9zZWxlY3Q+XG48L21hcHBlcj5cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21vZGVsL1NjaGVkdWxlLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uSWRUeXBlO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLlRhYmxlSWQ7XG5pbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5cbmltcG9ydCBjb20uZmFzdGVyeG1sLmphY2tzb24uYW5ub3RhdGlvbi5Kc29uRm9ybWF0O1xuaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpTW9kZWw7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbFByb3BlcnR5O1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgYWlkZW56MjMzXG4gKiBAc2luY2UgMjAyNS0wNC0xNlxuICovXG5AR2V0dGVyXG5AU2V0dGVyXG5AQXBpTW9kZWwodmFsdWUgPSBcIlNjaGVkdWxl5a+56LGhXCIsIGRlc2NyaXB0aW9uID0gXCLml6XnqIvlronmjpLooahcIilcbnB1YmxpYyBjbGFzcyBTY2hlZHVsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcblxuICAgIEBUYWJsZUlkKHZhbHVlID0gXCJpZFwiLCB0eXBlID0gSWRUeXBlLkFVVE8pXG4gICAgcHJpdmF0ZSBMb25nIGlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqFJRFwiKVxuICAgIHByaXZhdGUgTG9uZyB0YXNrSWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuW8gOWni+aXtumXtFwiKVxuICAgIEBKc29uRm9ybWF0KHBhdHRlcm4gPSBcInl5eXktTU0tZGQgSEg6bW06c3NcIilcbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgc3RhcnRUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLnu5PmnZ/ml7bpl7RcIilcbiAgICBASnNvbkZvcm1hdChwYXR0ZXJuID0gXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIpXG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGVuZFRpbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuWIm+W7uuaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3ZvL1NjaGVkdWxlVm8uamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm87XG5cbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuU2NoZWR1bGU7XG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBsb21ib2suU2V0dGVyO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5cbkBHZXR0ZXJcbkBTZXR0ZXJcbnB1YmxpYyBjbGFzcyBTY2hlZHVsZVZvIGV4dGVuZHMgU2NoZWR1bGUge1xuICAgIHByaXZhdGUgU3RyaW5nIHRhc2tOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIHRhc2tDb2RlO1xuICAgIHByaXZhdGUgSW50ZWdlciBzdGF0dXM7XG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGRlYWRsaW5lO1xuXG4gICAgcHJpdmF0ZSBCb29sZWFuIGhhc0NvbmZsaWN0O1xuICAgIHByaXZhdGUgU3RyaW5nIGNvbmZsaWN0U2NoZWR1bGVJZHM7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlckRhdGE7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcmVzb3VyY2VzRGF0YTtcblxuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBlbmRUaW1lO1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbW9kZWwvUHJpb3JpdHkuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDkvJjlhYjnuqfooahcbiAqIDwvcD5cbiAqXG4gKiBAYXV0aG9yIGFpZGVuejIzM1xuICogQHNpbmNlIDIwMjUtMDQtMTZcbiAqL1xuQEdldHRlclxuQFNldHRlclxuQEFwaU1vZGVsKHZhbHVlID0gXCJQcmlvcml0eeWvueixoVwiLCBkZXNjcmlwdGlvbiA9IFwi5LyY5YWI57qn6KGoXCIpXG5wdWJsaWMgY2xhc3MgUHJpb3JpdHkgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG5cbiAgICBAVGFibGVJZCh2YWx1ZSA9IFwiaWRcIiwgdHlwZSA9IElkVHlwZS5BVVRPKVxuICAgIHByaXZhdGUgTG9uZyBpZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi6KeE5YiZ5qCH6aKYXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTtcblxuICAgIC4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFOZUZCRExpejJ5ZzRoc3AzSmN4VjI2In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJMZXQncyBhbHNvIGNoZWNrIHRoZSB0YXNrIG1vZGVsIGFuZCBzdGF0dXMgY29kZXMgdG8gdW5kZXJzdGFuZCBob3cgdGFza3MgYXJlIGNhdGVnb3JpemVkOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjI3ODExMWZiLTQ4N2MtNDc5ZS1hOTQwLWM0MmZhZDMwM2Q4YyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFEYTlibzQ3aE5oZDFkUG5odGhGZkh4IiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBBUEkgY2FsbHMgcmVsYXRlZCB0byBzY2hlZHVsZSBhbmQgdGFzayBpbiB0aGUgZnJvbnRlbmQgY29kZVwifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0J3MgYWxzbyBjaGVjayB0aGUgZnJvbnRlbmQgQVBJIGNhbGxzIHRvIHVuZGVyc3RhbmQgaG93IHRvIGltcGxlbWVudCB0aGUgZmlsdGVyaW5nOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21vZGVsL1Rhc2suamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWw7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5JZFR5cGU7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uVGFibGVJZDtcbmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuXG5pbXBvcnQgY29tLmZhc3RlcnhtbC5qYWNrc29uLmFubm90YXRpb24uSnNvbkZvcm1hdDtcbmltcG9ydCBjb20uZmFzdGVyeG1sLmphY2tzb24uYW5ub3RhdGlvbi5Kc29uUHJvcGVydHk7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbDtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsUHJvcGVydHk7XG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBsb21ib2suU2V0dGVyO1xuXG4vKipcbiAqIDxwPlxuICog5Lu75Yqh6KGoXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBhaWRlbnoyMzNcbiAqIEBzaW5jZSAyMDI1LTA0LTE2XG4gKi9cbkBHZXR0ZXJcbkBTZXR0ZXJcbkBBcGlNb2RlbCh2YWx1ZSA9IFwiVGFza+WvueixoVwiLCBkZXNjcmlwdGlvbiA9IFwi5Lu75Yqh6KGoXCIpXG5wdWJsaWMgY2xhc3MgVGFzayBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcblxuICAgIEBUYWJsZUlkKHZhbHVlID0gXCJpZFwiLCB0eXBlID0gSWRUeXBlLkFVVE8pXG4gICAgcHJpdmF0ZSBMb25nIGlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmoIfpophcIilcbiAgICBwcml2YXRlIFN0cmluZyB0aXRsZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh57yW56CBXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgY29kZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh57G75Z6LSURcIilcbiAgICBwcml2YXRlIExvbmcgY2F0ZWdvcnlJZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5o+P6L+wXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgZGVzY3JpcHRpb247XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoeeKtuaAge+8iDE65b6F5YqeLCAyOuW3suWuieaOkiwgMzrov5vooYzkuK0sIDQ65bey5a6M5oiQLCA1OuW3sumAvuacn++8iVwiKVxuICAgIHByaXZhdGUgSW50ZWdlciBzdGF0dXM7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIumHjeimgeaAp+adg+mHjeiuvue9rlwiKVxuICAgIHByaXZhdGUgTG9uZyBpbXBvcnRhbmNlSWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIue0p+aApeaAp+adg+mHjeiuvue9rlwiKVxuICAgIHByaXZhdGUgTG9uZyBleGlnZW5jeUlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmiYDpnIDotYTmupDmlbDmja7vvIhKU09O5qC85byP77yJXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgcmVzb3VyY2VzRGF0YTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5omA6ZyA5Lq65ZGY5pWw5o2u77yISlNPTuagvOW8j++8iVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJEYXRhO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmiYDpnIDml7bpl7TliIbpkp/mlbBcIilcbiAgICBwcml2YXRlIEludGVnZXIgdGltZVNwZW5kO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmiKrmraLml7bpl7RcIilcbiAgICBASnNvbkZvcm1hdChwYXR0ZXJuID0gXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIpXG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGRlYWRsaW5lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmj5DphpLml7bpl7RcIilcbiAgICBASnNvbkZvcm1hdChwYXR0ZXJuID0gXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIpXG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIHJlbWluZGVyVGltZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Yib5bu65pe26Ze0XCIpXG4gICAgcHJpdmF0ZSBEYXRlIGNyZWF0ZVRpbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuabtOaWsOaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSB1cGRhdGVUaW1lO1xuXG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YVxuLi4uXG5cbmltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLklkVXRpbDtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuc2VydmljZS5VbXNBZG1pblNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLkNhdGVnb3J5O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5TY2hlZHVsZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyLlRhc2tNYXBwZXI7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuQ2F0ZWdvcnlTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlByaW9yaXR5U2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5SZXNvdXJjZXNTZXJ2aWNlO1xuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTGlzdDxUYXNrVm8+IGxpc3RBbGwoSW50ZWdlciBzdGF0dXMpIHtcbiAgICAgICAgLy8g5YWI5pu05paw5omA5pyJ5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcblxuICAgICAgICByZXR1cm4gdGFza01hcHBlci5saXN0QWxsKHN0YXR1cyk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFRhc2tWbyBnZXRJbmZvKExvbmcgaWQpIHtcbiAgICAgICAgLy8g5pu05paw5b2T5YmN5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZVRhc2tTdGF0dXModGhpcy5nZXRCeUlkKGlkKSk7XG5cbiAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKGlkKTtcbiAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHRhc2ssIHRhc2tWbyk7XG4gICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRDYXRlZ29yeUlkKCkpO1xuICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xuICAgICAgICB0YXNrVm8uc2V0SW1wb3J0YW5jZU5hbWUoaW1wb3J0YW5jZVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBCb29sZWFuIGNyZWF0ZShUYXNrIHRhc2spIHtcbiAgICAgICAgdGFzay5zZXRDb2RlKElkVXRpbC5yYW5kb21VVUlEKCkpO1xuICAgICAgICBMaXN0PFByaW9yaXR5PiBwcmlvcml0aWVzID0gcHJpb3JpdHlTZXJ2aWNlLmxpc3QoKTtcblxuICAgICAgICAvLyDlvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOmBjeWOhuS8mOWFiOe6p+aVsOaNru+8jOiuvue9riBpbXBvcnRhbmNlSWQg5ZKMIGV4aWdlbmN5SWRcbiAgICAgICAgZm9yIChQcmlvcml0eSBwcmlvcml0eSA6IHByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgIC8vIOWMuemFjSBpbXBvcnRhbmNlSWQgKHR5cGU9MSDkuJQgY2F0ZWdvcnlJZCDnm7jlkIwpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDEgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpLmVxdWFscyh0YXNrLmdldENhdGVnb3J5SWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrLnNldEltcG9ydGFuY2VJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhpblJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suc2V0RXhpZ2VuY3lJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDorr7nva7ku7vliqHliJ3lp4vnirbmgIHkuLrlvoXlip5cbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5zYXZlKHRhc2spO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBCb29sZWFuIHVwZGF0ZVRhc2soVGFzayB0YXNrKSB7XG4gICAgICAgIExpc3Q8UHJpb3JpdHk+IHByaW9yaXRpZXMgPSBwcmlvcml0eVNlcnZpY2UubGlzdCgpO1xuXG4gICAgICAgIC8vIOW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG5cbiAgICAgICAgLy8g6YGN5Y6G5LyY5YWI57qn5pWw5o2u77yM6K6+572uIGltcG9ydGFuY2VJZCDlkowgZXhpZ2VuY3lJZFxuICAgICAgICBmb3IgKFByaW9yaXR5IHByaW9yaXR5IDogcHJpb3JpdGllcykge1xuICAgICAgICAgICAgLy8g5Yy56YWNIGltcG9ydGFuY2VJZCAodHlwZT0xIOS4lCBjYXRlZ29yeUlkIOebuOWQjClcbiAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRUeXBlKCkgPT0gMSAmJiBwcmlvcml0eS5nZXRDYXRlZ29yeUlkKCkgIT0gbnVsbCAmJiBwcmlvcml0eS5nZXRDYXRlZ29yeUlkKCkuZXF1YWxzKHRhc2suZ2V0Q2F0ZWdvcnlJZCgpKSkge1xuICAgICAgICAgICAgICAgIHRhc2suc2V0SW1wb3J0YW5jZUlkKHByaW9yaXR5LmdldElkKCkpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICBpZiAod2l0aGluUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRFeGlnZW5jeUlkKHByaW9yaXR5LmdldElkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWmguaenOaJi+WKqOWwhuS7u+WKoeiuvue9ruS4uuW3suWujOaIkO+8jOS/neaMgeivpeeKtuaAgVxuICAgICAgICBUYXNrIG9sZFRhc2sgPSB0aGlzLmdldEJ5SWQodGFzay5nZXRJZCgpKTtcbiAgICAgICAgaWYgKG9sZFRhc2sgIT0gbnVsbCAmJiBvbGRUYXNrLmdldFN0YXR1cygpICE9IDQgJiYgdGFzay5nZXRTdGF0dXMoKSAhPSA0KSB7XG4gICAgICAgICAgICAvLyDoh6rliqjmm7TmlrDku7vliqHnirbmgIFcbiAgICAgICAgICAgIHVwZGF0ZVRhc2tTdGF0dXModGFzayk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVCeUlkKHRhc2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOavj+WkqeWHjOaZqOaJp+ihjOS4gOasoe+8jOiHquWKqOabtOaWsOaJgOacieS7u+WKoeeahOeKtuaAgVxuICAgICAqL1xuICAgIEBTY2hlZHVsZWQoY3JvbiA9IFwiMCAwIDAgKiAqID9cIilcbiAgICBwdWJsaWMgdm9pZCBzY2hlZHVsZWRVcGRhdGVBbGxUYXNrU3RhdHVzKCkge1xuICAgICAgICB1cGRhdGVBbGxUYXNrU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5pu05paw5omA5pyJ5Lu75Yqh55qE54q25oCBXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKSB7XG4gICAgICAgIExpc3Q8VGFzaz4gYWxsVGFza3MgPSB0aGlzLmxpc3QoKTtcbiAgICAgICAgYWxsVGFza3MuZm9yRWFjaCh0aGlzOjp1cGRhdGVUYXNrU3RhdHVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVCYXRjaEJ5SWQoYWxsVGFza3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOagueaNruS7u+WKoeeahOaIquatouaXtumXtOiHquWKqOabtOaWsOS7u+WKoeeKtuaAgVxuICAgICAqIOS7u+WKoeeKtuaAge+8mjEt5b6F5YqeLCAyLeW3suWuieaOkiwgMy3ov5vooYzkuK0sIDQt5bey5a6M5oiQLCA1LeW3sumAvuacn1xuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCB1cGRhdGVUYXNrU3RhdHVzKFRhc2sgdGFzaykge1xuICAgICAgICAvLyDlpoLmnpzku7vliqHlt7Lnu4/mmK/lt7LlrozmiJDnirbmgIEoNCnvvIzkuI3lgZrmlLnlj5hcbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOafpeaJvuS7u+WKoeWvueW6lOeahOaXpeeoi+WuieaOklxuICAgICAgICBMaXN0PFNjaGVkdWxlPiBzY2hlZHVsZXMgPSBzY2hlZHVsZVNlcnZpY2UubGlzdChcbiAgICAgICAgICAgIG5ldyBRdWVyeVdyYXBwZXI8U2NoZWR1bGU+KCkuZXEoXCJ0YXNrX2lkXCIsIHRhc2suZ2V0SWQoKSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyDlpoLmnpzmnInml6XnqIvlronmjpLvvIzkvJjlhYjkvb/nlKjml6XnqIvnmoTnu5PmnZ/ml7bpl7TmnaXliKTmlq3mmK/lkKbpgL7mnJ9cbiAgICAgICAgaWYgKCFzY2hlZHVsZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey6YC+5pyf77yI57uT5p2f5pe26Ze05bey6L+H77yJXG4gICAgICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIG5vdy5pc0FmdGVyKHNjaGVkdWxlLmdldEVuZFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIOWmguaenOayoeacieaXpeeoi+WuieaOku+8jOWImeS9v+eUqOS7u+WKoeeahOaIquatouaXtumXtOWIpOaWrVxuICAgICAgICBlbHNlIGlmICh0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCAmJiBub3cuaXNBZnRlcih0YXNrLmdldERlYWRsaW5lKCkpKSB7XG4gICAgICAgICAgICB0YXNrLnNldFN0YXR1cyg1KTsgLy8g5bey6YC+5pyfXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlpoLmnpzlvZPliY3mmK/lvoXlip4oMSnmiJblt7LlronmjpIoMinvvIzmo4Dmn6XmmK/lkKbpnIDopoHlj5jkuLrov5vooYzkuK0oMylcbiAgICAgICAgaWYgKCh0YXNrLmdldFN0YXR1cygpID09IDEgfHwgdGFzay5nZXRTdGF0dXMoKSA9PSAyKSAmJlxuICAgICAgICAgICAgdGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcblxuICAgICAgICAgICAgLy8g5aaC5p6c56a75oiq5q2i5pe26Ze05LiN5YiwMjTlsI/ml7bvvIzliJnorr7kuLrov5vooYzkuK1cbiAgICAgICAgICAgIGxvbmcgaG91cnNEaWZmZXJlbmNlID0gRHVyYXRpb24uYmV0d2Vlbihub3csIHRhc2suZ2V0RGVhZGxpbmUoKSkudG9Ib3VycygpO1xuICAgICAgICAgICAgaWYgKGhvdXJzRGlmZmVyZW5jZSA8IDI0KSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMyk7IC8vIOi/m+ihjOS4rVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6L6F5Yqp5pa55rOV77ya5bCGIEpTT04g5pWw57uE5a2X56ym5Liy6Kej5p6Q5Li6IFNldDxMb25nPlxuICAgIHByaXZhdGUgU2V0PExvbmc+IHBhcnNlSnNvbkFycmF5VG9TZXQoU3RyaW5nIGpzb25BcnJheSwgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGpzb25BcnJheSA9PSBudWxsIHx8IGpzb25BcnJheS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgSGFzaFNldDw+KEFycmF5cy5hc0xpc3Qob2JqZWN0TWFwcGVyLnJlYWRWYWx1ZShqc29uQXJyYXksIExvbmdbXS5jbGFzcykpKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3ZvL1Rhc2tWby5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52bztcblxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgVGFza1ZvIGV4dGVuZHMgVGFzayB7XG4gICAgcHJpdmF0ZSBTdHJpbmcgY2F0ZWdvcnlOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGltcG9ydGFuY2VOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGV4aWdlbmN5TmFtZTtcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgcHJpb3JpdHlTY29yZTtcblxuICAgIHByaXZhdGUgTGlzdDxVbXNBZG1pbj4gdXNlckxpc3Q7XG4gICAgcHJpdmF0ZSBMaXN0PFJlc291cmNlcz4gcmVzb3VyY2VzTGlzdDtcbn1cbi4uLlxuUGF0aDogb2ZmaWNlX3BsYW4uc3FsXG4uLi5cblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YXNrXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBgdGFza2A7XG5DUkVBVEUgVEFCTEUgYHRhc2tgICAoXG4gIGBpZGAgYmlnaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuICBgdGl0bGVgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjhtYjMgQ09MTEFURSB1dGY4bWIzX2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5qCH6aKYJyxcbiAgYGNvZGVgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjhtYjMgQ09MTEFURSB1dGY4bWIzX2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57yW56CBJyxcbiAgYGNhdGVnb3J5X2lkYCBiaWdpbnQgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57G75Z6LSUQnLFxuICBgZGVzY3JpcHRpb25gIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5o+P6L+wJyxcbiAgYHN0YXR1c2AgaW50IE5VTEwgREVGQVVMVCAxIENPTU1FTlQgJ+S7u+WKoeeKtuaAge+8iDE65b6F5YqeLCAyOuW3suWuieaOkiwgMzrlt7LlrozmiJDvvIknLFxuICBgaW1wb3J0YW5jZV9pZGAgYmlnaW50IE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+mHjeimgeaAp+adg+mHjeiuvue9ricsXG4gIGBleGlnZW5jeV9pZGAgYmlnaW50IE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+e0p+aApeaAp+adg+mHjeiuvue9ricsXG4gIGByZXNvdXJjZXNfZGF0YWAganNvbiBOVUxMIENPTU1FTlQgJ+S7u+WKoeaJgOmcgOi1hOa6kOaVsOaNru+8iEpTT07moLzlvI/vvIknLFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3FsL29mZmljZV9wbGFuLnNxbFxuLi4uXG5cbkRST1AgVEFCTEUgSUYgRVhJU1RTIGB0YXNrYDtcbkNSRUFURSBUQUJMRSBgdGFza2AgKFxuICBgaWRgIGJpZ2ludCgyMCkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4gIGB0aXRsZWAgdmFyY2hhcigyNTUpIE5PVCBOVUxMIENPTU1FTlQgJ+S7u+WKoeagh+mimCcsXG4gIGBjb2RlYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57yW56CBJyxcbiAgYGNhdGVnb3J5X2lkYCAgYmlnaW50KDIwKSBOT1QgTlVMTCBDT01NRU5UICfku7vliqHnsbvlnotJRCcsXG4gIGBkZXNjcmlwdGlvbmAgdGV4dCBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5o+P6L+wJyxcbiAgYHN0YXR1c2AgaW50KDExKSBERUZBVUxUIDEgQ09NTUVOVCAn5Lu75Yqh54q25oCB77yIMTrlvoXlip4sIDI65bey5a6J5o6SLCAzOuW3suWujOaIkO+8iScsXG4gIGBpbXBvcnRhbmNlX2lkYCAgYmlnaW50KDIwKSBERUZBVUxUIE5VTEwgQ09NTUVOVCAn6YeN6KaB5oCn5p2D6YeN6K6+572uJyxcbiAgYGV4aWdlbmN5X2lkYCAgYmlnaW50KDIwKSBERUZBVUxUIE5VTEwgQ09NTUVOVCAn57Sn5oCl5oCn5p2D6YeN6K6+572uJyxcbiAgYHJlc291cmNlc19kYXRhYCBqc29uIERFRkFVTFQgTlVMTCBDT01NRU5UICfku7vliqHmiYDpnIDotYTmupDmlbDmja7vvIhKU09O5qC85byP77yJJyxcbiAgYHVzZXJfZGF0YWAganNvbiBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5omA6ZyA5Lq65ZGY5pWw5o2u77yISlNPTuagvOW8j++8iScsXG4gIGB0aW1lX3NwZW5kYCBpbnQoMTEpIE5PVCBOVUxMIENPTU1FTlQgJ+S7u+WKoeaJgOmcgOaXtumXtOWIhumSn+aVsCcsXG4gIGBkZWFkbGluZWAgVElNRVNUQU1QIE5PVCBOVUxMIENPTU1FTlQgJ+S7u+WKoeaIquatouaXtumXtCcsXG4gIGBjcmVhdGVfdGltZWAgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAgQ09NTUVOVCAn5Yib5bu65pe26Ze0JyxcbiAgYHVwZGF0ZV90aW1lYCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVAgQ09NTUVOVCAn5pu05paw5pe26Ze0JyxcbiAgUFJJTUFSWSBLRVkgKGBpZGApIFVTSU5HIEJUUkVFXG4pIEVOR0lORSA9IElubm9EQiBBVVRPX0lOQ1JFTUVOVCA9IDEgQ0hBUkFDVEVSIFNFVCA9IHV0ZjggQ09MTEFURSA9IHV0ZjhfZ2VuZXJhbF9jaSBDT01NRU5UID0gJ+S7u+WKoeihqCc7XG5cbklOU0VSVCBJTlRPIGB0YXNrYCAoYHRpdGxlYCwgYGNvZGVgLCBgY2F0ZWdvcnlfaWRgLCBgZGVzY3JpcHRpb25gLCBgaW1wb3J0YW5jZV9pZGAsIGBleGlnZW5jeV9pZGAsIGByZXNvdXJjZXNfZGF0YWAsIGB1c2VyX2RhdGFgLCBgdGltZV9zcGVuZGAsIGBkZWFkbGluZWAsIGBjcmVhdGVfdGltZWApIFZBTFVFU1xuKCfku7vliqExLemhueebruW8gOWPkScsIFVVSUQoKSwgMiwgJ+WujOaIkOmhueebruaooeWdl0HnmoTlvIDlj5EnLCBGTE9PUigxICsgUkFORCgpICogMyksIEZMT09SKDQgKyBSQU5EKCkgKiAzKSwgSlNPTl9BUlJBWShGTE9PUigxICsgUkFORCgpICogMTUpKSwgSlNPTl9BUlJBWShGTE9PUigyICsgUkFORCgpICogMzApLCBGTE9PUigyICsgUkFORCgpICogMzApKSwgRkxPT1IoNjAgKyBSQU5EKCkgKiAyNDApLCBEQVRFX0FERChEQVRFKE5PVygpKSwgSU5URVJWQUwgRkxPT1IoMSArIFJBTkQoKSAqIDE1KSBEQVkpLCBEQVRFX1NVQihOT1coKSwgSU5URVJWQUwgRkxPT1IoMSArIFJBTkQoKSAqIDMwKSBEQVkpKSxcbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21vZGVsL1ByaW9yaXR5LmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBhaWRlbnoyMzNcbiAqIEBzaW5jZSAyMDI1LTA0LTE2XG4gKi9cbkBHZXR0ZXJcbkBTZXR0ZXJcbkBBcGlNb2RlbCh2YWx1ZSA9IFwiUHJpb3JpdHnlr7nosaFcIiwgZGVzY3JpcHRpb24gPSBcIuS8mOWFiOe6p+ihqFwiKVxucHVibGljIGNsYXNzIFByaW9yaXR5IGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuinhOWImeagh+mimFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuexu+Wei++8iDE66YeN6KaB5oCnLCAyOiDntKfmgKXmgKfvvIlcIilcbiAgICBwcml2YXRlIEludGVnZXIgdHlwZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5YiG5pWwXCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIHNjb3JlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmnYPph41cIilcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgd2VpZ2h0O1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLop4TliJnmj4/ov7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75YqhSURcIilcbiAgICBwcml2YXRlIExvbmcgY2F0ZWdvcnlJZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5pyA5bCP5pe26Ze05Yy66Ze0XCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIG1pbkhvdXJzO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmnIDlpKfml7bpl7TljLrpl7RcIilcbiAgICBwcml2YXRlIEludGVnZXIgbWF4SG91cnM7XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvVGFza0NvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLliJvlu7rku7vliqFcIilcbiAgICBAUG9zdE1hcHBpbmcoXCIvY3JlYXRlXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiBjcmVhdGUoQFJlcXVlc3RCb2R5IFRhc2sgdGFzaykge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UuY3JlYXRlKHRhc2spKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5L+u5pS55Lu75YqhXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL3VwZGF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gdXBkYXRlKEBSZXF1ZXN0Qm9keSBUYXNrIHRhc2spIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLnVwZGF0ZVRhc2sodGFzaykpO1xuICAgIH1cblxuICAgIEBBcGlPcGVyYXRpb24oXCLkv67mlLnku7vliqHnirbmgIFcIilcbiAgICBAUG9zdE1hcHBpbmcoXCIvdXBkYXRlU3RhdHVzXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiB1cGRhdGVTdGF0dXMoQFJlcXVlc3RQYXJhbSBMb25nIGlkLCBAUmVxdWVzdFBhcmFtIEludGVnZXIgc3RhdHVzKSB7XG4gICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgICAgICBpZiAodGFzayAhPSBudWxsKSB7XG4gICAgICAgICAgICB0YXNrLnNldFN0YXR1cyhzdGF0dXMpO1xuICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzaykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuZmFpbGVkKFwi5Lu75Yqh5LiN5a2Y5ZyoXCIpO1xuICAgIH1cbi4uLlxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuenu+mZpOS7u+WKoVwiKVxuICAgIEBQb3N0TWFwcGluZyhcIi9kZWxldGUve2lkfVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8U3RyaW5nPiBkZWxldGUoQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7XG4gICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSB0YXNrU2VydmljZS5yZW1vdmVCeUlkKHRhc2spO1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuZmFpbGVkKFwi56e76Zmk5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VXCIpO1xuICAgIH1cblxuICAgIEBBcGlPcGVyYXRpb24oXCLmn6Xor6LmiYDmnInliJfooahcIilcbiAgICBAR2V0TWFwcGluZyhcIi9saXN0QWxsQnlTdGF0dXNcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PExpc3Q8VGFza1ZvPj4gbGlzdEFsbChAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzdGF0dXNcIiwgcmVxdWlyZWQgPSBmYWxzZSkgSW50ZWdlciBzdGF0dXMpIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmxpc3RBbGwoc3RhdHVzKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuafpeivouaJgOacieWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RBbGxcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PExpc3Q8VGFzaz4+IGxpc3RBbGwoKSB7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5saXN0KCkpO1xuICAgIH1cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy90YXNrL2luZGV4LnZ1ZVxuLi4uXG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiB3aWR0aD1cIjEyMFwiIGxhYmVsPVwi5p2D6YeN5YiG5YC8XCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj48ZWwtdGFnIHR5cGU9XCJkYW5nZXJcIj57e3Njb3BlLnJvdy5wcmlvcml0eVNjb3JlIHx8IDB9fTwvZWwtdGFnPjwvdGVtcGxhdGU+XG4gICAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBsYWJlbD1cIueKtuaAgVwiIHdpZHRoPVwiMTYwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy5zdGF0dXMgfCBmb3JtYXRTdGF0dXN9fTwvdGVtcGxhdGU+XG4gICAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBsYWJlbD1cIumihOS8sOaXtumXtFwiIHdpZHRoPVwiMTYwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy50aW1lU3BlbmR9fSDliIbpkp88L3RlbXBsYXRlPlxuICAgICAgICAgIDwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gd2lkdGg9XCIzMDBcIiBsYWJlbD1cIuS7u+WKoeaPj+i/sFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8dGVtcGxhdGUgc2xvdC1zY29wZT1cInNjb3BlXCI+e3tzY29wZS5yb3cuZGVzY3JpcHRpb259fTwvdGVtcGxhdGU+XG4gICAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBsYWJlbD1cIuaIquatouaXtumXtFwiIHdpZHRoPVwiMTYwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy5kZWFkbGluZSB8IGZvcm1hdERhdGVUaW1lfX08L3RlbXBsYXRlPlxuLi4uXG4gICAgICBmaWx0ZXJzOiB7XG4gICAgICAgIGZvcm1hdERhdGVUaW1lKHRpbWUpIHtcbiAgICAgICAgICBpZiAodGltZSA9PSBudWxsIHx8IHRpbWUgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ04vQSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW06c3MnKVxuICAgICAgICB9LFxuICAgICAgICBmb3JtYXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgICAgLy8gaWYgKHN0YXR1cyA9PSAwKSB7XG4gICAgICAgICAgLy8gICByZXR1cm4gJ+W+heWuoeaguCc7XG4gICAgICAgICAgLy8gfVxuICAgICAgICAgIGlmIChzdGF0dXMgPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuICflvoXlip4nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdHVzID09IDIpIHtcbiAgICAgICAgICAgIHJldHVybiAn5bey5a6J5o6SJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXR1cyA9PSAzKSB7XG4gICAgICAgICAgICByZXR1cm4gJ+i/m+ihjOS4rSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0dXMgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuICflt7LlrozmiJAnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdHVzID09IDUpIHtcbiAgICAgICAgICAgIHJldHVybiAn5bey6YC+5pyfJztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuICfmnKrnn6UnO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWQoKSB7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpO1xuICAgICAgICB0aGlzLmdldFByaW9yaXR5TGlzdCgpO1xuICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7XG4gICAgICAgIHRoaXMuZ2V0UmVzb3VyY2VMaXN0KCk7XG4gICAgICB9LFxuLi4uXG5QYXRoOiB3ZWIvc3JjL3ZpZXdzL3VzZXJUYXNrL2luZGV4LnZ1ZVxuLi4uXG4gICAgZmlsdGVyczoge1xuICAgICAgZm9ybWF0RGF0ZVRpbWUodGltZSkge1xuICAgICAgICBpZiAodGltZSA9PSBudWxsIHx8IHRpbWUgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuICdOL0EnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tOnNzJylcbiAgICAgIH0sXG4gICAgICBmb3JtYXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgIC8vIGlmIChzdGF0dXMgPT0gMCkge1xuICAgICAgICAvLyAgIHJldHVybiAn5b6F5a6h5qC4JztcbiAgICAgICAgLy8gfVxuICAgICAgICBpZiAoc3RhdHVzID09IDEpIHtcbiAgICAgICAgICByZXR1cm4gJ+W+heWKnic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1cyA9PSAyKSB7XG4gICAgICAgICAgcmV0dXJuICflt7LlronmjpInO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0dXMgPT0gMykge1xuICAgICAgICAgIHJldHVybiAn6L+b6KGM5LitJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdHVzID09IDQpIHtcbiAgICAgICAgICByZXR1cm4gJ+W3suWujOaIkCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1cyA9PSA1KSB7XG4gICAgICAgICAgcmV0dXJuICflt7LpgL7mnJ8nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAn5pyq55+lJztcbiAgICAgIH0sXG4gICAgfSxcbiAgICBjcmVhdGVkKCkge1xuICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpO1xuICAgICAgdGhpcy5nZXRQcmlvcml0eUxpc3QoKTtcbiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTtcbiAgICAgIHRoaXMuZ2V0UmVzb3VyY2VMaXN0KCk7XG4gICAgfSxcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuXG4gICAgPCEtLSDnirbmgIHlj5jmm7Tlr7nor53moYYgLS0+XG4gICAgPGVsLWRpYWxvZ1xuICAgICAgdGl0bGU9XCLlj5jmm7Tku7vliqHnirbmgIFcIlxuICAgICAgOnZpc2libGUuc3luYz1cInN0YXR1c0NoYW5nZVZpc2libGVcIlxuICAgICAgd2lkdGg9XCIzMCVcIj5cbiAgICAgIDxlbC1mb3JtIDptb2RlbD1cInN0YXR1c0Zvcm1cIiBsYWJlbC13aWR0aD1cIjgwcHhcIj5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuW9k+WJjeeKtuaAgVwiPlxuICAgICAgICAgIDxlbC10YWcgOnR5cGU9XCJnZXRTdGF0dXNUYWdUeXBlKHRhc2tEZXRhaWwuc3RhdHVzKVwiPnt7IHRhc2tEZXRhaWwuc3RhdHVzIHwgZm9ybWF0U3RhdHVzIH19PC9lbC10YWc+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5paw54q25oCBXCI+XG4gICAgICAgICAgPGVsLXNlbGVjdCB2LW1vZGVsPVwic3RhdHVzRm9ybS5zdGF0dXNcIiBwbGFjZWhvbGRlcj1cIuivt+mAieaLqeaWsOeKtuaAgVwiPlxuICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIxXCIgbGFiZWw9XCLlvoXlip5cIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiMlwiIGxhYmVsPVwi5bey5a6J5o6SXCI+PC9lbC1vcHRpb24+XG4gICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjNcIiBsYWJlbD1cIui/m+ihjOS4rVwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCI0XCIgbGFiZWw9XCLlt7LlrozmiJBcIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICA8L2VsLWZvcm0+XG4gICAgICA8c3BhbiBzbG90PVwiZm9vdGVyXCIgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgIDxlbC1idXR0b24gQGNsaWNrPVwic3RhdHVzQ2hhbmdlVmlzaWJsZSA9IGZhbHNlXCI+5Y+WIOa2iDwvZWwtYnV0dG9uPlxuLi4uXG4gICAgICBcbiAgICAgIC8vIOiOt+WPlueKtuaAgeagh+etvuexu+Wei1xuICAgICAgZ2V0U3RhdHVzVGFnVHlwZShzdGF0dXMpIHtcbiAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiAnaW5mbyc7ICAgIC8vIOW+heWKnlxuICAgICAgICAgIGNhc2UgMjogcmV0dXJuICd3YXJuaW5nJzsgLy8g5bey5a6J5o6SXG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gJ3ByaW1hcnknOyAvLyDov5vooYzkuK1cbiAgICAgICAgICBjYXNlIDQ6IHJldHVybiAnc3VjY2Vzcyc7IC8vIOW3suWujOaIkFxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuICdkYW5nZXInOyAgLy8g5bey6YC+5pyfXG4gICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdpbmZvJztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8g5aSE55CG54q25oCB5Y+Y5pu0XG4gICAgICBoYW5kbGVTdGF0dXNDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgICAgICB1cGRhdGVUYXNrU3RhdHVzKHRoaXMudGFza0RldGFpbC5pZCwgdGhpcy5zdGF0dXNGb3JtLnN0YXR1cykudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdGF0dXNDaGFuZ2VWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy50YXNrRGV0YWlsLnN0YXR1cyA9IHRoaXMuc3RhdHVzRm9ybS5zdGF0dXM7XG4gICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnirbmgIHmm7TmlrDmiJDlip8nKTtcbiAgICAgICAgICB0aGlzLmdldExpc3QoKTsgLy8g5Yi35paw5YiX6KGoXG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIC8vIOaYvuekuuaPkOmGkuiuvue9ruWvueivneahhlxuICAgICAgc2hvd1JlbWluZGVyRGlhbG9nKCkge1xuICAgICAgICB0aGlzLnJlbWluZGVyVGltZSA9IHRoaXMudGFza0RldGFpbC5yZW1pbmRlclRpbWU7XG4gICAgICAgIHRoaXMucmVtaW5kZXJEaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5aaC5p6c5Lu75Yqh5pyJ5a+55bqU55qE5pel56iLXG4gICAgICAgICAgICBpZiAoIXNjaGVkdWxlcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaXpeeoi+aciee7k+adn+aXtumXtO+8jOS4lOe7k+adn+aXtumXtOW3sui/h++8jOabtOaWsOS7u+WKoeeKtuaAgeS4uuW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpICE9IG51bGwgJiYgc2NoZWR1bGUuZ2V0RW5kVGltZSgpLmlzQmVmb3JlKG5vdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWwhueKtuaAgeabtOaWsOS4uuW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlj5HpgIHpgL7mnJ/pgJrnn6VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOino+aekOeUqOaIt+aVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWPkemAgemAvuacn+mAmuefpVxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxOb3RpZmljYXRpb24+IG5vdGlmaWNhdGlvbnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZHMuZm9yRWFjaChpZCAtPiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0U2NoZWR1bGVJZChzY2hlZHVsZS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VXNlcklkKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VHlwZSg0KTsgLy8g6YC+5pyf6YCa55+l57G75Z6LXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldE1lc3NhZ2UoXCLmgqjnmoTku7vliqEgXFxcIlwiICsgdGFzay5nZXRUaXRsZSgpICsgXCJcXFwiIOW3sumAvuacn++8jOivt+WwveW/q+WkhOeQhlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmFkZChub3RpZmljYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9tb2RlbC9VbXNSb2xlLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5ZCO5Y+w55So5oi36KeS6Imy6KGoXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBtYWNyb1xuICogQHNpbmNlIDIwMjUtMDMtMjdcbiAqL1xuQERhdGFcbkBFcXVhbHNBbmRIYXNoQ29kZShjYWxsU3VwZXIgPSBmYWxzZSlcbkBUYWJsZU5hbWUoXCJ1bXNfcm9sZVwiKVxuQEFwaU1vZGVsKHZhbHVlPVwiVW1zUm9sZeWvueixoVwiLCBkZXNjcmlwdGlvbj1cIuWQjuWPsOeUqOaIt+inkuiJsuihqFwiKVxucHVibGljIGNsYXNzIFVtc1JvbGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEPTFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5ZCN56ewXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLmj4/ov7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLlkI7lj7DnlKjmiLfmlbDph49cIilcbiAgICBwcml2YXRlIEludGVnZXIgYWRtaW5Db3VudDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLliJvlu7rml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgY3JlYXRlVGltZTtcblxuICAgIEBBcGlNb2RlbFAuLi4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxUG0xb0V3akZnQjh5S2NTYjh6TEVwQSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgYWxzbyBjaGVjayB0aGUgZnJvbnRlbmQgQVBJIGNhbGxzIHRvIHVuZGVyc3RhbmQgaG93IHRvIGltcGxlbWVudCB0aGUgZmlsdGVyaW5nOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjRkMjBjY2Y2LTQ0YmMtNDI4Ni1iNTM0LTBkYmFlOGIwZWNhZiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE5NFFvUTZrUzRpZ3J1VnlDcE5nQURXIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9TY2hlZHVsZUNvbnRyb2xsZXIuamF2YVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgQEFwaU9wZXJhdGlvbihcXFwiXFx1NzUyOFxcdTYyMzdcXHU2NWU1XFx1N2EwYlxcdTY3ZTVcXHU4YmUyIC0gXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcXCIpXFxuICAgIEBHZXRNYXBwaW5nKFxcXCIvdXNlci9zbWFydFNvcnRcXFwiKVxcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IHVzZXJTbWFydFNvcnQoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFxcXCJwYWdlU2l6ZVxcXCIsIGRlZmF1bHRWYWx1ZSA9IFxcXCIyMFxcXCIpIEludGVnZXIgcGFnZVNpemUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcXFwicGFnZU51bVxcXCIsIGRlZmF1bHRWYWx1ZSA9IFxcXCIxXFxcIikgSW50ZWdlciBwYWdlTnVtLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXFxcInNlYXJjaEtleVxcXCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXkpIHtcXG4gICAgICAgIExvbmcgdXNlcklkID0gU2VjdXJpdHlVdGlscy5nZXRDdXJyZW50VXNlcklkKCk7XFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zbWFydFNvcnRVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCk7XFxuXFxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MoQ29tbW9uUGFnZS5yZXN0UGFnZShzY2hlZHVsZVBhZ2UpKTtcXG4gICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgQEFwaU9wZXJhdGlvbihcXFwiXFx1NzUyOFxcdTYyMzdcXHU2NWU1XFx1N2EwYlxcdTY3ZTVcXHU4YmUyIC0gXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcXCIpXFxuICAgIEBHZXRNYXBwaW5nKFxcXCIvdXNlci9zbWFydFNvcnRcXFwiKVxcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IHVzZXJTbWFydFNvcnQoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFxcXCJwYWdlU2l6ZVxcXCIsIGRlZmF1bHRWYWx1ZSA9IFxcXCIyMFxcXCIpIEludGVnZXIgcGFnZVNpemUsXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcXFwicGFnZU51bVxcXCIsIGRlZmF1bHRWYWx1ZSA9IFxcXCIxXFxcIikgSW50ZWdlciBwYWdlTnVtLFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXFxcInNlYXJjaEtleVxcXCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXksXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcXFwic3RhdHVzXFxcIiwgcmVxdWlyZWQgPSBmYWxzZSkgSW50ZWdlciBzdGF0dXMpIHtcXG4gICAgICAgIExvbmcgdXNlcklkID0gU2VjdXJpdHlVdGlscy5nZXRDdXJyZW50VXNlcklkKCk7XFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zbWFydFNvcnRVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCwgc3RhdHVzKTtcXG5cXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHNjaGVkdWxlUGFnZSkpO1xcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA1MSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA1OX1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMgb2YgdGhlIGNvZGUsIEknbGwgbm93IGltcGxlbWVudCB0aGUgY2F0ZWdvcnkgZmlsdGVyaW5nIGZ1bmN0aW9uYWxpdHkgZm9yIHRoZSBzY2hlZHVsZSBwYWdlLiBIZXJlJ3MgbXkgcGxhbjpcblxuMS4gVXBkYXRlIHRoZSBgU2NoZWR1bGVDb250cm9sbGVyYCB0byBhZGQgYSBuZXcgZW5kcG9pbnQgdGhhdCBzdXBwb3J0cyBmaWx0ZXJpbmcgYnkgdGFzayBzdGF0dXNcbjIuIEltcGxlbWVudCB0aGUgY29ycmVzcG9uZGluZyBzZXJ2aWNlIG1ldGhvZCBpbiBgU2NoZWR1bGVTZXJ2aWNlYFxuMy4gQWRkIHRoZSBuZWNlc3NhcnkgU1FMIHF1ZXJ5IGluIGBTY2hlZHVsZU1hcHBlci54bWxgXG40LiBVcGRhdGUgdGhlIGZyb250ZW5kIHRvIGFkZCBhIGZpbHRlciBkcm9wZG93biBmb3IgdGFzayBzdGF0dXMgY2F0ZWdvcmllc1xuXG5MZXQncyBzdGFydCB3aXRoIHRoZSBpbXBsZW1lbnRhdGlvbjpcblxuIyMjIDEuIEZpcnN0LCBsZXQncyB1cGRhdGUgdGhlIGBTY2hlZHVsZUNvbnRyb2xsZXJgOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogd2ViL3NyYy9hcGkvYXBpLmpzXG5pbXBvcnQgcmVxdWVzdCBmcm9tICdAL3V0aWxzL3JlcXVlc3QnXG5cbi8vIOi1hOa6kOWIhuexu1xuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQ2F0ZWdvcnlMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jYXRlZ29yeS9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQ2F0ZWdvcnkoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jYXRlZ29yeS9jcmVhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGEsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVDYXRlZ29yeShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL2NhdGVnb3J5L3VwZGF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlQ2F0ZWdvcnkoaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2F0ZWdvcnkvZGVsZXRlLycgKyBpZCxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsQ2F0ZWdvcnlMaXN0KCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jYXRlZ29yeS9saXN0QWxsJyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICB9KVxufVxuXG4vLyDpppbpobXmlbDmja5cbmV4cG9ydCBmdW5jdGlvbiBob21lRGF0YSgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvaG9tZScsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cbi4uLlxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlUmVzb3VyY2UoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9yZXNvdXJjZXMvdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVSZXNvdXJjZShpZCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9yZXNvdXJjZXMvZGVsZXRlLycgKyBpZCxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsUmVzb3VyY2VMaXN0KCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9yZXNvdXJjZXMvbGlzdEFsbCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuLy8g5p2D6YeNXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hQcmlvcml0eUxpc3QocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3ByaW9yaXR5L2xpc3QnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcmlvcml0eShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3ByaW9yaXR5L2NyZWF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YSxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVByaW9yaXR5KGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcHJpb3JpdHkvdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVQcmlvcml0eShpZCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9wcmlvcml0eS9kZWxldGUvJyArIGlkLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hBbGxQcmlvcml0eUxpc3QocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3ByaW9yaXR5L2xpc3RBbGwnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cblxuLy8g5Lu75YqhXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hUYXNrTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVGFzayhkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svY3JlYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVGFzayhkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVUYXNrU3RhdHVzKGlkLCBzdGF0dXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay91cGRhdGVTdGF0dXMnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIHBhcmFtczogeyBpZCwgc3RhdHVzIH1cbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFRhc2tSZW1pbmRlcihpZCwgcmVtaW5kZXJUaW1lKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svc2V0UmVtaW5kZXInLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIHBhcmFtczogeyBpZCwgcmVtaW5kZXJUaW1lIH1cbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVRhc2soaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9kZWxldGUvJyArIGlkLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzKHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL2xpc3RBbGxCeVN0YXR1cycsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsVGFza0xpc3QoKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdEFsbCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVGFza0luZm8oaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9pbmZvLycgKyBpZCxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICB9KVxufVxuXG4vLyDlronmjpJcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFNjaGVkdWxlTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvbGlzdCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuLy8g5pel56iL5pm66IO95o6S5bqPXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvc21hcnRTb3J0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hVc2VyU2NoZWR1bGVMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS91c2VyL2xpc3QnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbi8vIOeUqOaIt+aXpeeoi+aZuuiDveaOkuW6j1xuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVXNlclNjaGVkdWxlU21hcnRTb3J0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS91c2VyL3NtYXJ0U29ydCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoTW9udGhTY2hlZHVsZUxpc3QoeWVhck1vbnRoKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6IGAvd2ViL3NjaGVkdWxlL21vbnRoLyR7eWVhck1vbnRofWAsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVXNlck1vbnRoU2NoZWR1bGVMaXN0KHllYXJNb250aCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiBgL3dlYi9zY2hlZHVsZS9tb250aC91c2VyLyR7eWVhck1vbnRofWAsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNjaGVkdWxlKGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvY3JlYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlU2NoZWR1bGUoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS91cGRhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGFcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNjaGVkdWxlVGltZShpZCwgc3RhcnRUaW1lLCBlbmRUaW1lKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL3VwZGF0ZVRpbWUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIHBhcmFtczogeyBpZCwgc3RhcnRUaW1lLCBlbmRUaW1lIH1cbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVNjaGVkdWxlKGlkKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL2RlbGV0ZS8nICsgaWQsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaENvbmZsaWN0U2NoZWR1bGVMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS9jb25mbGljdC9saXN0LycgKyBwYXJhbXMuaWQsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cbi4uLlxuXG5leHBvcnQgZnVuY3Rpb24gbWFya05vdGlmaWNhdGlvbkFzUmVhZChpZCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9ub3RpZmljYXRpb24vcmVhZC8nICsgaWQsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gIH0pXG59XG5cbi8vIOaKpeihqFxuZXhwb3J0IGZ1bmN0aW9uIHRyZW5kUGllKCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jaGFydC90cmVuZFBpZScsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRyZW5kKHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jaGFydC90cmVuZCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuICAgICAgPC9zcGFuPlxuICAgIDwvZWwtZGlhbG9nPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG48c2NyaXB0PlxuICBpbXBvcnQge2ZldGNoU2NoZWR1bGVMaXN0LCBmZXRjaFNjaGVkdWxlU21hcnRTb3J0LCBjcmVhdGVTY2hlZHVsZSx1cGRhdGVTY2hlZHVsZSxkZWxldGVTY2hlZHVsZSxmZXRjaEFsbFRhc2tMaXN0LGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cyxmZXRjaFRhc2tJbmZvLGZldGNoQ29uZmxpY3RTY2hlZHVsZUxpc3QsdXBkYXRlVGFza1N0YXR1cyxzZXRUYXNrUmVtaW5kZXJ9IGZyb20gJ0AvYXBpL2FwaSc7XG4gIGltcG9ydCBKc0JhcmNvZGUgZnJvbSAnanNiYXJjb2RlJztcbiAgaW1wb3J0IGh0bWwyY2FudmFzIGZyb20gJ2h0bWwyY2FudmFzJztcbiAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuXG4gIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAgcGFnZU51bTogMSxcbiAgICBwYWdlU2l6ZTogMTAsXG4gICAgc2VhcmNoS2V5OiBudWxsLFxuICAgIHR5cGU6IG51bGwsXG4gIH07XG4gIGNvbnN0IGRlZmF1bHRBZG1pbiA9IHtcbiAgICBpZDogbnVsbCxcbiAgICB0YXNrSWQ6IG51bGwsXG4gICAgc3RhcnRUaW1lOiBudWxsLFxuICAgIGVuZFRpbWU6IG51bGwsXG4gICAgcmVtaW5kZXJUaW1lOiBudWxsLFxuICB9O1xuLi4uXG4gICAgICAvLyDmoLzlvI/ljJblsZXnpLrml6XmnJ9cbiAgICAgIGZvcm1hdERheURhdGUoZGF0ZVN0cikge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl55bm0TU3mnIhkZOaXpScpO1xuICAgICAgfSxcbiAgICAgIC8vIOagvOW8j+WMluaXtumXtOS4ukhIOk1N5qC85byPXG4gICAgICBmb3JtYXRUaW1lKGRhdGVUaW1lU3RyKSB7XG4gICAgICAgIGlmICghZGF0ZVRpbWVTdHIpIHJldHVybiAnJztcbiAgICAgICAgY29uc3QgcGFydHMgPSBkYXRlVGltZVN0ci5zcGxpdCgnICcpO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoIDwgMiB8fCAhcGFydHNbMV0pIHJldHVybiAnJztcbiAgICAgICAgcmV0dXJuIHBhcnRzWzFdLnN1YnN0cmluZygwLCA1KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRUYXNrTGlzdChwYXJhbXMpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEFsbFRhc2tMaXN0QnlTdGF0dXMocGFyYW1zKVxuICAgICAgICB0aGlzLnRhc2tMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRBbGxUYXNrTGlzdCgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEFsbFRhc2tMaXN0KClcbiAgICAgICAgdGhpcy50YXNrTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0VGFza0luZm8oaWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFRhc2tJbmZvKGlkKTtcbiAgICAgICAgdGhpcy50YXNrSW5mbyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdmlld0JhcmNvZGUocm93KSB7XG4gICAgICAgIHRoaXMuY3VycmVudENvZGUgPSByb3cudGFza0NvZGU7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0VGFza0luZm8ocm93LnRhc2tJZCk7XG4gICAgICAgIHRoaXMuYmFyY29kZURpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgfSxcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXG4uLi5cbiAgaW1wb3J0IHtmZXRjaFVzZXJTY2hlZHVsZUxpc3QsIGZldGNoVXNlclNjaGVkdWxlU21hcnRTb3J0LCBmZXRjaE1vbnRoU2NoZWR1bGVMaXN0LCBmZXRjaFVzZXJNb250aFNjaGVkdWxlTGlzdCwgY3JlYXRlU2NoZWR1bGUsIHVwZGF0ZVNjaGVkdWxlLCBkZWxldGVTY2hlZHVsZSwgZmV0Y2hBbGxUYXNrTGlzdCwgZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzLCBmZXRjaFRhc2tJbmZvLCBmZXRjaENvbmZsaWN0U2NoZWR1bGVMaXN0LCB1cGRhdGVUYXNrU3RhdHVzLCBzZXRUYXNrUmVtaW5kZXJ9IGZyb20gJ0AvYXBpL2FwaSc7XG4gIGltcG9ydCBKc0JhcmNvZGUgZnJvbSAnanNiYXJjb2RlJztcbiAgaW1wb3J0IGh0bWwyY2FudmFzIGZyb20gJ2h0bWwyY2FudmFzJztcbiAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuXG4gIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAgcGFnZU51bTogMSxcbiAgICBwYWdlU2l6ZTogMTAsXG4gICAgc2VhcmNoS2V5OiBudWxsLFxuICAgIHR5cGU6IG51bGwsXG4gIH07XG4gIGNvbnN0IGRlZmF1bHRBZG1pbiA9IHtcbiAgICBpZDogbnVsbCxcbiAgICB0YXNrSWQ6IG51bGwsXG4gICAgc3RhcnRUaW1lOiBudWxsLFxuICAgIGVuZFRpbWU6IG51bGwsXG4gICAgcmVtaW5kZXJUaW1lOiBudWxsLFxuICB9O1xuLi4uXG4gICAgICBhc3luYyBnZXRBbGxUYXNrTGlzdCgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEFsbFRhc2tMaXN0KClcbiAgICAgICAgdGhpcy50YXNrTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0VGFza0luZm8oaWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFRhc2tJbmZvKGlkKTtcbiAgICAgICAgdGhpcy50YXNrSW5mbyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdmlld0JhcmNvZGUocm93KSB7XG4gICAgICAgIHRoaXMuY3VycmVudENvZGUgPSByb3cudGFza0NvZGU7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0VGFza0luZm8ocm93LnRhc2tJZCk7XG4gICAgICAgIHRoaXMuYmFyY29kZURpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHZpZXdJbmZvKHJvdykge1xuICAgICAgICBhd2FpdCB0aGlzLmdldFRhc2tJbmZvKHJvdy50YXNrSWQpO1xuICAgICAgICB0aGlzLmluZm9EaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBhc3luYyB2aWV3Q29uZmxpY3Qocm93KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoQ29uZmxpY3RTY2hlZHVsZUxpc3Qoe2lkOnJvdy5pZCxzY2hlZHVsZUlkczogcm93LmNvbmZsaWN0U2NoZWR1bGVJZHMgfHwgJyd9KTtcbiAgICAgICAgdGhpcy5jb25mbGljdExpc3QgPSByZXMuZGF0YTtcbiAgICAgICAgdGhpcy5jb25mbGljdERpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgfSxcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy90YXNrL3NtYXJ0LXNjaGVkdWxlLnZ1ZVxuLi4uXG4gICAgICAgIDxlbC1idXR0b24gdHlwZT1cInByaW1hcnlcIiBAY2xpY2s9XCJyZXN1bHREaWFsb2dWaXNpYmxlID0gZmFsc2VcIj7noa4g5a6aPC9lbC1idXR0b24+XG4gICAgICA8L3NwYW4+XG4gICAgPC9lbC1kaWFsb2c+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCB7IGZldGNoUHJpb3JpdGl6ZWRUYXNrTGlzdCwgYXV0b1NjaGVkdWxlVGFza3MsIGNyZWF0ZVNjaGVkdWxlIH0gZnJvbSAnQC9hcGkvYXBpJztcbmltcG9ydCB7IGZvcm1hdERhdGUgfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuLi4uXG4gIG1ldGhvZHM6IHtcbiAgICBmZXRjaFByaW9yaXRpemVkVGFza3MoKSB7XG4gICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgIGZldGNoUHJpb3JpdGl6ZWRUYXNrTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICB0aGlzLnByaW9yaXRpemVkVGFza3MgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaFByaW9yaXRpemVkVGFza3MoKSB7XG4gICAgICB0aGlzLmZldGNoUHJpb3JpdGl6ZWRUYXNrcygpO1xuICAgIH0sXG4gICAgZ2V0UHJpb3JpdHlUYWdUeXBlKHNjb3JlKSB7XG4gICAgICBjb25zdCBzY29yZU51bSA9IE51bWJlcihzY29yZSk7XG4gICAgICBpZiAoc2NvcmVOdW0gPj0gMTUwKSByZXR1cm4gJ2Rhbmdlcic7XG4gICAgICBpZiAoc2NvcmVOdW0gPj0gMTAwKSByZXR1cm4gJ3dhcm5pbmcnO1xuICAgICAgaWYgKHNjb3JlTnVtID49IDUwKSByZXR1cm4gJ3N1Y2Nlc3MnO1xuICAgICAgcmV0dXJuICdpbmZvJztcbiAgICB9LFxuICAgIGhhbmRsZUF1dG9TY2hlZHVsZSgpIHtcbiAgICAgIGNvbnN0IHsgc2NoZWR1bGVEYXRlIH0gPSB0aGlzLnF1ZXJ5UGFyYW1zO1xuICAgICAgaWYgKCFzY2hlZHVsZURhdGUpIHtcbiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup5pel5pyf77yBJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbi4uLlxuICAgIHN1Ym1pdFNjaGVkdWxlVGFzaygpIHtcbiAgICAgIGNvbnN0IHsgdGFza0lkLCBzdGFydFRpbWUsIGVuZFRpbWUgfSA9IHRoaXMuc2NoZWR1bGVGb3JtO1xuICAgICAgXG4gICAgICBpZiAoIXN0YXJ0VGltZSB8fCAhZW5kVGltZSkge1xuICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7fpgInmi6nlvIDlp4vlkoznu5PmnZ/ml7bpl7TvvIEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAobmV3IERhdGUoZW5kVGltZSkgPD0gbmV3IERhdGUoc3RhcnRUaW1lKSkge1xuICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnu5PmnZ/ml7bpl7Tlv4XpobvmmZrkuo7lvIDlp4vml7bpl7TvvIEnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjcmVhdGVTY2hlZHVsZSh7XG4gICAgICAgIHRhc2tJZCxcbiAgICAgICAgc3RhcnRUaW1lLFxuICAgICAgICBlbmRUaW1lXG4gICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfku7vliqHlronmjpLmiJDlip/vvIEnKTtcbiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVmcmVzaFByaW9yaXRpemVkVGFza3MoKTtcbiAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgLy8g6ZSZ6K+v5aSE55CGXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cbjwvc2NyaXB0PlxuXG48c3R5bGUgc2NvcGVkPlxuLnRhc2stcHJpb3JpdHktaW5mbyB7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG59XG5cbi50YXNrLXByaW9yaXR5LWxpc3Qge1xuICBtYXJnaW4tdG9wOiAyMHB4O1xufVxuPC9zdHlsZT4gLi4uXG5QYXRoOiB3ZWIvc3JjL3ZpZXdzL3Rhc2svaW5kZXgudnVlXG4uLi5cbiAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgPC9lbC1mb3JtPlxuICAgICAgICA8c3BhbiBzbG90PVwiZm9vdGVyXCIgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgICAgPGVsLWJ1dHRvbiBAY2xpY2s9XCJkaWFsb2dWaXNpYmxlID0gZmFsc2VcIiBzaXplPVwic21hbGxcIj7lj5Yg5raIPC9lbC1idXR0b24+XG4gICAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwicHJpbWFyeVwiIEBjbGljaz1cImhhbmRsZURpYWxvZ0NvbmZpcm0oKVwiIHNpemU9XCJzbWFsbFwiPuehriDlrpo8L2VsLWJ1dHRvbj5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9lbC1kaWFsb2c+XG4gICAgPC9kaXY+XG4gIDwvdGVtcGxhdGU+XG4gIDxzY3JpcHQ+XG4gICAgaW1wb3J0IHtmZXRjaFRhc2tMaXN0LGNyZWF0ZVRhc2ssdXBkYXRlVGFzayxkZWxldGVUYXNrLGZldGNoQWxsQ2F0ZWdvcnlMaXN0LCBmZXRjaEFsbFByaW9yaXR5TGlzdCwgZmV0Y2hBbGxSZXNvdXJjZUxpc3R9IGZyb20gJ0AvYXBpL2FwaSc7XG4gICAgaW1wb3J0IHtmZXRjaEFsbFVzZXJMaXN0fSBmcm9tICdAL2FwaS9sb2dpbic7XG5cbiAgICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG5cbiAgICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgICAgcGFnZU51bTogMSxcbiAgICAgIHBhZ2VTaXplOiAxMCxcbiAgICAgIHNlYXJjaEtleTogbnVsbCxcbiAgICAgIGNhdGVnb3J5SWQ6IG51bGwsXG4gICAgfTtcbi4uLlxuICAgICAgbWV0aG9kczoge1xuICAgICAgICBnZXRVc2VyTGlzdCgpIHtcbiAgICAgICAgICBmZXRjaEFsbFVzZXJMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnVzZXJMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UmVzb3VyY2VMaXN0KCkge1xuICAgICAgICAgIGZldGNoQWxsUmVzb3VyY2VMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlc291cmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFByaW9yaXR5TGlzdCgpIHtcbiAgICAgICAgICBmZXRjaEFsbFByaW9yaXR5TGlzdCh7dHlwZTogMX0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy5pbXBvcnRhbmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZmV0Y2hBbGxQcmlvcml0eUxpc3Qoe3R5cGU6IDJ9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXhpZ2VuY3lMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICAgICAgICAgdGhpcy5saXN0UXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KTtcbiAgICAgICAgICB0aGlzLmdldExpc3QoKVxuICAgICAgICB9LFxuLi4uXG4gICAgICAgIGhhbmRsZURpYWxvZ0NvbmZpcm0oKSB7XG4gICAgICAgICAgdGhpcy4kcmVmcy5hZG1pbkZvcm0udmFsaWRhdGUodmFsaWQgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbGlkKSB7XG4gICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuimgeehruiupD8nLCAn5o+Q56S6Jywge1xuICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJyxcbiAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZG1pbi51c2VyRGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuYWRtaW4udXNlcklkcyk7XG4gICAgICAgICAgICAgICAgdGhpcy5hZG1pbi5yZXNvdXJjZXNEYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy5hZG1pbi5yZXNvdXJjZUlkcyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVUYXNrKHRoaXMuYWRtaW4pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5Yqf77yBJyxcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGNyZWF0ZVRhc2sodGhpcy5hZG1pbikudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliJvlu7rmiJDlip/vvIEnLFxuICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZVNlYXJjaExpc3QoKSB7XG4gICAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IDE7XG4gICAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZVNpemVDaGFuZ2UodmFsKSB7XG4gICAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IDE7XG4gICAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZVNpemUgPSB2YWw7XG4gICAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7XG4gICAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IHZhbDtcbiAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlQWRkKCkge1xuICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAvLyB0aGlzLnVzZXJJZHMgPSBbXTtcbiAgICAgICAgICAvLyB0aGlzLnJlc291cmNlSWRzID0gW107XG4gICAgICAgICAgdGhpcy5hZG1pbiA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZG1pbik7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7XG4gICAgICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm6KaB5Yig6Zmk6K+l5Lu75YqhP+WIoOmZpOWQjuWwhuaXoOazleaSpOmUgCcsICfmj5DnpLonLCB7XG4gICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsXG4gICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJyxcbiAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJ1xuICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgZGVsZXRlVGFzayhyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVVcGRhdGUocm93KSB7XG4gICAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlO1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByb3cudXNlcklkcyA9IEpTT04ucGFyc2Uocm93LnVzZXJEYXRhKTtcbiAgICAgICAgICAgIHJvdy5yZXNvdXJjZUlkcyA9IEpTT04ucGFyc2Uocm93LnJlc291cmNlc0RhdGEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByb3cudXNlcklkcyA9IFtdO1xuICAgICAgICAgICAgcm93LnJlc291cmNlSWRzID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LHJvdyk7XG4gICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0TGlzdCgpIHtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICBmZXRjaFRhc2tMaXN0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVTdWNjZXNzKHJlc3BvbnNlLCBmaWxlKSB7XG4gICAgICAgICAgLy8g5aSE55CG5LiK5Lyg5oiQ5Yqf5ZCO55qE6YC76L6R77yM6I635Y+W5ZCO56uv6L+U5Zue55qE5paH5Lu26Lev5b6EXG4gICAgICAgICAgY29uc3QgZmlsZVBhdGggPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIHRoaXMuYWRtaW4uaW1hZ2UgPSBgJHtwcm9jZXNzLmVudi5CQVNFX0FQSX0vJHtmaWxlUGF0aH1gO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZmlsZVBhdGgpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDYXRlZ29yeUxpc3QoKSB7XG4gICAgICAgICAgZmV0Y2hBbGxDYXRlZ29yeUxpc3QoKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhXG4gICAgICAgICAgfSlcbiAgICAgICAgfSxcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy91c2VyVGFzay9pbmRleC52dWVcbi4uLlxuICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgIDwvZWwtZm9ybT5cbiAgICAgIDxzcGFuIHNsb3Q9XCJmb290ZXJcIiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgPGVsLWJ1dHRvbiBAY2xpY2s9XCJkaWFsb2dWaXNpYmxlID0gZmFsc2VcIiBzaXplPVwic21hbGxcIj7lj5Yg5raIPC9lbC1idXR0b24+XG4gICAgICAgIDxlbC1idXR0b24gdHlwZT1cInByaW1hcnlcIiBAY2xpY2s9XCJoYW5kbGVEaWFsb2dDb25maXJtKClcIiBzaXplPVwic21hbGxcIj7noa4g5a6aPC9lbC1idXR0b24+XG4gICAgICA8L3NwYW4+XG4gICAgPC9lbC1kaWFsb2c+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cbjxzY3JpcHQ+XG4gIGltcG9ydCB7ZmV0Y2hUYXNrTGlzdCxjcmVhdGVUYXNrLHVwZGF0ZVRhc2ssZGVsZXRlVGFzayxmZXRjaEFsbENhdGVnb3J5TGlzdCwgZmV0Y2hBbGxQcmlvcml0eUxpc3QsIGZldGNoQWxsUmVzb3VyY2VMaXN0fSBmcm9tICdAL2FwaS9hcGknO1xuICBpbXBvcnQge2ZldGNoQWxsVXNlckxpc3R9IGZyb20gJ0AvYXBpL2xvZ2luJztcblxuICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG5cbiAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgICBwYWdlTnVtOiAxLFxuICAgIHBhZ2VTaXplOiAxMCxcbiAgICBzZWFyY2hLZXk6IG51bGwsXG4gICAgY2F0ZWdvcnlJZDogbnVsbCxcbiAgfTtcbi4uLlxuICAgIG1ldGhvZHM6IHtcbiAgICAgIGdldFVzZXJMaXN0KCkge1xuICAgICAgICBmZXRjaEFsbFVzZXJMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy51c2VyTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdldFJlc291cmNlTGlzdCgpIHtcbiAgICAgICAgZmV0Y2hBbGxSZXNvdXJjZUxpc3QoKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLnJlc291cmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGdldFByaW9yaXR5TGlzdCgpIHtcbiAgICAgICAgZmV0Y2hBbGxQcmlvcml0eUxpc3Qoe3R5cGU6IDF9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLmltcG9ydGFuY2VMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZldGNoQWxsUHJpb3JpdHlMaXN0KHt0eXBlOiAyfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5leGlnZW5jeUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVSZXNldFNlYXJjaCgpIHtcbiAgICAgICAgdGhpcy5saXN0UXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KTtcbiAgICAgICAgdGhpcy5nZXRMaXN0KClcbiAgICAgIH0sXG4uLi5cbiAgICAgIGhhbmRsZURpYWxvZ0NvbmZpcm0oKSB7XG4gICAgICAgIHRoaXMuJHJlZnMuYWRtaW5Gb3JtLnZhbGlkYXRlKHZhbGlkID0+IHtcbiAgICAgICAgICBpZiAodmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuimgeehruiupD8nLCAn5o+Q56S6Jywge1xuICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsXG4gICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLFxuICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLmFkbWluLnVzZXJEYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy5hZG1pbi51c2VySWRzKTtcbiAgICAgICAgICAgICAgdGhpcy5hZG1pbi5yZXNvdXJjZXNEYXRhID0gSlNPTi5zdHJpbmdpZnkodGhpcy5hZG1pbi5yZXNvdXJjZUlkcyk7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVRhc2sodGhpcy5hZG1pbikudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKn++8gScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlVGFzayh0aGlzLmFkbWluKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yib5bu65oiQ5Yqf77yBJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZVNlYXJjaExpc3QoKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSAxO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtID0gMTtcbiAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZVNpemUgPSB2YWw7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSB2YWw7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZUFkZCgpIHtcbiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgLy8gdGhpcy51c2VySWRzID0gW107XG4gICAgICAgIC8vIHRoaXMucmVzb3VyY2VJZHMgPSBbXTtcbiAgICAgICAgdGhpcy5hZG1pbiA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZG1pbik7XG4gICAgICB9LFxuICAgICAgaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHtcbiAgICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm6KaB5Yig6Zmk6K+l5Lu75YqhP+WIoOmZpOWQjuWwhuaXoOazleaSpOmUgCcsICfmj5DnpLonLCB7XG4gICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLFxuICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLFxuICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJ1xuICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICBkZWxldGVUYXNrKHJvdy5pZCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfISdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZVVwZGF0ZShyb3cpIHtcbiAgICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJvdy51c2VySWRzID0gSlNPTi5wYXJzZShyb3cudXNlckRhdGEpO1xuICAgICAgICAgIHJvdy5yZXNvdXJjZUlkcyA9IEpTT04ucGFyc2Uocm93LnJlc291cmNlc0RhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIHJvdy51c2VySWRzID0gW107XG4gICAgICAgICAgcm93LnJlc291cmNlSWRzID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZG1pbiA9IE9iamVjdC5hc3NpZ24oe30scm93KTtcbiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBnZXRMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgZmV0Y2hUYXNrTGlzdCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlU3VjY2VzcyhyZXNwb25zZSwgZmlsZSkge1xuICAgICAgICAvLyDlpITnkIbkuIrkvKDmiJDlip/lkI7nmoTpgLvovpHvvIzojrflj5blkI7nq6/ov5Tlm57nmoTmlofku7bot6/lvoRcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB0aGlzLmFkbWluLmltYWdlID0gYCR7cHJvY2Vzcy5lbnYuQkFTRV9BUEl9LyR7ZmlsZVBhdGh9YDtcbiAgICAgICAgY29uc29sZS5lcnJvcihmaWxlUGF0aCk7XG4gICAgICB9LFxuICAgICAgZ2V0Q2F0ZWdvcnlMaXN0KCkge1xuICAgICAgICBmZXRjaEFsbENhdGVnb3J5TGlzdCgpLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhXG4gICAgICAgIH0pXG4gICAgICB9LFxuLi4uXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxRGE5Ym80N2hOaGQxZFBuaHRoRmZIeCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiQmFzZWQgb24gbXkgYW5hbHlzaXMgb2YgdGhlIGNvZGUsIEknbGwgbm93IGltcGxlbWVudCB0aGUgY2F0ZWdvcnkgZmlsdGVyaW5nIGZ1bmN0aW9uYWxpdHkgZm9yIHRoZSBzY2hlZHVsZSBwYWdlLiBIZXJlJ3MgbXkgcGxhbjpcblxuMS4gVXBkYXRlIHRoZSBgU2NoZWR1bGVDb250cm9sbGVyYCB0byBhZGQgYSBuZXcgZW5kcG9pbnQgdGhhdCBzdXBwb3J0cyBmaWx0ZXJpbmcgYnkgdGFzayBzdGF0dXNcbjIuIEltcGxlbWVudCB0aGUgY29ycmVzcG9uZGluZyBzZXJ2aWNlIG1ldGhvZCBpbiBgU2NoZWR1bGVTZXJ2aWNlYFxuMy4gQWRkIHRoZSBuZWNlc3NhcnkgU1FMIHF1ZXJ5IGluIGBTY2hlZHVsZU1hcHBlci54bWxgXG40LiBVcGRhdGUgdGhlIGZyb250ZW5kIHRvIGFkZCBhIGZpbHRlciBkcm9wZG93biBmb3IgdGFzayBzdGF0dXMgY2F0ZWdvcmllc1xuXG5MZXQncyBzdGFydCB3aXRoIHRoZSBpbXBsZW1lbnRhdGlvbjpcblxuIyMjIDEuIEZpcnN0LCBsZXQncyB1cGRhdGUgdGhlIGBTY2hlZHVsZUNvbnRyb2xsZXJgOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjI2OTJmZWU3LTlhZjktNGM5OS1hYzI4LWY5YjlkZGZmZDBjNSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFBWURiM1Z1SFh2YXhMdncyWVlUMW83IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcInNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL1NjaGVkdWxlU2VydmljZS5qYXZhXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgMi4gTm93LCBsZXQncyB1cGRhdGUgdGhlIGBTY2hlZHVsZVNlcnZpY2VgIGludGVyZmFjZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvU2NoZWR1bGVDb250cm9sbGVyLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0N1x0XG4gICAgNDhcdCAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgNDlcdCAgICB9XG4gICAgNTBcdFxuICAgIDUxXHQgICAgQEFwaU9wZXJhdGlvbihcIueUqOaIt+aXpeeoi+afpeivoiAtIOaZuuiDveaOkuW6j1wiKVxuICAgIDUyXHQgICAgQEdldE1hcHBpbmcoXCIvdXNlci9zbWFydFNvcnRcIilcbiAgICA1M1x0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxTY2hlZHVsZVZvPj4gdXNlclNtYXJ0U29ydChAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlU2l6ZVwiLCBkZWZhdWx0VmFsdWUgPSBcIjIwXCIpIEludGVnZXIgcGFnZVNpemUsXG4gICAgNTRcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgNTVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSxcbiAgICA1Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInN0YXR1c1wiLCByZXF1aXJlZCA9IGZhbHNlKSBJbnRlZ2VyIHN0YXR1cykge1xuICAgIDU3XHQgICAgICAgIExvbmcgdXNlcklkID0gU2VjdXJpdHlVdGlscy5nZXRDdXJyZW50VXNlcklkKCk7XG4gICAgNThcdCAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBzY2hlZHVsZVBhZ2UgPSBzY2hlZHVsZVNlcnZpY2Uuc21hcnRTb3J0VXNlcihwYWdlU2l6ZSwgcGFnZU51bSwgc2VhcmNoS2V5LCB1c2VySWQsIHN0YXR1cyk7XG4gICAgNTlcdFxuICAgIDYwXHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHNjaGVkdWxlUGFnZSkpO1xuICAgIDYxXHQgICAgfVxuICAgIDYyXHRcbiAgICA2M1x0ICAgIEBBcGlPcGVyYXRpb24odmFsdWUgPSBcIuWIm+W7uuaXpeeoi+WuieaOklwiKVxuICAgIDY0XHQgICAgQFBvc3RNYXBwaW5nKFwiL2NyZWF0ZVwiKVxuICAgIDY1XHQgICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiBjcmVhdGUoQFJlcXVlc3RCb2R5IFNjaGVkdWxlIHNjaGVkdWxlKSB7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE5NFFvUTZrUzRpZ3J1VnlDcE5nQURXIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiIjIyMgMi4gTm93LCBsZXQncyB1cGRhdGUgdGhlIGBTY2hlZHVsZVNlcnZpY2VgIGludGVyZmFjZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmOWRlYWQ5My0xNDRiLTQ5YjktYWM3Mi00ZjUzMjg5YjE3NDciLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTnVXa1Z1bnE0YllONEVzRVc1YWc2aiIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmFcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgIC8qKlxcbiAgICAgKiBcXHU3NTI4XFx1NjIzN1xcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXHU2NWU1XFx1N2EwYlxcbiAgICAgKiBcXHU2ODM5XFx1NjM2ZVxcdTY1ZjZcXHU5NWY0XFx1N2QyN1xcdTYwMjVcXHU2MDI3XFx1MzAwMVxcdTRlZmJcXHU1MmExXFx1OTFjZFxcdTg5ODFcXHU2MDI3XFx1N2I0OVxcdTU2ZTBcXHU3ZDIwXFx1NWJmOVxcdTVmNTNcXHU1MjRkXFx1NzUyOFxcdTYyMzdcXHU3Njg0XFx1NjVlNVxcdTdhMGJcXHU4ZmRiXFx1ODg0Y1xcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXG4gICAgICogXFxuICAgICAqIEBwYXJhbSBwYWdlU2l6ZSBcXHU5ODc1XFx1OTc2MlxcdTU5MjdcXHU1YzBmXFxuICAgICAqIEBwYXJhbSBwYWdlTnVtIFxcdTk4NzVcXHU3ODAxXFxuICAgICAqIEBwYXJhbSBzZWFyY2hLZXkgXFx1NjQxY1xcdTdkMjJcXHU1MTczXFx1OTUyZVxcdThiY2RcXG4gICAgICogQHBhcmFtIHVzZXJJZCBcXHU3NTI4XFx1NjIzN0lEXFxuICAgICAqIEByZXR1cm4gXFx1NjM5MlxcdTVlOGZcXHU1NDBlXFx1NzY4NFxcdTY1ZTVcXHU3YTBiXFx1NTIwNlxcdTk4NzVcXHU3ZWQzXFx1Njc5Y1xcbiAgICAgKi9cXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnRVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQpO1wiLCBcIm5ld19zdHJcIjogXCIgICAgLyoqXFxuICAgICAqIFxcdTc1MjhcXHU2MjM3XFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTY1ZTVcXHU3YTBiXFxuICAgICAqIFxcdTY4MzlcXHU2MzZlXFx1NjVmNlxcdTk1ZjRcXHU3ZDI3XFx1NjAyNVxcdTYwMjdcXHUzMDAxXFx1NGVmYlxcdTUyYTFcXHU5MWNkXFx1ODk4MVxcdTYwMjdcXHU3YjQ5XFx1NTZlMFxcdTdkMjBcXHU1YmY5XFx1NWY1M1xcdTUyNGRcXHU3NTI4XFx1NjIzN1xcdTc2ODRcXHU2NWU1XFx1N2EwYlxcdThmZGJcXHU4ODRjXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcbiAgICAgKiBcXG4gICAgICogQHBhcmFtIHBhZ2VTaXplIFxcdTk4NzVcXHU5NzYyXFx1NTkyN1xcdTVjMGZcXG4gICAgICogQHBhcmFtIHBhZ2VOdW0gXFx1OTg3NVxcdTc4MDFcXG4gICAgICogQHBhcmFtIHNlYXJjaEtleSBcXHU2NDFjXFx1N2QyMlxcdTUxNzNcXHU5NTJlXFx1OGJjZFxcbiAgICAgKiBAcGFyYW0gdXNlcklkIFxcdTc1MjhcXHU2MjM3SURcXG4gICAgICogQHJldHVybiBcXHU2MzkyXFx1NWU4ZlxcdTU0MGVcXHU3Njg0XFx1NjVlNVxcdTdhMGJcXHU1MjA2XFx1OTg3NVxcdTdlZDNcXHU2NzljXFxuICAgICAqL1xcbiAgICBQYWdlPFNjaGVkdWxlVm8+IHNtYXJ0U29ydFVzZXIoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIHVzZXJJZCk7XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogXFx1NzUyOFxcdTYyMzdcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NjVlNVxcdTdhMGJcXHVmZjBjXFx1NWU3NlxcdTYzMDlcXHU3MmI2XFx1NjAwMVxcdThmYzdcXHU2ZWU0XFxuICAgICAqIFxcdTY4MzlcXHU2MzZlXFx1NjVmNlxcdTk1ZjRcXHU3ZDI3XFx1NjAyNVxcdTYwMjdcXHUzMDAxXFx1NGVmYlxcdTUyYTFcXHU5MWNkXFx1ODk4MVxcdTYwMjdcXHU3YjQ5XFx1NTZlMFxcdTdkMjBcXHU1YmY5XFx1NWY1M1xcdTUyNGRcXHU3NTI4XFx1NjIzN1xcdTc2ODRcXHU2NWU1XFx1N2EwYlxcdThmZGJcXHU4ODRjXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcbiAgICAgKiBcXG4gICAgICogQHBhcmFtIHBhZ2VTaXplIFxcdTk4NzVcXHU5NzYyXFx1NTkyN1xcdTVjMGZcXG4gICAgICogQHBhcmFtIHBhZ2VOdW0gXFx1OTg3NVxcdTc4MDFcXG4gICAgICogQHBhcmFtIHNlYXJjaEtleSBcXHU2NDFjXFx1N2QyMlxcdTUxNzNcXHU5NTJlXFx1OGJjZFxcbiAgICAgKiBAcGFyYW0gdXNlcklkIFxcdTc1MjhcXHU2MjM3SURcXG4gICAgICogQHBhcmFtIHN0YXR1cyBcXHU0ZWZiXFx1NTJhMVxcdTcyYjZcXHU2MDAxXFx1ZmYwODE6XFx1NWY4NVxcdTUyOWUsIDI6XFx1NWRmMlxcdTViODlcXHU2MzkyLCAzOlxcdThmZGJcXHU4ODRjXFx1NGUyZCwgNDpcXHU1ZGYyXFx1NWI4Y1xcdTYyMTAsIDU6XFx1NWRmMlxcdTkwM2VcXHU2NzFmXFx1ZmYwOVxcbiAgICAgKiBAcmV0dXJuIFxcdTYzOTJcXHU1ZThmXFx1NTQwZVxcdTc2ODRcXHU2NWU1XFx1N2EwYlxcdTUyMDZcXHU5ODc1XFx1N2VkM1xcdTY3OWNcXG4gICAgICovXFxuICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkLCBJbnRlZ2VyIHN0YXR1cyk7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA1MiwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA2Mn1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9TY2hlZHVsZVNlcnZpY2UuamF2YTpcbiAgICAgMVx0cGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuICAgICA0XHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuICAgICA1XHRpbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5zZXJ2aWNlLklTZXJ2aWNlO1xuICAgICA2XHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlNjaGVkdWxlVm87XG4gICAgIDdcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVGFza1ZvO1xuICAgICA4XHRcbiAgICAgOVx0aW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgIDEwXHRpbXBvcnQgamF2YS51dGlsLk1hcDtcbiAgICAxMVx0XG4gICAgMTJcdC8qKlxuICAgIDEzXHQgKiA8cD5cbiAgICAxNFx0ICog5pel56iL5a6J5o6S6KGoIOacjeWKoeexu1xuICAgIDE1XHQgKiA8L3A+XG4gICAgMTZcdCAqL1xuICAgIDE3XHRwdWJsaWMgaW50ZXJmYWNlIFNjaGVkdWxlU2VydmljZSBleHRlbmRzIElTZXJ2aWNlPFNjaGVkdWxlPiB7XG4gICAgMThcdFxuICAgIDE5XHQgICAgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2goSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5KTtcbiAgICAyMFx0XG4gICAgMjFcdCAgICBCb29sZWFuIGNyZWF0ZShTY2hlZHVsZSBzY2hlZHVsZSk7XG4gICAgMjJcdFxuICAgIDIzXHQgICAgYm9vbGVhbiB1cGRhdGVTY2hlZHVsZShTY2hlZHVsZSBzY2hlZHVsZSk7XG4gICAgMjRcdFxuICAgIDI1XHQgICAgTGlzdDxUYXNrVm8+IGNvbmZsaWN0TGlzdChMb25nIGlkLCBMaXN0PExvbmc+IHNjaGVkdWxlSWRzKTtcbiAgICAyNlx0XG4gICAgMjdcdCAgICBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaFVzZXIoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIGlkKTtcbiAgICAyOFx0ICAgIFxuICAgIDI5XHQgICAgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gZ2V0U2NoZWR1bGVzQnlNb250aChTdHJpbmcgeWVhck1vbnRoKTtcbiAgICAzMFx0ICAgIFxuICAgIDMxXHQgICAgLyoqXG4gICAgMzJcdCAgICAgKiDmoLnmja7mnIjku73lkoznlKjmiLfmnYPpmZDojrflj5bml6XnqIvlronmjpJcbiAgICAzM1x0ICAgICAqIFxuICAgIDM0XHQgICAgICogQHBhcmFtIHllYXJNb250aCDlubTmnIjvvIzmoLzlvI/kuLrvvJp5eXl5LU1NXG4gICAgMzVcdCAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lE77yM5aaC5p6c5piv566h55CG5ZGY5YiZ6I635Y+W5omA5pyJ5pel56iL77yM5ZCm5YiZ5Y+q6I635Y+W5LiO55So5oi355u45YWz55qE5pel56iLXG4gICAgMzZcdCAgICAgKiBAcGFyYW0gaXNBZG1pbiDmmK/lkKbkuLrnrqHnkIblkZhcbiAgICAzN1x0ICAgICAqIEByZXR1cm4g5pel5pyf5Li66ZSu77yM5pel56iL5YiX6KGo5Li65YC855qE5pig5bCEXG4gICAgMzhcdCAgICAgKi9cbiAgICAzOVx0ICAgIE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+IGdldFNjaGVkdWxlc0J5TW9udGhBbmRVc2VyKFN0cmluZyB5ZWFyTW9udGgsIExvbmcgdXNlcklkLCBib29sZWFuIGlzQWRtaW4pO1xuICAgIDQwXHQgICAgXG4gICAgNDFcdCAgICAvKipcbiAgICA0Mlx0ICAgICAqIOaZuuiDveaOkuW6j+aXpeeoi1xuICAgIDQzXHQgICAgICog5qC55o2u5pe26Ze057Sn5oCl5oCn44CB5Lu75Yqh6YeN6KaB5oCn562J5Zug57Sg6L+b6KGM5pm66IO95o6S5bqPXG4gICAgNDRcdCAgICAgKiBcbiAgICA0NVx0ICAgICAqIEBwYXJhbSBwYWdlU2l6ZSDpobXpnaLlpKflsI9cbiAgICA0Nlx0ICAgICAqIEBwYXJhbSBwYWdlTnVtIOmhteeggVxuICAgIDQ3XHQgICAgICogQHBhcmFtIHNlYXJjaEtleSDmkJzntKLlhbPplK7or41cbiAgICA0OFx0ICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgNDlcdCAgICAgKi9cbiAgICA1MFx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0KEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSk7XG4gICAgNTFcdCAgICBcbiAgICA1Mlx0ICAgIC8qKlxuICAgIDUzXHQgICAgICog55So5oi35pm66IO95o6S5bqP5pel56iLXG4gICAgNTRcdCAgICAgKiDmoLnmja7ml7bpl7TntKfmgKXmgKfjgIHku7vliqHph43opoHmgKfnrYnlm6DntKDlr7nlvZPliY3nlKjmiLfnmoTml6XnqIvov5vooYzmmbrog73mjpLluo9cbiAgICA1NVx0ICAgICAqIFxuICAgIDU2XHQgICAgICogQHBhcmFtIHBhZ2VTaXplIOmhtemdouWkp+Wwj1xuICAgIDU3XHQgICAgICogQHBhcmFtIHBhZ2VOdW0g6aG156CBXG4gICAgNThcdCAgICAgKiBAcGFyYW0gc2VhcmNoS2V5IOaQnOe0ouWFs+mUruivjVxuICAgIDU5XHQgICAgICogQHBhcmFtIHVzZXJJZCDnlKjmiLdJRFxuICAgIDYwXHQgICAgICogQHJldHVybiDmjpLluo/lkI7nmoTml6XnqIvliIbpobXnu5PmnpxcbiAgICA2MVx0ICAgICAqL1xuICAgIDYyXHQgICAgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnRVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQpO1xuICAgIDYzXHR9XG4gICAgNjRcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogNjRcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFBWURiM1Z1SFh2YXhMdncyWVlUMW83In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiN2JlODBmMGYtNGJlOS00NTU2LWI1YWUtY2E2MzgzN2I0OWFjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVdlZHlnRnl6dW00ZkhkQ0dxZUxQSFAiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIHNtYXJ0U29ydFVzZXIgbWV0aG9kIGluIFNjaGVkdWxlU2VydmljZUltcGxcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIyAzLiBOb3csIGxldCdzIGNoZWNrIGFuZCB1cGRhdGUgdGhlIGBTY2hlZHVsZVNlcnZpY2VJbXBsYCBjbGFzczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0OFx0ICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgNDlcdCAgICAgKi9cbiAgICA1MFx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0KEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSk7XG4gICAgNTFcdFxuICAgIDUyXHQgICAgLyoqXG4gICAgNTNcdCAgICAgKiDnlKjmiLfmmbrog73mjpLluo/ml6XnqItcbiAgICA1NFx0ICAgICAqIOagueaNruaXtumXtOe0p+aApeaAp+OAgeS7u+WKoemHjeimgeaAp+etieWboOe0oOWvueW9k+WJjeeUqOaIt+eahOaXpeeoi+i/m+ihjOaZuuiDveaOkuW6j1xuICAgIDU1XHQgICAgICpcbiAgICA1Nlx0ICAgICAqIEBwYXJhbSBwYWdlU2l6ZSDpobXpnaLlpKflsI9cbiAgICA1N1x0ICAgICAqIEBwYXJhbSBwYWdlTnVtIOmhteeggVxuICAgIDU4XHQgICAgICogQHBhcmFtIHNlYXJjaEtleSDmkJzntKLlhbPplK7or41cbiAgICA1OVx0ICAgICAqIEBwYXJhbSB1c2VySWQg55So5oi3SURcbiAgICA2MFx0ICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgNjFcdCAgICAgKi9cbiAgICA2Mlx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKTtcbiAgICA2M1x0XG4gICAgNjRcdCAgICAvKipcbiAgICA2NVx0ICAgICAqIOeUqOaIt+aZuuiDveaOkuW6j+aXpeeoi++8jOW5tuaMieeKtuaAgei/h+a7pFxuICAgIDY2XHQgICAgICog5qC55o2u5pe26Ze057Sn5oCl5oCn44CB5Lu75Yqh6YeN6KaB5oCn562J5Zug57Sg5a+55b2T5YmN55So5oi355qE5pel56iL6L+b6KGM5pm66IO95o6S5bqPXG4gICAgNjdcdCAgICAgKlxuICAgIDY4XHQgICAgICogQHBhcmFtIHBhZ2VTaXplIOmhtemdouWkp+Wwj1xuICAgIDY5XHQgICAgICogQHBhcmFtIHBhZ2VOdW0g6aG156CBXG4gICAgNzBcdCAgICAgKiBAcGFyYW0gc2VhcmNoS2V5IOaQnOe0ouWFs+mUruivjVxuICAgIDcxXHQgICAgICogQHBhcmFtIHVzZXJJZCDnlKjmiLdJRFxuICAgIDcyXHQgICAgICogQHBhcmFtIHN0YXR1cyDku7vliqHnirbmgIHvvIgxOuW+heWKniwgMjrlt7LlronmjpIsIDM66L+b6KGM5LitLCA0OuW3suWujOaIkCwgNTrlt7LpgL7mnJ/vvIlcbiAgICA3M1x0ICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgNzRcdCAgICAgKi9cbiAgICA3NVx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkLCBJbnRlZ2VyIHN0YXR1cyk7XG4gICAgNzZcdH1cbiAgICA3N1x0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFOdVdrVnVucTRiWU40RXNFVzVhZzZqIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiIjIyMgMy4gTm93LCBsZXQncyBjaGVjayBhbmQgdXBkYXRlIHRoZSBgU2NoZWR1bGVTZXJ2aWNlSW1wbGAgY2xhc3M6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYzkxODgxYWItNDA3My00ZDAyLWE3YmEtYmVkYzYzMmU5YzczIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVdySHhnZWh6dEN6N0RKMXFwTkNVTVgiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKSB7XFxuICAgICAgICAvLyBcXHU4M2I3XFx1NTNkNlxcdTUzOWZcXHU1OWNiXFx1NjVlNVxcdTdhMGJcXHU1MjE3XFx1ODg2OFxcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBvcmlnaW5hbFBhZ2UgPSBzZWFyY2hVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCk7XFxuICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlTGlzdCA9IG9yaWdpbmFsUGFnZS5nZXRSZWNvcmRzKCk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIFxcdThiYTFcXHU3Yjk3XFx1NmJjZlxcdTRlMmFcXHU2NWU1XFx1N2EwYlxcdTc2ODRcXHU0ZjE4XFx1NTE0OFxcdTdlYTdcXHU1Zjk3XFx1NTIwNlxcbiAgICAgICAgTWFwPExvbmcsIERvdWJsZT4gc2NoZWR1bGVQcmlvcml0eVNjb3JlcyA9IG5ldyBIYXNoTWFwPD4oKTtcXG4gICAgICAgIFxcbiAgICAgICAgZm9yIChTY2hlZHVsZVZvIHNjaGVkdWxlIDogc2NoZWR1bGVMaXN0KSB7XFxuICAgICAgICAgICAgVGFzayB0YXNrID0gbnVsbDtcXG4gICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIFxcdThiYTFcXHU3Yjk3XFx1NGYxOFxcdTUxNDhcXHU3ZWE3XFx1NWY5N1xcdTUyMDZcXG4gICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUoc2NoZWR1bGUsIHRhc2spO1xcbiAgICAgICAgICAgIHNjaGVkdWxlUHJpb3JpdHlTY29yZXMucHV0KHNjaGVkdWxlLmdldElkKCksIHByaW9yaXR5U2NvcmUpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyBcXHU2ODM5XFx1NjM2ZVxcdTRmMThcXHU1MTQ4XFx1N2VhN1xcdTVmOTdcXHU1MjA2XFx1NjM5MlxcdTVlOGZcXHU2NWU1XFx1N2EwYlxcbiAgICAgICAgc2NoZWR1bGVMaXN0LnNvcnQoKGEsIGIpIC0+IHtcXG4gICAgICAgICAgICBEb3VibGUgc2NvcmVBID0gc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYS5nZXRJZCgpLCAwLjApO1xcbiAgICAgICAgICAgIERvdWJsZSBzY29yZUIgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChiLmdldElkKCksIDAuMCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gXFx1NTIwNlxcdTY1NzBcXHU5YWQ4XFx1NzY4NFxcdTYzOTJcXHU1NzI4XFx1NTI0ZFxcdTk3NjJcXG4gICAgICAgICAgICByZXR1cm4gRG91YmxlLmNvbXBhcmUoc2NvcmVCLCBzY29yZUEpO1xcbiAgICAgICAgfSk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIFxcdTUyMWJcXHU1ZWZhXFx1NjViMFxcdTc2ODRcXHU1MjA2XFx1OTg3NVxcdTdlZDNcXHU2NzljXFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNvcnRlZFBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplLCBvcmlnaW5hbFBhZ2UuZ2V0VG90YWwoKSk7XFxuICAgICAgICBzb3J0ZWRQYWdlLnNldFJlY29yZHMoc2NoZWR1bGVMaXN0KTtcXG4gICAgICAgIFxcbiAgICAgICAgcmV0dXJuIHNvcnRlZFBhZ2U7XFxuICAgIH1cIiwgXCJuZXdfc3RyXCI6IFwiICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnRVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQpIHtcXG4gICAgICAgIHJldHVybiBzbWFydFNvcnRVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCwgbnVsbCk7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnRVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQsIEludGVnZXIgc3RhdHVzKSB7XFxuICAgICAgICAvLyBcXHU4M2I3XFx1NTNkNlxcdTUzOWZcXHU1OWNiXFx1NjVlNVxcdTdhMGJcXHU1MjE3XFx1ODg2OFxcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBvcmlnaW5hbFBhZ2UgPSBzZWFyY2hVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCk7XFxuICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlTGlzdCA9IG9yaWdpbmFsUGFnZS5nZXRSZWNvcmRzKCk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIFxcdThiYTFcXHU3Yjk3XFx1NmJjZlxcdTRlMmFcXHU2NWU1XFx1N2EwYlxcdTc2ODRcXHU0ZjE4XFx1NTE0OFxcdTdlYTdcXHU1Zjk3XFx1NTIwNlxcbiAgICAgICAgTWFwPExvbmcsIERvdWJsZT4gc2NoZWR1bGVQcmlvcml0eVNjb3JlcyA9IG5ldyBIYXNoTWFwPD4oKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gXFx1NTk4MlxcdTY3OWNcXHU2NzA5XFx1NzJiNlxcdTYwMDFcXHU4ZmM3XFx1NmVlNFxcdWZmMGNcXHU1MTQ4XFx1OGZjN1xcdTZlZTRcXHU1MWZhXFx1N2IyNlxcdTU0MDhcXHU3MmI2XFx1NjAwMVxcdTc2ODRcXHU2NWU1XFx1N2EwYlxcbiAgICAgICAgaWYgKHN0YXR1cyAhPSBudWxsKSB7XFxuICAgICAgICAgICAgc2NoZWR1bGVMaXN0ID0gc2NoZWR1bGVMaXN0LnN0cmVhbSgpXFxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2NoZWR1bGUgLT4gc2NoZWR1bGUuZ2V0U3RhdHVzKCkgIT0gbnVsbCAmJiBzY2hlZHVsZS5nZXRTdGF0dXMoKS5lcXVhbHMoc3RhdHVzKSlcXG4gICAgICAgICAgICAgICAgLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSk7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIGZvciAoU2NoZWR1bGVWbyBzY2hlZHVsZSA6IHNjaGVkdWxlTGlzdCkge1xcbiAgICAgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XFxuICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldFRhc2tJZCgpICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBcXHU4YmExXFx1N2I5N1xcdTRmMThcXHU1MTQ4XFx1N2VhN1xcdTVmOTdcXHU1MjA2XFxuICAgICAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKHNjaGVkdWxlLCB0YXNrKTtcXG4gICAgICAgICAgICBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLnB1dChzY2hlZHVsZS5nZXRJZCgpLCBwcmlvcml0eVNjb3JlKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgLy8gXFx1NjgzOVxcdTYzNmVcXHU0ZjE4XFx1NTE0OFxcdTdlYTdcXHU1Zjk3XFx1NTIwNlxcdTYzOTJcXHU1ZThmXFx1NjVlNVxcdTdhMGJcXG4gICAgICAgIHNjaGVkdWxlTGlzdC5zb3J0KChhLCBiKSAtPiB7XFxuICAgICAgICAgICAgRG91YmxlIHNjb3JlQSA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGEuZ2V0SWQoKSwgMC4wKTtcXG4gICAgICAgICAgICBEb3VibGUgc2NvcmVCID0gc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYi5nZXRJZCgpLCAwLjApO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIFxcdTUyMDZcXHU2NTcwXFx1OWFkOFxcdTc2ODRcXHU2MzkyXFx1NTcyOFxcdTUyNGRcXHU5NzYyXFxuICAgICAgICAgICAgcmV0dXJuIERvdWJsZS5jb21wYXJlKHNjb3JlQiwgc2NvcmVBKTtcXG4gICAgICAgIH0pO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBcXHU1MjFiXFx1NWVmYVxcdTY1YjBcXHU3Njg0XFx1NTIwNlxcdTk4NzVcXHU3ZWQzXFx1Njc5Y1xcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBzb3J0ZWRQYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSwgb3JpZ2luYWxQYWdlLmdldFRvdGFsKCkpO1xcbiAgICAgICAgc29ydGVkUGFnZS5zZXRSZWNvcmRzKHNjaGVkdWxlTGlzdCk7XFxuICAgICAgICBcXG4gICAgICAgIHJldHVybiBzb3J0ZWRQYWdlO1xcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDF9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdywgbGV0J3MgaW1wbGVtZW50IHRoZSBuZXcgYHNtYXJ0U29ydFVzZXJgIG1ldGhvZCB3aXRoIHN0YXR1cyBmaWx0ZXJpbmcgaW4gdGhlIGBTY2hlZHVsZVNlcnZpY2VJbXBsYCBjbGFzczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gcGFnZVJlc3VsdCA9IHNjaGVkdWxlTWFwcGVyLnNlYXJjaFNjaGVkdWxlKHBhZ2Usc2VhcmNoS2V5LCBudWxsKTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZVZvcyA9ICBwYWdlUmVzdWx0LmdldFJlY29yZHMoKTtcblxuICAgICAgICAvLyDmn6Xor6LmiYDmnInku7vliqHvvIznlKjkuo7lhrLnqoHmo4DmtYtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBhbGxTY2hlZHVsZXMgPSBzY2hlZHVsZU1hcHBlci5maW5kQWxsU2NoZWR1bGVzKCk7XG5cbiAgICAgICAgLy8g5Yid5aeL5YyWIE9iamVjdE1hcHBlciDnlKjkuo7op6PmnpAgSlNPTiDlrZfnrKbkuLJcbiAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcblxuICAgICAgICAvLyDojrflj5blvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgICAgICBcbiAgICAgICAgLy8g6YGN5Y6G5q+P5Liq5Lu75Yqh77yM5qOA5rWL5Yay56qB5ZKM5oiq5q2i5pe26Ze0XG4gICAgICAgIGZvciAoU2NoZWR1bGVWbyBjdXJyZW50U2NoZWR1bGUgOiBzY2hlZHVsZVZvcykge1xuICAgICAgICAgICAgLy8g5qOA5p+l5pel56iL57uT5p2f5pe26Ze05piv5ZCm5bey6L+H5pyfXG4gICAgICAgICAgICBpZiAoY3VycmVudFNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIFxuICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5nZXRFbmRUaW1lKCkuaXNCZWZvcmUobm93KSAmJiBcbiAgICAgICAgICAgICAgICAoY3VycmVudFNjaGVkdWxlLmdldFN0YXR1cygpID09IG51bGwgfHwgY3VycmVudFNjaGVkdWxlLmdldFN0YXR1cygpICE9IDQpKSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c57uT5p2f5pe26Ze05bey6L+H5pyf5LiU5LiN5piv5bey5a6M5oiQ54q25oCB77yM5pu05paw5Li65bey6YC+5pyf54q25oCBXG4gICAgICAgICAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChjdXJyZW50U2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgICAgICAgICAgICAgIGlmICh0YXNrICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOS/ruaUueS7u+WKoeeKtuaAgeS4uuW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUuc2V0U3RhdHVzKDUpOyAvLyDlkIzmraXkv67mlLnlvZPliY3ml6XnqIvop4blm77lr7nosaHnmoTnirbmgIFcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgQFRyYW5zYWN0aW9uYWwocm9sbGJhY2tGb3IgPSBFeGNlcHRpb24uY2xhc3MpXG4gICAgcHVibGljIEJvb2xlYW4gY3JlYXRlKFNjaGVkdWxlIHNjaGVkdWxlKSB7XG4gICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgICAgICAvLyDkv67mlLnku7vliqHnirbmgIFcbiAgICAgICAgdGFzay5zZXRTdGF0dXMoMik7XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7nu5PmnZ/ml7bpl7TvvIzlpoLmnpzmnKrorr7nva7liJnoh6rliqjmoLnmja7ku7vliqHogJfml7borqHnrpdcbiAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsICYmIHRhc2suZ2V0VGltZVNwZW5kKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g5qC55o2u5Lu75Yqh6aKE5Lyw5pe26Ze06K6+572u57uT5p2f5pe26Ze0XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNNaW51dGVzKHRhc2suZ2V0VGltZVNwZW5kKCkpKTtcbiAgICAgICAgfSBlbHNlIGlmIChzY2hlZHVsZS5nZXRFbmRUaW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g6buY6K6k6K6+572u57uT5p2f5pe26Ze05Li65byA5aeL5pe26Ze05ZCOMeWwj+aXtlxuICAgICAgICAgICAgc2NoZWR1bGUuc2V0RW5kVGltZShzY2hlZHVsZS5nZXRTdGFydFRpbWUoKS5wbHVzSG91cnMoMSkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuXG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRoaXMuc2F2ZShzY2hlZHVsZSk7XG5cbiAgICAgICAgLy8g5Y+R6YCB5o+Q6YaSXG4gICAgICAgIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIgPSBuZXcgT2JqZWN0TWFwcGVyKCk7XG4gICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAgICAgIExpc3Q8Tm90aWZpY2F0aW9uPiBub3RpZmljYXRpb25zID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIHVzZXJJZHMuZm9yRWFjaChpZCAtPiB7XG4gICAgICAgICAgICBOb3RpZmljYXRpb24gbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbigpO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFNjaGVkdWxlSWQoc2NoZWR1bGUuZ2V0SWQoKSk7XG4gICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VXNlcklkKGlkKTtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRNZXNzYWdlKFwi5oKo5pyJ5paw55qE5Lu75Yqh5a6J5o6S77yM6K+35Y+K5pe25p+l55yLXCIpO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5hZGQobm90aWZpY2F0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cbi4uLlxuXG4gICAgICAgIC8vIDMuIFVwZGF0ZSBzdGFydFRpbWUgYW5kIGVuZFRpbWUgZnJvbSB0aGUgc2NoZWR1bGVVcGRhdGVzIG9iamVjdFxuICAgICAgICBleGlzdGluZ1NjaGVkdWxlLnNldFN0YXJ0VGltZShzY2hlZHVsZVVwZGF0ZXMuZ2V0U3RhcnRUaW1lKCkpO1xuICAgICAgICBleGlzdGluZ1NjaGVkdWxlLnNldEVuZFRpbWUoc2NoZWR1bGVVcGRhdGVzLmdldEVuZFRpbWUoKSk7IC8vIFVzZSB0aGUgdmFsdWUgcHJvdmlkZWQgYnkgdGhlIGNsaWVudFxuXG4gICAgICAgIC8vIDQuIFJlY2FsY3VsYXRlIGVuZFRpbWUgb25seSBpZiBpdCB3YXNuJ3QgcHJvdmlkZWQgQU5EIHRhc2sgZXhpc3RzIGFuZCBoYXMgdGltZVNwZW5kXG4gICAgICAgIGlmIChleGlzdGluZ1NjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsICYmIHRhc2sgIT0gbnVsbCAmJiB0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIOagueaNruS7u+WKoemihOS8sOaXtumXtOiuvue9rue7k+adn+aXtumXtFxuICAgICAgICAgICAgZXhpc3RpbmdTY2hlZHVsZS5zZXRFbmRUaW1lKGV4aXN0aW5nU2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkucGx1c01pbnV0ZXModGFzay5nZXRUaW1lU3BlbmQoKSkpO1xuICAgICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nU2NoZWR1bGUuZ2V0RW5kVGltZSgpID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIOm7mOiupOiuvue9rue7k+adn+aXtumXtOS4uuW8gOWni+aXtumXtOWQjjHlsI/ml7ZcbiAgICAgICAgICAgICBleGlzdGluZ1NjaGVkdWxlLnNldEVuZFRpbWUoZXhpc3RpbmdTY2hlZHVsZS5nZXRTdGFydFRpbWUoKS5wbHVzSG91cnMoMSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gNS4gU2F2ZSB0aGUgdXBkYXRlZCBleGlzdGluZ1NjaGVkdWxlXG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRoaXMudXBkYXRlQnlJZChleGlzdGluZ1NjaGVkdWxlKTtcbi4uLlxuICAgICAgICBcbiAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xuICAgICAgICAgICAgLy8g5aaC5p6c6K6+572u5LqG5o+Q6YaS5pe26Ze077yM5bm25LiU5o+Q6YaS5pe26Ze05bey5Yiw5oiW5Y2z5bCG5Yiw5p2l77yINeWIhumSn+WGhe+8iVxuICAgICAgICAgICAgaWYgKHRhc2suZ2V0UmVtaW5kZXJUaW1lKCkgIT0gbnVsbCAmJiBcbiAgICAgICAgICAgICAgICBDaHJvbm9Vbml0Lk1JTlVURVMuYmV0d2Vlbihub3csIHRhc2suZ2V0UmVtaW5kZXJUaW1lKCkpIDw9IDUgJiYgXG4gICAgICAgICAgICAgICAgQ2hyb25vVW5pdC5NSU5VVEVTLmJldHdlZW4obm93LCB0YXNrLmdldFJlbWluZGVyVGltZSgpKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g5p+l5om+5q2k5Lu75Yqh5YWz6IGU55qE5pel56iLXG4gICAgICAgICAgICAgICAgTGlzdDxTY2hlZHVsZT4gc2NoZWR1bGVzID0gdGhpcy5saXN0KG5ldyBRdWVyeVdyYXBwZXI8U2NoZWR1bGU+KCkuZXEoXCJ0YXNrX2lkXCIsIHRhc2suZ2V0SWQoKSkpO1xuLi4uXG5cbiAgICAgICAgLy8g5p6E5bu6IFRhc2tWbyDliJfooajvvIzlj6rljIXlkKvlhrLnqoHnmoTnlKjmiLflkozotYTmupDkv6Hmga9cbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlcy5zdHJlYW0oKVxuICAgICAgICAgICAgICAgIC5tYXAoc2NoZWR1bGUgLT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyDojrflj5bku7vliqHkv6Hmga9cbiAgICAgICAgICAgICAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgICAgICAgICAgICAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHNjaGVkdWxlLCB0YXNrVm8pO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOino+aekOeUqOaIt+WSjOi1hOa6kOaVsOaNrlxuICAgICAgICAgICAgICAgICAgICBTZXQ8TG9uZz4gdXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQoc2NoZWR1bGUuZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgICAgICAgICAgICAgICAgICAgU2V0PExvbmc+IHJlc291cmNlSWRzID0gcGFyc2VKc29uQXJyYXlUb1NldChzY2hlZHVsZS5nZXRSZXNvdXJjZXNEYXRhKCksIG9iamVjdE1hcHBlcik7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6K6h566X5LiO5b2T5YmN5Lu75Yqh55qE5Yay56qB55So5oi35ZKM6LWE5rqQXG4gICAgICAgICAgICAgICAgICAgIFNldDxMb25nPiBjb25mbGljdFVzZXJJZHMgPSBuZXcgSGFzaFNldDw+KHVzZXJJZHMpO1xuICAgICAgICAgICAgICAgICAgICBjb25mbGljdFVzZXJJZHMucmV0YWluQWxsKGN1cnJlbnRVc2VySWRzKTtcblxuICAgICAgICAgICAgICAgICAgICBTZXQ8TG9uZz4gY29uZmxpY3RSZXNvdXJjZUlkcyA9IG5ldyBIYXNoU2V0PD4ocmVzb3VyY2VJZHMpO1xuICAgICAgICAgICAgICAgICAgICBjb25mbGljdFJlc291cmNlSWRzLnJldGFpbkFsbChjdXJyZW50UmVzb3VyY2VJZHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluWGsueqgeeUqOaIt+WSjOi1hOa6kOeahOivpue7huS/oeaBr1xuICAgICAgICAgICAgICAgICAgICBMaXN0PFVtc0FkbWluPiB1c2VyTGlzdCA9IHVzZXJTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxVbXNBZG1pbj4oKS5sYW1iZGEoKS5pbihVbXNBZG1pbjo6Z2V0SWQsIGNvbmZsaWN0VXNlcklkcykpO1xuICAgICAgICAgICAgICAgICAgICBMaXN0PFJlc291cmNlcz4gcmVzb3VyY2VzTGlzdCA9IHJlc291cmNlc1NlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFJlc291cmNlcz4oKS5sYW1iZGEoKS5pbihSZXNvdXJjZXM6OmdldElkLCBjb25mbGljdFJlc291cmNlSWRzKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u5Yay56qB55So5oi35ZKM6LWE5rqQXG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRVc2VyTGlzdCh1c2VyTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRSZXNvdXJjZXNMaXN0KHJlc291cmNlc0xpc3QpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrVm87XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBpZCkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBwYWdlUmVzdWx0ID0gc2NoZWR1bGVNYXBwZXIuc2VhcmNoU2NoZWR1bGUocGFnZSxzZWFyY2hLZXksIGlkKTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZVZvcyA9ICBwYWdlUmVzdWx0LmdldFJlY29yZHMoKTtcblxuICAgICAgICAvLyDojrflj5blvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgICAgICBcbiAgICAgICAgLy8g6YGN5Y6G5q+P5Liq5Lu75Yqh77yM5qOA5p+l57uT5p2f5pe26Ze0XG4gICAgICAgIGZvciAoU2NoZWR1bGVWbyBjdXJyZW50U2NoZWR1bGUgOiBzY2hlZHVsZVZvcykge1xuICAgICAgICAgICAgLy8g5qOA5p+l5pel56iL57uT5p2f5pe26Ze05piv5ZCm5bey6L+H5pyfXG4gICAgICAgICAgICBpZiAoY3VycmVudFNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIFxuICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5nZXRFbmRUaW1lKCkuaXNCZWZvcmUobm93KSAmJiBcbiAgICAgICAgICAgICAgICAoY3VycmVudFNjaGVkdWxlLmdldFN0YXR1cygpID09IG51bGwgfHwgY3VycmVudFNjaGVkdWxlLmdldFN0YXR1cygpICE9IDQpKSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c57uT5p2f5pe26Ze05bey6L+H5pyf5LiU5LiN5piv5bey5a6M5oiQ54q25oCB77yM5pu05paw5Li65bey6YC+5pyf54q25oCBXG4gICAgICAgICAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChjdXJyZW50U2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgICAgICAgICAgICAgIGlmICh0YXNrICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOS/ruaUueS7u+WKoeeKtuaAgeS4uuW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUuc2V0U3RhdHVzKDUpOyAvLyDlkIzmraXkv67mlLnlvZPliY3ml6XnqIvop4blm77lr7nosaHnmoTnirbmgIFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHBhZ2VSZXN1bHQ7XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gZ2V0U2NoZWR1bGVzQnlNb250aEFuZFVzZXIoU3RyaW5nIHllYXJNb250aCwgTG9uZyB1c2VySWQsIGJvb2xlYW4gaXNBZG1pbikge1xuICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlcztcbiAgICAgICAgXG4gICAgICAgIGlmIChpc0FkbWluKSB7XG4gICAgICAgICAgICAvLyDnrqHnkIblkZjojrflj5bmiYDmnInml6XnqItcbiAgICAgICAgICAgIHNjaGVkdWxlcyA9IHNjaGVkdWxlTWFwcGVyLmZpbmRTY2hlZHVsZXNCeU1vbnRoKHllYXJNb250aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyDmma7pgJrnlKjmiLflj6rojrflj5bkuI7oh6rlt7Hnm7jlhbPnmoTml6XnqItcbiAgICAgICAgICAgIHNjaGVkdWxlcyA9IHNjaGVkdWxlTWFwcGVyLmZpbmRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcih5ZWFyTW9udGgsIHVzZXJJZCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+IHJlc3VsdCA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOaMieaXpeacn+WIhue7hFxuICAgICAgICBmb3IgKFNjaGVkdWxlVm8gc2NoZWR1bGUgOiBzY2hlZHVsZXMpIHtcbiAgICAgICAgICAgIGlmIChzY2hlZHVsZS5nZXRTdGFydFRpbWUoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgU3RyaW5nIGRhdGUgPSBzY2hlZHVsZS5nZXRTdGFydFRpbWUoKS50b0xvY2FsRGF0ZSgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuY29udGFpbnNLZXkoZGF0ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1dChkYXRlLCBuZXcgQXJyYXlMaXN0PD4oKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlc3VsdC5nZXQoZGF0ZSkuYWRkKHNjaGVkdWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4uLi5cbiAgICAgICAgXG4gICAgICAgIC8vIOagueaNruS7u+WKoeeahOe0p+aApeaAp+iuoeeul+W+l+WIhiAoZXhpZ2VuY3lJZClcbiAgICAgICAgaWYgKHRhc2suZ2V0RXhpZ2VuY3lJZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIC8vIOafpeivoue0p+aApeaAp+adg+mHjVxuICAgICAgICAgICAgUXVlcnlXcmFwcGVyPGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eT4gdXJnZW5jeVF1ZXJ5ID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICAgICAgICAgICB1cmdlbmN5UXVlcnkuZXEoXCJpZFwiLCB0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgICAgICBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUHJpb3JpdHkgdXJnZW5jeSA9IHRhc2tTZXJ2aWNlLmdldFByaW9yaXR5TWFwcGVyKCkuc2VsZWN0T25lKHVyZ2VuY3lRdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh1cmdlbmN5ICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBpbnQgc2NvcmUgPSB1cmdlbmN5LmdldFNjb3JlKCkgIT0gbnVsbCA/IHVyZ2VuY3kuZ2V0U2NvcmUoKSA6IDE7XG4gICAgICAgICAgICAgICAgQmlnRGVjaW1hbCB3ZWlnaHQgPSB1cmdlbmN5LmdldFdlaWdodCgpICE9IG51bGwgPyB1cmdlbmN5LmdldFdlaWdodCgpIDogQmlnRGVjaW1hbC5PTkU7XG4gICAgICAgICAgICAgICAgdXJnZW5jeVNjb3JlID0gc2NvcmUgKiB3ZWlnaHQuZG91YmxlVmFsdWUoKSAqIDEwOyAvLyDmlL7lpKcxMOWAje+8jOS9v+W+l+WIhuWAvOabtOaYjuaYvlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDorqHnrpfmiKrmraLml7bpl7TnmoTntKfmgKXmgKdcbiAgICAgICAgZG91YmxlIGRlYWRsaW5lVXJnZW5jeSA9IDAuMDtcbiAgICAgICAgaWYgKHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWmguaenOW3sue7j+i2hei/h+aIquatouaXtumXtO+8jOWImee0p+aApeaAp+acgOmrmFxuICAgICAgICAgICAgaWYgKG5vdy5pc0FmdGVyKHRhc2suZ2V0RGVhZGxpbmUoKSkpIHtcbiAgICAgICAgICAgICAgICBkZWFkbGluZVVyZ2VuY3kgPSAxMDAuMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8g6K6h566X6Led56a75oiq5q2i5pe26Ze06L+Y5pyJ5aSa5bCR5bCP5pe2XG4gICAgICAgICAgICAgICAgbG9uZyBob3Vyc1VudGlsRGVhZGxpbmUgPSBEdXJhdGlvbi5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKS50b0hvdXJzKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8g6Led56a75oiq5q2i5pe26Ze06LaK6L+R77yM57Sn5oCl5oCn6LaK6auYXG4gICAgICAgICAgICAgICAgLy8gMjTlsI/ml7blhoXvvJrmnIDpq5jntKfmgKXmgKdcbiAgICAgICAgICAgICAgICAvLyAyNC03MuWwj+aXtu+8mumrmOe0p+aApeaAp1xuICAgICAgICAgICAgICAgIC8vIDcy5bCP5pe25Lul5LiK77ya5Lit562J57Sn5oCl5oCnXG4gICAgICAgICAgICAgICAgaWYgKGhvdXJzVW50aWxEZWFkbGluZSA8PSAyNCkge1xuICAgICAgICAgICAgICAgICAgICBkZWFkbGluZVVyZ2VuY3kgPSA0MC4wIC0gKGhvdXJzVW50aWxEZWFkbGluZSAvIDI0LjApICogMTAuMDsgIC8vIDMwLTQw5YiGXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gNzIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmVVcmdlbmN5ID0gMjUuMCAtICgoaG91cnNVbnRpbERlYWRsaW5lIC0gMjQpIC8gNDguMCkgKiAxMC4wOyAgLy8gMTUtMjXliIZcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkZWFkbGluZVVyZ2VuY3kgPSBNYXRoLm1heCg1LjAsIDE1LjAgLSAoKGhvdXJzVW50aWxEZWFkbGluZSAtIDcyKSAvIDcyLjApICogMTAuMCk7ICAvLyA1LTE15YiGXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDlpoLmnpzku7vliqHlt7Lnu4/pgL7mnJ/vvIzlop7liqDlhbbntKfmgKXmgKdcbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgIT0gbnVsbCAmJiB0YXNrLmdldFN0YXR1cygpID09IDUpIHtcbiAgICAgICAgICAgIGRlYWRsaW5lVXJnZW5jeSArPSAyMC4wO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDmoLnmja7ku7vliqHnirbmgIHosIPmlbTkvJjlhYjnuqdcbiAgICAgICAgZG91YmxlIHN0YXR1c0FkanVzdG1lbnQgPSAwLjA7XG4gICAgICAgIGlmICh0YXNrLmdldFN0YXR1cygpICE9IG51bGwpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodGFzay5nZXRTdGF0dXMoKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMTogLy8g5b6F5YqeXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0FkanVzdG1lbnQgPSAxMC4wO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDI6IC8vIOW3suWuieaOklxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNBZGp1c3RtZW50ID0gMTUuMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAzOiAvLyDov5vooYzkuK1cbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQWRqdXN0bWVudCA9IDIwLjA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogLy8g5bey5a6M5oiQXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0FkanVzdG1lbnQgPSAtNTAuMDsgLy8g5bey5a6M5oiQ55qE5Lu75Yqh5LyY5YWI57qn5pyA5L2OXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNTogLy8g5bey6YC+5pyfXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0FkanVzdG1lbnQgPSAzMC4wO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNBZGp1c3RtZW50ID0gMC4wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDnu7zlkIjorqHnrpfmnIDnu4jkvJjlhYjnuqflvpfliIZcbiAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBpbXBvcnRhbmNlU2NvcmUgKyB1cmdlbmN5U2NvcmUgKyBkZWFkbGluZVVyZ2VuY3kgKyBzdGF0dXNBZGp1c3RtZW50O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIHByaW9yaXR5U2NvcmUpOyAvLyDnoa7kv53lvpfliIbkuI3kuLrotJ/mlbBcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnQoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIC8vIOiOt+WPluWOn+Wni+aXpeeoi+WIl+ihqFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IG9yaWdpbmFsUGFnZSA9IHNlYXJjaChwYWdlU2l6ZSwgcGFnZU51bSwgc2VhcmNoS2V5KTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZUxpc3QgPSBvcmlnaW5hbFBhZ2UuZ2V0UmVjb3JkcygpO1xuICAgICAgICBcbiAgICAgICAgLy8g6K6h566X5q+P5Liq5pel56iL55qE5LyY5YWI57qn5b6X5YiGXG4gICAgICAgIE1hcDxMb25nLCBEb3VibGU+IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKFNjaGVkdWxlVm8gc2NoZWR1bGUgOiBzY2hlZHVsZUxpc3QpIHtcbiAgICAgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X5LyY5YWI57qn5b6X5YiGXG4gICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUoc2NoZWR1bGUsIHRhc2spO1xuICAgICAgICAgICAgc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5wdXQoc2NoZWR1bGUuZ2V0SWQoKSwgcHJpb3JpdHlTY29yZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOagueaNruS8mOWFiOe6p+W+l+WIhuaOkuW6j+aXpeeoi1xuICAgICAgICBzY2hlZHVsZUxpc3Quc29ydCgoYSwgYikgLT4ge1xuICAgICAgICAgICAgRG91YmxlIHNjb3JlQSA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGEuZ2V0SWQoKSwgMC4wKTtcbiAgICAgICAgICAgIERvdWJsZSBzY29yZUIgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChiLmdldElkKCksIDAuMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWIhuaVsOmrmOeahOaOkuWcqOWJjemdolxuICAgICAgICAgICAgcmV0dXJuIERvdWJsZS5jb21wYXJlKHNjb3JlQiwgc2NvcmVBKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyDliJvlu7rmlrDnmoTliIbpobXnu5PmnpxcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBzb3J0ZWRQYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSwgb3JpZ2luYWxQYWdlLmdldFRvdGFsKCkpO1xuICAgICAgICBzb3J0ZWRQYWdlLnNldFJlY29yZHMoc2NoZWR1bGVMaXN0KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzb3J0ZWRQYWdlO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNtYXJ0U29ydFVzZXIoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIHVzZXJJZCkge1xuICAgICAgICAvLyDojrflj5bljp/lp4vml6XnqIvliJfooahcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBvcmlnaW5hbFBhZ2UgPSBzZWFyY2hVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCk7XG4gICAgICAgIExpc3Q8U2NoZWR1bGVWbz4gc2NoZWR1bGVMaXN0ID0gb3JpZ2luYWxQYWdlLmdldFJlY29yZHMoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiuoeeul+avj+S4quaXpeeoi+eahOS8mOWFiOe6p+W+l+WIhlxuICAgICAgICBNYXA8TG9uZywgRG91YmxlPiBzY2hlZHVsZVByaW9yaXR5U2NvcmVzID0gbmV3IEhhc2hNYXA8PigpO1xuICAgICAgICBcbiAgICAgICAgZm9yIChTY2hlZHVsZVZvIHNjaGVkdWxlIDogc2NoZWR1bGVMaXN0KSB7XG4gICAgICAgICAgICBUYXNrIHRhc2sgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldFRhc2tJZCgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOiuoeeul+S8mOWFiOe6p+W+l+WIhlxuICAgICAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKHNjaGVkdWxlLCB0YXNrKTtcbiAgICAgICAgICAgIHNjaGVkdWxlUHJpb3JpdHlTY29yZXMucHV0KHNjaGVkdWxlLmdldElkKCksIHByaW9yaXR5U2NvcmUpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyDmoLnmja7kvJjlhYjnuqflvpfliIbmjpLluo/ml6XnqItcbiAgICAgICAgc2NoZWR1bGVMaXN0LnNvcnQoKGEsIGIpIC0+IHtcbiAgICAgICAgICAgIERvdWJsZSBzY29yZUEgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChhLmdldElkKCksIDAuMCk7XG4gICAgICAgICAgICBEb3VibGUgc2NvcmVCID0gc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYi5nZXRJZCgpLCAwLjApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDliIbmlbDpq5jnmoTmjpLlnKjliY3pnaJcbiAgICAgICAgICAgIHJldHVybiBEb3VibGUuY29tcGFyZShzY29yZUIsIHNjb3JlQSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8g5Yib5bu65paw55qE5YiG6aG157uT5p6cXG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gc29ydGVkUGFnZSA9IG5ldyBQYWdlPD4ocGFnZU51bSwgcGFnZVNpemUsIG9yaWdpbmFsUGFnZS5nZXRUb3RhbCgpKTtcbiAgICAgICAgc29ydGVkUGFnZS5zZXRSZWNvcmRzKHNjaGVkdWxlTGlzdCk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gc29ydGVkUGFnZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDmr4/lsI/ml7bmo4Dmn6XkuIDmrKHku7vliqHmiKrmraLml7bpl7TvvIzmm7TmlrDpgL7mnJ/ku7vliqHnirbmgIFcbiAgICAgKi9cbiAgICBAU2NoZWR1bGVkKGNyb24gPSBcIjAgMCAqICogKiA/XCIpIC8vIOavj+Wwj+aXtuaJp+ihjOS4gOasoVxuICAgIHB1YmxpYyB2b2lkIGNoZWNrQW5kVXBkYXRlT3ZlcmR1ZVRhc2tzKCkge1xuICAgICAgICBsb2cuaW5mbyhcIuaJp+ihjOS7u+WKoemAvuacn+eKtuaAgeajgOafpS4uLlwiKTtcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOafpeivouaJgOacieW+heWKnuOAgeW3suWuieaOkuOAgei/m+ihjOS4reeKtuaAgeeahOS7u+WKoVxuICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGFza1NlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFRhc2s+KCkubGFtYmRhKClcbiAgICAgICAgICAgICAgICAuaW4oVGFzazo6Z2V0U3RhdHVzLCBBcnJheXMuYXNMaXN0KDEsIDIsIDMpKSk7XG4uLi5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5aaC5p6c5Lu75Yqh5pyJ5a+55bqU55qE5pel56iLXG4gICAgICAgICAgICBpZiAoIXNjaGVkdWxlcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaXpeeoi+aciee7k+adn+aXtumXtO+8jOS4lOe7k+adn+aXtumXtOW3sui/h++8jOabtOaWsOS7u+WKoeeKtuaAgeS4uuW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpICE9IG51bGwgJiYgc2NoZWR1bGUuZ2V0RW5kVGltZSgpLmlzQmVmb3JlKG5vdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWwhueKtuaAgeabtOaWsOS4uuW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlj5HpgIHpgL7mnJ/pgJrnn6VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOino+aekOeUqOaIt+aVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWPkemAgemAvuacn+mAmuefpVxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxOb3RpZmljYXRpb24+IG5vdGlmaWNhdGlvbnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZHMuZm9yRWFjaChpZCAtPiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0U2NoZWR1bGVJZChzY2hlZHVsZS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VXNlcklkKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VHlwZSg0KTsgLy8g6YC+5pyf6YCa55+l57G75Z6LXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldE1lc3NhZ2UoXCLmgqjnmoTku7vliqEgXFxcIlwiICsgdGFzay5nZXRUaXRsZSgpICsgXCJcXFwiIOW3sumAvuacn++8jOivt+WwveW/q+WkhOeQhlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmFkZChub3RpZmljYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLnNhdmVCYXRjaChub3RpZmljYXRpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5bey57uP5bCG5Lu75Yqh5qCH6K6w5Li66YC+5pyf77yM6Lez5Ye65b2T5YmN5Lu75Yqh55qE5pel56iL5b6q546vXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gXG4gICAgICAgICAgICAvLyDlpoLmnpzku7vliqHmsqHmnInml6XnqIvkvYbmnInmiKrmraLml7bpl7TvvIzliJnkvp3nhLbmo4Dmn6XmiKrmraLml7bpl7RcbiAgICAgICAgICAgIGVsc2UgaWYgKHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsICYmIHRhc2suZ2V0RGVhZGxpbmUoKS5pc0JlZm9yZShub3cpKSB7XG4gICAgICAgICAgICAgICAgLy8g5bCG54q25oCB5pu05paw5Li65bey6YC+5pyfXG4gICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7XG4gICAgICAgICAgICAgICAgdGFza1NlcnZpY2UudXBkYXRlQnlJZCh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmFcbi4uLlxuXG4gICAgLyoqXG4gICAgICog5pm66IO95o6S5bqP5pel56iLXG4gICAgICog5qC55o2u5pe26Ze057Sn5oCl5oCn44CB5Lu75Yqh6YeN6KaB5oCn562J5Zug57Sg6L+b6KGM5pm66IO95o6S5bqPXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFnZVNpemUg6aG16Z2i5aSn5bCPXG4gICAgICogQHBhcmFtIHBhZ2VOdW0g6aG156CBXG4gICAgICogQHBhcmFtIHNlYXJjaEtleSDmkJzntKLlhbPplK7or41cbiAgICAgKiBAcmV0dXJuIOaOkuW6j+WQjueahOaXpeeoi+WIhumhtee7k+aenFxuICAgICAqL1xuICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0KEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSk7XG5cbiAgICAvKipcbiAgICAgKiDnlKjmiLfmmbrog73mjpLluo/ml6XnqItcbiAgICAgKiDmoLnmja7ml7bpl7TntKfmgKXmgKfjgIHku7vliqHph43opoHmgKfnrYnlm6DntKDlr7nlvZPliY3nlKjmiLfnmoTml6XnqIvov5vooYzmmbrog73mjpLluo9cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYWdlU2l6ZSDpobXpnaLlpKflsI9cbiAgICAgKiBAcGFyYW0gcGFnZU51bSDpobXnoIFcbiAgICAgKiBAcGFyYW0gc2VhcmNoS2V5IOaQnOe0ouWFs+mUruivjVxuICAgICAqIEBwYXJhbSB1c2VySWQg55So5oi3SURcbiAgICAgKiBAcmV0dXJuIOaOkuW6j+WQjueahOaXpeeoi+WIhumhtee7k+aenFxuICAgICAqL1xuICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKTtcblxuICAgIC8qKlxuICAgICAqIOeUqOaIt+aZuuiDveaOkuW6j+aXpeeoi++8jOW5tuaMieeKtuaAgei/h+a7pFxuICAgICAqIOagueaNruaXtumXtOe0p+aApeaAp+OAgeS7u+WKoemHjeimgeaAp+etieWboOe0oOWvueW9k+WJjeeUqOaIt+eahOaXpeeoi+i/m+ihjOaZuuiDveaOkuW6j1xuICAgICAqXG4gICAgICogQHBhcmFtIHBhZ2VTaXplIOmhtemdouWkp+Wwj1xuICAgICAqIEBwYXJhbSBwYWdlTnVtIOmhteeggVxuICAgICAqIEBwYXJhbSBzZWFyY2hLZXkg5pCc57Si5YWz6ZSu6K+NXG4gICAgICogQHBhcmFtIHVzZXJJZCDnlKjmiLdJRFxuICAgICAqIEBwYXJhbSBzdGF0dXMg5Lu75Yqh54q25oCB77yIMTrlvoXlip4sIDI65bey5a6J5o6SLCAzOui/m+ihjOS4rSwgNDrlt7LlrozmiJAsIDU65bey6YC+5pyf77yJXG4gICAgICogQHJldHVybiDmjpLluo/lkI7nmoTml6XnqIvliIbpobXnu5PmnpxcbiAgICAgKi9cbiAgICBQYWdlPFNjaGVkdWxlVm8+IHNtYXJ0U29ydFVzZXIoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIHVzZXJJZCwgSW50ZWdlciBzdGF0dXMpO1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9TY2hlZHVsZUNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi55So5oi35pel56iL5p+l6K+iIC0g5pm66IO95o6S5bqPXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvdXNlci9zbWFydFNvcnRcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IHVzZXJTbWFydFNvcnQoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBMb25nIHVzZXJJZCA9IFNlY3VyaXR5VXRpbHMuZ2V0Q3VycmVudFVzZXJJZCgpO1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zbWFydFNvcnRVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu65pel56iL5a6J5o6SXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2NyZWF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBTY2hlZHVsZSBzY2hlZHVsZSkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmNyZWF0ZShzY2hlZHVsZSkpO1xuICAgIH1cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXG4uLi5cbiAgICBtZXRob2RzOiB7XG4gICAgICAvLyDojrflj5bml6XnqIvpobnnmoTnirbmgIHmoIfnrb7nsbvlnotcbiAgICAgIGdldFN0YXR1c1RhZ1R5cGUoc3RhdHVzKSB7XG4gICAgICAgIHN3aXRjaChzdGF0dXMpIHtcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiAnaW5mbyc7ICAgIC8vIOW+heWKnlxuICAgICAgICAgIGNhc2UgMjogcmV0dXJuICd3YXJuaW5nJzsgLy8g5bey5a6J5o6SXG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gJ3N1Y2Nlc3MnOyAvLyDov5vooYzkuK1cbiAgICAgICAgICBjYXNlIDQ6IHJldHVybiAnJzsgICAgICAgIC8vIOW3suWujOaIkFxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuICdkYW5nZXInOyAgLy8g5bey6YC+5pyfXG4gICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdpbmZvJztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8g5pm66IO95o6S5bqP5pa55rOVXG4gICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN5bm05pyI77yM5qC85byP5Li6WVlZWS1NTVxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCB5ZWFyTW9udGggPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgICAgIFxuICAgICAgICAvLyDkvb/nlKjmmbrog73mjpLluo/mjqXlj6Pojrflj5bmjpLluo/lkI7nmoTnlKjmiLfml6XnqItcbiAgICAgICAgZmV0Y2hVc2VyU2NoZWR1bGVTbWFydFNvcnQodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDlsIbmmbrog73mjpLluo/lkI7nmoTmlbDmja7orr7nva7kuLrlvZPliY3liJfooahcbiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXG4uLi5cbiAgICBtZXRob2RzOiB7XG4gICAgICAvLyDkv67mlLnvvJrliKTmlq3ml6XnqIvmmK/lkKblt7Lov4fnu5PmnZ/ml7bpl7RcbiAgICAgIGlzT3ZlcmR1ZShzY2hlZHVsZSkge1xuICAgICAgICAvLyDlpoLmnpxzdGF0dXPlt7Lnu4/mmK81KOW3sumAvuacnynliJnnm7TmjqXov5Tlm550cnVlXG4gICAgICAgIGlmIChzY2hlZHVsZS5zdGF0dXMgPT09IDUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyDmo4Dmn6UgZW5kVGltZSDmmK/lkKblrZjlnKjvvIzmmK/lkKbml6nkuo7lvZPliY3ml7bpl7TvvIzlubbkuJTku7vliqHnirbmgIHkuI3mmK/lt7LlrozmiJAgKDQpXG4gICAgICAgIHJldHVybiBzY2hlZHVsZS5lbmRUaW1lICYmIG5ldyBEYXRlKHNjaGVkdWxlLmVuZFRpbWUpIDwgbmV3IERhdGUoKSAmJiBzY2hlZHVsZS5zdGF0dXMgIT09IDQ7XG4gICAgICB9LFxuXG4gICAgICAvLyDmmbrog73mjpLluo/mlrnms5VcbiAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIGZldGNoU2NoZWR1bGVTbWFydFNvcnQodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4uLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFXZWR5Z0Z5enVtNGZIZENHcWVMUEhQIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJOb3csIGxldCdzIGltcGxlbWVudCB0aGUgbmV3IGBzbWFydFNvcnRVc2VyYCBtZXRob2Qgd2l0aCBzdGF0dXMgZmlsdGVyaW5nIGluIHRoZSBgU2NoZWR1bGVTZXJ2aWNlSW1wbGAgY2xhc3M6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYjk2Zjk0NDUtYjk0Yi00ZTZmLWIyMTEtMTdkMzZlMTZmYTdjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUtUZEUzTFpFQ1M3bW9KcGd5V2FoeVYiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxLCA1MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgNC4gTm93LCBsZXQncyB1cGRhdGUgdGhlIGZyb250ZW5kIHRvIGFkZCB0aGUgc3RhdHVzIGZpbHRlcjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9TY2hlZHVsZVNlcnZpY2VJbXBsLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDU2NFx0XG4gICA1NjVcdCAgICAgICAgcmV0dXJuIHNvcnRlZFBhZ2U7XG4gICA1NjZcdCAgICB9XG4gICA1NjdcdFxuICAgNTY4XHQgICAgQE92ZXJyaWRlXG4gICA1NjlcdCAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnRVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQpIHtcbiAgIDU3MFx0ICAgICAgICByZXR1cm4gc21hcnRTb3J0VXNlcihwYWdlU2l6ZSwgcGFnZU51bSwgc2VhcmNoS2V5LCB1c2VySWQsIG51bGwpO1xuICAgNTcxXHQgICAgfVxuICAgNTcyXHRcbiAgIDU3M1x0ICAgIEBPdmVycmlkZVxuICAgNTc0XHQgICAgcHVibGljIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkLCBJbnRlZ2VyIHN0YXR1cykge1xuICAgNTc1XHQgICAgICAgIC8vIOiOt+WPluWOn+Wni+aXpeeoi+WIl+ihqFxuICAgNTc2XHQgICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gb3JpZ2luYWxQYWdlID0gc2VhcmNoVXNlcihwYWdlU2l6ZSwgcGFnZU51bSwgc2VhcmNoS2V5LCB1c2VySWQpO1xuICAgNTc3XHQgICAgICAgIExpc3Q8U2NoZWR1bGVWbz4gc2NoZWR1bGVMaXN0ID0gb3JpZ2luYWxQYWdlLmdldFJlY29yZHMoKTtcbiAgIDU3OFx0XG4gICA1NzlcdCAgICAgICAgLy8g6K6h566X5q+P5Liq5pel56iL55qE5LyY5YWI57qn5b6X5YiGXG4gICA1ODBcdCAgICAgICAgTWFwPExvbmcsIERvdWJsZT4gc2NoZWR1bGVQcmlvcml0eVNjb3JlcyA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgIDU4MVx0XG4gICA1ODJcdCAgICAgICAgLy8g5aaC5p6c5pyJ54q25oCB6L+H5ruk77yM5YWI6L+H5ruk5Ye656ym5ZCI54q25oCB55qE5pel56iLXG4gICA1ODNcdCAgICAgICAgaWYgKHN0YXR1cyAhPSBudWxsKSB7XG4gICA1ODRcdCAgICAgICAgICAgIHNjaGVkdWxlTGlzdCA9IHNjaGVkdWxlTGlzdC5zdHJlYW0oKVxuICAgNTg1XHQgICAgICAgICAgICAgICAgLmZpbHRlcihzY2hlZHVsZSAtPiBzY2hlZHVsZS5nZXRTdGF0dXMoKSAhPSBudWxsICYmIHNjaGVkdWxlLmdldFN0YXR1cygpLmVxdWFscyhzdGF0dXMpKVxuICAgNTg2XHQgICAgICAgICAgICAgICAgLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSk7XG4gICA1ODdcdCAgICAgICAgfVxuICAgNTg4XHRcbiAgIDU4OVx0ICAgICAgICBmb3IgKFNjaGVkdWxlVm8gc2NoZWR1bGUgOiBzY2hlZHVsZUxpc3QpIHtcbiAgIDU5MFx0ICAgICAgICAgICAgVGFzayB0YXNrID0gbnVsbDtcbiAgIDU5MVx0ICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldFRhc2tJZCgpICE9IG51bGwpIHtcbiAgIDU5Mlx0ICAgICAgICAgICAgICAgIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgIDU5M1x0ICAgICAgICAgICAgfVxuICAgNTk0XHRcbiAgIDU5NVx0ICAgICAgICAgICAgLy8g6K6h566X5LyY5YWI57qn5b6X5YiGXG4gICA1OTZcdCAgICAgICAgICAgIGRvdWJsZSBwcmlvcml0eVNjb3JlID0gY2FsY3VsYXRlUHJpb3JpdHlTY29yZShzY2hlZHVsZSwgdGFzayk7XG4gICA1OTdcdCAgICAgICAgICAgIHNjaGVkdWxlUHJpb3JpdHlTY29yZXMucHV0KHNjaGVkdWxlLmdldElkKCksIHByaW9yaXR5U2NvcmUpO1xuICAgNTk4XHQgICAgICAgIH1cbiAgIDU5OVx0XG4gICA2MDBcdCAgICAgICAgLy8g5qC55o2u5LyY5YWI57qn5b6X5YiG5o6S5bqP5pel56iLXG4gICA2MDFcdCAgICAgICAgc2NoZWR1bGVMaXN0LnNvcnQoKGEsIGIpIC0+IHtcbiAgIDYwMlx0ICAgICAgICAgICAgRG91YmxlIHNjb3JlQSA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGEuZ2V0SWQoKSwgMC4wKTtcbiAgIDYwM1x0ICAgICAgICAgICAgRG91YmxlIHNjb3JlQiA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGIuZ2V0SWQoKSwgMC4wKTtcbiAgIDYwNFx0XG4gICA2MDVcdCAgICAgICAgICAgIC8vIOWIhuaVsOmrmOeahOaOkuWcqOWJjemdolxuICAgNjA2XHQgICAgICAgICAgICByZXR1cm4gRG91YmxlLmNvbXBhcmUoc2NvcmVCLCBzY29yZUEpO1xuICAgNjA3XHQgICAgICAgIH0pO1xuICAgNjA4XHRcbiAgIDYwOVx0ICAgICAgICAvLyDliJvlu7rmlrDnmoTliIbpobXnu5PmnpxcbiAgIDYxMFx0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNvcnRlZFBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplLCBvcmlnaW5hbFBhZ2UuZ2V0VG90YWwoKSk7XG4gICA2MTFcdCAgICAgICAgc29ydGVkUGFnZS5zZXRSZWNvcmRzKHNjaGVkdWxlTGlzdCk7XG4gICA2MTJcdFxuICAgNjEzXHQgICAgICAgIHJldHVybiBzb3J0ZWRQYWdlO1xuICAgNjE0XHQgICAgfVxuICAgNjE1XHRcbiAgIDYxNlx0ICAgIC8qKlxuICAgNjE3XHQgICAgICog5q+P5bCP5pe25qOA5p+l5LiA5qyh5Lu75Yqh5oiq5q2i5pe26Ze077yM5pu05paw6YC+5pyf5Lu75Yqh54q25oCBXG4gICA2MThcdCAgICAgKi9cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVdySHhnZWh6dEN6N0RKMXFwTkNVTVgifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IiMjIyA0LiBOb3csIGxldCdzIHVwZGF0ZSB0aGUgZnJvbnRlbmQgdG8gYWRkIHRoZSBzdGF0dXMgZmlsdGVyOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjgxNDJlODA1LWE5NjgtNDQyZS05YmQ3LTgyNDMyZTZhMGRiNyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFRbkI2UmRlSEFHSlFyaHZyTm5GUGJ3IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgIDxlbC1mb3JtIDppbmxpbmU9XFxcInRydWVcXFwiIDptb2RlbD1cXFwibGlzdFF1ZXJ5XFxcIiBzaXplPVxcXCJzbWFsbFxcXCIgbGFiZWwtd2lkdGg9XFxcIjEyMHB4XFxcIj5cXG4gICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cXFwiXFx1NTE3M1xcdTk1MmVcXHU1YjU3XFx1ZmYxYVxcXCI+XFxuICAgICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XFxcImxpc3RRdWVyeS5zZWFyY2hLZXlcXFwiIHBsYWNlaG9sZGVyPVxcXCJcXHU4YmY3XFx1OGY5M1xcdTUxNjVcXHU1MTczXFx1OTUyZVxcdTViNTdcXFwiIGNsZWFyYWJsZT48L2VsLWlucHV0PlxcbiAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cXG4gICAgICAgICAgPGVsLWJ1dHRvblxcbiAgICAgICAgICAgIHR5cGU9XFxcInByaW1hcnlcXFwiXFxuICAgICAgICAgICAgaWNvbj1cXFwiZWwtaWNvbi1zZWFyY2hcXFwiXFxuICAgICAgICAgICAgQGNsaWNrPVxcXCJoYW5kbGVTZWFyY2hMaXN0KClcXFwiXFxuICAgICAgICAgICAgc2l6ZT1cXFwic21hbGxcXFwiXFxuICAgICAgICAgICAgY2xhc3M9XFxcInNlYXJjaC1idG5cXFwiPlxcbiAgICAgICAgICAgIFxcdTY3ZTVcXHU4YmUyXFx1NjQxY1xcdTdkMjJcXG4gICAgICAgICAgPC9lbC1idXR0b24+XFxuICAgICAgICA8L2VsLWZvcm0+XCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgPGVsLWZvcm0gOmlubGluZT1cXFwidHJ1ZVxcXCIgOm1vZGVsPVxcXCJsaXN0UXVlcnlcXFwiIHNpemU9XFxcInNtYWxsXFxcIiBsYWJlbC13aWR0aD1cXFwiMTIwcHhcXFwiPlxcbiAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVxcXCJcXHU1MTczXFx1OTUyZVxcdTViNTdcXHVmZjFhXFxcIj5cXG4gICAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cXFwibGlzdFF1ZXJ5LnNlYXJjaEtleVxcXCIgcGxhY2Vob2xkZXI9XFxcIlxcdThiZjdcXHU4ZjkzXFx1NTE2NVxcdTUxNzNcXHU5NTJlXFx1NWI1N1xcXCIgY2xlYXJhYmxlPjwvZWwtaW5wdXQ+XFxuICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxcbiAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVxcXCJcXHU0ZWZiXFx1NTJhMVxcdTcyYjZcXHU2MDAxXFx1ZmYxYVxcXCI+XFxuICAgICAgICAgICAgPGVsLXNlbGVjdCB2LW1vZGVsPVxcXCJsaXN0UXVlcnkuc3RhdHVzXFxcIiBwbGFjZWhvbGRlcj1cXFwiXFx1OGJmN1xcdTkwMDlcXHU2MmU5XFx1NzJiNlxcdTYwMDFcXFwiIGNsZWFyYWJsZT5cXG4gICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVxcXCIxXFxcIiBsYWJlbD1cXFwiXFx1NWY4NVxcdTUyOWVcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XFxcIjJcXFwiIGxhYmVsPVxcXCJcXHU1ZGYyXFx1NWI4OVxcdTYzOTJcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XFxcIjNcXFwiIGxhYmVsPVxcXCJcXHU4ZmRiXFx1ODg0Y1xcdTRlMmRcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XFxcIjRcXFwiIGxhYmVsPVxcXCJcXHU1ZGYyXFx1NWI4Y1xcdTYyMTBcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XFxcIjVcXFwiIGxhYmVsPVxcXCJcXHU1ZGYyXFx1OTAzZVxcdTY3MWZcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgIDwvZWwtc2VsZWN0PlxcbiAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cXG4gICAgICAgICAgPGVsLWJ1dHRvblxcbiAgICAgICAgICAgIHR5cGU9XFxcInByaW1hcnlcXFwiXFxuICAgICAgICAgICAgaWNvbj1cXFwiZWwtaWNvbi1zZWFyY2hcXFwiXFxuICAgICAgICAgICAgQGNsaWNrPVxcXCJoYW5kbGVTZWFyY2hMaXN0KClcXFwiXFxuICAgICAgICAgICAgc2l6ZT1cXFwic21hbGxcXFwiXFxuICAgICAgICAgICAgY2xhc3M9XFxcInNlYXJjaC1idG5cXFwiPlxcbiAgICAgICAgICAgIFxcdTY3ZTVcXHU4YmUyXFx1NjQxY1xcdTdkMjJcXG4gICAgICAgICAgPC9lbC1idXR0b24+XFxuICAgICAgICAgIDxlbC1idXR0b25cXG4gICAgICAgICAgICBpY29uPVxcXCJlbC1pY29uLXJlZnJlc2hcXFwiXFxuICAgICAgICAgICAgQGNsaWNrPVxcXCJoYW5kbGVSZXNldFNlYXJjaCgpXFxcIlxcbiAgICAgICAgICAgIHNpemU9XFxcInNtYWxsXFxcIj5cXG4gICAgICAgICAgICBcXHU5MWNkXFx1N2Y2ZVxcbiAgICAgICAgICA8L2VsLWJ1dHRvbj5cXG4gICAgICAgIDwvZWwtZm9ybT5cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDksIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjF9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIHVwZGF0ZSB0aGUgZnJvbnRlbmQgdG8gYWRkIHRoZSBzdGF0dXMgZmlsdGVyOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgICAgMVx0PHRlbXBsYXRlPiBcbiAgICAgMlx0ICA8ZGl2IGNsYXNzPVwiYXBwLWNvbnRhaW5lclwiPlxuICAgICAzXHQgICAgPGVsLWNhcmQgY2xhc3M9XCJmaWx0ZXItY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICAgNFx0ICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1oZWFkZXJcIj5cbiAgICAgNVx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc2VhcmNoXCI+PC9pPlxuICAgICA2XHQgICAgICAgIDxzcGFuPuetm+mAieaQnOe0ojwvc3Bhbj5cbiAgICAgN1x0ICAgICAgPC9kaXY+XG4gICAgIDhcdCAgICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItY29udGVudFwiPlxuICAgICA5XHQgICAgICAgIDxlbC1mb3JtIDppbmxpbmU9XCJ0cnVlXCIgOm1vZGVsPVwibGlzdFF1ZXJ5XCIgc2l6ZT1cInNtYWxsXCIgbGFiZWwtd2lkdGg9XCIxMjBweFwiPlxuICAgIDEwXHQgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuWFs+mUruWtl++8mlwiPlxuICAgIDExXHQgICAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImxpc3RRdWVyeS5zZWFyY2hLZXlcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeWFs+mUruWtl1wiIGNsZWFyYWJsZT48L2VsLWlucHV0PlxuICAgIDEyXHQgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgMTNcdCAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgMTRcdCAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAxNVx0ICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAxNlx0ICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlU2VhcmNoTGlzdCgpXCJcbiAgICAxN1x0ICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAxOFx0ICAgICAgICAgICAgY2xhc3M9XCJzZWFyY2gtYnRuXCI+XG4gICAgMTlcdCAgICAgICAgICAgIOafpeivouaQnOe0olxuICAgIDIwXHQgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMjFcdCAgICAgICAgPC9lbC1mb3JtPlxuICAgIDIyXHQgICAgICA8L2Rpdj5cbiAgICAyM1x0ICAgIDwvZWwtY2FyZD5cbiAgICAyNFx0ICAgIDxlbC1jYXJkIGNsYXNzPVwib3BlcmF0ZS1jb250YWluZXJcIiBzaGFkb3c9XCJob3ZlclwiPlxuICAgIDI1XHQgICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1oZWFkZXJcIj5cbiAgICAyNlx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tZGF0ZVwiPjwvaT5cbiAgICAyN1x0ICAgICAgICA8c3Bhbj7ml6XnqIvlronmjpI8L3NwYW4+XG4gICAgMjhcdCAgICAgIDwvZGl2PlxuICAgIDI5XHQgICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1hY3Rpb25zXCI+XG4gICAgMzBcdCAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVwic21hbGxcIiBjbGFzcz1cImJ0bi1hZGRcIiBAY2xpY2s9XCJoYW5kbGVBZGQoKVwiIHR5cGU9XCJwcmltYXJ5XCI+XG4gICAgMzFcdCAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tcGx1c1wiPjwvaT7liJvlu7rml6XnqItcbiAgICAzMlx0ICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAzM1x0ICAgICAgICA8ZWwtYnV0dG9uIHNpemU9XCJzbWFsbFwiIGNsYXNzPVwiYnRuLXNvcnRcIiBAY2xpY2s9XCJoYW5kbGVTbWFydFNvcnQoKVwiIHR5cGU9XCJzdWNjZXNzXCI+XG4gICAgMzRcdCAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc29ydFwiPjwvaT7mmbrog73mjpLluo9cbiAgICAzNVx0ICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAzNlx0ICAgICAgPC9kaXY+XG4gICAgMzdcdCAgICA8L2VsLWNhcmQ+XG4gICAgMzhcdCAgICBcbiAgICAzOVx0ICAgIDwhLS0g5LyY6ZuF55qE5pel56iL5pe26Ze06L20IC0tPlxuICAgIDQwXHQgICAgPGVsLWNhcmQgc2hhZG93PVwiaG92ZXJcIiBjbGFzcz1cInNjaGVkdWxlci1jb250YWluZXJcIiB2LWxvYWRpbmc9XCJsaXN0TG9hZGluZ1wiPlxuICAgIDQxXHQgICAgICA8ZGl2IHYtaWY9XCJPYmplY3Qua2V5cyhncm91cGVkU2NoZWR1bGVzKS5sZW5ndGggPT09IDBcIiBjbGFzcz1cImVtcHR5LXN0YXRlXCI+XG4gICAgNDJcdCAgICAgICAgPGVsLWVtcHR5IGRlc2NyaXB0aW9uPVwi5pqC5peg5pel56iL5pWw5o2uXCI+XG4gICAgNDNcdCAgICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiaGFuZGxlQWRkXCIgc2l6ZT1cInNtYWxsXCIgc2xvdD1cImRlc2NyaXB0aW9uXCI+56uL5Y2z5Yib5bu6PC9lbC1idXR0b24+XG4gICAgNDRcdCAgICAgICAgPC9lbC1lbXB0eT5cbiAgICA0NVx0ICAgICAgPC9kaXY+XG4gICAgNDZcdCAgICAgIDxkaXYgdi1lbHNlIGNsYXNzPVwic2NoZWR1bGVyLXdyYXBwZXJcIj5cbiAgICA0N1x0ICAgICAgICA8ZGl2IHYtZm9yPVwiKHNjaGVkdWxlcywgZGF0ZSkgaW4gZ3JvdXBlZFNjaGVkdWxlc1wiIDprZXk9XCJkYXRlXCIgY2xhc3M9XCJkYXktZ3JvdXBcIj5cbiAgICA0OFx0ICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktaGVhZGVyXCI+XG4gICAgNDlcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbGVmdFwiPlxuICAgIDUwXHQgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbnVtYmVyXCI+e3sgZ2V0RGF5TnVtYmVyKGRhdGUpIH19PC9kaXY+XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzA1XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxS1RkRTNMWkVDUzdtb0pwZ3lXYWh5ViJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgdXBkYXRlIHRoZSBmcm9udGVuZCB0byBhZGQgdGhlIHN0YXR1cyBmaWx0ZXI6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMGM0YWUwMTEtOThhZi00MzY4LTg4NDAtYzMzOTQ2OTRjODJjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUxhenpncWdBSzdLeGlnQ3Axeld5QnQiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxMzAwLCAxMzA1XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdywgbGV0J3MgdXBkYXRlIHRoZSBzY3JpcHQgc2VjdGlvbiB0byBoYW5kbGUgdGhlIHN0YXR1cyBmaWx0ZXI6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDVcdCAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXNlYXJjaFwiPjwvaT5cbiAgICAgNlx0ICAgICAgICA8c3Bhbj7nrZvpgInmkJzntKI8L3NwYW4+XG4gICAgIDdcdCAgICAgIDwvZGl2PlxuICAgICA4XHQgICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLWNvbnRlbnRcIj5cbiAgICAgOVx0ICAgICAgICA8ZWwtZm9ybSA6aW5saW5lPVwidHJ1ZVwiIDptb2RlbD1cImxpc3RRdWVyeVwiIHNpemU9XCJzbWFsbFwiIGxhYmVsLXdpZHRoPVwiMTIwcHhcIj5cbiAgICAxMFx0ICAgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLlhbPplK7lrZfvvJpcIj5cbiAgICAxMVx0ICAgICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc2VhcmNoS2V5XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXlhbPplK7lrZdcIiBjbGVhcmFibGU+PC9lbC1pbnB1dD5cbiAgICAxMlx0ICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgIDEzXHQgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuS7u+WKoeeKtuaAge+8mlwiPlxuICAgIDE0XHQgICAgICAgICAgICA8ZWwtc2VsZWN0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc3RhdHVzXCIgcGxhY2Vob2xkZXI9XCLor7fpgInmi6nnirbmgIFcIiBjbGVhcmFibGU+XG4gICAgMTVcdCAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIxXCIgbGFiZWw9XCLlvoXlip5cIj48L2VsLW9wdGlvbj5cbiAgICAxNlx0ICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjJcIiBsYWJlbD1cIuW3suWuieaOklwiPjwvZWwtb3B0aW9uPlxuICAgIDE3XHQgICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiM1wiIGxhYmVsPVwi6L+b6KGM5LitXCI+PC9lbC1vcHRpb24+XG4gICAgMThcdCAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCI0XCIgbGFiZWw9XCLlt7LlrozmiJBcIj48L2VsLW9wdGlvbj5cbiAgICAxOVx0ICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjVcIiBsYWJlbD1cIuW3sumAvuacn1wiPjwvZWwtb3B0aW9uPlxuICAgIDIwXHQgICAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgICAyMVx0ICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgIDIyXHQgICAgICAgICAgPGVsLWJ1dHRvblxuICAgIDIzXHQgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgMjRcdCAgICAgICAgICAgIGljb249XCJlbC1pY29uLXNlYXJjaFwiXG4gICAgMjVcdCAgICAgICAgICAgIEBjbGljaz1cImhhbmRsZVNlYXJjaExpc3QoKVwiXG4gICAgMjZcdCAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgMjdcdCAgICAgICAgICAgIGNsYXNzPVwic2VhcmNoLWJ0blwiPlxuICAgIDI4XHQgICAgICAgICAgICDmn6Xor6LmkJzntKJcbiAgICAyOVx0ICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgIDMwXHQgICAgICAgICAgPGVsLWJ1dHRvblxuICAgIDMxXHQgICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1yZWZyZXNoXCJcbiAgICAzMlx0ICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlUmVzZXRTZWFyY2goKVwiXG4gICAgMzNcdCAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiPlxuICAgIDM0XHQgICAgICAgICAgICDph43nva5cbiAgICAzNVx0ICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgIDM2XHQgICAgICAgIDwvZWwtZm9ybT5cbiAgICAzN1x0ICAgICAgPC9kaXY+XG4gICAgMzhcdCAgICA8L2VsLWNhcmQ+XG4gICAgMzlcdCAgICA8ZWwtY2FyZCBjbGFzcz1cIm9wZXJhdGUtY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICA0MFx0ICAgICAgPGRpdiBjbGFzcz1cIm9wZXJhdGUtaGVhZGVyXCI+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFRbkI2UmRlSEFHSlFyaHZyTm5GUGJ3In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJOb3csIGxldCdzIHVwZGF0ZSB0aGUgc2NyaXB0IHNlY3Rpb24gdG8gaGFuZGxlIHRoZSBzdGF0dXMgZmlsdGVyOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjdmYzUyYTVjLTZiOTUtNDQ2OC04M2M3LTNkZjVhYWJkMTdjOSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFXZ0F3aW9nZlBjR0xuVTl3ZmZKM1Y5IiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXCIsIFwidmlld19yYW5nZVwiOiBbMTAwLCAxNTBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgMTMwMFx0ICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgMTMwMVx0ICB9XG4gIDEzMDJcdH1cbiAgMTMwM1x0XG4gIDEzMDRcdC50YXNrLWRldGFpbCB7XG4gIDEzMDVcdCAgLyog5Lu75Yqh6K+m5oOF5qC35byPICovXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIwXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTGF6emdxZ0FLN0t4aWdDcDF6V3lCdCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImViMjgyMWEyLTYyYzktNDQwMy1iNzU1LWMzMTQ5ZjYzYzI4ZiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDEyUm4zTkE3WVJ1N2FiclppTW5XcjZFIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXCIsIFwidmlld19yYW5nZVwiOiBbMTAwMCwgMTA1MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlOlxuICAgMTAwXHQgICAgICAgICAgICAgICAgICBzaXplPVwibWluaVwiXG4gICAxMDFcdCAgICAgICAgICAgICAgICAgIGVmZmVjdD1cImRhcmtcIlxuICAgMTAyXHQgICAgICAgICAgICAgICAgICBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAxMHB4OyBsZWZ0OiAxMHB4OyB6LWluZGV4OiAzO1wiXG4gICAxMDNcdCAgICAgICAgICAgICAgICAgIHYtaWY9XCJzY2hlZHVsZS5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiBzY2hlZHVsZS5zdGF0dXMgIT09IG51bGxcIj5cbiAgIDEwNFx0ICAgICAgICAgICAgICAgICAge3sgc2NoZWR1bGUuc3RhdHVzIHwgZm9ybWF0U3RhdHVzIH19XG4gICAxMDVcdCAgICAgICAgICAgICAgICA8L2VsLXRhZz5cbiAgIDEwNlx0XG4gICAxMDdcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC10aW1lLXJhbmdlXCIgOnN0eWxlPVwie2NvbG9yOiBpc092ZXJkdWUoc2NoZWR1bGUpID8gJyNjMGM0Y2MnIDogJyM5MDkzOTknfVwiPlxuICAgMTA4XHQgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tdGltZVwiPjwvaT5cbiAgIDEwOVx0ICAgICAgICAgICAgICAgICAgPHNwYW4+e3sgZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpIH19IC0ge3sgZm9ybWF0VGltZShzY2hlZHVsZS5lbmRUaW1lKSB9fTwvc3Bhbj5cbiAgIDExMFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTExXHRcbiAgIDExMlx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLXRpdGxlXCIgOnN0eWxlPVwie2NvbG9yOiBpc092ZXJkdWUoc2NoZWR1bGUpID8gJyNhNmE5YWQnIDogJyMzMDMxMzMnLCAncGFkZGluZy1sZWZ0JzogJzcwcHgnfVwiPlxuICAgMTEzXHQgICAgICAgICAgICAgICAgICB7eyBzY2hlZHVsZS50YXNrTmFtZSB9fVxuICAgMTE0XHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxMTVcdFxuICAgMTE2XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtYWN0aW9uc1wiPlxuICAgMTE3XHQgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cInNjaGVkdWxlLmhhc0NvbmZsaWN0XCI+XG4gICAxMThcdCAgICAgICAgICAgICAgICAgICAgPGVsLXRvb2x0aXAgY29udGVudD1cIuafpeeci+WGsueqgeivpuaDhVwiIHBsYWNlbWVudD1cInRvcFwiIGVmZmVjdD1cImxpZ2h0XCI+XG4gICAxMTlcdCAgICAgICAgICAgICAgICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJhY3Rpb24tYnRuIGNvbmZsaWN0LWJ0blwiIEBjbGljaz1cInZpZXdDb25mbGljdChzY2hlZHVsZSlcIj5cbiAgIDEyMFx0ICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXdhcm5pbmdcIj48L2k+XG4gICAxMjFcdCAgICAgICAgICAgICAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgIDEyMlx0ICAgICAgICAgICAgICAgICAgICA8L2VsLXRvb2x0aXA+XG4gICAxMjNcdCAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XG4gICAxMjRcdFxuICAgMTI1XHQgICAgICAgICAgICAgICAgICA8ZWwtdG9vbHRpcCBjb250ZW50PVwi5p+l55yL6K+m5oOFXCIgcGxhY2VtZW50PVwidG9wXCIgZWZmZWN0PVwibGlnaHRcIj5cbiAgIDEyNlx0ICAgICAgICAgICAgICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJhY3Rpb24tYnRuIHZpZXctYnRuXCIgQGNsaWNrPVwidmlld0luZm8oc2NoZWR1bGUpXCI+XG4gICAxMjdcdCAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tdmlld1wiPjwvaT5cbiAgIDEyOFx0ICAgICAgICAgICAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgIDEyOVx0ICAgICAgICAgICAgICAgICAgPC9lbC10b29sdGlwPlxuICAgMTMwXHRcbiAgIDEzMVx0ICAgICAgICAgICAgICAgICAgPGVsLXRvb2x0aXAgY29udGVudD1cIue8lui+keaXpeeoi1wiIHBsYWNlbWVudD1cInRvcFwiIGVmZmVjdD1cImxpZ2h0XCI+XG4gICAxMzJcdCAgICAgICAgICAgICAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYWN0aW9uLWJ0biBlZGl0LWJ0blwiIEBjbGljaz1cImhhbmRsZVVwZGF0ZShkYXRlLCBzY2hlZHVsZSlcIj5cbiAgIDEzM1x0ICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi1lZGl0XCI+PC9pPlxuICAgMTM0XHQgICAgICAgICAgICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgMTM1XHQgICAgICAgICAgICAgICAgICA8L2VsLXRvb2x0aXA+XG4gICAxMzZcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDEzN1x0ICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDEzOFx0ICAgICAgICAgICAgPC9kaXY+XG4gICAxMzlcdCAgICAgICAgICA8L2Rpdj5cbiAgIDE0MFx0ICAgICAgICA8L2Rpdj5cbiAgIDE0MVx0ICAgICAgPC9kaXY+XG4gICAxNDJcdCAgICA8L2VsLWNhcmQ+XG4gICAxNDNcdFxuICAgMTQ0XHQgICAgPGRpdiBjbGFzcz1cInBhZ2luYXRpb24tY29udGFpbmVyXCI+XG4gICAxNDVcdCAgICAgIDxlbC1wYWdpbmF0aW9uXG4gICAxNDZcdCAgICAgICAgYmFja2dyb3VuZFxuICAgMTQ3XHQgICAgICAgIEBzaXplLWNoYW5nZT1cImhhbmRsZVNpemVDaGFuZ2VcIlxuICAgMTQ4XHQgICAgICAgIEBjdXJyZW50LWNoYW5nZT1cImhhbmRsZUN1cnJlbnRDaGFuZ2VcIlxuICAgMTQ5XHQgICAgICAgIGxheW91dD1cInRvdGFsLCBzaXplcyxwcmV2LCBwYWdlciwgbmV4dCxqdW1wZXJcIlxuICAgMTUwXHQgICAgICAgIDpjdXJyZW50LXBhZ2Uuc3luYz1cImxpc3RRdWVyeS5wYWdlTnVtXCJcblRvdGFsIGxpbmVzIGluIGZpbGU6IDEzMjBcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFXZ0F3aW9nZlBjR0xuVTl3ZmZKM1Y5In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZWM3OTU2ZDctN2ViMC00M2U4LTkwZDMtYjZhNWM4MGQ4ODI4IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMU1RTTE3NWtUQUxCUEpKVGNmbmM0c0QiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInZpZXdcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxNTAsIDIwMF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlOlxuICAxMDAwXHR9XG4gIDEwMDFcdFxuICAxMDAyXHQvKiDpobbpg6jljaHniYfmoLflvI/kvJjljJYgKi9cbiAgMTAwM1x0LmZpbHRlci1jb250YWluZXIsIC5vcGVyYXRlLWNvbnRhaW5lciB7XG4gIDEwMDRcdCAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgMTAwNVx0ICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIDEwMDZcdCAgYm9yZGVyOiBub25lO1xuICAxMDA3XHR9XG4gIDEwMDhcdFxuICAxMDA5XHQuZmlsdGVyLWhlYWRlciwgLm9wZXJhdGUtaGVhZGVyIHtcbiAgMTAxMFx0ICBkaXNwbGF5OiBmbGV4O1xuICAxMDExXHQgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIDEwMTJcdCAgZm9udC1zaXplOiAxNnB4O1xuICAxMDEzXHQgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIDEwMTRcdCAgY29sb3I6ICMzMDMxMzM7XG4gIDEwMTVcdCAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgMTAxNlx0fVxuICAxMDE3XHRcbiAgMTAxOFx0LmZpbHRlci1oZWFkZXIgaSwgLm9wZXJhdGUtaGVhZGVyIGkge1xuICAxMDE5XHQgIG1hcmdpbi1yaWdodDogOHB4O1xuICAxMDIwXHQgIGZvbnQtc2l6ZTogMThweDtcbiAgMTAyMVx0ICBjb2xvcjogIzQwOUVGRjtcbiAgMTAyMlx0fVxuICAxMDIzXHRcbiAgMTAyNFx0LmZpbHRlci1jb250ZW50IHtcbiAgMTAyNVx0ICBtYXJnaW4tdG9wOiAxNXB4O1xuICAxMDI2XHR9XG4gIDEwMjdcdFxuICAxMDI4XHQub3BlcmF0ZS1hY3Rpb25zIHtcbiAgMTAyOVx0ICBkaXNwbGF5OiBmbGV4O1xuICAxMDMwXHQgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gIDEwMzFcdH1cbiAgMTAzMlx0XG4gIDEwMzNcdC5zZWFyY2gtYnRuIHtcbiAgMTAzNFx0ICBiYWNrZ3JvdW5kOiAjNDA5RUZGO1xuICAxMDM1XHQgIGJvcmRlci1jb2xvcjogIzQwOUVGRjtcbiAgMTAzNlx0ICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIDEwMzdcdH1cbiAgMTAzOFx0XG4gIDEwMzlcdC5idG4tYWRkIHtcbiAgMTA0MFx0ICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIDEwNDFcdH1cbiAgMTA0Mlx0XG4gIDEwNDNcdC8qIOaWsOeahOaXpeeoi+aXtumXtOi9tOagt+W8jyAqL1xuICAxMDQ0XHQuc2NoZWR1bGVyLWNvbnRhaW5lciB7XG4gIDEwNDVcdCAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgMTA0Nlx0ICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIDEwNDdcdCAgYm9yZGVyOiBub25lO1xuICAxMDQ4XHQgIHBhZGRpbmc6IDA7XG4gIDEwNDlcdCAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgMTA1MFx0fVxuVG90YWwgbGluZXMgaW4gZmlsZTogMTMyMFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTJSbjNOQTdZUnU3YWJyWmlNbldyNkUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIwMDRhYTg5ZS05ZWJhLTQxODQtYWU2Ny02MTM5YTQzMDJhYjgiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNENtNFN4UlVWeVlxZjVqR1U5U3JpcCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZVwiLCBcInZpZXdfcmFuZ2VcIjogWzUwMCwgNTUwXX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWU6XG4gICAxNTBcdCAgICAgICAgOmN1cnJlbnQtcGFnZS5zeW5jPVwibGlzdFF1ZXJ5LnBhZ2VOdW1cIlxuICAgMTUxXHQgICAgICAgIDpwYWdlLXNpemU9XCJsaXN0UXVlcnkucGFnZVNpemVcIlxuICAgMTUyXHQgICAgICAgIDpwYWdlLXNpemVzPVwiWzEwLDE1LDIwXVwiXG4gICAxNTNcdCAgICAgICAgOnRvdGFsPVwidG90YWxcIj5cbiAgIDE1NFx0ICAgICAgPC9lbC1wYWdpbmF0aW9uPlxuICAgMTU1XHQgICAgPC9kaXY+XG4gICAxNTZcdFxuICAgMTU3XHQgICAgPCEtLSDlr7nor53moYbpg6jliIbkv53mjIHkuI3lj5ggLS0+XG4gICAxNThcdCAgICA8ZWwtZGlhbG9nXG4gICAxNTlcdCAgICAgIDp0aXRsZT1cImlzRWRpdD8n57yW6L6R5pel56iL5a6J5o6SJzon5Yib5bu65pel56iL5a6J5o6SJ1wiXG4gICAxNjBcdCAgICAgIDp2aXNpYmxlLnN5bmM9XCJkaWFsb2dWaXNpYmxlXCJcbiAgIDE2MVx0ICAgICAgd2lkdGg9XCI0MCVcIj5cbiAgIDE2Mlx0ICAgICAgPGVsLWZvcm0gOm1vZGVsPVwiYWRtaW5cIlxuICAgMTYzXHQgICAgICAgICAgICAgIHJlZj1cImFkbWluRm9ybVwiXG4gICAxNjRcdCAgICAgICAgICAgICAgbGFiZWwtd2lkdGg9XCIxMDBweFwiXG4gICAxNjVcdCAgICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgIDE2Nlx0ICAgICAgICAgICAgICA6cnVsZXM9XCJhZG1pblJ1bGVzXCI+XG4gICAxNjdcdCAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuS7u+WKoe+8mlwiIHByb3A9XCJ0YXNrSWRcIj5cbiAgIDE2OFx0ICAgICAgICAgIDxlbC1zZWxlY3Qgdi1pZj1cImlzRWRpdFwiIGRpc2FibGVkIHYtbW9kZWw9XCJhZG1pbi50YXNrSWRcIiBmaWx0ZXJhYmxlIHBsYWNlaG9sZGVyPVwi6K+36YCJ5oup5Lu75YqhXCIgc3R5bGU9XCJ3aWR0aDogMjUwcHhcIj5cbiAgIDE2OVx0ICAgICAgICAgICAgPGVsLW9wdGlvblxuICAgMTcwXHQgICAgICAgICAgICAgIHYtZm9yPVwiKGl0ZW0sIGluZGV4KSBpbiB0YXNrTGlzdFwiXG4gICAxNzFcdCAgICAgICAgICAgICAgOmxhYmVsPVwiYCR7aXRlbS50aXRsZX1gXCJcbiAgIDE3Mlx0ICAgICAgICAgICAgICA6a2V5PVwiaW5kZXhcIlxuICAgMTczXHQgICAgICAgICAgICAgIDp2YWx1ZT1cIml0ZW0uaWRcIj5cbiAgIDE3NFx0ICAgICAgICAgICAgPC9lbC1vcHRpb24+XG4gICAxNzVcdCAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgIDE3Nlx0ICAgICAgICAgIDxlbC1zZWxlY3Qgdi1lbHNlIHYtbW9kZWw9XCJhZG1pbi50YXNrSWRcIiBmaWx0ZXJhYmxlIHBsYWNlaG9sZGVyPVwi6K+36YCJ5oup5Lu75YqhXCIgc3R5bGU9XCJ3aWR0aDogMjUwcHhcIj5cbiAgIDE3N1x0ICAgICAgICAgICAgPGVsLW9wdGlvblxuICAgMTc4XHQgICAgICAgICAgICAgIHYtZm9yPVwiKGl0ZW0sIGluZGV4KSBpbiB0YXNrTGlzdFwiXG4gICAxNzlcdCAgICAgICAgICAgICAgOmxhYmVsPVwiYCR7aXRlbS50aXRsZX0gW+adg+mHjTogJHtpdGVtLnByaW9yaXR5U2NvcmV9XWBcIlxuICAgMTgwXHQgICAgICAgICAgICAgIDprZXk9XCJpbmRleFwiXG4gICAxODFcdCAgICAgICAgICAgICAgOnZhbHVlPVwiaXRlbS5pZFwiPlxuICAgMTgyXHQgICAgICAgICAgICA8L2VsLW9wdGlvbj5cbiAgIDE4M1x0ICAgICAgICAgIDwvZWwtc2VsZWN0PlxuICAgMTg0XHQgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgMTg1XHQgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLmiafooYzml7bpl7TvvJpcIiBwcm9wPVwic3RhcnRUaW1lXCI+XG4gICAxODZcdCAgICAgICAgICA8ZWwtZGF0ZS1waWNrZXJcbiAgIDE4N1x0ICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDogMjUwcHhcIlxuICAgMTg4XHQgICAgICAgICAgICB2LW1vZGVsPVwiYWRtaW4uc3RhcnRUaW1lXCJcbiAgIDE4OVx0ICAgICAgICAgICAgdHlwZT1cImRhdGV0aW1lXCJcbiAgIDE5MFx0ICAgICAgICAgICAgdmFsdWUtZm9ybWF0PVwieXl5eS1NTS1kZCBISDptbTpzc1wiXG4gICAxOTFcdCAgICAgICAgICAgIDpwaWNrZXItb3B0aW9ucz1cInBpY2tlck9wdGlvbnNcIlxuICAgMTkyXHQgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIumAieaLqeaJp+ihjOaXtumXtFwiPlxuICAgMTkzXHQgICAgICAgICAgPC9lbC1kYXRlLXBpY2tlcj5cbiAgIDE5NFx0ICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgIDE5NVx0ICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi57uT5p2f5pe26Ze077yaXCIgcHJvcD1cImVuZFRpbWVcIj5cbiAgIDE5Nlx0ICAgICAgICAgIDxlbC1kYXRlLXBpY2tlclxuICAgMTk3XHQgICAgICAgICAgICBzdHlsZT1cIndpZHRoOiAyNTBweFwiXG4gICAxOThcdCAgICAgICAgICAgIHYtbW9kZWw9XCJhZG1pbi5lbmRUaW1lXCJcbiAgIDE5OVx0ICAgICAgICAgICAgdHlwZT1cImRhdGV0aW1lXCJcbiAgIDIwMFx0ICAgICAgICAgICAgdmFsdWUtZm9ybWF0PVwieXl5eS1NTS1kZCBISDptbTpzc1wiXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIwXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTVFNMTc1a1RBTEJQSkpUY2ZuYzRzRCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImQ5ZjE2NmU0LTM1NzktNDU5NS1iNzhlLWNkZmRiM2UzYWRkMyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFLVWdCbXljNUFhdjh5RlhyQ2lzdTNLIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXCIsIFwidmlld19yYW5nZVwiOiBbNjAwLCA2NTBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgIDUwMFx0ICAgICAgICB0aW1lQ29sb3JzOiB7XG4gICA1MDFcdCAgICAgICAgICBlYXJseU1vcm5pbmc6IHtcbiAgIDUwMlx0ICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0UzRjJGRCcsXG4gICA1MDNcdCAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnIzkwQ0FGOScsXG4gICA1MDRcdCAgICAgICAgICAgIGRvdENvbG9yOiAnIzIxOTZGMydcbiAgIDUwNVx0ICAgICAgICAgIH0sXG4gICA1MDZcdCAgICAgICAgICBtb3JuaW5nOiB7XG4gICA1MDdcdCAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNFOEY1RTknLFxuICAgNTA4XHQgICAgICAgICAgICBib3JkZXJDb2xvcjogJyNBNUQ2QTcnLFxuICAgNTA5XHQgICAgICAgICAgICBkb3RDb2xvcjogJyM0Q0FGNTAnXG4gICA1MTBcdCAgICAgICAgICB9LFxuICAgNTExXHQgICAgICAgICAgbm9vbjoge1xuICAgNTEyXHQgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRkZGOEUxJyxcbiAgIDUxM1x0ICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjRkZFMDgyJyxcbiAgIDUxNFx0ICAgICAgICAgICAgZG90Q29sb3I6ICcjRkZDMTA3J1xuICAgNTE1XHQgICAgICAgICAgfSxcbiAgIDUxNlx0ICAgICAgICAgIGFmdGVybm9vbjoge1xuICAgNTE3XHQgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRkJFOUU3JyxcbiAgIDUxOFx0ICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjRkZBQjkxJyxcbiAgIDUxOVx0ICAgICAgICAgICAgZG90Q29sb3I6ICcjRkY1NzIyJ1xuICAgNTIwXHQgICAgICAgICAgfSxcbiAgIDUyMVx0ICAgICAgICAgIGV2ZW5pbmc6IHtcbiAgIDUyMlx0ICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0VERTdGNicsXG4gICA1MjNcdCAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnI0IzOUREQicsXG4gICA1MjRcdCAgICAgICAgICAgIGRvdENvbG9yOiAnIzY3M0FCNydcbiAgIDUyNVx0ICAgICAgICAgIH0sXG4gICA1MjZcdCAgICAgICAgICBuaWdodDoge1xuICAgNTI3XHQgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRTFGNUZFJyxcbiAgIDUyOFx0ICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjODFENEZBJyxcbiAgIDUyOVx0ICAgICAgICAgICAgZG90Q29sb3I6ICcjMDNBOUY0J1xuICAgNTMwXHQgICAgICAgICAgfVxuICAgNTMxXHQgICAgICAgIH1cbiAgIDUzMlx0ICAgICAgfVxuICAgNTMzXHQgICAgfSxcbiAgIDUzNFx0ICAgIGNvbXB1dGVkOiB7XG4gICA1MzVcdCAgICAgIC8vIOaMieaXpeacn+WIhue7hOaXpeeoi+WuieaOklxuICAgNTM2XHQgICAgICBncm91cGVkU2NoZWR1bGVzKCkge1xuICAgNTM3XHQgICAgICAgIGlmICghdGhpcy5saXN0KSByZXR1cm4ge307XG4gICA1MzhcdFxuICAgNTM5XHQgICAgICAgIC8vIOWIm+W7uuWfuuS6juaXpeacn+eahOWIhue7hFxuICAgNTQwXHQgICAgICAgIGNvbnN0IGdyb3VwcyA9IHt9O1xuICAgNTQxXHQgICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKHNjaGVkdWxlID0+IHtcbiAgIDU0Mlx0ICAgICAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLmdldERhdGVTdHIoc2NoZWR1bGUuc3RhcnRUaW1lKTtcbiAgIDU0M1x0ICAgICAgICAgIGlmICghZ3JvdXBzW2RhdGVdKSB7XG4gICA1NDRcdCAgICAgICAgICAgIGdyb3Vwc1tkYXRlXSA9IFtdO1xuICAgNTQ1XHQgICAgICAgICAgfVxuICAgNTQ2XHQgICAgICAgICAgZ3JvdXBzW2RhdGVdLnB1c2goc2NoZWR1bGUpO1xuICAgNTQ3XHQgICAgICAgIH0pO1xuICAgNTQ4XHRcbiAgIDU0OVx0ICAgICAgICAvLyDmjInml6XmnJ/mjpLluo9cbiAgIDU1MFx0ICAgICAgICBjb25zdCBzb3J0ZWREYXRlcyA9IE9iamVjdC5rZXlzKGdyb3Vwcykuc29ydCgpO1xuVG90YWwgbGluZXMgaW4gZmlsZTogMTMyMFxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTRDbTRTeFJVVnlZcWY1akdVOVNyaXAifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI1MjZlMTdhZC00MDc5LTQzYzgtYjljNS1jNWQ2M2U4MmJmNDkiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxV1BCQmVwcXJ3MlVyc2o2VmdwanprViIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZVwiLCBcInZpZXdfcmFuZ2VcIjogWzQwMCwgNDUwXX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIHVwZGF0ZSB0aGUgc2NyaXB0IHNlY3Rpb24gdG8gaGFuZGxlIHRoZSBzdGF0dXMgZmlsdGVyOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgIDYwMFx0XG4gICA2MDFcdCAgICAgIC8vIOaZuuiDveaOkuW6j+aWueazlVxuICAgNjAyXHQgICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XG4gICA2MDNcdCAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICA2MDRcdCAgICAgICAgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICA2MDVcdCAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICA2MDZcdCAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgIDYwN1x0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDYwOFx0ICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgNjA5XHQgICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgIDYxMFx0ICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICA2MTFcdCAgICAgICAgICB9KTtcbiAgIDYxMlx0ICAgICAgICB9KTtcbiAgIDYxM1x0ICAgICAgfSxcbiAgIDYxNFx0XG4gICA2MTVcdCAgICAgIC8vIOiOt+WPluaXpeacn+agh+etvijku4rlpKkv5piO5aSp562JKVxuICAgNjE2XHQgICAgICBnZXREYXRlVGFnKGRhdGVTdHIpIHtcbiAgIDYxN1x0ICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICA2MThcdCAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgNjE5XHQgICAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgNjIwXHRcbiAgIDYyMVx0ICAgICAgICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgIDYyMlx0ICAgICAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuICAgNjIzXHRcbiAgIDYyNFx0ICAgICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSh0b2RheSk7XG4gICA2MjVcdCAgICAgICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpO1xuICAgNjI2XHRcbiAgIDYyN1x0ICAgICAgICBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IHRvZGF5LmdldFRpbWUoKSkge1xuICAgNjI4XHQgICAgICAgICAgcmV0dXJuICfku4rlpKknO1xuICAgNjI5XHQgICAgICAgIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IHRvbW9ycm93LmdldFRpbWUoKSkge1xuICAgNjMwXHQgICAgICAgICAgcmV0dXJuICfmmI7lpKknO1xuICAgNjMxXHQgICAgICAgIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IHllc3RlcmRheS5nZXRUaW1lKCkpIHtcbiAgIDYzMlx0ICAgICAgICAgIHJldHVybiAn5pio5aSpJztcbiAgIDYzM1x0ICAgICAgICB9IGVsc2Uge1xuICAgNjM0XHQgICAgICAgICAgLy8g6L+U5Zue5pif5pyf5YegXG4gICA2MzVcdCAgICAgICAgICBjb25zdCB3ZWVrZGF5cyA9IFsn5ZGo5pelJywgJ+WRqOS4gCcsICflkajkuownLCAn5ZGo5LiJJywgJ+WRqOWbmycsICflkajkupQnLCAn5ZGo5YWtJ107XG4gICA2MzZcdCAgICAgICAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV07XG4gICA2MzdcdCAgICAgICAgfVxuICAgNjM4XHQgICAgICB9LFxuICAgNjM5XHQgICAgICAvLyDmoLzlvI/ljJbml6XmnJ/kuLpZWVlZLU1NLURE5qC85byPXG4gICA2NDBcdCAgICAgIGdldERhdGVTdHIoZGF0ZVN0cikge1xuICAgNjQxXHQgICAgICAgIHJldHVybiBkYXRlU3RyLnNwbGl0KCcgJylbMF07XG4gICA2NDJcdCAgICAgIH0sXG4gICA2NDNcdCAgICAgIC8vIOagvOW8j+WMluWxleekuuaXpeacn1xuICAgNjQ0XHQgICAgICBmb3JtYXREYXlEYXRlKGRhdGVTdHIpIHtcbiAgIDY0NVx0ICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICA2NDZcdCAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXnlubRNTeaciGRk5pelJyk7XG4gICA2NDdcdCAgICAgIH0sXG4gICA2NDhcdCAgICAgIC8vIOagvOW8j+WMluaXtumXtOS4ukhIOk1N5qC85byPXG4gICA2NDlcdCAgICAgIGZvcm1hdFRpbWUoZGF0ZVRpbWVTdHIpIHtcbiAgIDY1MFx0ICAgICAgICBpZiAoIWRhdGVUaW1lU3RyKSByZXR1cm4gJyc7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIwXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxS1VnQm15YzVBYXY4eUZYckNpc3UzSyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgdXBkYXRlIHRoZSBzY3JpcHQgc2VjdGlvbiB0byBoYW5kbGUgdGhlIHN0YXR1cyBmaWx0ZXI6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMTg0ZGY2YTgtYmVhZi00NDI3LTg5N2MtOGNiYzExYzQwMDg5IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVJ2RUV1Y3N3czQ5RGZIWTlRU2dyQloiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcXG4gICAgcGFnZU51bTogMSxcXG4gICAgcGFnZVNpemU6IDEwLFxcbiAgICBzZWFyY2hLZXk6IG51bGwsXFxuICAgIHR5cGU6IG51bGwsXFxuICB9O1wiLCBcIm5ld19zdHJcIjogXCIgIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XFxuICAgIHBhZ2VOdW06IDEsXFxuICAgIHBhZ2VTaXplOiAxMCxcXG4gICAgc2VhcmNoS2V5OiBudWxsLFxcbiAgICBzdGF0dXM6IG51bGwsXFxuICAgIHR5cGU6IG51bGwsXFxuICB9O1wiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogNDI3LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDQzMn1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgIDQwMFx0ICAgICAgICAgICAgdmFsdWUtZm9ybWF0PVwieXl5eS1NTS1kZCBISDptbTpzc1wiXG4gICA0MDFcdCAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi6YCJ5oup5byA5aeL5pe26Ze0XCI+XG4gICA0MDJcdCAgICAgICAgICA8L2VsLWRhdGUtcGlja2VyPlxuICAgNDAzXHQgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgNDA0XHQgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLnu5PmnZ/ml7bpl7RcIj5cbiAgIDQwNVx0ICAgICAgICAgIDxlbC1kYXRlLXBpY2tlclxuICAgNDA2XHQgICAgICAgICAgICB2LW1vZGVsPVwic2NoZWR1bGVUaW1lRm9ybS5lbmRUaW1lXCJcbiAgIDQwN1x0ICAgICAgICAgICAgdHlwZT1cImRhdGV0aW1lXCJcbiAgIDQwOFx0ICAgICAgICAgICAgdmFsdWUtZm9ybWF0PVwieXl5eS1NTS1kZCBISDptbTpzc1wiXG4gICA0MDlcdCAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwi6YCJ5oup57uT5p2f5pe26Ze0XCI+XG4gICA0MTBcdCAgICAgICAgICA8L2VsLWRhdGUtcGlja2VyPlxuICAgNDExXHQgICAgICAgICAgPGRpdj48ZWwtdGFnIHNpemU9XCJtaW5pXCI+5LiN5aGr5YaZ5bCG5qC55o2u5Lu75Yqh6aKE5Lyw5pe26ZW/6Ieq5Yqo6K6h566XPC9lbC10YWc+PC9kaXY+XG4gICA0MTJcdCAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICA0MTNcdCAgICAgIDwvZWwtZm9ybT5cbiAgIDQxNFx0ICAgICAgPHNwYW4gc2xvdD1cImZvb3RlclwiIGNsYXNzPVwiZGlhbG9nLWZvb3RlclwiPlxuICAgNDE1XHQgICAgICAgIDxlbC1idXR0b24gQGNsaWNrPVwic2NoZWR1bGVUaW1lRGlhbG9nVmlzaWJsZSA9IGZhbHNlXCI+5Y+WIOa2iDwvZWwtYnV0dG9uPlxuICAgNDE2XHQgICAgICAgIDxlbC1idXR0b24gdHlwZT1cInByaW1hcnlcIiBAY2xpY2s9XCJoYW5kbGVTY2hlZHVsZVRpbWVVcGRhdGVcIj7noa4g5a6aPC9lbC1idXR0b24+XG4gICA0MTdcdCAgICAgIDwvc3Bhbj5cbiAgIDQxOFx0ICAgIDwvZWwtZGlhbG9nPlxuICAgNDE5XHQgIDwvZGl2PlxuICAgNDIwXHQ8L3RlbXBsYXRlPlxuICAgNDIxXHQ8c2NyaXB0PlxuICAgNDIyXHQgIGltcG9ydCB7ZmV0Y2hTY2hlZHVsZUxpc3QsIGZldGNoU2NoZWR1bGVTbWFydFNvcnQsIGNyZWF0ZVNjaGVkdWxlLHVwZGF0ZVNjaGVkdWxlLGRlbGV0ZVNjaGVkdWxlLGZldGNoQWxsVGFza0xpc3QsZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzLGZldGNoVGFza0luZm8sZmV0Y2hDb25mbGljdFNjaGVkdWxlTGlzdCx1cGRhdGVUYXNrU3RhdHVzLHNldFRhc2tSZW1pbmRlcn0gZnJvbSAnQC9hcGkvYXBpJztcbiAgIDQyM1x0ICBpbXBvcnQgSnNCYXJjb2RlIGZyb20gJ2pzYmFyY29kZSc7XG4gICA0MjRcdCAgaW1wb3J0IGh0bWwyY2FudmFzIGZyb20gJ2h0bWwyY2FudmFzJztcbiAgIDQyNVx0ICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG4gICA0MjZcdFxuICAgNDI3XHQgIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICA0MjhcdCAgICBwYWdlTnVtOiAxLFxuICAgNDI5XHQgICAgcGFnZVNpemU6IDEwLFxuICAgNDMwXHQgICAgc2VhcmNoS2V5OiBudWxsLFxuICAgNDMxXHQgICAgdHlwZTogbnVsbCxcbiAgIDQzMlx0ICB9O1xuICAgNDMzXHQgIGNvbnN0IGRlZmF1bHRBZG1pbiA9IHtcbiAgIDQzNFx0ICAgIGlkOiBudWxsLFxuICAgNDM1XHQgICAgdGFza0lkOiBudWxsLFxuICAgNDM2XHQgICAgc3RhcnRUaW1lOiBudWxsLFxuICAgNDM3XHQgICAgZW5kVGltZTogbnVsbCxcbiAgIDQzOFx0ICAgIHJlbWluZGVyVGltZTogbnVsbCxcbiAgIDQzOVx0ICB9O1xuICAgNDQwXHQgIGV4cG9ydCBkZWZhdWx0IHtcbiAgIDQ0MVx0ICAgIG5hbWU6ICdhZG1pbkxpc3QnLFxuICAgNDQyXHQgICAgZGF0YSgpIHtcbiAgIDQ0M1x0ICAgICAgcmV0dXJuIHtcbiAgIDQ0NFx0ICAgICAgICBsaXN0UXVlcnk6IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpLFxuICAgNDQ1XHQgICAgICAgIGxpc3Q6IG51bGwsXG4gICA0NDZcdCAgICAgICAgdG90YWw6IG51bGwsXG4gICA0NDdcdCAgICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLFxuICAgNDQ4XHQgICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgNDQ5XHQgICAgICAgIGFkbWluOiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWRtaW4pLFxuICAgNDUwXHQgICAgICAgIGlzRWRpdDogZmFsc2UsXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIwXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxV1BCQmVwcXJ3MlVyc2o2VmdwanprViJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjI1OWVlNGVjLTUwYzgtNDA4Ny05MzFkLTAzODk1ZWExNGQ3NiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFMZTZYTnV2eERwMWZ4Q3Rmd1lxeFFIIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImNvbW1hbmRcIjogXCJ2aWV3XCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXCIsIFwidmlld19yYW5nZVwiOiBbNjAwLCA2NTBdfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93LCBsZXQncyB1cGRhdGUgdGhlIG1ldGhvZHMgdG8gaGFuZGxlIHRoZSBzdGF0dXMgZmlsdGVyOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNDIzXHQgIGltcG9ydCBKc0JhcmNvZGUgZnJvbSAnanNiYXJjb2RlJztcbiAgIDQyNFx0ICBpbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnO1xuICAgNDI1XHQgIGltcG9ydCB7Zm9ybWF0RGF0ZX0gZnJvbSAnQC91dGlscy9kYXRlJztcbiAgIDQyNlx0XG4gICA0MjdcdCAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgIDQyOFx0ICAgIHBhZ2VOdW06IDEsXG4gICA0MjlcdCAgICBwYWdlU2l6ZTogMTAsXG4gICA0MzBcdCAgICBzZWFyY2hLZXk6IG51bGwsXG4gICA0MzFcdCAgICBzdGF0dXM6IG51bGwsXG4gICA0MzJcdCAgICB0eXBlOiBudWxsLFxuICAgNDMzXHQgIH07XG4gICA0MzRcdCAgY29uc3QgZGVmYXVsdEFkbWluID0ge1xuICAgNDM1XHQgICAgaWQ6IG51bGwsXG4gICA0MzZcdCAgICB0YXNrSWQ6IG51bGwsXG4gICA0MzdcdCAgICBzdGFydFRpbWU6IG51bGwsXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFSdkVFdWNzd3M0OURmSFk5UVNnckJaIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJOb3csIGxldCdzIHVwZGF0ZSB0aGUgbWV0aG9kcyB0byBoYW5kbGUgdGhlIHN0YXR1cyBmaWx0ZXI6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYzczMzU3MjEtZWMxOC00MWE0LWJlZDgtMTZjMTg5ZmExNjBmIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVdHenU3QTdKQUdmMnJxdzFpOVNDdEUiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgIC8vIFxcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXHU2NWI5XFx1NmNkNVxcbiAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcXG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xcbiAgICAgICAgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XFxuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcXG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XFxuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcXG4gICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XFxuICAgICAgICAgICAgbWVzc2FnZTogJ1xcdTVkZjJcXHU2ODM5XFx1NjM2ZVxcdTY1ZjZcXHU5NWY0XFx1N2QyN1xcdTYwMjVcXHU2MDI3XFx1NTQ4Y1xcdTRlZmJcXHU1MmExXFx1OTFjZFxcdTg5ODFcXHU2MDI3XFx1OGZkYlxcdTg4NGNcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmJyxcXG4gICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcXG4gICAgICAgICAgfSk7XFxuICAgICAgICB9KTtcXG4gICAgICB9LFwiLCBcIm5ld19zdHJcIjogXCIgICAgICAvLyBcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NjViOVxcdTZjZDVcXG4gICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XFxuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcXG4gICAgICAgIGZldGNoU2NoZWR1bGVTbWFydFNvcnQodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xcbiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XFxuICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdcXHU1ZGYyXFx1NjgzOVxcdTYzNmVcXHU2NWY2XFx1OTVmNFxcdTdkMjdcXHU2MDI1XFx1NjAyN1xcdTU0OGNcXHU0ZWZiXFx1NTJhMVxcdTkxY2RcXHU4OTgxXFx1NjAyN1xcdThmZGJcXHU4ODRjXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZicsXFxuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgfSk7XFxuICAgICAgfSxcXG4gICAgICBcXG4gICAgICAvLyBcXHU5MWNkXFx1N2Y2ZVxcdTY0MWNcXHU3ZDIyXFxuICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XFxuICAgICAgICB0aGlzLmxpc3RRdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpO1xcbiAgICAgICAgdGhpcy5nZXRMaXN0KCk7XFxuICAgICAgfSxcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDYwMiwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA2MTR9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWU6XG4gICA2MDBcdCAgICAgIH0sXG4gICA2MDFcdFxuICAgNjAyXHQgICAgICAvLyDmmbrog73mjpLluo/mlrnms5VcbiAgIDYwM1x0ICAgICAgaGFuZGxlU21hcnRTb3J0KCkge1xuICAgNjA0XHQgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgNjA1XHQgICAgICAgIGZldGNoU2NoZWR1bGVTbWFydFNvcnQodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgNjA2XHQgICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgNjA3XHQgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICA2MDhcdCAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA2MDlcdCAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgIDYxMFx0ICAgICAgICAgICAgbWVzc2FnZTogJ+W3suagueaNruaXtumXtOe0p+aApeaAp+WSjOS7u+WKoemHjeimgeaAp+i/m+ihjOaZuuiDveaOkuW6jycsXG4gICA2MTFcdCAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgNjEyXHQgICAgICAgICAgfSk7XG4gICA2MTNcdCAgICAgICAgfSk7XG4gICA2MTRcdCAgICAgIH0sXG4gICA2MTVcdFxuICAgNjE2XHQgICAgICAvLyDojrflj5bml6XmnJ/moIfnrb4o5LuK5aSpL+aYjuWkqeetiSlcbiAgIDYxN1x0ICAgICAgZ2V0RGF0ZVRhZyhkYXRlU3RyKSB7XG4gICA2MThcdCAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgNjE5XHQgICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgIDYyMFx0ICAgICAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgIDYyMVx0XG4gICA2MjJcdCAgICAgICAgY29uc3QgdG9tb3Jyb3cgPSBuZXcgRGF0ZSh0b2RheSk7XG4gICA2MjNcdCAgICAgICAgdG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTtcbiAgIDYyNFx0XG4gICA2MjVcdCAgICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUodG9kYXkpO1xuICAgNjI2XHQgICAgICAgIHllc3RlcmRheS5zZXREYXRlKHllc3RlcmRheS5nZXREYXRlKCkgLSAxKTtcbiAgIDYyN1x0XG4gICA2MjhcdCAgICAgICAgaWYgKGRhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKCkpIHtcbiAgIDYyOVx0ICAgICAgICAgIHJldHVybiAn5LuK5aSpJztcbiAgIDYzMFx0ICAgICAgICB9IGVsc2UgaWYgKGRhdGUuZ2V0VGltZSgpID09PSB0b21vcnJvdy5nZXRUaW1lKCkpIHtcbiAgIDYzMVx0ICAgICAgICAgIHJldHVybiAn5piO5aSpJztcbiAgIDYzMlx0ICAgICAgICB9IGVsc2UgaWYgKGRhdGUuZ2V0VGltZSgpID09PSB5ZXN0ZXJkYXkuZ2V0VGltZSgpKSB7XG4gICA2MzNcdCAgICAgICAgICByZXR1cm4gJ+aYqOWkqSc7XG4gICA2MzRcdCAgICAgICAgfSBlbHNlIHtcbiAgIDYzNVx0ICAgICAgICAgIC8vIOi/lOWbnuaYn+acn+WHoFxuICAgNjM2XHQgICAgICAgICAgY29uc3Qgd2Vla2RheXMgPSBbJ+WRqOaXpScsICflkajkuIAnLCAn5ZGo5LqMJywgJ+WRqOS4iScsICflkajlm5snLCAn5ZGo5LqUJywgJ+WRqOWFrSddO1xuICAgNjM3XHQgICAgICAgICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldO1xuICAgNjM4XHQgICAgICAgIH1cbiAgIDYzOVx0ICAgICAgfSxcbiAgIDY0MFx0ICAgICAgLy8g5qC85byP5YyW5pel5pyf5Li6WVlZWS1NTS1EROagvOW8j1xuICAgNjQxXHQgICAgICBnZXREYXRlU3RyKGRhdGVTdHIpIHtcbiAgIDY0Mlx0ICAgICAgICByZXR1cm4gZGF0ZVN0ci5zcGxpdCgnICcpWzBdO1xuICAgNjQzXHQgICAgICB9LFxuICAgNjQ0XHQgICAgICAvLyDmoLzlvI/ljJblsZXnpLrml6XmnJ9cbiAgIDY0NVx0ICAgICAgZm9ybWF0RGF5RGF0ZShkYXRlU3RyKSB7XG4gICA2NDZcdCAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgNjQ3XHQgICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl55bm0TU3mnIhkZOaXpScpO1xuICAgNjQ4XHQgICAgICB9LFxuICAgNjQ5XHQgICAgICAvLyDmoLzlvI/ljJbml7bpl7TkuLpISDpNTeagvOW8j1xuICAgNjUwXHQgICAgICBmb3JtYXRUaW1lKGRhdGVUaW1lU3RyKSB7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIxXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTGU2WE51dnhEcDFmeEN0ZndZcXhRSCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImI5ZmZkNWFjLThmNGMtNDM5YS1iZmIyLTIxNWEwNWNiYzMyOSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFQcmF3U0xmZnhUQ3FlZ3JyeXVuYzM5IiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJGaW5kIHRoZSBnZXRMaXN0IG1ldGhvZCBpbiB0aGUgc2NoZWR1bGUvaW5kZXgudnVlIGZpbGVcIn0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGFsc28gdXBkYXRlIHRoZSBgZ2V0TGlzdGAgbWV0aG9kIHRvIHVzZSB0aGUgc3RhdHVzIGZpbHRlcjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWUuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDU5OFx0ICAgICAgICAvLyDmo4Dmn6UgZW5kVGltZSDmmK/lkKblrZjlnKjvvIzmmK/lkKbml6nkuo7lvZPliY3ml7bpl7TvvIzlubbkuJTku7vliqHnirbmgIHkuI3mmK/lt7LlrozmiJAgKDQpXG4gICA1OTlcdCAgICAgICAgcmV0dXJuIHNjaGVkdWxlLmVuZFRpbWUgJiYgbmV3IERhdGUoc2NoZWR1bGUuZW5kVGltZSkgPCBuZXcgRGF0ZSgpICYmIHNjaGVkdWxlLnN0YXR1cyAhPT0gNDtcbiAgIDYwMFx0ICAgICAgfSxcbiAgIDYwMVx0XG4gICA2MDJcdCAgICAgIC8vIOaZuuiDveaOkuW6j+aWueazlVxuICAgNjAzXHQgICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XG4gICA2MDRcdCAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICA2MDVcdCAgICAgICAgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICA2MDZcdCAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICA2MDdcdCAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgIDYwOFx0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDYwOVx0ICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgNjEwXHQgICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgIDYxMVx0ICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICA2MTJcdCAgICAgICAgICB9KTtcbiAgIDYxM1x0ICAgICAgICB9KTtcbiAgIDYxNFx0ICAgICAgfSxcbiAgIDYxNVx0XG4gICA2MTZcdCAgICAgIC8vIOmHjee9ruaQnOe0olxuICAgNjE3XHQgICAgICBoYW5kbGVSZXNldFNlYXJjaCgpIHtcbiAgIDYxOFx0ICAgICAgICB0aGlzLmxpc3RRdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpO1xuICAgNjE5XHQgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgNjIwXHQgICAgICB9LFxuICAgNjIxXHRcbiAgIDYyMlx0ICAgICAgLy8g6I635Y+W5pel5pyf5qCH562+KOS7iuWkqS/mmI7lpKnnrYkpXG4gICA2MjNcdCAgICAgIGdldERhdGVUYWcoZGF0ZVN0cikge1xuICAgNjI0XHQgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVdHenU3QTdKQUdmMnJxdzFpOVNDdEUifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGFsc28gdXBkYXRlIHRoZSBgZ2V0TGlzdGAgbWV0aG9kIHRvIHVzZSB0aGUgc3RhdHVzIGZpbHRlcjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJjNmYwNDUwOC1iNWEyLTQwNzEtOTZiMC0zMjRhODk0N2IxZDQiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxV3F6QkpSS2dtZ0RZYUdXOXlzYUppaSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcIiwgXCJzdHJfcmVwbGFjZV9lbnRyaWVzXCI6IFt7XCJvbGRfc3RyXCI6IFwiICAgICAgZ2V0TGlzdCgpIHtcXG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xcbiAgICAgICAgICBwYWdlTnVtOiB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtLFxcbiAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5saXN0UXVlcnkucGFnZVNpemVcXG4gICAgICAgIH07XFxuXFxuICAgICAgICBpZiAodGhpcy5saXN0UXVlcnkuc2VhcmNoS2V5KSB7XFxuICAgICAgICAgIHBhcmFtcy5zZWFyY2hLZXkgPSB0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXk7XFxuICAgICAgICB9XFxuXFxuICAgICAgICBmZXRjaFNjaGVkdWxlTGlzdChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcXG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XFxuICAgICAgICB9KTtcXG4gICAgICB9LFwiLCBcIm5ld19zdHJcIjogXCIgICAgICBnZXRMaXN0KCkge1xcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XFxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XFxuICAgICAgICAgIHBhZ2VOdW06IHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0sXFxuICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZVxcbiAgICAgICAgfTtcXG5cXG4gICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXkpIHtcXG4gICAgICAgICAgcGFyYW1zLnNlYXJjaEtleSA9IHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnN0YXR1cyAhPT0gbnVsbCAmJiB0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IHVuZGVmaW5lZCkge1xcbiAgICAgICAgICBwYXJhbXMuc3RhdHVzID0gdGhpcy5saXN0UXVlcnkuc3RhdHVzO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy8gXFx1NGY3ZlxcdTc1MjhcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NjNhNVxcdTUzZTNcXHU4M2I3XFx1NTNkNlxcdTY1ZTVcXHU3YTBiXFx1NTIxN1xcdTg4NjhcXHVmZjBjXFx1NjUyZlxcdTYzMDFcXHU3MmI2XFx1NjAwMVxcdThmYzdcXHU2ZWU0XFxuICAgICAgICBmZXRjaFNjaGVkdWxlU21hcnRTb3J0KHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7XFxuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcXG4gICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcXG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcXG4gICAgICAgICAgY29uc29sZS5lcnJvcignXFx1ODNiN1xcdTUzZDZcXHU2NWU1XFx1N2EwYlxcdTY1NzBcXHU2MzZlXFx1NTkzMVxcdThkMjU6JywgZXJyb3IpO1xcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ1xcdTgzYjdcXHU1M2Q2XFx1NjVlNVxcdTdhMGJcXHU2NTcwXFx1NjM2ZVxcdTU5MzFcXHU4ZDI1XFx1ZmYwY1xcdThiZjdcXHU3YTBkXFx1NTQwZVxcdTkxY2RcXHU4YmQ1Jyk7XFxuICAgICAgICB9KTtcXG4gICAgICB9LFwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyB1cGRhdGUgdGhlIGBnZXRMaXN0YCBtZXRob2QgdG8gaW5jbHVkZSB0aGUgc3RhdHVzIGZpbHRlcjpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXG48dGVtcGxhdGU+XG4gIDxkaXYgY2xhc3M9XCJhcHAtY29udGFpbmVyXCI+XG4gICAgPGVsLWNhcmQgY2xhc3M9XCJmaWx0ZXItY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItaGVhZGVyXCI+XG4gICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi1zZWFyY2hcIj48L2k+XG4gICAgICAgIDxzcGFuPuetm+mAieaQnOe0ojwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1jb250ZW50XCI+XG4gICAgICAgIDxlbC1mb3JtIDppbmxpbmU9XCJ0cnVlXCIgOm1vZGVsPVwibGlzdFF1ZXJ5XCIgc2l6ZT1cInNtYWxsXCIgbGFiZWwtd2lkdGg9XCIxMjBweFwiPlxuICAgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLlhbPplK7lrZfvvJpcIj5cbiAgICAgICAgICAgIDxlbC1pbnB1dCB2LW1vZGVsPVwibGlzdFF1ZXJ5LnNlYXJjaEtleVwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl5YWz6ZSu5a2XXCIgY2xlYXJhYmxlPjwvZWwtaW5wdXQ+XG4gICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuS7u+WKoeeKtuaAge+8mlwiPlxuICAgICAgICAgICAgPGVsLXNlbGVjdCB2LW1vZGVsPVwibGlzdFF1ZXJ5LnN0YXR1c1wiIHBsYWNlaG9sZGVyPVwi6K+36YCJ5oup54q25oCBXCIgY2xlYXJhYmxlPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjFcIiBsYWJlbD1cIuW+heWKnlwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjJcIiBsYWJlbD1cIuW3suWuieaOklwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjNcIiBsYWJlbD1cIui/m+ihjOS4rVwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjRcIiBsYWJlbD1cIuW3suWujOaIkFwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjVcIiBsYWJlbD1cIuW3sumAvuacn1wiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgPC9lbC1zZWxlY3Q+XG4gICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICAgICAgPGVsLWJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAgICAgICAgIEBjbGljaz1cImhhbmRsZVNlYXJjaExpc3QoKVwiXG4gICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgICAgY2xhc3M9XCJzZWFyY2gtYnRuXCI+XG4gICAgICAgICAgICDmn6Xor6LmkJzntKJcbiAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1yZWZyZXNoXCJcbiAgICAgICAgICAgIEBjbGljaz1cImhhbmRsZVJlc2V0U2VhcmNoKClcIlxuICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCI+XG4gICAgICAgICAgICDph43nva5cbiAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAgICAgPC9lbC1mb3JtPlxuICAgICAgPC9kaXY+XG4gICAgPC9lbC1jYXJkPlxuICAgIDxlbC1jYXJkIGNsYXNzPVwib3BlcmF0ZS1jb250YWluZXJcIiBzaGFkb3c9XCJob3ZlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm9wZXJhdGUtaGVhZGVyXCI+XG4gICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi1kYXRlXCI+PC9pPlxuICAgICAgICA8c3Bhbj7ml6XnqIvlronmjpI8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJvcGVyYXRlLWFjdGlvbnNcIj5cbiAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVwic21hbGxcIiBjbGFzcz1cImJ0bi1hZGRcIiBAY2xpY2s9XCJoYW5kbGVBZGQoKVwiIHR5cGU9XCJwcmltYXJ5XCI+XG4gICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXBsdXNcIj48L2k+5Yib5bu65pel56iLXG4gICAgICAgIDwvZWwtYnV0dG9uPlxuICAgICAgICA8ZWwtYnV0dG9uIHNpemU9XCJzbWFsbFwiIGNsYXNzPVwiYnRuLXNvcnRcIiBAY2xpY2s9XCJoYW5kbGVTbWFydFNvcnQoKVwiIHR5cGU9XCJzdWNjZXNzXCI+XG4gICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXNvcnRcIj48L2k+5pm66IO95o6S5bqPXG4gICAgICAgIDwvZWwtYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9lbC1jYXJkPlxuXG4gICAgPCEtLSDkvJjpm4XnmoTml6XnqIvml7bpl7TovbQgLS0+XG4gICAgPGVsLWNhcmQgc2hhZG93PVwiaG92ZXJcIiBjbGFzcz1cInNjaGVkdWxlci1jb250YWluZXJcIiB2LWxvYWRpbmc9XCJsaXN0TG9hZGluZ1wiPlxuICAgICAgPGRpdiB2LWlmPVwiT2JqZWN0LmtleXMoZ3JvdXBlZFNjaGVkdWxlcykubGVuZ3RoID09PSAwXCIgY2xhc3M9XCJlbXB0eS1zdGF0ZVwiPlxuICAgICAgICA8ZWwtZW1wdHkgZGVzY3JpcHRpb249XCLmmoLml6Dml6XnqIvmlbDmja5cIj5cbiAgICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiaGFuZGxlQWRkXCIgc2l6ZT1cInNtYWxsXCIgc2xvdD1cImRlc2NyaXB0aW9uXCI+56uL5Y2z5Yib5bu6PC9lbC1idXR0b24+XG4gICAgICAgIDwvZWwtZW1wdHk+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgdi1lbHNlIGNsYXNzPVwic2NoZWR1bGVyLXdyYXBwZXJcIj5cbiAgICAgICAgPGRpdiB2LWZvcj1cIihzY2hlZHVsZXMsIGRhdGUpIGluIGdyb3VwZWRTY2hlZHVsZXNcIiA6a2V5PVwiZGF0ZVwiIGNsYXNzPVwiZGF5LWdyb3VwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbGVmdFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LW51bWJlclwiPnt7IGdldERheU51bWJlcihkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LXdlZWtkYXlcIj57eyBnZXREYXlXZWVrZGF5KGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktZGF0ZVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS10YWdcIj57eyBnZXREYXRlVGFnKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLWZ1bGxcIj57eyBmb3JtYXREYXlEYXRlKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lbGluZS1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lbGluZS10cmFja1wiPjwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IHYtZm9yPVwic2NoZWR1bGUgaW4gc2NoZWR1bGVzXCIgOmtleT1cInNjaGVkdWxlLmlkXCIgY2xhc3M9XCJ0aW1lbGluZS1ldmVudFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtdGltZVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuPnt7IGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1tYXJrZXJcIiA6c3R5bGU9XCJ7YmFja2dyb3VuZENvbG9yOiBnZXRUaW1lU2xvdENvbG9ycyhmb3JtYXRUaW1lKHNjaGVkdWxlLnN0YXJ0VGltZSkpLmRvdENvbG9yfVwiPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtY29ubmVjdG9yXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbm5lY3Rvci1kb3RcIiA6Y2xhc3M9XCJ7J2NvbmZsaWN0LWRvdCc6IHNjaGVkdWxlLmhhc0NvbmZsaWN0fVwiIDpzdHlsZT1cIntiYWNrZ3JvdW5kQ29sb3I6IGdldFRpbWVTbG90Q29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuZG90Q29sb3J9XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbm5lY3Rvci1saW5lXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuLi4uXG5cbiAgICA8ZGl2IGNsYXNzPVwicGFnaW5hdGlvbi1jb250YWluZXJcIj5cbiAgICAgIDxlbC1wYWdpbmF0aW9uXG4gICAgICAgIGJhY2tncm91bmRcbiAgICAgICAgQHNpemUtY2hhbmdlPVwiaGFuZGxlU2l6ZUNoYW5nZVwiXG4gICAgICAgIEBjdXJyZW50LWNoYW5nZT1cImhhbmRsZUN1cnJlbnRDaGFuZ2VcIlxuICAgICAgICBsYXlvdXQ9XCJ0b3RhbCwgc2l6ZXMscHJldiwgcGFnZXIsIG5leHQsanVtcGVyXCJcbiAgICAgICAgOmN1cnJlbnQtcGFnZS5zeW5jPVwibGlzdFF1ZXJ5LnBhZ2VOdW1cIlxuICAgICAgICA6cGFnZS1zaXplPVwibGlzdFF1ZXJ5LnBhZ2VTaXplXCJcbiAgICAgICAgOnBhZ2Utc2l6ZXM9XCJbMTAsMTUsMjBdXCJcbiAgICAgICAgOnRvdGFsPVwidG90YWxcIj5cbiAgICAgIDwvZWwtcGFnaW5hdGlvbj5cbiAgICA8L2Rpdj5cbi4uLlxuICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJuYW1lXCIgbGFiZWw9XCLlkI3np7BcIiB3aWR0aD1cIjE1MFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJjb2RlXCIgbGFiZWw9XCLnvJbnoIFcIiB3aWR0aD1cIjE1MFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJ0eXBlXCIgbGFiZWw9XCLnsbvlnotcIiB3aWR0aD1cIjEwMFwiPlxuICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj5cbiAgICAgICAgICAgIHt7IHNjb3BlLnJvdy50eXBlID09PSAxID8gJ+exu+Wei0EnIDogJ+exu+Wei0InIH19XG4gICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCLmj4/ov7BcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgIDwvZWwtdGFibGU+XG4gICAgICA8c3BhbiBzbG90PVwiZm9vdGVyXCIgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgIDxlbC1idXR0b24gQGNsaWNrPVwiaW5mb0RpYWxvZ1Zpc2libGUgPSBmYWxzZVwiPuWFs+mXrTwvZWwtYnV0dG9uPlxuICAgICAgPC9zcGFuPlxuICAgIDwvZWwtZGlhbG9nPlxuLi4uXG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwiZW1haWxcIiBsYWJlbD1cIumCrueusVwiIHdpZHRoPVwiMjAwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwicGhvbmVcIiBsYWJlbD1cIueUteivnVwiIHdpZHRoPVwiMTUwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwiYWRkcmVzc1wiIGxhYmVsPVwi5Zyw5Z2AXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDwvZWwtdGFibGU+XG4gICAgICAgIDxoMz7lhrLnqoHmiYDpnIDotYTmupDliJfooag8L2gzPlxuICAgICAgICA8ZWwtdGFibGUgOmRhdGE9XCJpdGVtLnJlc291cmNlc0xpc3QgfHwgW11cIiBib3JkZXI+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwiaWRcIiBsYWJlbD1cIklEXCIgd2lkdGg9XCI4MFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cIm5hbWVcIiBsYWJlbD1cIuWQjeensFwiIHdpZHRoPVwiMTUwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwiY29kZVwiIGxhYmVsPVwi57yW56CBXCIgd2lkdGg9XCIxNTBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJ0eXBlXCIgbGFiZWw9XCLnsbvlnotcIiB3aWR0aD1cIjEwMFwiPlxuICAgICAgICAgICAgPHRlbXBsYXRlIHNsb3Qtc2NvcGU9XCJzY29wZVwiPlxuICAgICAgICAgICAgICB7eyBzY29wZS5yb3cudHlwZSA9PT0gMSA/ICfnsbvlnotBJyA6ICfnsbvlnotCJyB9fVxuICAgICAgICAgICAgPC90ZW1wbGF0ZT5cbiAgICAgICAgICA8L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJkZXNjcmlwdGlvblwiIGxhYmVsPVwi5o+P6L+wXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDwvZWwtdGFibGU+XG4gICAgICA8L2Rpdj5cbi4uLlxuICAgICAgPC9zcGFuPlxuICAgIDwvZWwtZGlhbG9nPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG48c2NyaXB0PlxuICBpbXBvcnQge2ZldGNoU2NoZWR1bGVMaXN0LCBmZXRjaFNjaGVkdWxlU21hcnRTb3J0LCBjcmVhdGVTY2hlZHVsZSx1cGRhdGVTY2hlZHVsZSxkZWxldGVTY2hlZHVsZSxmZXRjaEFsbFRhc2tMaXN0LGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cyxmZXRjaFRhc2tJbmZvLGZldGNoQ29uZmxpY3RTY2hlZHVsZUxpc3QsdXBkYXRlVGFza1N0YXR1cyxzZXRUYXNrUmVtaW5kZXJ9IGZyb20gJ0AvYXBpL2FwaSc7XG4gIGltcG9ydCBKc0JhcmNvZGUgZnJvbSAnanNiYXJjb2RlJztcbiAgaW1wb3J0IGh0bWwyY2FudmFzIGZyb20gJ2h0bWwyY2FudmFzJztcbiAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuXG4gIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAgcGFnZU51bTogMSxcbiAgICBwYWdlU2l6ZTogMTAsXG4gICAgc2VhcmNoS2V5OiBudWxsLFxuICAgIHN0YXR1czogbnVsbCxcbiAgICB0eXBlOiBudWxsLFxuICB9O1xuICBjb25zdCBkZWZhdWx0QWRtaW4gPSB7XG4gICAgaWQ6IG51bGwsXG4gICAgdGFza0lkOiBudWxsLFxuICAgIHN0YXJ0VGltZTogbnVsbCxcbiAgICBlbmRUaW1lOiBudWxsLFxuICAgIHJlbWluZGVyVGltZTogbnVsbCxcbiAgfTtcbiAgZXhwb3J0IGRlZmF1bHQge1xuICAgIG5hbWU6ICdhZG1pbkxpc3QnLFxuICAgIGRhdGEoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsaXN0UXVlcnk6IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpLFxuICAgICAgICBsaXN0OiBudWxsLFxuICAgICAgICB0b3RhbDogbnVsbCxcbiAgICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLFxuICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgYWRtaW46IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZG1pbiksXG4gICAgICAgIGlzRWRpdDogZmFsc2UsXG4gICAgICAgIGFkbWluUnVsZXM6IHtcbiAgICAgICAgICB0YXNrSWQ6IFtcbiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nml6XnqIvlronmjpLku7vliqEnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdGFydFRpbWU6IFtcbiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nku7vliqHmiafooYzml7bpl7QnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgYmFyY29kZURpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBjdXJyZW50Q29kZTogJycsIC8vIOW9k+WJjemAieS4reeahOe8lueggVxuXG4gICAgICAgIHRhc2tMaXN0OiBbXSxcblxuICAgICAgICAvLyDku7vliqHor6bmg4Xnm7jlhbNcbiAgICAgICAgdGFza0RldGFpbFZpc2libGU6IGZhbHNlLFxuICAgICAgICB0YXNrRGV0YWlsOiB7fSxcbiAgICAgICAgY3VycmVudFNjaGVkdWxlSWQ6IG51bGwsXG5cbiAgICAgICAgLy8g54q25oCB5Y+Y5pu055u45YWzXG4gICAgICAgIHN0YXR1c0NoYW5nZVZpc2libGU6IGZhbHNlLFxuICAgICAgICBzdGF0dXNGb3JtOiB7XG4gICAgICAgICAgc3RhdHVzOiAxXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8g5o+Q6YaS5pe26Ze055u45YWzXG4gICAgICAgIHJlbWluZGVyRGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHJlbWluZGVyVGltZTogJycsXG5cbiAgICAgICAgLy8g5L+u5pS55pel56iL5pe26Ze055u45YWzXG4gICAgICAgIHNjaGVkdWxlVGltZURpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBzY2hlZHVsZVRpbWVGb3JtOiB7XG4gICAgICAgICAgc3RhcnRUaW1lOiAnJyxcbiAgICAgICAgICBlbmRUaW1lOiAnJ1xuICAgICAgICB9LFxuLi4uXG4gICAgY29tcHV0ZWQ6IHtcbiAgICAgIC8vIOaMieaXpeacn+WIhue7hOaXpeeoi+WuieaOklxuICAgICAgZ3JvdXBlZFNjaGVkdWxlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpc3QpIHJldHVybiB7fTtcblxuICAgICAgICAvLyDliJvlu7rln7rkuo7ml6XmnJ/nmoTliIbnu4RcbiAgICAgICAgY29uc3QgZ3JvdXBzID0ge307XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKHNjaGVkdWxlID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5nZXREYXRlU3RyKHNjaGVkdWxlLnN0YXJ0VGltZSk7XG4gICAgICAgICAgaWYgKCFncm91cHNbZGF0ZV0pIHtcbiAgICAgICAgICAgIGdyb3Vwc1tkYXRlXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBncm91cHNbZGF0ZV0ucHVzaChzY2hlZHVsZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOaMieaXpeacn+aOkuW6j1xuICAgICAgICBjb25zdCBzb3J0ZWREYXRlcyA9IE9iamVjdC5rZXlzKGdyb3Vwcykuc29ydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcblxuICAgICAgICBzb3J0ZWREYXRlcy5mb3JFYWNoKGRhdGUgPT4ge1xuICAgICAgICAgIC8vIOaMieW8gOWni+aXtumXtOaOkuW6j+avj+S4gOWkqeeahOaXpeeoi1xuICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IGdyb3Vwc1tkYXRlXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYS5zdGFydFRpbWUpIC0gbmV3IERhdGUoYi5zdGFydFRpbWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlc3VsdFtkYXRlXSA9IHNvcnRlZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZpbHRlcnM6IHtcbiAgICAgIGZvcm1hdERhdGVUaW1lKHRpbWUpIHtcbiAgICAgICAgaWYgKHRpbWUgPT0gbnVsbCB8fCB0aW1lID09PSAnJykge1xuICAgICAgICAgIHJldHVybiAnTi9BJztcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xuICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlLCAneXl5eS1NTS1kZCBoaDptbTpzcycpXG4gICAgICB9LFxuICAgICAgZm9ybWF0U3RhdHVzKHN0YXR1cykge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuICflvoXlip4nO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gMikge1xuICAgICAgICAgIHJldHVybiAn5bey5a6J5o6SJztcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDMpIHtcbiAgICAgICAgICByZXR1cm4gJ+i/m+ihjOS4rSc7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSA0KSB7XG4gICAgICAgICAgcmV0dXJuICflt7LlrozmiJAnO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gNSkge1xuICAgICAgICAgIHJldHVybiAn5bey6YC+5pyfJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ+acquefpSc7XG4gICAgICB9XG4gICAgfSxcbiAgICBjcmVhdGVkKCkge1xuICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAvLyDkv67mlLnvvJrliKTmlq3ml6XnqIvmmK/lkKblt7Lov4fnu5PmnZ/ml7bpl7RcbiAgICAgIGlzT3ZlcmR1ZShzY2hlZHVsZSkge1xuICAgICAgICAvLyDlpoLmnpxzdGF0dXPlt7Lnu4/mmK81KOW3sumAvuacnynliJnnm7TmjqXov5Tlm550cnVlXG4gICAgICAgIGlmIChzY2hlZHVsZS5zdGF0dXMgPT09IDUpIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyDmo4Dmn6UgZW5kVGltZSDmmK/lkKblrZjlnKjvvIzmmK/lkKbml6nkuo7lvZPliY3ml7bpl7TvvIzlubbkuJTku7vliqHnirbmgIHkuI3mmK/lt7LlrozmiJAgKDQpXG4gICAgICAgIHJldHVybiBzY2hlZHVsZS5lbmRUaW1lICYmIG5ldyBEYXRlKHNjaGVkdWxlLmVuZFRpbWUpIDwgbmV3IERhdGUoKSAmJiBzY2hlZHVsZS5zdGF0dXMgIT09IDQ7XG4gICAgICB9LFxuXG4gICAgICAvLyDmmbrog73mjpLluo/mlrnms5VcbiAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIGZldGNoU2NoZWR1bGVTbWFydFNvcnQodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIOmHjee9ruaQnOe0olxuICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgfSxcblxuICAgICAgLy8g6I635Y+W5pel5pyf5qCH562+KOS7iuWkqS/mmI7lpKnnrYkpXG4gICAgICBnZXREYXRlVGFnKGRhdGVTdHIpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgICAgIGNvbnN0IHRvbW9ycm93ID0gbmV3IERhdGUodG9kYXkpO1xuICAgICAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuXG4gICAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgICAgICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpO1xuXG4gICAgICAgIGlmIChkYXRlLmdldFRpbWUoKSA9PT0gdG9kYXkuZ2V0VGltZSgpKSB7XG4gICAgICAgICAgcmV0dXJuICfku4rlpKknO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGUuZ2V0VGltZSgpID09PSB0b21vcnJvdy5nZXRUaW1lKCkpIHtcbiAgICAgICAgICByZXR1cm4gJ+aYjuWkqSc7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IHllc3RlcmRheS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICByZXR1cm4gJ+aYqOWkqSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8g6L+U5Zue5pif5pyf5YegXG4gICAgICAgICAgY29uc3Qgd2Vla2RheXMgPSBbJ+WRqOaXpScsICflkajkuIAnLCAn5ZGo5LqMJywgJ+WRqOS4iScsICflkajlm5snLCAn5ZGo5LqUJywgJ+WRqOWFrSddO1xuICAgICAgICAgIHJldHVybiB3ZWVrZGF5c1tkYXRlLmdldERheSgpXTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIC8vIOagvOW8j+WMluaXpeacn+S4ullZWVktTU0tRETmoLzlvI9cbiAgICAgIGdldERhdGVTdHIoZGF0ZVN0cikge1xuICAgICAgICByZXR1cm4gZGF0ZVN0ci5zcGxpdCgnICcpWzBdO1xuICAgICAgfSxcbiAgICAgIC8vIOagvOW8j+WMluWxleekuuaXpeacn1xuICAgICAgZm9ybWF0RGF5RGF0ZShkYXRlU3RyKSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXnlubRNTeaciGRk5pelJyk7XG4gICAgICB9LFxuICAgICAgLy8g5qC85byP5YyW5pe26Ze05Li6SEg6TU3moLzlvI9cbiAgICAgIGZvcm1hdFRpbWUoZGF0ZVRpbWVTdHIpIHtcbiAgICAgICAgaWYgKCFkYXRlVGltZVN0cikgcmV0dXJuICcnO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IGRhdGVUaW1lU3RyLnNwbGl0KCcgJyk7XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPCAyIHx8ICFwYXJ0c1sxXSkgcmV0dXJuICcnO1xuICAgICAgICByZXR1cm4gcGFydHNbMV0uc3Vic3RyaW5nKDAsIDUpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldFRhc2tMaXN0KHBhcmFtcykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cyhwYXJhbXMpXG4gICAgICAgIHRoaXMudGFza0xpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldEFsbFRhc2tMaXN0KCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoQWxsVGFza0xpc3QoKVxuICAgICAgICB0aGlzLnRhc2tMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRUYXNrSW5mbyhpZCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoVGFza0luZm8oaWQpO1xuICAgICAgICB0aGlzLnRhc2tJbmZvID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0sXG4gICAgICBhc3luYyB2aWV3QmFyY29kZShyb3cpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Q29kZSA9IHJvdy50YXNrQ29kZTtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRUYXNrSW5mbyhyb3cudGFza0lkKTtcbiAgICAgICAgdGhpcy5iYXJjb2RlRGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICB9LFxuLi4uXG4gICAgICBleHBvcnRCYXJjb2RlKCkge1xuICAgICAgICBjb25zdCBiYXJjb2RlRWxlbWVudCA9IHRoaXMuJHJlZnMuYmFyY29kZVByZXZpZXc7XG5cbiAgICAgICAgaWYgKCFiYXJjb2RlRWxlbWVudCkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+adoeeggeWFg+e0oOacquaJvuWIsCcpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCfmjZXojrfmnaHnoIHlhYPntKA6JywgYmFyY29kZUVsZW1lbnQpO1xuXG4gICAgICAgIGh0bWwyY2FudmFzKGJhcmNvZGVFbGVtZW50KS50aGVuKChjYW52YXMpID0+IHtcbiAgICAgICAgICBpZiAoIWNhbnZhcykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcign5pyq6IO955Sf5oiQIGNhbnZhcycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgbGluay5ocmVmID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgICAgICAgbGluay5kb3dubG9hZCA9IGAke3RoaXMuY3VycmVudENvZGV9LnBuZ2A7XG4gICAgICAgICAgbGluay5jbGljaygpO1xuICAgICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdodG1sMmNhbnZhcyDplJnor686JywgZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVSZXNldFNlYXJjaCgpIHtcbiAgICAgICAgICB0aGlzLmxpc3RRdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpO1xuICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpXG4gICAgICAgIH0sXG4gICAgICBoYW5kbGVTZWFyY2hMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtID0gMTtcbiAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHtcbiAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IDE7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplID0gdmFsO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtID0gdmFsO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBoYW5kbGVBZGQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0VGFza0xpc3Qoe3N0YXR1czoxfSk7XG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWRtaW4pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7XG4gICAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuimgeWIoOmZpOivpeaXpeeoi+WuieaOkj/liKDpmaTlkI7lsIbml6Dms5XmkqTplIAnLCAn5o+Q56S6Jywge1xuICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJyxcbiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJyxcbiAgICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgZGVsZXRlU2NoZWR1bGUocm93LmlkKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgaGFuZGxlVXBkYXRlKGluZGV4LCByb3cpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRBbGxUYXNrTGlzdCgpO1xuICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmlzRWRpdCA9IHRydWU7XG4gICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LHJvdyk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlRGlhbG9nQ29uZmlybSgpIHtcbiAgICAgICAgdGhpcy4kcmVmcy5hZG1pbkZvcm0udmFsaWRhdGUodmFsaWQgPT4ge1xuICAgICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm6KaB56Gu6K6kPycsICfmj5DnpLonLCB7XG4gICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJyxcbiAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsXG4gICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJ1xuICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVNjaGVkdWxlKHRoaXMuYWRtaW4pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip/vvIEnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNyZWF0ZVNjaGVkdWxlKHRoaXMuYWRtaW4pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliJvlu7rmiJDlip/vvIEnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgZ2V0TGlzdCgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgICAgICBwYWdlTnVtOiB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtLFxuICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXkpIHtcbiAgICAgICAgICBwYXJhbXMuc2VhcmNoS2V5ID0gdGhpcy5saXN0UXVlcnkuc2VhcmNoS2V5O1xuICAgICAgICB9XG5cbiAgICAgICAgZmV0Y2hTY2hlZHVsZUxpc3QocGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4uLi5cbiAgICAgIC8vIOiOt+WPluaXpeacn+S4reeahOWkqeaVsFxuICAgICAgZ2V0RGF5TnVtYmVyKGRhdGVTdHIpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXREYXRlKCk7XG4gICAgICB9LFxuXG4gICAgICAvLyDojrflj5bml6XmnJ/nmoTmmJ/mnJ/ooajnpLpcbiAgICAgIGdldERheVdlZWtkYXkoZGF0ZVN0cikge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICAgICAgIGNvbnN0IHdlZWtkYXlzID0gWyflkajml6UnLCAn5ZGo5LiAJywgJ+WRqOS6jCcsICflkajkuIknLCAn5ZGo5ZubJywgJ+WRqOS6lCcsICflkajlha0nXTtcbiAgICAgICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldO1xuICAgICAgfSxcblxuICAgICAgLy8g5p+l55yL5Lu75Yqh6K+m5oOFXG4gICAgICBoYW5kbGVDbGlja1Rhc2tDYXJkKHNjaGVkdWxlKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFNjaGVkdWxlSWQgPSBzY2hlZHVsZS5pZDtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIGZldGNoVGFza0luZm8oc2NoZWR1bGUudGFza0lkKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLnRhc2tEZXRhaWwgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIHRoaXMudGFza0RldGFpbFZpc2libGUgPSB0cnVlO1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICAvLyDmmL7npLrnirbmgIHlj5jmm7Tlr7nor53moYZcbiAgICAgIHNob3dTdGF0dXNDaGFuZ2VEaWFsb2coKSB7XG4gICAgICAgIHRoaXMuc3RhdHVzRm9ybS5zdGF0dXMgPSB0aGlzLnRhc2tEZXRhaWwuc3RhdHVzO1xuICAgICAgICB0aGlzLnN0YXR1c0NoYW5nZVZpc2libGUgPSB0cnVlO1xuICAgICAgfSxcblxuICAgICAgLy8g6I635Y+W54q25oCB5qCH562+57G75Z6LXG4gICAgICBnZXRTdGF0dXNUYWdUeXBlKHN0YXR1cykge1xuICAgICAgICBzd2l0Y2ggKHN0YXR1cykge1xuICAgICAgICAgIGNhc2UgMTogcmV0dXJuICdpbmZvJzsgICAgLy8g5b6F5YqeXG4gICAgICAgICAgY2FzZSAyOiByZXR1cm4gJ3dhcm5pbmcnOyAvLyDlt7LlronmjpJcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiAncHJpbWFyeSc7IC8vIOi/m+ihjOS4rVxuICAgICAgICAgIGNhc2UgNDogcmV0dXJuICdzdWNjZXNzJzsgLy8g5bey5a6M5oiQXG4gICAgICAgICAgY2FzZSA1OiByZXR1cm4gJ2Rhbmdlcic7ICAvLyDlt7LpgL7mnJ9cbiAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gJ2luZm8nO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICAvLyDlpITnkIbnirbmgIHlj5jmm7RcbiAgICAgIGhhbmRsZVN0YXR1c0NoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIHVwZGF0ZVRhc2tTdGF0dXModGhpcy50YXNrRGV0YWlsLmlkLCB0aGlzLnN0YXR1c0Zvcm0uc3RhdHVzKS50aGVuKCgpID0+IHtcbiAgICAgICAgICB0aGlzLnN0YXR1c0NoYW5nZVZpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnRhc2tEZXRhaWwuc3RhdHVzID0gdGhpcy5zdGF0dXNGb3JtLnN0YXR1cztcbiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+eKtuaAgeabtOaWsOaIkOWKnycpO1xuICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOyAvLyDliLfmlrDliJfooahcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgLy8g5pi+56S65o+Q6YaS6K6+572u5a+56K+d5qGGXG4gICAgICBzaG93UmVtaW5kZXJEaWFsb2coKSB7XG4gICAgICAgIHRoaXMucmVtaW5kZXJUaW1lID0gdGhpcy50YXNrRGV0YWlsLnJlbWluZGVyVGltZTtcbiAgICAgICAgdGhpcy5yZW1pbmRlckRpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgfSxcbi4uLlxuXG4gICAgICAvLyDmm7TmlrDml6XnqIvml7bpl7RcbiAgICAgIGhhbmRsZVNjaGVkdWxlVGltZVVwZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIGNvbnN0IHNjaGVkdWxlRGF0YSA9IHtcbiAgICAgICAgICBpZDogdGhpcy5jdXJyZW50U2NoZWR1bGVJZCxcbiAgICAgICAgICBzdGFydFRpbWU6IHRoaXMuc2NoZWR1bGVUaW1lRm9ybS5zdGFydFRpbWUsXG4gICAgICAgICAgZW5kVGltZTogdGhpcy5zY2hlZHVsZVRpbWVGb3JtLmVuZFRpbWVcbiAgICAgICAgfTtcblxuICAgICAgICAvLyDosIPnlKjmraPnoa7nmoTmm7TmlrDml6XnqIsgQVBJIOaWueazlVxuICAgICAgICB1cGRhdGVTY2hlZHVsZShzY2hlZHVsZURhdGEpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5omn6KGM5pe26Ze05pu05paw5oiQ5YqfJyk7XG4gICAgICAgICAgdGhpcy5zY2hlZHVsZVRpbWVEaWFsb2dWaXNpYmxlID0gZmFsc2U7IC8vIOWFs+mXreWvueivneahhlxuICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpOyAvLyDliLfmlrDliJfooahcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfmm7TmlrDmiafooYzml7bpl7TlpLHotKU6JywgZXJyb3IpO1xuICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aJp+ihjOaXtumXtOabtOaWsOWksei0pe+8jOivt+eojeWQjumHjeivlScpO1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH1cbiAgfVxuPC9zY3JpcHQ+XG48c3R5bGU+XG4vKiDpgJrnlKjmoLflvI8gKi9cbi5hcHAtY29udGFpbmVyIHtcbiAgcGFkZGluZzogMjBweDtcbn1cblxuLmF2YXRhci11cGxvYWRlciAuZWwtdXBsb2FkIHtcbiAgYm9yZGVyOiAxcHggZGFzaGVkICNkOWQ5ZDk7XG4gIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3MvdXNlclNjaGVkdWxlL2luZGV4LnZ1ZVxuLi4uXG4gICAgbWV0aG9kczoge1xuICAgICAgLy8g6I635Y+W5pel56iL6aG555qE54q25oCB5qCH562+57G75Z6LXG4gICAgICBnZXRTdGF0dXNUYWdUeXBlKHN0YXR1cykge1xuICAgICAgICBzd2l0Y2goc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAxOiByZXR1cm4gJ2luZm8nOyAgICAvLyDlvoXlip5cbiAgICAgICAgICBjYXNlIDI6IHJldHVybiAnd2FybmluZyc7IC8vIOW3suWuieaOklxuICAgICAgICAgIGNhc2UgMzogcmV0dXJuICdzdWNjZXNzJzsgLy8g6L+b6KGM5LitXG4gICAgICAgICAgY2FzZSA0OiByZXR1cm4gJyc7ICAgICAgICAvLyDlt7LlrozmiJBcbiAgICAgICAgICBjYXNlIDU6IHJldHVybiAnZGFuZ2VyJzsgIC8vIOW3sumAvuacn1xuICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnaW5mbyc7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBcbiAgICAgIC8vIOaZuuiDveaOkuW6j+aWueazlVxuICAgICAgaGFuZGxlU21hcnRTb3J0KCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeW5tOaciO+8jOagvOW8j+S4ullZWVktTU1cbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgeWVhck1vbnRoID0gYCR7bm93LmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgICBcbiAgICAgICAgLy8g5L2/55So5pm66IO95o6S5bqP5o6l5Y+j6I635Y+W5o6S5bqP5ZCO55qE55So5oi35pel56iLXG4gICAgICAgIGZldGNoVXNlclNjaGVkdWxlU21hcnRTb3J0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8g5bCG5pm66IO95o6S5bqP5ZCO55qE5pWw5o2u6K6+572u5Li65b2T5YmN5YiX6KGoXG4gICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgICAgICAgIFxuICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgICAgICAgICAgbWVzc2FnZTogJ+W3suagueaNruaXtumXtOe0p+aApeaAp+WSjOS7u+WKoemHjeimgeaAp+i/m+ihjOaZuuiDveaOkuW6jycsXG4gICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuLi4uXG4gICAgICBnZXRMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeW5tOaciO+8jOagvOW8j+S4ullZWVktTU1cbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgeWVhck1vbnRoID0gYCR7bm93LmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgICAgICBcbiAgICAgICAgLy8g5L2/55So5pyI5bqm5o6l5Y+j6I635Y+W55So5oi35pel56iLXG4gICAgICAgIGZldGNoVXNlck1vbnRoU2NoZWR1bGVMaXN0KHllYXJNb250aCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIOWwhuaMieaXpeacn+WIhue7hOeahOaVsOaNrui9rOaNouS4uuWIl+ihqOW9ouW8j1xuICAgICAgICAgIGNvbnN0IGdyb3VwZWREYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICBsZXQgYWxsU2NoZWR1bGVzID0gW107XG4gICAgICAgICAgXG4gICAgICAgICAgLy8g6YGN5Y6G5q+P5Liq5pel5pyf55qE5pel56iL5YiX6KGo77yM5ZCI5bm25Yiw5LiA5Liq5aSn5YiX6KGo5LitXG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyhncm91cGVkRGF0YSkuZm9yRWFjaChzY2hlZHVsZXMgPT4ge1xuICAgICAgICAgICAgYWxsU2NoZWR1bGVzID0gYWxsU2NoZWR1bGVzLmNvbmNhdChzY2hlZHVsZXMpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIFxuICAgICAgICAgIHRoaXMubGlzdCA9IGFsbFNjaGVkdWxlcztcbiAgICAgICAgICB0aGlzLnRvdGFsID0gYWxsU2NoZWR1bGVzLmxlbmd0aDtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluaXpeeoi+aVsOaNruWksei0pTonLCBlcnJvcik7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaXpeeoi+aVsOaNruWksei0pe+8jOivt+eojeWQjumHjeivlScpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfVxuICB9XG48L3NjcmlwdD5cbjxzdHlsZT5cbi8qIOWfuuehgOagt+W8jyAqL1xuLmFwcC1jb250YWluZXIge1xuICBwYWRkaW5nOiAyMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjVGN0ZBO1xufVxuLi4uXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxUHJhd1NMZmZ4VENxZWdycnl1bmMzOSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgdXBkYXRlIHRoZSBgZ2V0TGlzdGAgbWV0aG9kIHRvIGluY2x1ZGUgdGhlIHN0YXR1cyBmaWx0ZXI6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYTc1NjU0YmMtMmI2Yy00ZGRkLThlYzAtNDZiZjA2YzkzYmMwIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTFBNjU1cGRvbjE0UWhaa2RCVjdOOUEiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgIC8vIFxcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXHU2NWI5XFx1NmNkNVxcbiAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcXG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xcbiAgICAgICAgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XFxuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcXG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XFxuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcXG4gICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XFxuICAgICAgICAgICAgbWVzc2FnZTogJ1xcdTVkZjJcXHU2ODM5XFx1NjM2ZVxcdTY1ZjZcXHU5NWY0XFx1N2QyN1xcdTYwMjVcXHU2MDI3XFx1NTQ4Y1xcdTRlZmJcXHU1MmExXFx1OTFjZFxcdTg5ODFcXHU2MDI3XFx1OGZkYlxcdTg4NGNcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmJyxcXG4gICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcXG4gICAgICAgICAgfSk7XFxuICAgICAgICB9KTtcXG4gICAgICB9LFwiLCBcIm5ld19zdHJcIjogXCIgICAgICAvLyBcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NjViOVxcdTZjZDVcXG4gICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XFxuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcXG4gICAgICAgICAgcGFnZU51bTogdGhpcy5saXN0UXVlcnkucGFnZU51bSxcXG4gICAgICAgICAgcGFnZVNpemU6IHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplXFxuICAgICAgICB9O1xcblxcbiAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleSkge1xcbiAgICAgICAgICBwYXJhbXMuc2VhcmNoS2V5ID0gdGhpcy5saXN0UXVlcnkuc2VhcmNoS2V5O1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICBpZiAodGhpcy5saXN0UXVlcnkuc3RhdHVzICE9PSBudWxsICYmIHRoaXMubGlzdFF1ZXJ5LnN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XFxuICAgICAgICAgIHBhcmFtcy5zdGF0dXMgPSB0aGlzLmxpc3RRdWVyeS5zdGF0dXM7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIGZldGNoU2NoZWR1bGVTbWFydFNvcnQocGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHtcXG4gICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcXG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xcbiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcXG4gICAgICAgICAgICBtZXNzYWdlOiAnXFx1NWRmMlxcdTY4MzlcXHU2MzZlXFx1NjVmNlxcdTk1ZjRcXHU3ZDI3XFx1NjAyNVxcdTYwMjdcXHU1NDhjXFx1NGVmYlxcdTUyYTFcXHU5MWNkXFx1ODk4MVxcdTYwMjdcXHU4ZmRiXFx1ODg0Y1xcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGYnLFxcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xcbiAgICAgICAgICB9KTtcXG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcXG4gICAgICAgICAgY29uc29sZS5lcnJvcignXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTU5MzFcXHU4ZDI1OicsIGVycm9yKTtcXG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xcbiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCdcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NTkzMVxcdThkMjVcXHVmZjBjXFx1OGJmN1xcdTdhMGRcXHU1NDBlXFx1OTFjZFxcdThiZDUnKTtcXG4gICAgICAgIH0pO1xcbiAgICAgIH0sXCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA2MDIsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNjE0fV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyBhbHNvIHVwZGF0ZSB0aGUgYGhhbmRsZVNtYXJ0U29ydGAgbWV0aG9kIHRvIGluY2x1ZGUgdGhlIHN0YXR1cyBmaWx0ZXI6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA3OTJcdCAgICAgICAgICAgIH0pXG4gICA3OTNcdCAgICAgICAgICB9XG4gICA3OTRcdCAgICAgICAgfSk7XG4gICA3OTVcdCAgICAgIH0sXG4gICA3OTZcdCAgICAgIGdldExpc3QoKSB7XG4gICA3OTdcdCAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICA3OThcdCAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgNzk5XHQgICAgICAgICAgcGFnZU51bTogdGhpcy5saXN0UXVlcnkucGFnZU51bSxcbiAgIDgwMFx0ICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZVxuICAgODAxXHQgICAgICAgIH07XG4gICA4MDJcdFxuICAgODAzXHQgICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXkpIHtcbiAgIDgwNFx0ICAgICAgICAgIHBhcmFtcy5zZWFyY2hLZXkgPSB0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXk7XG4gICA4MDVcdCAgICAgICAgfVxuICAgODA2XHRcbiAgIDgwN1x0ICAgICAgICBpZiAodGhpcy5saXN0UXVlcnkuc3RhdHVzICE9PSBudWxsICYmIHRoaXMubGlzdFF1ZXJ5LnN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XG4gICA4MDhcdCAgICAgICAgICBwYXJhbXMuc3RhdHVzID0gdGhpcy5saXN0UXVlcnkuc3RhdHVzO1xuICAgODA5XHQgICAgICAgIH1cbiAgIDgxMFx0XG4gICA4MTFcdCAgICAgICAgLy8g5L2/55So5pm66IO95o6S5bqP5o6l5Y+j6I635Y+W5pel56iL5YiX6KGo77yM5pSv5oyB54q25oCB6L+H5rukXG4gICA4MTJcdCAgICAgICAgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgODEzXHQgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgODE0XHQgICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgODE1XHQgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICA4MTZcdCAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgODE3XHQgICAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5pel56iL5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcbiAgIDgxOFx0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDgxOVx0ICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaXpeeoi+aVsOaNruWksei0pe+8jOivt+eojeWQjumHjeivlScpO1xuICAgODIwXHQgICAgICAgIH0pO1xuICAgODIxXHQgICAgICB9LFxuICAgODIyXHQgICAgICAvLyDojrflj5bml6XnqIvpobnnmoTpopzoibIgLSDkvb/nlKjmm7Tnsr7nu4bnmoTml7bpl7TmrrXliJLliIZcbiAgIDgyM1x0ICAgICAgZ2V0VGltZVNsb3RDb2xvcnModGltZVN0cikge1xuICAgODI0XHQgICAgICAgIGlmICghdGltZVN0cikgcmV0dXJuIHRoaXMudGltZUNvbG9ycy5tb3JuaW5nO1xuICAgODI1XHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVdxekJKUktnbWdEWWFHVzl5c2FKaWkifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6IkxldCdzIGFsc28gdXBkYXRlIHRoZSBgaGFuZGxlU21hcnRTb3J0YCBtZXRob2QgdG8gaW5jbHVkZSB0aGUgc3RhdHVzIGZpbHRlcjpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmMThjY2M4MC1kOWNlLTQ5M2ItOTdiYi1jMmVjMzUyY2Q2NWEiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxS0pKSHlFcFRIRHVTSnZqQWs2QVdMcCIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJ3ZWIvc3JjL3ZpZXdzL3VzZXJTY2hlZHVsZS9pbmRleC52dWVcIiwgXCJ2aWV3X3JhbmdlXCI6IFsxLCA1MF19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3csIGxldCdzIHVwZGF0ZSB0aGUgYHVzZXJTY2hlZHVsZS9pbmRleC52dWVgIGZpbGUgdG8gYWRkIHRoZSBzYW1lIGZpbHRlcmluZyBmdW5jdGlvbmFsaXR5OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNTk4XHQgICAgICAgIC8vIOajgOafpSBlbmRUaW1lIOaYr+WQpuWtmOWcqO+8jOaYr+WQpuaXqeS6juW9k+WJjeaXtumXtO+8jOW5tuS4lOS7u+WKoeeKtuaAgeS4jeaYr+W3suWujOaIkCAoNClcbiAgIDU5OVx0ICAgICAgICByZXR1cm4gc2NoZWR1bGUuZW5kVGltZSAmJiBuZXcgRGF0ZShzY2hlZHVsZS5lbmRUaW1lKSA8IG5ldyBEYXRlKCkgJiYgc2NoZWR1bGUuc3RhdHVzICE9PSA0O1xuICAgNjAwXHQgICAgICB9LFxuICAgNjAxXHRcbiAgIDYwMlx0ICAgICAgLy8g5pm66IO95o6S5bqP5pa55rOVXG4gICA2MDNcdCAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcbiAgIDYwNFx0ICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgIDYwNVx0ICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICA2MDZcdCAgICAgICAgICBwYWdlTnVtOiB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtLFxuICAgNjA3XHQgICAgICAgICAgcGFnZVNpemU6IHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplXG4gICA2MDhcdCAgICAgICAgfTtcbiAgIDYwOVx0XG4gICA2MTBcdCAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleSkge1xuICAgNjExXHQgICAgICAgICAgcGFyYW1zLnNlYXJjaEtleSA9IHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleTtcbiAgIDYxMlx0ICAgICAgICB9XG4gICA2MTNcdFxuICAgNjE0XHQgICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IG51bGwgJiYgdGhpcy5saXN0UXVlcnkuc3RhdHVzICE9PSB1bmRlZmluZWQpIHtcbiAgIDYxNVx0ICAgICAgICAgIHBhcmFtcy5zdGF0dXMgPSB0aGlzLmxpc3RRdWVyeS5zdGF0dXM7XG4gICA2MTZcdCAgICAgICAgfVxuICAgNjE3XHRcbiAgIDYxOFx0ICAgICAgICBmZXRjaFNjaGVkdWxlU21hcnRTb3J0KHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7XG4gICA2MTlcdCAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICA2MjBcdCAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgIDYyMVx0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDYyMlx0ICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgNjIzXHQgICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgIDYyNFx0ICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICA2MjVcdCAgICAgICAgICB9KTtcbiAgIDYyNlx0ICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICA2MjdcdCAgICAgICAgICBjb25zb2xlLmVycm9yKCfmmbrog73mjpLluo/lpLHotKU6JywgZXJyb3IpO1xuICAgNjI4XHQgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgNjI5XHQgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pm66IO95o6S5bqP5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJyk7XG4gICA2MzBcdCAgICAgICAgfSk7XG4gICA2MzFcdCAgICAgIH0sXG4gICA2MzJcdFxuICAgNjMzXHQgICAgICAvLyDph43nva7mkJzntKJcbiAgIDYzNFx0ICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICA2MzVcdCAgICAgICAgdGhpcy5saXN0UXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTFBNjU1cGRvbjE0UWhaa2RCVjdOOUEifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58iLCJmb2xkZXJSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwicmVzcG9uc2VfdGV4dCI6Ik5vdywgbGV0J3MgdXBkYXRlIHRoZSBgdXNlclNjaGVkdWxlL2luZGV4LnZ1ZWAgZmlsZSB0byBhZGQgdGhlIHNhbWUgZmlsdGVyaW5nIGZ1bmN0aW9uYWxpdHk6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNDFkOTgzZDQtOTcxZC00YmEwLWJjNDUtY2FhNjZiYjM1ZTMyIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVJuM3gxVkxjQVlWaDhTdVo4ajI5cm4iLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcIndlYi9zcmMvdmlld3MvdXNlclNjaGVkdWxlL2luZGV4LnZ1ZVwiLCBcInN0cl9yZXBsYWNlX2VudHJpZXNcIjogW3tcIm9sZF9zdHJcIjogXCIgICAgICAgIDxlbC1mb3JtIDppbmxpbmU9XFxcInRydWVcXFwiIDptb2RlbD1cXFwibGlzdFF1ZXJ5XFxcIiBzaXplPVxcXCJzbWFsbFxcXCIgbGFiZWwtd2lkdGg9XFxcIjEyMHB4XFxcIj5cXG4gICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cXFwiXFx1NTE3M1xcdTk1MmVcXHU1YjU3XFx1ZmYxYVxcXCI+XFxuICAgICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XFxcImxpc3RRdWVyeS5zZWFyY2hLZXlcXFwiIHBsYWNlaG9sZGVyPVxcXCJcXHU4YmY3XFx1OGY5M1xcdTUxNjVcXHU1MTczXFx1OTUyZVxcdTViNTdcXFwiIGNsZWFyYWJsZT48L2VsLWlucHV0PlxcbiAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cXG4gICAgICAgICAgPGVsLWJ1dHRvblxcbiAgICAgICAgICAgIHR5cGU9XFxcInByaW1hcnlcXFwiXFxuICAgICAgICAgICAgaWNvbj1cXFwiZWwtaWNvbi1zZWFyY2hcXFwiXFxuICAgICAgICAgICAgQGNsaWNrPVxcXCJoYW5kbGVTZWFyY2hMaXN0KClcXFwiXFxuICAgICAgICAgICAgc2l6ZT1cXFwic21hbGxcXFwiXFxuICAgICAgICAgICAgY2xhc3M9XFxcInNlYXJjaC1idG5cXFwiPlxcbiAgICAgICAgICAgIFxcdTY3ZTVcXHU4YmUyXFx1NjQxY1xcdTdkMjJcXG4gICAgICAgICAgPC9lbC1idXR0b24+XFxuICAgICAgICA8L2VsLWZvcm0+XCIsIFwibmV3X3N0clwiOiBcIiAgICAgICAgPGVsLWZvcm0gOmlubGluZT1cXFwidHJ1ZVxcXCIgOm1vZGVsPVxcXCJsaXN0UXVlcnlcXFwiIHNpemU9XFxcInNtYWxsXFxcIiBsYWJlbC13aWR0aD1cXFwiMTIwcHhcXFwiPlxcbiAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVxcXCJcXHU1MTczXFx1OTUyZVxcdTViNTdcXHVmZjFhXFxcIj5cXG4gICAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cXFwibGlzdFF1ZXJ5LnNlYXJjaEtleVxcXCIgcGxhY2Vob2xkZXI9XFxcIlxcdThiZjdcXHU4ZjkzXFx1NTE2NVxcdTUxNzNcXHU5NTJlXFx1NWI1N1xcXCIgY2xlYXJhYmxlPjwvZWwtaW5wdXQ+XFxuICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxcbiAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVxcXCJcXHU0ZWZiXFx1NTJhMVxcdTcyYjZcXHU2MDAxXFx1ZmYxYVxcXCI+XFxuICAgICAgICAgICAgPGVsLXNlbGVjdCB2LW1vZGVsPVxcXCJsaXN0UXVlcnkuc3RhdHVzXFxcIiBwbGFjZWhvbGRlcj1cXFwiXFx1OGJmN1xcdTkwMDlcXHU2MmU5XFx1NzJiNlxcdTYwMDFcXFwiIGNsZWFyYWJsZT5cXG4gICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVxcXCIxXFxcIiBsYWJlbD1cXFwiXFx1NWY4NVxcdTUyOWVcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XFxcIjJcXFwiIGxhYmVsPVxcXCJcXHU1ZGYyXFx1NWI4OVxcdTYzOTJcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XFxcIjNcXFwiIGxhYmVsPVxcXCJcXHU4ZmRiXFx1ODg0Y1xcdTRlMmRcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XFxcIjRcXFwiIGxhYmVsPVxcXCJcXHU1ZGYyXFx1NWI4Y1xcdTYyMTBcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XFxcIjVcXFwiIGxhYmVsPVxcXCJcXHU1ZGYyXFx1OTAzZVxcdTY3MWZcXFwiPjwvZWwtb3B0aW9uPlxcbiAgICAgICAgICAgIDwvZWwtc2VsZWN0PlxcbiAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cXG4gICAgICAgICAgPGVsLWJ1dHRvblxcbiAgICAgICAgICAgIHR5cGU9XFxcInByaW1hcnlcXFwiXFxuICAgICAgICAgICAgaWNvbj1cXFwiZWwtaWNvbi1zZWFyY2hcXFwiXFxuICAgICAgICAgICAgQGNsaWNrPVxcXCJoYW5kbGVTZWFyY2hMaXN0KClcXFwiXFxuICAgICAgICAgICAgc2l6ZT1cXFwic21hbGxcXFwiXFxuICAgICAgICAgICAgY2xhc3M9XFxcInNlYXJjaC1idG5cXFwiPlxcbiAgICAgICAgICAgIFxcdTY3ZTVcXHU4YmUyXFx1NjQxY1xcdTdkMjJcXG4gICAgICAgICAgPC9lbC1idXR0b24+XFxuICAgICAgICAgIDxlbC1idXR0b25cXG4gICAgICAgICAgICBpY29uPVxcXCJlbC1pY29uLXJlZnJlc2hcXFwiXFxuICAgICAgICAgICAgQGNsaWNrPVxcXCJoYW5kbGVSZXNldFNlYXJjaCgpXFxcIlxcbiAgICAgICAgICAgIHNpemU9XFxcInNtYWxsXFxcIj5cXG4gICAgICAgICAgICBcXHU5MWNkXFx1N2Y2ZVxcbiAgICAgICAgICA8L2VsLWJ1dHRvbj5cXG4gICAgICAgIDwvZWwtZm9ybT5cIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDksIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMjF9XX0ifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlOlxuICAgICAxXHQ8dGVtcGxhdGU+IFxuICAgICAyXHQgIDxkaXYgY2xhc3M9XCJhcHAtY29udGFpbmVyXCI+XG4gICAgIDNcdCAgICA8ZWwtY2FyZCBjbGFzcz1cImZpbHRlci1jb250YWluZXJcIiBzaGFkb3c9XCJob3ZlclwiPlxuICAgICA0XHQgICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLWhlYWRlclwiPlxuICAgICA1XHQgICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi1zZWFyY2hcIj48L2k+XG4gICAgIDZcdCAgICAgICAgPHNwYW4+562b6YCJ5pCc57SiPC9zcGFuPlxuICAgICA3XHQgICAgICA8L2Rpdj5cbiAgICAgOFx0ICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1jb250ZW50XCI+XG4gICAgIDlcdCAgICAgICAgPGVsLWZvcm0gOmlubGluZT1cInRydWVcIiA6bW9kZWw9XCJsaXN0UXVlcnlcIiBzaXplPVwic21hbGxcIiBsYWJlbC13aWR0aD1cIjEyMHB4XCI+XG4gICAgMTBcdCAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5YWz6ZSu5a2X77yaXCI+XG4gICAgMTFcdCAgICAgICAgICAgIDxlbC1pbnB1dCB2LW1vZGVsPVwibGlzdFF1ZXJ5LnNlYXJjaEtleVwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl5YWz6ZSu5a2XXCIgY2xlYXJhYmxlPjwvZWwtaW5wdXQ+XG4gICAgMTJcdCAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAxM1x0ICAgICAgICAgIDxlbC1idXR0b25cbiAgICAxNFx0ICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgIDE1XHQgICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1zZWFyY2hcIlxuICAgIDE2XHQgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVTZWFyY2hMaXN0KClcIlxuICAgIDE3XHQgICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgIDE4XHQgICAgICAgICAgICBjbGFzcz1cInNlYXJjaC1idG5cIj5cbiAgICAxOVx0ICAgICAgICAgICAg5p+l6K+i5pCc57SiXG4gICAgMjBcdCAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAyMVx0ICAgICAgICA8L2VsLWZvcm0+XG4gICAgMjJcdCAgICAgIDwvZGl2PlxuICAgIDIzXHQgICAgPC9lbC1jYXJkPlxuICAgIDI0XHQgICAgPGVsLWNhcmQgY2xhc3M9XCJvcGVyYXRlLWNvbnRhaW5lclwiIHNoYWRvdz1cImhvdmVyXCI+XG4gICAgMjVcdCAgICAgIDxkaXYgY2xhc3M9XCJvcGVyYXRlLWhlYWRlclwiPlxuICAgIDI2XHQgICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi1kYXRlXCI+PC9pPlxuICAgIDI3XHQgICAgICAgIDxzcGFuPuaIkeeahOaXpeeoi+WuieaOkjwvc3Bhbj5cbiAgICAyOFx0ICAgICAgPC9kaXY+XG4gICAgMjlcdCAgICAgIDxkaXYgY2xhc3M9XCJvcGVyYXRlLWFjdGlvbnNcIj5cbiAgICAzMFx0ICAgICAgICA8ZWwtYnV0dG9uIHNpemU9XCJzbWFsbFwiIGNsYXNzPVwiYnRuLXNvcnRcIiBAY2xpY2s9XCJoYW5kbGVTbWFydFNvcnQoKVwiIHR5cGU9XCJzdWNjZXNzXCI+XG4gICAgMzFcdCAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc29ydFwiPjwvaT7mmbrog73mjpLluo9cbiAgICAzMlx0ICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAzM1x0ICAgICAgPC9kaXY+XG4gICAgMzRcdCAgICA8L2VsLWNhcmQ+XG4gICAgMzVcdCAgICBcbiAgICAzNlx0ICAgIDwhLS0g5pel56iL5pe26Ze06L20IC0tPlxuICAgIDM3XHQgICAgPGVsLWNhcmQgc2hhZG93PVwiaG92ZXJcIiBjbGFzcz1cInNjaGVkdWxlci1jb250YWluZXJcIiB2LWxvYWRpbmc9XCJsaXN0TG9hZGluZ1wiPlxuICAgIDM4XHQgICAgICA8ZGl2IHYtaWY9XCJPYmplY3Qua2V5cyhncm91cGVkU2NoZWR1bGVzKS5sZW5ndGggPT09IDBcIiBjbGFzcz1cImVtcHR5LXN0YXRlXCI+XG4gICAgMzlcdCAgICAgICAgPGVsLWVtcHR5IGRlc2NyaXB0aW9uPVwi5pqC5peg5pel56iL5pWw5o2uXCI+PC9lbC1lbXB0eT5cbiAgICA0MFx0ICAgICAgPC9kaXY+XG4gICAgNDFcdCAgICAgIDxkaXYgdi1lbHNlIGNsYXNzPVwic2NoZWR1bGVyLXdyYXBwZXJcIj5cbiAgICA0Mlx0ICAgICAgICA8ZGl2IHYtZm9yPVwiKHNjaGVkdWxlcywgZGF0ZSkgaW4gZ3JvdXBlZFNjaGVkdWxlc1wiIDprZXk9XCJkYXRlXCIgY2xhc3M9XCJkYXktZ3JvdXBcIj5cbiAgICA0M1x0ICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktaGVhZGVyXCI+XG4gICAgNDRcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbGVmdFwiPlxuICAgIDQ1XHQgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbnVtYmVyXCI+e3sgZ2V0RGF5TnVtYmVyKGRhdGUpIH19PC9kaXY+XG4gICAgNDZcdCAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS13ZWVrZGF5XCI+e3sgZ2V0RGF5V2Vla2RheShkYXRlKSB9fTwvZGl2PlxuICAgIDQ3XHQgICAgICAgICAgICA8L2Rpdj5cbiAgICA0OFx0ICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1kYXRlXCI+XG4gICAgNDlcdCAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGUtdGFnXCI+e3sgZ2V0RGF0ZVRhZyhkYXRlKSB9fTwvZGl2PlxuICAgIDUwXHQgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLWZ1bGxcIj57eyBmb3JtYXREYXlEYXRlKGRhdGUpIH19PC9kaXY+XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA5ODVcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFLSkpIeUVwVEhEdVNKdmpBazZBV0xwIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiJkOTQ5YWNjMS03NTc1LTQ3N2QtOWZlNy0yNTM1NGEzMGU0MTMiLCJ1dWlkIjoiYTM4NmE0NDAtMTQ2Yy00YWIxLWE0NWQtNDRiNjAyZjliMDg3IiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ2MDAyNTI1MzU1LCJ0b1RpbWVzdGFtcCI6MTc0NjAwMzI2NzI3NCwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYTMzNzJhMzAtMzJjMy00OTY3LTkwMjMtZjYzZjJlNmFjNGQ2IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVFoWTF2TWM4eUZIc1ZmU1hUNTlmaVUiLCJ0b29sX25hbWUiOiJjb2RlYmFzZS1yZXRyaWV2YWwiLCJpbnB1dF9qc29uIjoie1wiaW5mb3JtYXRpb25fcmVxdWVzdFwiOiBcIkZpbmQgdGhlIHNjcmlwdCBzZWN0aW9uIGluIHVzZXJTY2hlZHVsZS9pbmRleC52dWUsIGVzcGVjaWFsbHkgdGhlIGRhdGEsIG1ldGhvZHMsIGFuZCBjcmVhdGVkIHNlY3Rpb25zXCJ9In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3csIGxldCdzIHVwZGF0ZSB0aGUgc2NyaXB0IHNlY3Rpb24gaW4gdGhlIHVzZXJTY2hlZHVsZS9pbmRleC52dWUgZmlsZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDVcdCAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXNlYXJjaFwiPjwvaT5cbiAgICAgNlx0ICAgICAgICA8c3Bhbj7nrZvpgInmkJzntKI8L3NwYW4+XG4gICAgIDdcdCAgICAgIDwvZGl2PlxuICAgICA4XHQgICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLWNvbnRlbnRcIj5cbiAgICAgOVx0ICAgICAgICA8ZWwtZm9ybSA6aW5saW5lPVwidHJ1ZVwiIDptb2RlbD1cImxpc3RRdWVyeVwiIHNpemU9XCJzbWFsbFwiIGxhYmVsLXdpZHRoPVwiMTIwcHhcIj5cbiAgICAxMFx0ICAgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLlhbPplK7lrZfvvJpcIj5cbiAgICAxMVx0ICAgICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc2VhcmNoS2V5XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXlhbPplK7lrZdcIiBjbGVhcmFibGU+PC9lbC1pbnB1dD5cbiAgICAxMlx0ICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgIDEzXHQgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuS7u+WKoeeKtuaAge+8mlwiPlxuICAgIDE0XHQgICAgICAgICAgICA8ZWwtc2VsZWN0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc3RhdHVzXCIgcGxhY2Vob2xkZXI9XCLor7fpgInmi6nnirbmgIFcIiBjbGVhcmFibGU+XG4gICAgMTVcdCAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIxXCIgbGFiZWw9XCLlvoXlip5cIj48L2VsLW9wdGlvbj5cbiAgICAxNlx0ICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjJcIiBsYWJlbD1cIuW3suWuieaOklwiPjwvZWwtb3B0aW9uPlxuICAgIDE3XHQgICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiM1wiIGxhYmVsPVwi6L+b6KGM5LitXCI+PC9lbC1vcHRpb24+XG4gICAgMThcdCAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCI0XCIgbGFiZWw9XCLlt7LlrozmiJBcIj48L2VsLW9wdGlvbj5cbiAgICAxOVx0ICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjVcIiBsYWJlbD1cIuW3sumAvuacn1wiPjwvZWwtb3B0aW9uPlxuICAgIDIwXHQgICAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgICAyMVx0ICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgIDIyXHQgICAgICAgICAgPGVsLWJ1dHRvblxuICAgIDIzXHQgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgMjRcdCAgICAgICAgICAgIGljb249XCJlbC1pY29uLXNlYXJjaFwiXG4gICAgMjVcdCAgICAgICAgICAgIEBjbGljaz1cImhhbmRsZVNlYXJjaExpc3QoKVwiXG4gICAgMjZcdCAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgMjdcdCAgICAgICAgICAgIGNsYXNzPVwic2VhcmNoLWJ0blwiPlxuICAgIDI4XHQgICAgICAgICAgICDmn6Xor6LmkJzntKJcbiAgICAyOVx0ICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgIDMwXHQgICAgICAgICAgPGVsLWJ1dHRvblxuICAgIDMxXHQgICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1yZWZyZXNoXCJcbiAgICAzMlx0ICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlUmVzZXRTZWFyY2goKVwiXG4gICAgMzNcdCAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiPlxuICAgIDM0XHQgICAgICAgICAgICDph43nva5cbiAgICAzNVx0ICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgIDM2XHQgICAgICAgIDwvZWwtZm9ybT5cbiAgICAzN1x0ICAgICAgPC9kaXY+XG4gICAgMzhcdCAgICA8L2VsLWNhcmQ+XG4gICAgMzlcdCAgICA8ZWwtY2FyZCBjbGFzcz1cIm9wZXJhdGUtY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICA0MFx0ICAgICAgPGRpdiBjbGFzcz1cIm9wZXJhdGUtaGVhZGVyXCI+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFSbjN4MVZMY0FZVmg4U3VaOGoyOXJuIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJOb3csIGxldCdzIHVwZGF0ZSB0aGUgc2NyaXB0IHNlY3Rpb24gaW4gdGhlIHVzZXJTY2hlZHVsZS9pbmRleC52dWUgZmlsZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIyNjc3ZGZmZS02M2I5LTQ4ZjEtOTIyYy1kOGRkMzI2YTU3M2YiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxWDRnNFhDYkZuTWlxWGs2eDlhY04zUSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcXG4gICAgcGFnZU51bTogMSxcXG4gICAgcGFnZVNpemU6IDEwLFxcbiAgICBzZWFyY2hLZXk6IG51bGwsXFxuICAgIHR5cGU6IG51bGwsXFxuICB9O1wiLCBcIm5ld19zdHJcIjogXCIgIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XFxuICAgIHBhZ2VOdW06IDEsXFxuICAgIHBhZ2VTaXplOiAxMCxcXG4gICAgc2VhcmNoS2V5OiBudWxsLFxcbiAgICBzdGF0dXM6IG51bGwsXFxuICAgIHR5cGU6IG51bGwsXFxuICB9O1wiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQncyB1cGRhdGUgdGhlIHVzZXJTY2hlZHVsZS9pbmRleC52dWUgZmlsZSB0byBhZGQgdGhlIHN0YXR1cyBmaWx0ZXIgZnVuY3Rpb25hbGl0eTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHdlYi9zcmMvdmlld3MvdXNlclNjaGVkdWxlL2luZGV4LnZ1ZVxuPHRlbXBsYXRlPlxuICA8ZGl2IGNsYXNzPVwiYXBwLWNvbnRhaW5lclwiPlxuICAgIDxlbC1jYXJkIGNsYXNzPVwiZmlsdGVyLWNvbnRhaW5lclwiIHNoYWRvdz1cImhvdmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLWhlYWRlclwiPlxuICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc2VhcmNoXCI+PC9pPlxuICAgICAgICA8c3Bhbj7nrZvpgInmkJzntKI8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItY29udGVudFwiPlxuICAgICAgICA8ZWwtZm9ybSA6aW5saW5lPVwidHJ1ZVwiIDptb2RlbD1cImxpc3RRdWVyeVwiIHNpemU9XCJzbWFsbFwiIGxhYmVsLXdpZHRoPVwiMTIwcHhcIj5cbiAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5YWz6ZSu5a2X77yaXCI+XG4gICAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImxpc3RRdWVyeS5zZWFyY2hLZXlcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeWFs+mUruWtl1wiIGNsZWFyYWJsZT48L2VsLWlucHV0PlxuICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLku7vliqHnirbmgIHvvJpcIj5cbiAgICAgICAgICAgIDxlbC1zZWxlY3Qgdi1tb2RlbD1cImxpc3RRdWVyeS5zdGF0dXNcIiBwbGFjZWhvbGRlcj1cIuivt+mAieaLqeeKtuaAgVwiIGNsZWFyYWJsZT5cbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIxXCIgbGFiZWw9XCLlvoXlip5cIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIyXCIgbGFiZWw9XCLlt7LlronmjpJcIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIzXCIgbGFiZWw9XCLov5vooYzkuK1cIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCI0XCIgbGFiZWw9XCLlt7LlrozmiJBcIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCI1XCIgbGFiZWw9XCLlt7LpgL7mnJ9cIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICAgIDwvZWwtc2VsZWN0PlxuICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICAgIDxlbC1idXR0b25cbiAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgIGljb249XCJlbC1pY29uLXNlYXJjaFwiXG4gICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVTZWFyY2hMaXN0KClcIlxuICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgICAgICAgIGNsYXNzPVwic2VhcmNoLWJ0blwiPlxuICAgICAgICAgICAg5p+l6K+i5pCc57SiXG4gICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgICAgICAgPGVsLWJ1dHRvblxuICAgICAgICAgICAgaWNvbj1cImVsLWljb24tcmVmcmVzaFwiXG4gICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVSZXNldFNlYXJjaCgpXCJcbiAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiPlxuICAgICAgICAgICAg6YeN572uXG4gICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgICAgIDwvZWwtZm9ybT5cbiAgICAgIDwvZGl2PlxuICAgIDwvZWwtY2FyZD5cbiAgICA8ZWwtY2FyZCBjbGFzcz1cIm9wZXJhdGUtY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJvcGVyYXRlLWhlYWRlclwiPlxuICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tZGF0ZVwiPjwvaT5cbiAgICAgICAgPHNwYW4+5oiR55qE5pel56iL5a6J5o6SPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1hY3Rpb25zXCI+XG4gICAgICAgIDxlbC1idXR0b24gc2l6ZT1cInNtYWxsXCIgY2xhc3M9XCJidG4tc29ydFwiIEBjbGljaz1cImhhbmRsZVNtYXJ0U29ydCgpXCIgdHlwZT1cInN1Y2Nlc3NcIj5cbiAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc29ydFwiPjwvaT7mmbrog73mjpLluo9cbiAgICAgICAgPC9lbC1idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2VsLWNhcmQ+XG5cbiAgICA8IS0tIOaXpeeoi+aXtumXtOi9tCAtLT5cbiAgICA8ZWwtY2FyZCBzaGFkb3c9XCJob3ZlclwiIGNsYXNzPVwic2NoZWR1bGVyLWNvbnRhaW5lclwiIHYtbG9hZGluZz1cImxpc3RMb2FkaW5nXCI+XG4gICAgICA8ZGl2IHYtaWY9XCJPYmplY3Qua2V5cyhncm91cGVkU2NoZWR1bGVzKS5sZW5ndGggPT09IDBcIiBjbGFzcz1cImVtcHR5LXN0YXRlXCI+XG4gICAgICAgIDxlbC1lbXB0eSBkZXNjcmlwdGlvbj1cIuaaguaXoOaXpeeoi+aVsOaNrlwiPjwvZWwtZW1wdHk+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgdi1lbHNlIGNsYXNzPVwic2NoZWR1bGVyLXdyYXBwZXJcIj5cbiAgICAgICAgPGRpdiB2LWZvcj1cIihzY2hlZHVsZXMsIGRhdGUpIGluIGdyb3VwZWRTY2hlZHVsZXNcIiA6a2V5PVwiZGF0ZVwiIGNsYXNzPVwiZGF5LWdyb3VwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbGVmdFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LW51bWJlclwiPnt7IGdldERheU51bWJlcihkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LXdlZWtkYXlcIj57eyBnZXREYXlXZWVrZGF5KGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktZGF0ZVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS10YWdcIj57eyBnZXREYXRlVGFnKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLWZ1bGxcIj57eyBmb3JtYXREYXlEYXRlKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lbGluZS1jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lbGluZS10cmFja1wiPjwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IHYtZm9yPVwic2NoZWR1bGUgaW4gc2NoZWR1bGVzXCIgOmtleT1cInNjaGVkdWxlLmlkXCIgY2xhc3M9XCJ0aW1lbGluZS1ldmVudFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtdGltZVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuPnt7IGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZS1tYXJrZXJcIiA6c3R5bGU9XCJ7YmFja2dyb3VuZENvbG9yOiBnZXRUaW1lQ29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuZG90Q29sb3J9XCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC1jb25uZWN0b3JcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29ubmVjdG9yLWRvdFwiIDpjbGFzcz1cInsnY29uZmxpY3QtZG90Jzogc2NoZWR1bGUuaGFzQ29uZmxpY3R9XCIgOnN0eWxlPVwie2JhY2tncm91bmRDb2xvcjogZ2V0VGltZUNvbG9ycyhmb3JtYXRUaW1lKHNjaGVkdWxlLnN0YXJ0VGltZSkpLmRvdENvbG9yfVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb25uZWN0b3ItbGluZVwiPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtY2FyZFwiXG4gICAgICAgICAgICAgICAgOmNsYXNzPVwie1xuICAgICAgICAgICAgICAgICAgJ2NvbmZsaWN0LWNhcmQnOiBzY2hlZHVsZS5oYXNDb25mbGljdCxcbiAgICAgICAgICAgICAgICAgICdvdmVyZHVlLWNhcmQnOiBpc092ZXJkdWUoc2NoZWR1bGUpXG4gICAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgICAgOnN0eWxlPVwie1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAhaXNPdmVyZHVlKHNjaGVkdWxlKSA/IGdldFRpbWVDb2xvcnMoZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpKS5iYWNrZ3JvdW5kQ29sb3IgOiAnI2Y1ZjdmYScsXG4gICAgICAgICAgICAgICAgICBib3JkZXJMZWZ0Q29sb3I6IHNjaGVkdWxlLmhhc0NvbmZsaWN0ID8gJyNGNTZDNkMnIDogKGlzT3ZlcmR1ZShzY2hlZHVsZSkgPyAnI2RjZGZlNicgOiBnZXRUaW1lQ29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuYm9yZGVyQ29sb3IpXG4gICAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgICAgQGNsaWNrPVwidmlld0luZm8oc2NoZWR1bGUpXCI+XG4gICAgICAgICAgICAgICAgPGVsLXRhZ1xuICAgICAgICAgICAgICAgICAgOnR5cGU9XCJnZXRTdGF0dXNUYWdUeXBlKHNjaGVkdWxlLnN0YXR1cylcIlxuICAgICAgICAgICAgICAgICAgc2l6ZT1cIm1pbmlcIlxuICAgICAgICAgICAgICAgICAgZWZmZWN0PVwiZGFya1wiXG4gICAgICAgICAgICAgICAgICBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAxMHB4OyBsZWZ0OiAxMHB4OyB6LWluZGV4OiAzO1wiXG4gICAgICAgICAgICAgICAgICB2LWlmPVwic2NoZWR1bGUuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgc2NoZWR1bGUuc3RhdHVzICE9PSBudWxsXCI+XG4gICAgICAgICAgICAgICAgICB7eyBzY2hlZHVsZS5zdGF0dXMgfCBmb3JtYXRTdGF0dXMgfX1cbiAgICAgICAgICAgICAgICA8L2VsLXRhZz5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLXRpbWUtcmFuZ2VcIiA6c3R5bGU9XCJ7Y29sb3I6IGlzT3ZlcmR1ZShzY2hlZHVsZSkgPyAnI2MwYzRjYycgOiAnIzkwOTM5OSd9XCI+XG4gICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tdGltZVwiPjwvaT5cbiAgICAgICAgICAgICAgICAgIDxzcGFuPnt7IGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSB9fSAtIHt7IGZvcm1hdFRpbWUoc2NoZWR1bGUuZW5kVGltZSkgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC10aXRsZVwiIDpzdHlsZT1cIntjb2xvcjogaXNPdmVyZHVlKHNjaGVkdWxlKSA/ICcjYTZhOWFkJyA6ICcjMzAzMTMzJywgJ3BhZGRpbmctbGVmdCc6ICc3MHB4J31cIj5cbiAgICAgICAgICAgICAgICAgIHt7IHNjaGVkdWxlLnRhc2tOYW1lIH19XG4gICAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC1hY3Rpb25zXCI+XG4gICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgdi1pZj1cInNjaGVkdWxlLmhhc0NvbmZsaWN0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxlbC10b29sdGlwIGNvbnRlbnQ9XCLmn6XnnIvlhrLnqoHor6bmg4VcIiBwbGFjZW1lbnQ9XCJ0b3BcIiBlZmZlY3Q9XCJsaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxlbC1idXR0b24gdHlwZT1cInRleHRcIiBjbGFzcz1cImFjdGlvbi1idG4gY29uZmxpY3QtYnRuXCIgQGNsaWNrPVwidmlld0NvbmZsaWN0KHNjaGVkdWxlKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXdhcm5pbmdcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvZWwtdG9vbHRpcD5cbiAgICAgICAgICAgICAgICAgIDwvdGVtcGxhdGU+XG5cbiAgICAgICAgICAgICAgICAgIDxlbC10b29sdGlwIGNvbnRlbnQ9XCLmn6XnnIvor6bmg4VcIiBwbGFjZW1lbnQ9XCJ0b3BcIiBlZmZlY3Q9XCJsaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJhY3Rpb24tYnRuIHZpZXctYnRuXCIgQGNsaWNrPVwidmlld0luZm8oc2NoZWR1bGUpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXZpZXdcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9lbC10b29sdGlwPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZWwtY2FyZD5cblxuICAgIDxkaXYgY2xhc3M9XCJwYWdpbmF0aW9uLWNvbnRhaW5lclwiPlxuICAgICAgPGVsLXBhZ2luYXRpb25cbiAgICAgICAgYmFja2dyb3VuZFxuICAgICAgICBAc2l6ZS1jaGFuZ2U9XCJoYW5kbGVTaXplQ2hhbmdlXCJcbiAgICAgICAgQGN1cnJlbnQtY2hhbmdlPVwiaGFuZGxlQ3VycmVudENoYW5nZVwiXG4gICAgICAgIGxheW91dD1cInRvdGFsLCBzaXplcyxwcmV2LCBwYWdlciwgbmV4dCxqdW1wZXJcIlxuICAgICAgICA6Y3VycmVudC1wYWdlLnN5bmM9XCJsaXN0UXVlcnkucGFnZU51bVwiXG4gICAgICAgIDpwYWdlLXNpemU9XCJsaXN0UXVlcnkucGFnZVNpemVcIlxuICAgICAgICA6cGFnZS1zaXplcz1cIlsxMCwxNSwyMF1cIlxuICAgICAgICA6dG90YWw9XCJ0b3RhbFwiPlxuICAgICAgPC9lbC1wYWdpbmF0aW9uPlxuICAgIDwvZGl2PlxuLi4uXG5cbiAgICA8ZWwtZGlhbG9nXG4gICAgICB0aXRsZT1cIueUqOaIt+S4jui1hOa6kOivpuaDhVwiXG4gICAgICA6dmlzaWJsZS5zeW5jPVwiaW5mb0RpYWxvZ1Zpc2libGVcIlxuICAgICAgd2lkdGg9XCI2MCVcIj5cbiAgICAgIDxoMz7lj4LkuI7nlKjmiLfliJfooag8L2gzPlxuICAgICAgPGVsLXRhYmxlIDpkYXRhPVwidGFza0luZm8udXNlckxpc3QgfHwgW11cIiBib3JkZXIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAyMHB4O1wiPlxuICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJpZFwiIGxhYmVsPVwiSURcIiB3aWR0aD1cIjgwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cInVzZXJuYW1lXCIgbGFiZWw9XCLnlKjmiLflkI1cIiB3aWR0aD1cIjE1MFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJuaWNrTmFtZVwiIGxhYmVsPVwi5pi156ewXCIgd2lkdGg9XCIxMjBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwiZW1haWxcIiBsYWJlbD1cIumCrueusVwiIHdpZHRoPVwiMjAwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cInBob25lXCIgbGFiZWw9XCLnlLXor51cIiB3aWR0aD1cIjE1MFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJhZGRyZXNzXCIgbGFiZWw9XCLlnLDlnYBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgIDwvZWwtdGFibGU+XG4uLi5cblxuICAgIDxlbC1kaWFsb2dcbiAgICAgIHRpdGxlPVwi55So5oi35LiO6LWE5rqQ5Yay56qB6K+m5oOFXCJcbiAgICAgIDp2aXNpYmxlLnN5bmM9XCJjb25mbGljdERpYWxvZ1Zpc2libGVcIlxuICAgICAgd2lkdGg9XCI2MCVcIj5cbiAgICAgIDxkaXYgdi1mb3I9XCIoaXRlbSwgaW5kZXgpIGluIGNvbmZsaWN0TGlzdFwiIDprZXk9XCJpbmRleFwiPlxuICAgICAgICA8ZWwtY2FyZCBjbGFzcz1cInRhc2staW5mby1jYXJkXCIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAyMHB4O1wiPlxuICAgICAgICAgIDxoMz7lhrLnqoHku7vliqF7eyBpbmRleCArIDEgfX08L2gzPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8cD48c3Ryb25nPuS7u+WKoeagh+mimO+8mjwvc3Ryb25nPnt7IGl0ZW0udGl0bGUgfX08L3A+XG4gICAgICAgICAgICA8cD48c3Ryb25nPuS7u+WKoee8luegge+8mjwvc3Ryb25nPnt7IGl0ZW0uY29kZSB9fTwvcD5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+5Lu75Yqh5o+P6L+w77yaPC9zdHJvbmc+e3sgaXRlbS5kZXNjcmlwdGlvbiB8fCAn5pegJyB9fTwvcD5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+5oiq5q2i5pe26Ze077yaPC9zdHJvbmc+e3sgaXRlbS5kZWFkbGluZSB9fTwvcD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9lbC1jYXJkPlxuXG4gICAgICAgIDxoMz7lhrLnqoHlj4LkuI7nlKjmiLfliJfooag8L2gzPlxuICAgICAgICA8ZWwtdGFibGUgOmRhdGE9XCJpdGVtLnVzZXJMaXN0IHx8IFtdXCIgYm9yZGVyIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMjBweDtcIj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJpZFwiIGxhYmVsPVwiSURcIiB3aWR0aD1cIjgwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwidXNlcm5hbWVcIiBsYWJlbD1cIueUqOaIt+WQjVwiIHdpZHRoPVwiMTUwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwibmlja05hbWVcIiBsYWJlbD1cIuaYteensFwiIHdpZHRoPVwiMTIwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwiZW1haWxcIiBsYWJlbD1cIumCrueusVwiIHdpZHRoPVwiMjAwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwicGhvbmVcIiBsYWJlbD1cIueUteivnVwiIHdpZHRoPVwiMTUwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwiYWRkcmVzc1wiIGxhYmVsPVwi5Zyw5Z2AXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDwvZWwtdGFibGU+XG4uLi5cbiAgaW1wb3J0IHtmZXRjaFVzZXJTY2hlZHVsZUxpc3QsIGZldGNoVXNlclNjaGVkdWxlU21hcnRTb3J0LCBmZXRjaE1vbnRoU2NoZWR1bGVMaXN0LCBmZXRjaFVzZXJNb250aFNjaGVkdWxlTGlzdCwgY3JlYXRlU2NoZWR1bGUsIHVwZGF0ZVNjaGVkdWxlLCBkZWxldGVTY2hlZHVsZSwgZmV0Y2hBbGxUYXNrTGlzdCwgZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzLCBmZXRjaFRhc2tJbmZvLCBmZXRjaENvbmZsaWN0U2NoZWR1bGVMaXN0LCB1cGRhdGVUYXNrU3RhdHVzLCBzZXRUYXNrUmVtaW5kZXJ9IGZyb20gJ0AvYXBpL2FwaSc7XG4gIGltcG9ydCBKc0JhcmNvZGUgZnJvbSAnanNiYXJjb2RlJztcbiAgaW1wb3J0IGh0bWwyY2FudmFzIGZyb20gJ2h0bWwyY2FudmFzJztcbiAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuXG4gIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAgcGFnZU51bTogMSxcbiAgICBwYWdlU2l6ZTogMTAsXG4gICAgc2VhcmNoS2V5OiBudWxsLFxuICAgIHR5cGU6IG51bGwsXG4gIH07XG4gIGNvbnN0IGRlZmF1bHRBZG1pbiA9IHtcbiAgICBpZDogbnVsbCxcbiAgICB0YXNrSWQ6IG51bGwsXG4gICAgc3RhcnRUaW1lOiBudWxsLFxuICAgIGVuZFRpbWU6IG51bGwsXG4gICAgcmVtaW5kZXJUaW1lOiBudWxsLFxuICB9O1xuICBleHBvcnQgZGVmYXVsdCB7XG4gICAgbmFtZTogJ3VzZXJTY2hlZHVsZUxpc3QnLFxuICAgIGRhdGEoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsaXN0UXVlcnk6IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpLFxuICAgICAgICBsaXN0OiBudWxsLFxuICAgICAgICB0b3RhbDogbnVsbCxcbiAgICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLFxuICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgYWRtaW46IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZG1pbiksXG4gICAgICAgIGlzRWRpdDogZmFsc2UsXG4gICAgICAgIGFkbWluUnVsZXM6IHtcbiAgICAgICAgICB0YXNrSWQ6IFtcbiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nml6XnqIvlronmjpLku7vliqEnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdGFydFRpbWU6IFtcbiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nku7vliqHmiafooYzml7bpl7QnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgYmFyY29kZURpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBjdXJyZW50Q29kZTogJycsIC8vIOW9k+WJjemAieS4reeahOe8lueggVxuXG4gICAgICAgIHRhc2tMaXN0OiBbXSxcblxuICAgICAgICBwaWNrZXJPcHRpb25zOiB7XG4gICAgICAgICAgZGlzYWJsZWREYXRlKHRpbWUpIHtcbiAgICAgICAgICAgIC8vIOemgeeUqOW9k+WJjeaXtumXtOS5i+WJjeeahOaXtumXtFxuICAgICAgICAgICAgcmV0dXJuIHRpbWUuZ2V0VGltZSgpIDwgRGF0ZS5ub3coKSAtIDg2NDAwMDAwOyAvLyDlh4/ljrvkuIDlpKnmmK/kuLrkuobpgb/lhY3ml7bljLrpl67pophcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgdGFza0luZm86IHt9LFxuICAgICAgICBpbmZvRGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIGNvbmZsaWN0RGlhbG9nVmlzaWJsZTogZmFsc2UsXG5cbiAgICAgICAgY29uZmxpY3RMaXN0OiBbXSxcblxuICAgICAgICAvLyDnirbmgIHlj5jmm7Tnm7jlhbNcbiAgICAgICAgc3RhdHVzQ2hhbmdlVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHN0YXR1c0Zvcm06IHtcbiAgICAgICAgICBzdGF0dXM6IDFcbiAgICAgICAgfSxcblxuICAgICAgICAvLyDmj5DphpLml7bpl7Tnm7jlhbNcbiAgICAgICAgcmVtaW5kZXJEaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgcmVtaW5kZXJUaW1lOiAnJyxcblxuICAgICAgICAvLyDkv67mlLnml6XnqIvml7bpl7Tnm7jlhbNcbiAgICAgICAgc2NoZWR1bGVUaW1lRGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHNjaGVkdWxlVGltZUZvcm06IHtcbiAgICAgICAgICBzdGFydFRpbWU6ICcnLFxuICAgICAgICAgIGVuZFRpbWU6ICcnXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8g5pe26Ze05q616aKc6Imy6YWN572uIC0g5L2/55So5pu057K+57uG55qE5pe26Ze05q616YWN6ImyXG4gICAgICAgIHRpbWVDb2xvcnM6IHtcbiAgICAgICAgICBlYXJseU1vcm5pbmc6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNFM0YyRkQnLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjOTBDQUY5JyxcbiAgICAgICAgICAgIGRvdENvbG9yOiAnIzIxOTZGMydcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1vcm5pbmc6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNFOEY1RTknLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjQTVENkE3JyxcbiAgICAgICAgICAgIGRvdENvbG9yOiAnIzRDQUY1MCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIG5vb246IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNGRkY4RTEnLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjRkZFMDgyJyxcbiAgICAgICAgICAgIGRvdENvbG9yOiAnI0ZGQzEwNydcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFmdGVybm9vbjoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0ZCRTlFNycsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjogJyNGRkFCOTEnLFxuICAgICAgICAgICAgZG90Q29sb3I6ICcjRkY1NzIyJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXZlbmluZzoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0VERTdGNicsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjogJyNCMzlEREInLFxuICAgICAgICAgICAgZG90Q29sb3I6ICcjNjczQUI3J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbmlnaHQ6IHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNFMUY1RkUnLFxuICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjODFENEZBJyxcbiAgICAgICAgICAgIGRvdENvbG9yOiAnIzAzQTlGNCdcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGNvbXB1dGVkOiB7XG4gICAgICAvLyDmjInml6XmnJ/liIbnu4Tml6XnqIvlronmjpJcbiAgICAgIGdyb3VwZWRTY2hlZHVsZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5saXN0KSByZXR1cm4ge307XG5cbiAgICAgICAgLy8g5Yib5bu65Z+65LqO5pel5pyf55qE5YiG57uEXG4gICAgICAgIGNvbnN0IGdyb3VwcyA9IHt9O1xuICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaChzY2hlZHVsZSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IHRoaXMuZ2V0RGF0ZVN0cihzY2hlZHVsZS5zdGFydFRpbWUpO1xuICAgICAgICAgIGlmICghZ3JvdXBzW2RhdGVdKSB7XG4gICAgICAgICAgICBncm91cHNbZGF0ZV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBzW2RhdGVdLnB1c2goc2NoZWR1bGUpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyDmjInml6XmnJ/mjpLluo9cbiAgICAgICAgY29uc3Qgc29ydGVkRGF0ZXMgPSBPYmplY3Qua2V5cyhncm91cHMpLnNvcnQoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge307XG5cbiAgICAgICAgc29ydGVkRGF0ZXMuZm9yRWFjaChkYXRlID0+IHtcbiAgICAgICAgICAvLyDmjInlvIDlp4vml7bpl7TmjpLluo/mr4/kuIDlpKnnmoTml6XnqItcbiAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBncm91cHNbZGF0ZV0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGEuc3RhcnRUaW1lKSAtIG5ldyBEYXRlKGIuc3RhcnRUaW1lKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXN1bHRbZGF0ZV0gPSBzb3J0ZWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcbiAgICBmaWx0ZXJzOiB7XG4gICAgICBmb3JtYXREYXRlVGltZSh0aW1lKSB7XG4gICAgICAgIGlmICh0aW1lID09IG51bGwgfHwgdGltZSA9PT0gJycpIHtcbiAgICAgICAgICByZXR1cm4gJ04vQSc7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lKTtcbiAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW06c3MnKVxuICAgICAgfSxcbiAgICAgIGZvcm1hdFN0YXR1cyhzdGF0dXMpIHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gMSkge1xuICAgICAgICAgIHJldHVybiAn5b6F5YqeJztcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDIpIHtcbiAgICAgICAgICByZXR1cm4gJ+W3suWuieaOkic7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAzKSB7XG4gICAgICAgICAgcmV0dXJuICfov5vooYzkuK0nO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gNCkge1xuICAgICAgICAgIHJldHVybiAn5bey5a6M5oiQJztcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDUpIHtcbiAgICAgICAgICByZXR1cm4gJ+W3sumAvuacnyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICfmnKrnn6UnO1xuICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlZCgpIHtcbiAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgLy8g6I635Y+W5pel56iL6aG555qE54q25oCB5qCH562+57G75Z6LXG4gICAgICBnZXRTdGF0dXNUYWdUeXBlKHN0YXR1cykge1xuICAgICAgICBzd2l0Y2goc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAxOiByZXR1cm4gJ2luZm8nOyAgICAvLyDlvoXlip5cbiAgICAgICAgICBjYXNlIDI6IHJldHVybiAnd2FybmluZyc7IC8vIOW3suWuieaOklxuICAgICAgICAgIGNhc2UgMzogcmV0dXJuICdzdWNjZXNzJzsgLy8g6L+b6KGM5LitXG4gICAgICAgICAgY2FzZSA0OiByZXR1cm4gJyc7ICAgICAgICAvLyDlt7LlrozmiJBcbiAgICAgICAgICBjYXNlIDU6IHJldHVybiAnZGFuZ2VyJzsgIC8vIOW3sumAvuacn1xuICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnaW5mbyc7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8vIOaZuuiDveaOkuW6j+aWueazlVxuICAgICAgaGFuZGxlU21hcnRTb3J0KCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAvLyDojrflj5blvZPliY3lubTmnIjvvIzmoLzlvI/kuLpZWVlZLU1NXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHllYXJNb250aCA9IGAke25vdy5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICAgICAgICAvLyDkvb/nlKjmmbrog73mjpLluo/mjqXlj6Pojrflj5bmjpLluo/lkI7nmoTnlKjmiLfml6XnqItcbiAgICAgICAgZmV0Y2hVc2VyU2NoZWR1bGVTbWFydFNvcnQodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIOWwhuaZuuiDveaOkuW6j+WQjueahOaVsOaNruiuvue9ruS4uuW9k+WJjeWIl+ihqFxuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcblxuICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgICAgICAgICAgbWVzc2FnZTogJ+W3suagueaNruaXtumXtOe0p+aApeaAp+WSjOS7u+WKoemHjeimgeaAp+i/m+ihjOaZuuiDveaOkuW6jycsXG4gICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuLi4uXG4gICAgICBhc3luYyBnZXRBbGxUYXNrTGlzdCgpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaEFsbFRhc2tMaXN0KClcbiAgICAgICAgdGhpcy50YXNrTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0VGFza0luZm8oaWQpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFRhc2tJbmZvKGlkKTtcbiAgICAgICAgdGhpcy50YXNrSW5mbyA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdmlld0JhcmNvZGUocm93KSB7XG4gICAgICAgIHRoaXMuY3VycmVudENvZGUgPSByb3cudGFza0NvZGU7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0VGFza0luZm8ocm93LnRhc2tJZCk7XG4gICAgICAgIHRoaXMuYmFyY29kZURpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHZpZXdJbmZvKHJvdykge1xuICAgICAgICBhd2FpdCB0aGlzLmdldFRhc2tJbmZvKHJvdy50YXNrSWQpO1xuICAgICAgICB0aGlzLmluZm9EaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBhc3luYyB2aWV3Q29uZmxpY3Qocm93KSB7XG4gICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoQ29uZmxpY3RTY2hlZHVsZUxpc3Qoe2lkOnJvdy5pZCxzY2hlZHVsZUlkczogcm93LmNvbmZsaWN0U2NoZWR1bGVJZHMgfHwgJyd9KTtcbiAgICAgICAgdGhpcy5jb25mbGljdExpc3QgPSByZXMuZGF0YTtcbiAgICAgICAgdGhpcy5jb25mbGljdERpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgfSxcbi4uLlxuICAgICAgZ2V0TGlzdCgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG5cbiAgICAgICAgLy8g6I635Y+W5b2T5YmN5bm05pyI77yM5qC85byP5Li6WVlZWS1NTVxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCB5ZWFyTW9udGggPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWA7XG5cbiAgICAgICAgLy8g5L2/55So5pyI5bqm5o6l5Y+j6I635Y+W55So5oi35pel56iLXG4gICAgICAgIGZldGNoVXNlck1vbnRoU2NoZWR1bGVMaXN0KHllYXJNb250aCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8g5bCG5oyJ5pel5pyf5YiG57uE55qE5pWw5o2u6L2s5o2i5Li65YiX6KGo5b2i5byPXG4gICAgICAgICAgY29uc3QgZ3JvdXBlZERhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIGxldCBhbGxTY2hlZHVsZXMgPSBbXTtcblxuICAgICAgICAgIC8vIOmBjeWOhuavj+S4quaXpeacn+eahOaXpeeoi+WIl+ihqO+8jOWQiOW5tuWIsOS4gOS4quWkp+WIl+ihqOS4rVxuICAgICAgICAgIE9iamVjdC52YWx1ZXMoZ3JvdXBlZERhdGEpLmZvckVhY2goc2NoZWR1bGVzID0+IHtcbiAgICAgICAgICAgIGFsbFNjaGVkdWxlcyA9IGFsbFNjaGVkdWxlcy5jb25jYXQoc2NoZWR1bGVzKTtcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMubGlzdCA9IGFsbFNjaGVkdWxlcztcbiAgICAgICAgICB0aGlzLnRvdGFsID0gYWxsU2NoZWR1bGVzLmxlbmd0aDtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluaXpeeoi+aVsOaNruWksei0pTonLCBlcnJvcik7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaXpeeoi+aVsOaNruWksei0pe+8jOivt+eojeWQjumHjeivlScpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfVxuICB9XG48L3NjcmlwdD5cbjxzdHlsZT5cbi8qIOWfuuehgOagt+W8jyAqL1xuLmFwcC1jb250YWluZXIge1xuICBwYWRkaW5nOiAyMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjVGN0ZBO1xufVxuLi4uXG5cbi8qIOaXpeeoi+agkeagt+W8jyAqL1xuLmZpbHRlci1jb250YWluZXIsIC5vcGVyYXRlLWNvbnRhaW5lciwgLnNjaGVkdWxlci1jb250YWluZXIge1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLCAwLCAwLCAwLjA1KTtcbiAgYm9yZGVyOiBub25lO1xufVxuXG4uZmlsdGVyLWhlYWRlciwgLm9wZXJhdGUtaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBmb250LXdlaWdodDogNjAwO1xuICBjb2xvcjogIzMwMzEzMztcbiAgbWFyZ2luLWJvdHRvbTogMTVweDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFQkVFRjU7XG4gIHBhZGRpbmctYm90dG9tOiAxNXB4O1xufVxuXG4uZmlsdGVyLWhlYWRlciBpLCAub3BlcmF0ZS1oZWFkZXIgaSB7XG4gIG1hcmdpbi1yaWdodDogOHB4O1xuICBjb2xvcjogIzQwOUVGRjtcbiAgZm9udC1zaXplOiAxOHB4O1xufVxuXG4uZmlsdGVyLWNvbnRlbnQge1xuICBtYXJnaW4tdG9wOiAxNXB4O1xufVxuXG4uc2VhcmNoLWJ0biB7XG4gIGJhY2tncm91bmQ6ICM0MDlFRkY7XG4gIGJvcmRlci1jb2xvcjogIzQwOUVGRjtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBtYXJnaW4tbGVmdDogMTBweDtcbiAgcGFkZGluZzogOHB4IDE1cHg7XG59XG5cbi5zY2hlZHVsZXItY29udGFpbmVyIHtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgbWluLWhlaWdodDogMzAwcHg7XG4gIHBhZGRpbmc6IDA7XG59XG5cbi5lbXB0eS1zdGF0ZSB7XG4gIHBhZGRpbmc6IDQwcHggMDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4uc2NoZWR1bGVyLXdyYXBwZXIge1xuICBwYWRkaW5nOiAyMHB4O1xufVxuXG4uZGF5LWdyb3VwIHtcbiAgbWFyZ2luLWJvdHRvbTogMzBweDtcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNFQkVFRjU7XG4gIHBhZGRpbmctYm90dG9tOiAyMHB4O1xufVxuXG4uZGF5LWdyb3VwOmxhc3QtY2hpbGQge1xuICBtYXJnaW4tYm90dG9tOiAwO1xuICBib3JkZXItYm90dG9tOiBub25lO1xufVxuXG4uZGF5LWhlYWRlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIHBhZGRpbmc6IDE2cHggMjBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI0YyRjZGQztcbiAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjNDA5RUZGO1xufVxuXG4uZGF5LWxlZnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgbWFyZ2luLXJpZ2h0OiAxNXB4O1xuICBtaW4td2lkdGg6IDYwcHg7XG4gIHBhZGRpbmc6IDhweDtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzQwOUVGRiwgIzY0QjVGNik7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgYm9yZGVyLXJhZGl1czogOHB4O1xuICBib3gtc2hhZG93OiAwIDJweCA2cHggcmdiYSg2NCwgMTU4LCAyNTUsIDAuMjUpO1xufVxuXG4uZGF5LW51bWJlciB7XG4gIGZvbnQtc2l6ZTogMjhweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGNvbG9yOiAjZmZmO1xuICBsaW5lLWhlaWdodDogMTtcbn1cblxuLmRheS13ZWVrZGF5IHtcbiAgZm9udC1zaXplOiAxNHB4O1xuICBjb2xvcjogI2ZmZjtcbiAgbWFyZ2luLXRvcDogNHB4O1xuICBmb250LXdlaWdodDogNTAwO1xufVxuXG4uZGF5LWRhdGUge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xufVxuXG4uZGF0ZS10YWcge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogI2ZmZjtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzQwOUVGRjtcbiAgcGFkZGluZzogNXB4IDEwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xufVxuXG4uZGF0ZS1mdWxsIHtcbiAgZm9udC1zaXplOiAxNXB4O1xuICBjb2xvcjogIzYwNjI2Njtcbn1cblxuLnRpbWVsaW5lLWNvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgcGFkZGluZy1sZWZ0OiAxMDBweDtcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgbWFyZ2luLWxlZnQ6IDIwcHg7XG4gIG1hcmdpbi1yaWdodDogMjBweDtcbn1cblxuLnRpbWVsaW5lLXRyYWNrIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiA3MHB4O1xuICB0b3A6IDA7XG4gIGJvdHRvbTogMDtcbiAgd2lkdGg6IDJweDtcbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDE4MGRlZyxcbiAgICAjZThlYWVjIDAlLFxuICAgICMyMTk2RjMgMTYlLFxuICAgICM0Q0FGNTAgMzIlLFxuICAgICNGRkMxMDcgNDglLFxuICAgICNGRjU3MjIgNjQlLFxuICAgICM2NzNBQjcgODAlLFxuICAgICMwM0E5RjQgMTAwJSk7XG4gIHotaW5kZXg6IDE7XG59XG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXG4uLi5cbiAgICAgIDwvc3Bhbj5cbiAgICA8L2VsLWRpYWxvZz5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuPHNjcmlwdD5cbiAgaW1wb3J0IHtmZXRjaFNjaGVkdWxlTGlzdCwgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCwgY3JlYXRlU2NoZWR1bGUsdXBkYXRlU2NoZWR1bGUsZGVsZXRlU2NoZWR1bGUsZmV0Y2hBbGxUYXNrTGlzdCxmZXRjaEFsbFRhc2tMaXN0QnlTdGF0dXMsZmV0Y2hUYXNrSW5mbyxmZXRjaENvbmZsaWN0U2NoZWR1bGVMaXN0LHVwZGF0ZVRhc2tTdGF0dXMsc2V0VGFza1JlbWluZGVyfSBmcm9tICdAL2FwaS9hcGknO1xuICBpbXBvcnQgSnNCYXJjb2RlIGZyb20gJ2pzYmFyY29kZSc7XG4gIGltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7XG4gIGltcG9ydCB7Zm9ybWF0RGF0ZX0gZnJvbSAnQC91dGlscy9kYXRlJztcblxuICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgIHBhZ2VOdW06IDEsXG4gICAgcGFnZVNpemU6IDEwLFxuICAgIHNlYXJjaEtleTogbnVsbCxcbiAgICBzdGF0dXM6IG51bGwsXG4gICAgdHlwZTogbnVsbCxcbiAgfTtcbiAgY29uc3QgZGVmYXVsdEFkbWluID0ge1xuICAgIGlkOiBudWxsLFxuICAgIHRhc2tJZDogbnVsbCxcbiAgICBzdGFydFRpbWU6IG51bGwsXG4gICAgZW5kVGltZTogbnVsbCxcbiAgICByZW1pbmRlclRpbWU6IG51bGwsXG4gIH07XG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBuYW1lOiAnYWRtaW5MaXN0JyxcbiAgICBkYXRhKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGlzdFF1ZXJ5OiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KSxcbiAgICAgICAgbGlzdDogbnVsbCxcbiAgICAgICAgdG90YWw6IG51bGwsXG4gICAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIGFkbWluOiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWRtaW4pLFxuICAgICAgICBpc0VkaXQ6IGZhbHNlLFxuICAgICAgICBhZG1pblJ1bGVzOiB7XG4gICAgICAgICAgdGFza0lkOiBbXG4gICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5pel56iL5a6J5o6S5Lu75YqhJywgdHJpZ2dlcjogJ2NoYW5nZScgfVxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhcnRUaW1lOiBbXG4gICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5Lu75Yqh5omn6KGM5pe26Ze0JywgdHJpZ2dlcjogJ2NoYW5nZScgfVxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICAgIGJhcmNvZGVEaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgY3VycmVudENvZGU6ICcnLCAvLyDlvZPliY3pgInkuK3nmoTnvJbnoIFcblxuICAgICAgICB0YXNrTGlzdDogW10sXG5cbiAgICAgICAgLy8g5Lu75Yqh6K+m5oOF55u45YWzXG4gICAgICAgIHRhc2tEZXRhaWxWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgdGFza0RldGFpbDoge30sXG4gICAgICAgIGN1cnJlbnRTY2hlZHVsZUlkOiBudWxsLFxuXG4gICAgICAgIC8vIOeKtuaAgeWPmOabtOebuOWFs1xuICAgICAgICBzdGF0dXNDaGFuZ2VWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzRm9ybToge1xuICAgICAgICAgIHN0YXR1czogMVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIOaPkOmGkuaXtumXtOebuOWFs1xuICAgICAgICByZW1pbmRlckRpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICByZW1pbmRlclRpbWU6ICcnLFxuXG4gICAgICAgIC8vIOS/ruaUueaXpeeoi+aXtumXtOebuOWFs1xuICAgICAgICBzY2hlZHVsZVRpbWVEaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgc2NoZWR1bGVUaW1lRm9ybToge1xuICAgICAgICAgIHN0YXJ0VGltZTogJycsXG4gICAgICAgICAgZW5kVGltZTogJydcbiAgICAgICAgfSxcbi4uLlxuICAgICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHtcbiAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IHZhbDtcbiAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgaGFuZGxlQWRkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmdldFRhc2tMaXN0KHtzdGF0dXM6MX0pO1xuICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgICB0aGlzLmlzRWRpdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFkbWluID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEFkbWluKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVEZWxldGUoaW5kZXgsIHJvdykge1xuICAgICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbopoHliKDpmaTor6Xml6XnqIvlronmjpI/5Yig6Zmk5ZCO5bCG5peg5rOV5pKk6ZSAJywgJ+aPkOekuicsIHtcbiAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsXG4gICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsXG4gICAgICAgICAgdHlwZTogJ3dhcm5pbmcnXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIGRlbGV0ZVNjaGVkdWxlKHJvdy5pZCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfISdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGhhbmRsZVVwZGF0ZShpbmRleCwgcm93KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZy4uLiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFRaFkxdk1jOHlGSHNWZlNYVDU5ZmlVIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJMZXQncyB1cGRhdGUgdGhlIHVzZXJTY2hlZHVsZS9pbmRleC52dWUgZmlsZSB0byBhZGQgdGhlIHN0YXR1cyBmaWx0ZXIgZnVuY3Rpb25hbGl0eTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJmNTUzNGYyYi1mMWZjLTQ3MTMtYjU2MC01ZDJjYjcyMWMyMWUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxQXlITHdwNTlQTVVDTXdDdkhLV25nNyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgIC8vIFxcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXHU2NWI5XFx1NmNkNVxcbiAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcXG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xcblxcbiAgICAgICAgLy8gXFx1ODNiN1xcdTUzZDZcXHU1ZjUzXFx1NTI0ZFxcdTVlNzRcXHU2NzA4XFx1ZmYwY1xcdTY4M2NcXHU1ZjBmXFx1NGUzYVlZWVktTU1cXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XFxuICAgICAgICBjb25zdCB5ZWFyTW9udGggPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWA7XFxuXFxuICAgICAgICAvLyBcXHU0ZjdmXFx1NzUyOFxcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXHU2M2E1XFx1NTNlM1xcdTgzYjdcXHU1M2Q2XFx1NjM5MlxcdTVlOGZcXHU1NDBlXFx1NzY4NFxcdTc1MjhcXHU2MjM3XFx1NjVlNVxcdTdhMGJcXG4gICAgICAgIGZldGNoVXNlclNjaGVkdWxlU21hcnRTb3J0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHtcXG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xcblxcbiAgICAgICAgICAvLyBcXHU1YzA2XFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTU0MGVcXHU3Njg0XFx1NjU3MFxcdTYzNmVcXHU4YmJlXFx1N2Y2ZVxcdTRlM2FcXHU1ZjUzXFx1NTI0ZFxcdTUyMTdcXHU4ODY4XFxuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcXG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XFxuXFxuICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdcXHU1ZGYyXFx1NjgzOVxcdTYzNmVcXHU2NWY2XFx1OTVmNFxcdTdkMjdcXHU2MDI1XFx1NjAyN1xcdTU0OGNcXHU0ZWZiXFx1NTJhMVxcdTkxY2RcXHU4OTgxXFx1NjAyN1xcdThmZGJcXHU4ODRjXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZicsXFxuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXFxuICAgICAgICAgIH0pO1xcbiAgICAgICAgfSk7XFxuICAgICAgfSxcIiwgXCJuZXdfc3RyXCI6IFwiICAgICAgLy8gXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTY1YjlcXHU2Y2Q1XFxuICAgICAgaGFuZGxlU21hcnRTb3J0KCkge1xcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XFxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XFxuICAgICAgICAgIHBhZ2VOdW06IHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0sXFxuICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZVxcbiAgICAgICAgfTtcXG5cXG4gICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXkpIHtcXG4gICAgICAgICAgcGFyYW1zLnNlYXJjaEtleSA9IHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnN0YXR1cyAhPT0gbnVsbCAmJiB0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IHVuZGVmaW5lZCkge1xcbiAgICAgICAgICBwYXJhbXMuc3RhdHVzID0gdGhpcy5saXN0UXVlcnkuc3RhdHVzO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy8gXFx1NGY3ZlxcdTc1MjhcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NjNhNVxcdTUzZTNcXHU4M2I3XFx1NTNkNlxcdTYzOTJcXHU1ZThmXFx1NTQwZVxcdTc2ODRcXHU3NTI4XFx1NjIzN1xcdTY1ZTVcXHU3YTBiXFxuICAgICAgICBmZXRjaFVzZXJTY2hlZHVsZVNtYXJ0U29ydChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XFxuXFxuICAgICAgICAgIC8vIFxcdTVjMDZcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NTQwZVxcdTc2ODRcXHU2NTcwXFx1NjM2ZVxcdThiYmVcXHU3ZjZlXFx1NGUzYVxcdTVmNTNcXHU1MjRkXFx1NTIxN1xcdTg4NjhcXG4gICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcXG5cXG4gICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XFxuICAgICAgICAgICAgbWVzc2FnZTogJ1xcdTVkZjJcXHU2ODM5XFx1NjM2ZVxcdTY1ZjZcXHU5NWY0XFx1N2QyN1xcdTYwMjVcXHU2MDI3XFx1NTQ4Y1xcdTRlZmJcXHU1MmExXFx1OTFjZFxcdTg5ODFcXHU2MDI3XFx1OGZkYlxcdTg4NGNcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmJyxcXG4gICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcXG4gICAgICAgICAgfSk7XFxuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1xcdTY2N2FcXHU4MGZkXFx1NjM5MlxcdTVlOGZcXHU1OTMxXFx1OGQyNTonLCBlcnJvcik7XFxuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcXG4gICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcignXFx1NjY3YVxcdTgwZmRcXHU2MzkyXFx1NWU4ZlxcdTU5MzFcXHU4ZDI1XFx1ZmYwY1xcdThiZjdcXHU3YTBkXFx1NTQwZVxcdTkxY2RcXHU4YmQ1Jyk7XFxuICAgICAgICB9KTtcXG4gICAgICB9LFxcbiAgICAgIFxcbiAgICAgIC8vIFxcdTkxY2RcXHU3ZjZlXFx1NjQxY1xcdTdkMjJcXG4gICAgICBoYW5kbGVSZXNldFNlYXJjaCgpIHtcXG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XFxuICAgICAgICB0aGlzLmdldExpc3QoKTtcXG4gICAgICB9LFxcbiAgICAgIFxcbiAgICAgIC8vIFxcdTY0MWNcXHU3ZDIyXFx1NTIxN1xcdTg4NjhcXG4gICAgICBoYW5kbGVTZWFyY2hMaXN0KCkge1xcbiAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IDE7XFxuICAgICAgICB0aGlzLmdldExpc3QoKTtcXG4gICAgICB9LFwiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogMSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiAxfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3csIGxldCdzIHVwZGF0ZSB0aGUgbWV0aG9kcyBpbiB1c2VyU2NoZWR1bGUvaW5kZXgudnVlOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL3ZpZXdzL3VzZXJTY2hlZHVsZS9pbmRleC52dWUuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDI0MVx0ICBpbXBvcnQgSnNCYXJjb2RlIGZyb20gJ2pzYmFyY29kZSc7XG4gICAyNDJcdCAgaW1wb3J0IGh0bWwyY2FudmFzIGZyb20gJ2h0bWwyY2FudmFzJztcbiAgIDI0M1x0ICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG4gICAyNDRcdFxuICAgMjQ1XHQgIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAyNDZcdCAgICBwYWdlTnVtOiAxLFxuICAgMjQ3XHQgICAgcGFnZVNpemU6IDEwLFxuICAgMjQ4XHQgICAgc2VhcmNoS2V5OiBudWxsLFxuICAgMjQ5XHQgICAgc3RhdHVzOiBudWxsLFxuICAgMjUwXHQgICAgdHlwZTogbnVsbCxcbiAgIDI1MVx0ICB9O1xuICAgMjUyXHQgIGNvbnN0IGRlZmF1bHRBZG1pbiA9IHtcbiAgIDI1M1x0ICAgIGlkOiBudWxsLFxuICAgMjU0XHQgICAgdGFza0lkOiBudWxsLFxuICAgMjU1XHQgICAgc3RhcnRUaW1lOiBudWxsLFxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxWDRnNFhDYkZuTWlxWGs2eDlhY04zUSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyIsImZvbGRlclJvb3QiOiJDOi9Vc2Vycy8zNzYwMi9EZXNrdG9wL+mhueebri/mmbrog73kvIHkuJrlip7lhazml6XnqIvop4TliJLns7vnu58ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJyZXNwb25zZV90ZXh0IjoiTm93LCBsZXQncyB1cGRhdGUgdGhlIG1ldGhvZHMgaW4gdXNlclNjaGVkdWxlL2luZGV4LnZ1ZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI1MDJjNzRkMy03NWIxLTQxMDctOWFlNi0xODEwMmNmNWRlNTciLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxUTZWb3g3c1FnWmJCRlM0Zmhjc1JhcyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwid2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgIGdldExpc3QoKSB7XFxuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcXG5cXG4gICAgICAgIC8vIFxcdTgzYjdcXHU1M2Q2XFx1NWY1M1xcdTUyNGRcXHU1ZTc0XFx1NjcwOFxcdWZmMGNcXHU2ODNjXFx1NWYwZlxcdTRlM2FZWVlZLU1NXFxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xcbiAgICAgICAgY29uc3QgeWVhck1vbnRoID0gYCR7bm93LmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX1gO1xcblxcbiAgICAgICAgLy8gXFx1NGY3ZlxcdTc1MjhcXHU2NzA4XFx1NWVhNlxcdTYzYTVcXHU1M2UzXFx1ODNiN1xcdTUzZDZcXHU3NTI4XFx1NjIzN1xcdTY1ZTVcXHU3YTBiXFxuICAgICAgICBmZXRjaFVzZXJNb250aFNjaGVkdWxlTGlzdCh5ZWFyTW9udGgpLnRoZW4ocmVzcG9uc2UgPT4ge1xcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XFxuXFxuICAgICAgICAgIC8vIFxcdTVjMDZcXHU2MzA5XFx1NjVlNVxcdTY3MWZcXHU1MjA2XFx1N2VjNFxcdTc2ODRcXHU2NTcwXFx1NjM2ZVxcdThmNmNcXHU2MzYyXFx1NGUzYVxcdTUyMTdcXHU4ODY4XFx1NWY2MlxcdTVmMGZcXG4gICAgICAgICAgY29uc3QgZ3JvdXBlZERhdGEgPSByZXNwb25zZS5kYXRhO1xcbiAgICAgICAgICBsZXQgYWxsU2NoZWR1bGVzID0gW107XFxuXFxuICAgICAgICAgIC8vIFxcdTkwNGRcXHU1Mzg2XFx1NmJjZlxcdTRlMmFcXHU2NWU1XFx1NjcxZlxcdTc2ODRcXHU2NWU1XFx1N2EwYlxcdTUyMTdcXHU4ODY4XFx1ZmYwY1xcdTU0MDhcXHU1ZTc2XFx1NTIzMFxcdTRlMDBcXHU0ZTJhXFx1NTkyN1xcdTUyMTdcXHU4ODY4XFx1NGUyZFxcbiAgICAgICAgICBPYmplY3QudmFsdWVzKGdyb3VwZWREYXRhKS5mb3JFYWNoKHNjaGVkdWxlcyA9PiB7XFxuICAgICAgICAgICAgYWxsU2NoZWR1bGVzID0gYWxsU2NoZWR1bGVzLmNvbmNhdChzY2hlZHVsZXMpO1xcbiAgICAgICAgICB9KTtcXG5cXG4gICAgICAgICAgdGhpcy5saXN0ID0gYWxsU2NoZWR1bGVzO1xcbiAgICAgICAgICB0aGlzLnRvdGFsID0gYWxsU2NoZWR1bGVzLmxlbmd0aDtcXG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcXG4gICAgICAgICAgY29uc29sZS5lcnJvcignXFx1ODNiN1xcdTUzZDZcXHU2NWU1XFx1N2EwYlxcdTY1NzBcXHU2MzZlXFx1NTkzMVxcdThkMjU6JywgZXJyb3IpO1xcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ1xcdTgzYjdcXHU1M2Q2XFx1NjVlNVxcdTdhMGJcXHU2NTcwXFx1NjM2ZVxcdTU5MzFcXHU4ZDI1XFx1ZmYwY1xcdThiZjdcXHU3YTBkXFx1NTQwZVxcdTkxY2RcXHU4YmQ1Jyk7XFxuICAgICAgICB9KTtcXG4gICAgICB9LFwiLCBcIm5ld19zdHJcIjogXCIgICAgICBnZXRMaXN0KCkge1xcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XFxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XFxuICAgICAgICAgIHBhZ2VOdW06IHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0sXFxuICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZVxcbiAgICAgICAgfTtcXG5cXG4gICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXkpIHtcXG4gICAgICAgICAgcGFyYW1zLnNlYXJjaEtleSA9IHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnN0YXR1cyAhPT0gbnVsbCAmJiB0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IHVuZGVmaW5lZCkge1xcbiAgICAgICAgICBwYXJhbXMuc3RhdHVzID0gdGhpcy5saXN0UXVlcnkuc3RhdHVzO1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy8gXFx1NGY3ZlxcdTc1MjhcXHU2NjdhXFx1ODBmZFxcdTYzOTJcXHU1ZThmXFx1NjNhNVxcdTUzZTNcXHU4M2I3XFx1NTNkNlxcdTc1MjhcXHU2MjM3XFx1NjVlNVxcdTdhMGJcXHVmZjBjXFx1NjUyZlxcdTYzMDFcXHU3MmI2XFx1NjAwMVxcdThmYzdcXHU2ZWU0XFxuICAgICAgICBmZXRjaFVzZXJTY2hlZHVsZVNtYXJ0U29ydChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XFxuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcXG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XFxuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XFxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1xcdTgzYjdcXHU1M2Q2XFx1NjVlNVxcdTdhMGJcXHU2NTcwXFx1NjM2ZVxcdTU5MzFcXHU4ZDI1OicsIGVycm9yKTtcXG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xcbiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCdcXHU4M2I3XFx1NTNkNlxcdTY1ZTVcXHU3YTBiXFx1NjU3MFxcdTYzNmVcXHU1OTMxXFx1OGQyNVxcdWZmMGNcXHU4YmY3XFx1N2EwZFxcdTU0MGVcXHU5MWNkXFx1OGJkNScpO1xcbiAgICAgICAgfSk7XFxuICAgICAgfSxcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMX1dfSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiRmluYWxseSwgbGV0J3MgdXBkYXRlIHRoZSBgZ2V0TGlzdGAgbWV0aG9kIGluIHVzZXJTY2hlZHVsZS9pbmRleC52dWU6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3MvdXNlclNjaGVkdWxlL2luZGV4LnZ1ZS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNDEzXHQgICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdpbmZvJztcbiAgIDQxNFx0ICAgICAgICB9XG4gICA0MTVcdCAgICAgIH0sXG4gICA0MTZcdFxuICAgNDE3XHQgICAgICAvLyDmmbrog73mjpLluo/mlrnms5VcbiAgIDQxOFx0ICAgICAgaGFuZGxlU21hcnRTb3J0KCkge1xuICAgNDE5XHQgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgNDIwXHQgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgIDQyMVx0ICAgICAgICAgIHBhZ2VOdW06IHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0sXG4gICA0MjJcdCAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5saXN0UXVlcnkucGFnZVNpemVcbiAgIDQyM1x0ICAgICAgICB9O1xuICAgNDI0XHRcbiAgIDQyNVx0ICAgICAgICBpZiAodGhpcy5saXN0UXVlcnkuc2VhcmNoS2V5KSB7XG4gICA0MjZcdCAgICAgICAgICBwYXJhbXMuc2VhcmNoS2V5ID0gdGhpcy5saXN0UXVlcnkuc2VhcmNoS2V5O1xuICAgNDI3XHQgICAgICAgIH1cbiAgIDQyOFx0XG4gICA0MjlcdCAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnN0YXR1cyAhPT0gbnVsbCAmJiB0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IHVuZGVmaW5lZCkge1xuICAgNDMwXHQgICAgICAgICAgcGFyYW1zLnN0YXR1cyA9IHRoaXMubGlzdFF1ZXJ5LnN0YXR1cztcbiAgIDQzMVx0ICAgICAgICB9XG4gICA0MzJcdFxuICAgNDMzXHQgICAgICAgIC8vIOS9v+eUqOaZuuiDveaOkuW6j+aOpeWPo+iOt+WPluaOkuW6j+WQjueahOeUqOaIt+aXpeeoi1xuICAgNDM0XHQgICAgICAgIGZldGNoVXNlclNjaGVkdWxlU21hcnRTb3J0KHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7XG4gICA0MzVcdCAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA0MzZcdFxuICAgNDM3XHQgICAgICAgICAgLy8g5bCG5pm66IO95o6S5bqP5ZCO55qE5pWw5o2u6K6+572u5Li65b2T5YmN5YiX6KGoXG4gICA0MzhcdCAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICA0MzlcdCAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgIDQ0MFx0XG4gICA0NDFcdCAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgIDQ0Mlx0ICAgICAgICAgICAgbWVzc2FnZTogJ+W3suagueaNruaXtumXtOe0p+aApeaAp+WSjOS7u+WKoemHjeimgeaAp+i/m+ihjOaZuuiDveaOkuW6jycsXG4gICA0NDNcdCAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgNDQ0XHQgICAgICAgICAgfSk7XG4gICA0NDVcdCAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgNDQ2XHQgICAgICAgICAgY29uc29sZS5lcnJvcign5pm66IO95o6S5bqP5aSx6LSlOicsIGVycm9yKTtcbiAgIDQ0N1x0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDQ0OFx0ICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+aZuuiDveaOkuW6j+Wksei0pe+8jOivt+eojeWQjumHjeivlScpO1xuICAgNDQ5XHQgICAgICAgIH0pO1xuICAgNDUwXHQgICAgICB9LFxuICAgNDUxXHRcbiAgIDQ1Mlx0ICAgICAgLy8g6YeN572u5pCc57SiXG4gICA0NTNcdCAgICAgIGhhbmRsZVJlc2V0U2VhcmNoKCkge1xuICAgNDU0XHQgICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XG4gICA0NTVcdCAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICA0NTZcdCAgICAgIH0sXG4gICA0NTdcdFxuICAgNDU4XHQgICAgICAvLyDmkJzntKLliJfooahcbiAgIDQ1OVx0ICAgICAgaGFuZGxlU2VhcmNoTGlzdCgpIHtcbiAgIDQ2MFx0ICAgICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtID0gMTtcbiAgIDQ2MVx0ICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgIDQ2Mlx0ICAgICAgfSxcbiAgIDQ2M1x0XG4gICA0NjRcdCAgICAgIC8vIOWIpOaWreaXpeeoi+aYr+WQpuW3sui/h+e7k+adn+aXtumXtFxuICAgNDY1XHQgICAgICBpc092ZXJkdWUoc2NoZWR1bGUpIHtcbiAgIDQ2Nlx0ICAgICAgICAvLyDlpoLmnpxzdGF0dXPlt7Lnu4/mmK81KOW3sumAvuacnynliJnnm7TmjqXov5Tlm550cnVlXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFBeUhMd3A1OVBNVUNNd0N2SEtXbmc3In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJGaW5hbGx5LCBsZXQncyB1cGRhdGUgdGhlIGBnZXRMaXN0YCBtZXRob2QgaW4gdXNlclNjaGVkdWxlL2luZGV4LnZ1ZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoiY2FuY2VsbGVkIiwicmVxdWVzdF9pZCI6InRlbXAtZmUtYTdhMTdjZmQtYWFmYy00MmI3LWJkNTItMDc5OTE0ZTkyZjMxIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3MvdXNlclNjaGVkdWxlL2luZGV4LnZ1ZS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNjIxXHQgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkge1xuICAgNjIyXHQgICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSB2YWw7XG4gICA2MjNcdCAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICA2MjRcdCAgICAgIH0sXG4gICA2MjVcdCAgICAgIGdldExpc3QoKSB7XG4gICA2MjZcdCAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICA2MjdcdCAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgNjI4XHQgICAgICAgICAgcGFnZU51bTogdGhpcy5saXN0UXVlcnkucGFnZU51bSxcbiAgIDYyOVx0ICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLmxpc3RRdWVyeS5wYWdlU2l6ZVxuICAgNjMwXHQgICAgICAgIH07XG4gICA2MzFcdFxuICAgNjMyXHQgICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXkpIHtcbiAgIDYzM1x0ICAgICAgICAgIHBhcmFtcy5zZWFyY2hLZXkgPSB0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXk7XG4gICA2MzRcdCAgICAgICAgfVxuICAgNjM1XHRcbiAgIDYzNlx0ICAgICAgICBpZiAodGhpcy5saXN0UXVlcnkuc3RhdHVzICE9PSBudWxsICYmIHRoaXMubGlzdFF1ZXJ5LnN0YXR1cyAhPT0gdW5kZWZpbmVkKSB7XG4gICA2MzdcdCAgICAgICAgICBwYXJhbXMuc3RhdHVzID0gdGhpcy5saXN0UXVlcnkuc3RhdHVzO1xuICAgNjM4XHQgICAgICAgIH1cbiAgIDYzOVx0XG4gICA2NDBcdCAgICAgICAgLy8g5L2/55So5pm66IO95o6S5bqP5o6l5Y+j6I635Y+W55So5oi35pel56iL77yM5pSv5oyB54q25oCB6L+H5rukXG4gICA2NDFcdCAgICAgICAgZmV0Y2hVc2VyU2NoZWR1bGVTbWFydFNvcnQocGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgIDY0Mlx0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDY0M1x0ICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgIDY0NFx0ICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgNjQ1XHQgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgIDY0Nlx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluaXpeeoi+aVsOaNruWksei0pTonLCBlcnJvcik7XG4gICA2NDdcdCAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA2NDhcdCAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bml6XnqIvmlbDmja7lpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTtcbiAgIDY0OVx0ICAgICAgICB9KTtcbiAgIDY1MFx0ICAgICAgfSxcbiAgIDY1MVx0ICAgIH1cbiAgIDY1Mlx0ICB9XG4gICA2NTNcdDwvc2NyaXB0PlxuICAgNjU0XHQ8c3R5bGU+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFRNlZveDdzUWdaYkJGUzRmaGNzUmFzIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV19LHsicmVxdWVzdF9pZCI6IjUwNGNkMmIyLTcwNjQtNDU5ZS05YjVmLTkzNmUyM2U4NTFjNyIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InJlcXVlc3RfaWQiOiJmZGZhYWIxYy0zOTVkLTQ2YmMtYWE5Ny01MDBmNDQ3ZGU0NWMiLCJ1dWlkIjoiYWY0NjUxYjktZWY3NS00YTJiLWFiYzgtYTVjZDQ0ZGU3ZTM2IiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ2MDAzMjY3Mjc0LCJ0b1RpbWVzdGFtcCI6MTc0NjAwMzM3NDU3NCwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InJlcXVlc3RfaWQiOiIxYjllMTkwNS0yNzAyLTRkNTYtOTQ4MC03OGM3MmJmMTcwY2MiLCJ1dWlkIjoiNzU5YjI0YTItMzQ5YS00NDNlLWIyOWItMjZmMzRiODdhYzFmIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ2MDAzMzc0NTc0LCJ0b1RpbWVzdGFtcCI6MTc0NjAwMzM3NjYxMiwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InJlcXVlc3RfaWQiOiJlODkxZjhkMC1lYzk5LTQ2OTAtOTI5NC0zNDliZmE2MTYzOGMiLCJ1dWlkIjoiOWVmOGMxOTQtMDU1ZC00Y2I0LTkwZjUtYWZiNTU0OWFlYjY2IiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ2MDAzMzc2NjEyLCJ0b1RpbWVzdGFtcCI6MTc0NjI4Nzc5Njk0NSwic2Vlbl9zdGF0ZSI6InNlZW4ifV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtNjZkN2ZlY2EtZmI1Ny00Y2U1LTg1MjQtNjBlNjBjMzA0MjlkIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0wY2JkZTk1MS1jZjdhLTQzOTktOWI1ZC01MGQzYmE4YjZiYjkiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLThiNWY4MjYwLTc0ZjctNGVjNS1iZGRkLTE0MjRlODcwNzk4MyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMjg2NjBlYTktNTQzZi00MDdkLWFkYTktOWRkOGE4NTkyMWY5Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jMmExOGZjMy02MDk4LTQ0YjEtYmRiZC1mYTU5MmE0ZjcxNjMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTQ0NzViZTUxLTgwNWQtNDNkYy04MTZhLTgwMzg3ZDM0MmI4MiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNzlkMzZhYzYtNjYzMi00OTczLTliMjMtNTMxZmRhODcwMGEzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03M2QxNWE4ZC00YmEwLTQxOTItYjVjMy1hNzBkNTQyZGUxNmYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTBmNDRhMjRiLTJhNDUtNDQwMi05ODlmLTc0MzU5ZGI3ZDE0NiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNjA0YWI1MjUtYzU3My00ZWQ1LWJmNzQtNzFlNzcwOWViOWNkIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lZWM1YjIzMS0xMjhmLTQyZGEtYjE4Ni1hNTJmZmYyMDM1ZDIiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTU0NzVkMDM0LWQzM2UtNDYzMC05NWNiLTIwOGM3NmNlNmJiOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZTMyMDJkMWMtNmEwOS00YWI5LTlhNGYtZmE4NWUxYjhiM2ZlIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS01YWYxMmE5MC1iYTdjLTQwNWUtYTk1My03Y2M0ZGY4NWNmYmEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWYyZmQ3YWUwLWYyZTAtNDViMy04OGY0LTg3ODcyN2QxM2MzOSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZmMyNmYxYjAtMDlhNS00MWY5LTg5MTItOTk4YTU2OWNhOTU4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lZTE2MjYxYS1mY2U0LTQzMTgtOTY4Ni1jYTExYTM3MWNkNmYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWYwMzNhN2UxLTMwMmItNDA1Zi04NjcxLTk0MDFmM2FlODM4ZSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNmNlOTI4ODUtOWI2ZC00NjZiLThmMDktYmRmN2Q4NTgxYzcwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1iNzg3YTMxNC1kNjUyLTQwNzgtOTkxMi1jNTcxY2E0NTU5NzMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTk3MGMzZWY2LTE0ZGYtNGIzYy04YmRjLTM3ZDM4MmYxZWUzZiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtM2I3ZmYxYzgtZjEwNS00OWEyLTk4ZTktNTg2Y2Y0NzdiNjY0Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0yZmUwMDkxMi0xZjdiLTRjNmUtODA0OS1mYWEwZmQyYmQ1OTYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTIyZTFiNjJhLTU0ZWMtNGE1MC1iZjI2LTdjNzc5YzlkMmJiYSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtOTZkMTg4OGQtNmUzZi00NDdjLTk2MTEtODIxMDdmOGJkNDVmIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03MGQwZjNlNi1jZTU0LTRhN2QtYmQxMS1jOGMzOTNiYzYyOTAiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTgwN2RiZTc1LWFmYzgtNDNlNS04ZWVjLTRkNDU5ZThiZjk3MCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtODhlNjk4MDktN2Q0MC00MjVmLWFiNTQtMzQwMzIyZDVmYmE3Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS04OTNkMWExNi04M2E4LTQwZWYtYTcxZS0xN2Y5MWVmYmZkYjQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTUwMTAyMDMxLWZmNWUtNDk5OS04ZmFjLTljM2MwMTZkMTI0ZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtOWY1ZTJhMmEtZTVhNi00Yzk1LWFlMmEtOWJjODlhZjNiMDVhIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS02MTI0ZDJlMy1mYjMxLTQ5ZjMtYWJiOS1lNDg5ZTIwN2UxOGMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTg4NTUzYmZlLWNiMjgtNGJkMi1hMTZkLWFiMzViZjEwMTk0OSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMjI3MzBmMzktZDA5YS00ZTRhLWFmNWMtZmMwYmEwN2ZmOWI2Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS04ZGZjODEwMi1kN2EwLTRkMTctOTc2NS1iMzI3MWFjY2RhNzgiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWE3YTE3Y2ZkLWFhZmMtNDJiNy1iZDUyLTA3OTkxNGU5MmYzMSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn19LCJ0b29sVXNlU3RhdGVzIjp7ImIxMjQzM2M1LTE0ZDAtNDFmZS1hZTJjLWY3NmYyYTM4NzI4ZDt0b29sdV8wMTR1NWsycnh2ZXlFczdocVYzbU5RRkwiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvY29udHJvbGxlci9TY2hlZHVsZUNvbnRyb2xsZXIuamF2YTpcbiAgICA1MFx0XG4gICAgNTFcdCAgICBAQXBpT3BlcmF0aW9uKFwi55So5oi35pel56iL5p+l6K+iIC0g5pm66IO95o6S5bqPXCIpXG4gICAgNTJcdCAgICBAR2V0TWFwcGluZyhcIi91c2VyL3NtYXJ0U29ydFwiKVxuICAgIDUzXHQgICAgcHVibGljIENvbW1vblJlc3VsdDxDb21tb25QYWdlPFNjaGVkdWxlVm8+PiB1c2VyU21hcnRTb3J0KEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VTaXplXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMjBcIikgSW50ZWdlciBwYWdlU2l6ZSxcbiAgICA1NFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICA1NVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInNlYXJjaEtleVwiLCByZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgNTZcdCAgICAgICAgTG9uZyB1c2VySWQgPSBTZWN1cml0eVV0aWxzLmdldEN1cnJlbnRVc2VySWQoKTtcbiAgICA1N1x0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zbWFydFNvcnRVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCk7XG4gICAgNThcdFxuICAgIDU5XHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHNjaGVkdWxlUGFnZSkpO1xuICAgIDYwXHQgICAgfVxuVG90YWwgbGluZXMgaW4gZmlsZTogMTU2XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI2MWY4MTNjYS02NzgwLTRiYmUtYTViMy0yYWZiZGIxMTM4OWE7dG9vbHVfMDFMczlNREVKWWNIWUZBaGNZZ0hrdnNRIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9zZWN1cml0eS91dGlsL1NlY3VyaXR5VXRpbHMuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIuc2VjdXJpdHkudXRpbDtcblxuaW1wb3J0IGNvbS5ib290LndlYi5kb21haW4uQWRtaW5Vc2VyRGV0YWlscztcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG5pbXBvcnQgbG9tYm9rLmV4cGVyaW1lbnRhbC5VdGlsaXR5Q2xhc3M7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLkF1dGhlbnRpY2F0aW9uO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS5jb250ZXh0LlNlY3VyaXR5Q29udGV4dEhvbGRlcjtcblxuQFV0aWxpdHlDbGFzc1xucHVibGljIGNsYXNzIFNlY3VyaXR5VXRpbHMge1xuXG4gICAgLyoqXG4gICAgICog6I635Y+WQXV0aGVudGljYXRpb25cbiAgICAgKi9cbiAgICBwdWJsaWMgQXV0aGVudGljYXRpb24gZ2V0QXV0aGVudGljYXRpb24oKSB7XG4gICAgICAgIHJldHVybiBTZWN1cml0eUNvbnRleHRIb2xkZXIuZ2V0Q29udGV4dCgpLmdldEF1dGhlbnRpY2F0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog6I635Y+W55So5oi3XG4gICAgICovXG4gICAgcHVibGljIFVtc0FkbWluIGdldFVzZXIoQXV0aGVudGljYXRpb24gYXV0aGVudGljYXRpb24pIHtcbiAgICAgICAgT2JqZWN0IHByaW5jaXBhbCA9IGF1dGhlbnRpY2F0aW9uLmdldFByaW5jaXBhbCgpO1xuICAgICAgICBpZiAocHJpbmNpcGFsIGluc3RhbmNlb2YgQWRtaW5Vc2VyRGV0YWlscykge1xuICAgICAgICAgICAgQWRtaW5Vc2VyRGV0YWlscyBhZG1pblVzZXJEZXRhaWxzID0gIChBZG1pblVzZXJEZXRhaWxzKSBwcmluY2lwYWw7XG4gICAgICAgICAgICByZXR1cm4gYWRtaW5Vc2VyRGV0YWlscy5nZXRVbXNBZG1pbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPlueUqOaIt1xuICAgICAqL1xuICAgIHB1YmxpYyBVbXNBZG1pbiBnZXRVc2VyKCkge1xuICAgICAgICBBdXRoZW50aWNhdGlvbiBhdXRoZW50aWNhdGlvbiA9IGdldEF1dGhlbnRpY2F0aW9uKCk7XG4gICAgICAgIGlmIChhdXRoZW50aWNhdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2V0VXNlcihhdXRoZW50aWNhdGlvbik7XG4gICAgfVxuXG59Li4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvc2VjdXJpdHkvdXRpbC9TcHJpbmdVdGlsLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLnNlY3VyaXR5LnV0aWw7XG5cbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLkJlYW5zRXhjZXB0aW9uO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY29udGV4dC5BcHBsaWNhdGlvbkNvbnRleHQ7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5jb250ZXh0LkFwcGxpY2F0aW9uQ29udGV4dEF3YXJlO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5Db21wb25lbnQ7XG5cbi8qKlxuICogU3ByaW5n5bel5YW357G7XG4gKi9cbkBDb21wb25lbnRcbnB1YmxpYyBjbGFzcyBTcHJpbmdVdGlsIGltcGxlbWVudHMgQXBwbGljYXRpb25Db250ZXh0QXdhcmUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgQXBwbGljYXRpb25Db250ZXh0IGFwcGxpY2F0aW9uQ29udGV4dDtcblxuICAgIC8vIOiOt+WPlmFwcGxpY2F0aW9uQ29udGV4dFxuICAgIHB1YmxpYyBzdGF0aWMgQXBwbGljYXRpb25Db250ZXh0IGdldEFwcGxpY2F0aW9uQ29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIGFwcGxpY2F0aW9uQ29udGV4dDtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzZXRBcHBsaWNhdGlvbkNvbnRleHQoQXBwbGljYXRpb25Db250ZXh0IGFwcGxpY2F0aW9uQ29udGV4dCkgdGhyb3dzIEJlYW5zRXhjZXB0aW9uIHtcbiAgICAgICAgaWYgKFNwcmluZ1V0aWwuYXBwbGljYXRpb25Db250ZXh0ID09IG51bGwpIHtcbiAgICAgICAgICAgIFNwcmluZ1V0aWwuYXBwbGljYXRpb25Db250ZXh0ID0gYXBwbGljYXRpb25Db250ZXh0O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6YCa6L+HbmFtZeiOt+WPlkJlYW5cbiAgICBwdWJsaWMgc3RhdGljIE9iamVjdCBnZXRCZWFuKFN0cmluZyBuYW1lKSB7XG4gICAgICAgIHJldHVybiBnZXRBcHBsaWNhdGlvbkNvbnRleHQoKS5nZXRCZWFuKG5hbWUpO1xuICAgIH1cblxuICAgIC8vIOmAmui/h2NsYXNz6I635Y+WQmVhblxuICAgIHB1YmxpYyBzdGF0aWMgPFQ+IFQgZ2V0QmVhbihDbGFzczxUPiBjbGF6eikge1xuICAgICAgICByZXR1cm4gZ2V0QXBwbGljYXRpb25Db250ZXh0KCkuZ2V0QmVhbihjbGF6eik7XG4gICAgfVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvc2VjdXJpdHkvdXRpbC9Kd3RUb2tlblV0aWwuamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIuc2VjdXJpdHkudXRpbDtcblxuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLmRhdGUuRGF0ZVV0aWw7XG5pbXBvcnQgY24uaHV0b29sLmNvcmUudXRpbC5TdHJVdGlsO1xuaW1wb3J0IGlvLmpzb253ZWJ0b2tlbi5DbGFpbXM7XG5pbXBvcnQgaW8uanNvbndlYnRva2VuLkp3dHM7XG5pbXBvcnQgaW8uanNvbndlYnRva2VuLlNpZ25hdHVyZUFsZ29yaXRobTtcbmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXJGYWN0b3J5O1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLlZhbHVlO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS51c2VyZGV0YWlscy5Vc2VyRGV0YWlscztcblxuaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuaW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuaW1wb3J0IGphdmEudXRpbC5NYXA7XG5cbi8qKlxuICogSnd0VG9rZW7nlJ/miJDnmoTlt6XlhbfnsbtcbiAqIEpXVCB0b2tlbueahOagvOW8j++8mmhlYWRlci5wYXlsb2FkLnNpZ25hdHVyZVxuICogaGVhZGVy55qE5qC85byP77yI566X5rOV44CBdG9rZW7nmoTnsbvlnovvvInvvJpcbiAqIHtcImFsZ1wiOiBcIkhTNTEyXCIsXCJ0eXBcIjogXCJKV1RcIn1cbiAqIHBheWxvYWTnmoTmoLzlvI/vvIjnlKjmiLflkI3jgIHliJvlu7rml7bpl7TjgIHnlJ/miJDml7bpl7TvvInvvJpcbiAqIHtcInN1YlwiOlwid2FuZ1wiLFwiY3JlYXRlZFwiOjE0ODkwNzk5ODEzOTMsXCJleHBcIjoxNDg5Njg0NzgxfVxuICogc2lnbmF0dXJl55qE55Sf5oiQ566X5rOV77yaXG4gKiBITUFDU0hBNTEyKGJhc2U2NFVybEVuY29kZShoZWFkZXIpICsgXCIuXCIgK2Jhc2U2NFVybEVuY29kZShwYXlsb2FkKSxzZWNyZXQpXG4gKi9cbnB1YmxpYyBjbGFzcyBKd3RUb2tlblV0aWwge1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBMT0dHRVIgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihKd3RUb2tlblV0aWwuY2xhc3MpO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBDTEFJTV9LRVlfVVNFUk5BTUUgPSBcInN1YlwiO1xuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIFN0cmluZyBDTEFJTV9LRVlfQ1JFQVRFRCA9IFwiY3JlYXRlZFwiO1xuICAgIEBWYWx1ZShcIiR7and0LnNlY3JldH1cIilcbiAgICBwcml2YXRlIFN0cmluZyBzZWNyZXQ7XG4gICAgQFZhbHVlKFwiJHtqd3QuZXhwaXJhdGlvbn1cIilcbiAgICBwcml2YXRlIExvbmcgZXhwaXJhdGlvbjtcbiAgICBAVmFsdWUoXCIke2p3dC50b2tlbkhlYWR9XCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgdG9rZW5IZWFkO1xuXG4gICAgLyoqXG4gICAgICog5qC55o2u6LSf6LSj55Sf5oiQSldU55qEdG9rZW5cbiAgICAgKi9cbiAgICBwcml2YXRlIFN0cmluZyBnZW5lcmF0ZVRva2VuKE1hcDxTdHJpbmcsIE9iamVjdD4gY2xhaW1zKSB7XG4gICAgICAgIHJldHVybiBKd3RzLmJ1aWxkZXIoKVxuICAgICAgICAgICAgICAgIC5zZXRDbGFpbXMoY2xhaW1zKVxuICAgICAgICAgICAgICAgIC5zZXRFeHBpcmF0aW9uKGdlbmVyYXRlRXhwaXJhdGlvbkRhdGUoKSlcbiAgICAgICAgICAgICAgICAuc2lnbldpdGgoU2lnbmF0dXJlQWxnb3JpdGhtLkhTNTEyLCBzZWNyZXQpXG4gICAgICAgICAgICAgICAgLmNvbXBhY3QoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDku450b2tlbuS4reiOt+WPlkpXVOS4reeahOi0n+i9vVxuICAgICAqL1xuICAgIHByaXZhdGUgQ2xhaW1zIGdldENsYWltc0Zyb21Ub2tlbihTdHJpbmcgdG9rZW4pIHtcbiAgICAgICAgQ2xhaW1zIGNsYWltcyA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjbGFpbXMgPSBKd3RzLnBhcnNlcigpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRTaWduaW5nS2V5KHNlY3JldClcbiAgICAgICAgICAgICAgICAgICAgLnBhcnNlQ2xhaW1zSndzKHRva2VuKVxuICAgICAgICAgICAgICAgICAgICAuZ2V0Qm9keSgpO1xuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgICAgICAgICAgTE9HR0VSLmluZm8oXCJKV1TmoLzlvI/pqozor4HlpLHotKU6e31cIiwgdG9rZW4pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbGFpbXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog55Sf5oiQdG9rZW7nmoTov4fmnJ/ml7bpl7RcbiAgICAgKi9cbiAgICBwcml2YXRlIERhdGUgZ2VuZXJhdGVFeHBpcmF0aW9uRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpICsgZXhwaXJhdGlvbiAqIDEwMDApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOS7jnRva2Vu5Lit6I635Y+W55m75b2V55So5oi35ZCNXG4gICAgICovXG4gICAgcHVibGljIFN0cmluZyBnZXRVc2VyTmFtZUZyb21Ub2tlbihTdHJpbmcgdG9rZW4pIHtcbiAgICAgICAgU3RyaW5nIHVzZXJuYW1lO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgQ2xhaW1zIGNsYWltcyA9IGdldENsYWltc0Zyb21Ub2tlbih0b2tlbik7XG4gICAgICAgICAgICB1c2VybmFtZSA9IGNsYWltcy5nZXRTdWJqZWN0KCk7XG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICB1c2VybmFtZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOmqjOivgXRva2Vu5piv5ZCm6L+Y5pyJ5pWIXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdG9rZW4gICAgICAg5a6i5oi356uv5Lyg5YWl55qEdG9rZW5cbiAgICAgKiBAcGFyYW0gdXNlckRldGFpbHMg5LuO5pWw5o2u5bqT5Lit5p+l6K+i5Ye65p2l55qE55So5oi35L+h5oGvXG4gICAgICovXG4gICAgcHVibGljIGJvb2xlYW4gdmFsaWRhdGVUb2tlbihTdHJpbmcgdG9rZW4sIFVzZXJEZXRhaWxzIHVzZXJEZXRhaWxzKSB7XG4gICAgICAgIFN0cmluZyB1c2VybmFtZSA9IGdldFVzZXJOYW1lRnJvbVRva2VuKHRva2VuKTtcbiAgICAgICAgcmV0dXJuIHVzZXJuYW1lLmVxdWFscyh1c2VyRGV0YWlscy5nZXRVc2VybmFtZSgpKSAmJiAhaXNUb2tlbkV4cGlyZWQodG9rZW4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWIpOaWrXRva2Vu5piv5ZCm5bey57uP5aSx5pWIXG4gICAgICovXG4gICAgcHJpdmF0ZSBib29sZWFuIGlzVG9rZW5FeHBpcmVkKFN0cmluZyB0b2tlbikge1xuICAgICAgICBEYXRlIGV4cGlyZWREYXRlID0gZ2V0RXhwaXJlZERhdGVGcm9tVG9rZW4odG9rZW4pO1xuICAgICAgICByZXR1cm4gZXhwaXJlZERhdGUuYmVmb3JlKG5ldyBEYXRlKCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOS7jnRva2Vu5Lit6I635Y+W6L+H5pyf5pe26Ze0XG4gICAgICovXG4gICAgcHJpdmF0ZSBEYXRlIGdldEV4cGlyZWREYXRlRnJvbVRva2VuKFN0cmluZyB0b2tlbikge1xuICAgICAgICBDbGFpbXMgY2xhaW1zID0gZ2V0Q2xhaW1zRnJvbVRva2VuKHRva2VuKTtcbiAgICAgICAgcmV0dXJuIGNsYWltcy5nZXRFeHBpcmF0aW9uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5qC55o2u55So5oi35L+h5oGv55Sf5oiQdG9rZW5cbiAgICAgKi9cbiAgICBwdWJsaWMgU3RyaW5nIGdlbmVyYXRlVG9rZW4oVXNlckRldGFpbHMgdXNlckRldGFpbHMpIHtcbiAgICAgICAgTWFwPFN0cmluZywgT2JqZWN0PiBjbGFpbXMgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIGNsYWltcy5wdXQoQ0xBSU1fS0VZX1VTRVJOQU1FLCB1c2VyRGV0YWlscy5nZXRVc2VybmFtZSgpKTtcbiAgICAgICAgY2xhaW1zLnB1dChDTEFJTV9LRVlfQ1JFQVRFRCwgbmV3IERhdGUoKSk7XG4gICAgICAgIHJldHVybiBnZW5lcmF0ZVRva2VuKGNsYWltcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5b2T5Y6f5p2l55qEdG9rZW7msqHov4fmnJ/ml7bmmK/lj6/ku6XliLfmlrDnmoRcbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbGRUb2tlbiDluKZ0b2tlbkhlYWTnmoR0b2tlblxuICAgICAqL1xuICAgIHB1YmxpYyBTdHJpbmcgcmVmcmVzaEhlYWRUb2tlbihTdHJpbmcgb2xkVG9rZW4pIHtcbiAgICAgICAgaWYoU3RyVXRpbC5pc0VtcHR5KG9sZFRva2VuKSl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBTdHJpbmcgdG9rZW4gPSBvbGRUb2tlbi5zdWJzdHJpbmcodG9rZW5IZWFkLmxlbmd0aCgpKTtcbiAgICAgICAgaWYoU3RyVXRpbC5pc0VtcHR5KHRva2VuKSl7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvL3Rva2Vu5qCh6aqM5LiN6YCa6L+HXG4gICAgICAgIENsYWltcyBjbGFpbXMgPSBnZXRDbGFpbXNGcm9tVG9rZW4odG9rZW4pO1xuICAgICAgICBpZihjbGFpbXM9PW51bGwpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy/lpoLmnpx0b2tlbuW3sue7j+i/h+acn++8jOS4jeaUr+aMgeWIt+aWsFxuICAgICAgICBpZihpc1Rva2VuRXhwaXJlZCh0b2tlbikpe1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy/lpoLmnpx0b2tlbuWcqDMw5YiG6ZKf5LmL5YaF5Yia5Yi35paw6L+H77yM6L+U5Zue5Y6fdG9rZW5cbiAgICAgICAgaWYodG9rZW5SZWZyZXNoSnVzdEJlZm9yZSh0b2tlbiwzMCo2MCkpe1xuICAgICAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGNsYWltcy5wdXQoQ0xBSU1fS0VZX0NSRUFURUQsIG5ldyBEYXRlKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGdlbmVyYXRlVG9rZW4oY2xhaW1zKTtcbiAgICAgICAgfVxuICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL2NvbmZpZy9NYWxsU2VjdXJpdHlDb25maWcuamF2YVxuLi4uXG5cbi8qKlxuICogbWFsbC1zZWN1cml0eeaooeWdl+ebuOWFs+mFjee9rlxuICog6Ieq5a6a5LmJ6YWN572u77yM55So5LqO6YWN572u5aaC5L2V6I635Y+W55So5oi35L+h5oGv5Y+K5Yqo5oCB5p2D6ZmQXG4gKi9cbkBDb25maWd1cmF0aW9uXG5wdWJsaWMgY2xhc3MgTWFsbFNlY3VyaXR5Q29uZmlnIHtcblxuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFVtc0FkbWluU2VydmljZSBhZG1pblNlcnZpY2U7XG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgVW1zUmVzb3VyY2VTZXJ2aWNlIHJlc291cmNlU2VydmljZTtcblxuICAgIEBCZWFuXG4gICAgcHVibGljIFVzZXJEZXRhaWxzU2VydmljZSB1c2VyRGV0YWlsc1NlcnZpY2UoKSB7XG4gICAgICAgIC8v6I635Y+W55m75b2V55So5oi35L+h5oGvXG4gICAgICAgIHJldHVybiB1c2VybmFtZSAtPiBhZG1pblNlcnZpY2UubG9hZFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICB9XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9zZWN1cml0eS9jb21wb25lbnQvSnd0QXV0aGVudGljYXRpb25Ub2tlbkZpbHRlci5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5zZWN1cml0eS5jb21wb25lbnQ7XG5cbmltcG9ydCBjb20uYm9vdC53ZWIuc2VjdXJpdHkudXRpbC5Kd3RUb2tlblV0aWw7XG5pbXBvcnQgb3JnLnNsZjRqLkxvZ2dlcjtcbmltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLmZhY3RvcnkuYW5ub3RhdGlvbi5BdXRvd2lyZWQ7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uVmFsdWU7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5hdXRoZW50aWNhdGlvbi5Vc2VybmFtZVBhc3N3b3JkQXV0aGVudGljYXRpb25Ub2tlbjtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUuY29udGV4dC5TZWN1cml0eUNvbnRleHRIb2xkZXI7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS5jb3JlLnVzZXJkZXRhaWxzLlVzZXJEZXRhaWxzO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS51c2VyZGV0YWlscy5Vc2VyRGV0YWlsc1NlcnZpY2U7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zZWN1cml0eS53ZWIuYXV0aGVudGljYXRpb24uV2ViQXV0aGVudGljYXRpb25EZXRhaWxzU291cmNlO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsud2ViLmZpbHRlci5PbmNlUGVyUmVxdWVzdEZpbHRlcjtcblxuaW1wb3J0IGphdmF4LnNlcnZsZXQuRmlsdGVyQ2hhaW47XG5pbXBvcnQgamF2YXguc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uO1xuaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7XG5pbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7XG5pbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjtcblxuLyoqXG4gKiBKV1TnmbvlvZXmjojmnYPov4fmu6TlmahcbiAqL1xucHVibGljIGNsYXNzIEp3dEF1dGhlbnRpY2F0aW9uVG9rZW5GaWx0ZXIgZXh0ZW5kcyBPbmNlUGVyUmVxdWVzdEZpbHRlciB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIExPR0dFUiA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKEp3dEF1dGhlbnRpY2F0aW9uVG9rZW5GaWx0ZXIuY2xhc3MpO1xuICAgIEBBdXRvd2lyZWRcbiAgICBwcml2YXRlIFVzZXJEZXRhaWxzU2VydmljZSB1c2VyRGV0YWlsc1NlcnZpY2U7XG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgSnd0VG9rZW5VdGlsIGp3dFRva2VuVXRpbDtcbiAgICBAVmFsdWUoXCIke2p3dC50b2tlbkhlYWRlcn1cIilcbiAgICBwcml2YXRlIFN0cmluZyB0b2tlbkhlYWRlcjtcbiAgICBAVmFsdWUoXCIke2p3dC50b2tlbkhlYWR9XCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgdG9rZW5IZWFkO1xuXG4gICAgQE92ZXJyaWRlXG4gICAgcHJvdGVjdGVkIHZvaWQgZG9GaWx0ZXJJbnRlcm5hbChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGaWx0ZXJDaGFpbiBjaGFpbikgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHtcbiAgICAgICAgU3RyaW5nIGF1dGhIZWFkZXIgPSByZXF1ZXN0LmdldEhlYWRlcih0aGlzLnRva2VuSGVhZGVyKTtcbiAgICAgICAgaWYgKGF1dGhIZWFkZXIgIT0gbnVsbCAmJiBhdXRoSGVhZGVyLnN0YXJ0c1dpdGgodGhpcy50b2tlbkhlYWQpKSB7XG4gICAgICAgICAgICBTdHJpbmcgYXV0aFRva2VuID0gYXV0aEhlYWRlci5zdWJzdHJpbmcodGhpcy50b2tlbkhlYWQubGVuZ3RoKCkpOy8vIFRoZSBwYXJ0IGFmdGVyIFwiQmVhcmVyIFwiXG4gICAgICAgICAgICBTdHJpbmcgdXNlcm5hbWUgPSBqd3RUb2tlblV0aWwuZ2V0VXNlck5hbWVGcm9tVG9rZW4oYXV0aFRva2VuKTtcbiAgICAgICAgICAgIExPR0dFUi5pbmZvKFwiY2hlY2tpbmcgdXNlcm5hbWU6e31cIiwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgaWYgKHVzZXJuYW1lICE9IG51bGwgJiYgU2VjdXJpdHlDb250ZXh0SG9sZGVyLmdldENvbnRleHQoKS5nZXRBdXRoZW50aWNhdGlvbigpID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBVc2VyRGV0YWlscyB1c2VyRGV0YWlscyA9IHRoaXMudXNlckRldGFpbHNTZXJ2aWNlLmxvYWRVc2VyQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKGp3dFRva2VuVXRpbC52YWxpZGF0ZVRva2VuKGF1dGhUb2tlbiwgdXNlckRldGFpbHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIFVzZXJuYW1lUGFzc3dvcmRBdXRoZW50aWNhdGlvblRva2VuIGF1dGhlbnRpY2F0aW9uID0gbmV3IFVzZXJuYW1lUGFzc3dvcmRBdXRoZW50aWNhdGlvblRva2VuKHVzZXJEZXRhaWxzLCBudWxsLCB1c2VyRGV0YWlscy5nZXRBdXRob3JpdGllcygpKTtcbiAgICAgICAgICAgICAgICAgICAgYXV0aGVudGljYXRpb24uc2V0RGV0YWlscyhuZXcgV2ViQXV0aGVudGljYXRpb25EZXRhaWxzU291cmNlKCkuYnVpbGREZXRhaWxzKHJlcXVlc3QpKTtcbiAgICAgICAgICAgICAgICAgICAgTE9HR0VSLmluZm8oXCJhdXRoZW50aWNhdGVkIHVzZXI6e31cIiwgdXNlcm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBTZWN1cml0eUNvbnRleHRIb2xkZXIuZ2V0Q29udGV4dCgpLnNldEF1dGhlbnRpY2F0aW9uKGF1dGhlbnRpY2F0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2hhaW4uZG9GaWx0ZXIocmVxdWVzdCwgcmVzcG9uc2UpO1xuICAgIH1cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL3NlY3VyaXR5L2NvbmZpZy9TZWN1cml0eUNvbmZpZy5qYXZhXG4uLi5cblxuICAgIEBCZWFuXG4gICAgU2VjdXJpdHlGaWx0ZXJDaGFpbiBmaWx0ZXJDaGFpbihIdHRwU2VjdXJpdHkgaHR0cFNlY3VyaXR5KSB0aHJvd3MgRXhjZXB0aW9uIHtcbiAgICAgICAgRXhwcmVzc2lvblVybEF1dGhvcml6YXRpb25Db25maWd1cmVyPEh0dHBTZWN1cml0eT4uRXhwcmVzc2lvbkludGVyY2VwdFVybFJlZ2lzdHJ5IHJlZ2lzdHJ5ID0gaHR0cFNlY3VyaXR5XG4gICAgICAgICAgICAgICAgLmF1dGhvcml6ZVJlcXVlc3RzKCk7XG4gICAgICAgIC8v5LiN6ZyA6KaB5L+d5oqk55qE6LWE5rqQ6Lev5b6E5YWB6K646K6/6ZeuXG4gICAgICAgIGZvciAoU3RyaW5nIHVybCA6IGlnbm9yZVVybHNDb25maWcuZ2V0VXJscygpKSB7XG4gICAgICAgICAgICByZWdpc3RyeS5hbnRNYXRjaGVycyh1cmwpLnBlcm1pdEFsbCgpO1xuICAgICAgICB9XG4gICAgICAgIC8v5YWB6K646Leo5Z+f6K+35rGC55qET1BUSU9OU+ivt+axglxuICAgICAgICByZWdpc3RyeS5hbnRNYXRjaGVycyhIdHRwTWV0aG9kLk9QVElPTlMpXG4gICAgICAgICAgICAgICAgLnBlcm1pdEFsbCgpO1xuICAgICAgICAvLyDku7vkvZXor7fmsYLpnIDopoHouqvku73orqTor4FcbiAgICAgICAgcmVnaXN0cnkuYW5kKClcbiAgICAgICAgICAgICAgICAuYXV0aG9yaXplUmVxdWVzdHMoKVxuICAgICAgICAgICAgICAgIC5hbnlSZXF1ZXN0KClcbiAgICAgICAgICAgICAgICAuYXV0aGVudGljYXRlZCgpXG4gICAgICAgICAgICAgICAgLy8g5YWz6Zet6Leo56uZ6K+35rGC6Ziy5oqk5Y+K5LiN5L2/55Soc2Vzc2lvblxuICAgICAgICAgICAgICAgIC5hbmQoKVxuICAgICAgICAgICAgICAgIC5jc3JmKClcbiAgICAgICAgICAgICAgICAuZGlzYWJsZSgpXG4gICAgICAgICAgICAgICAgLnNlc3Npb25NYW5hZ2VtZW50KClcbiAgICAgICAgICAgICAgICAuc2Vzc2lvbkNyZWF0aW9uUG9saWN5KFNlc3Npb25DcmVhdGlvblBvbGljeS5TVEFURUxFU1MpXG4gICAgICAgICAgICAgICAgLy8g6Ieq5a6a5LmJ5p2D6ZmQ5ouS57ud5aSE55CG57G7XG4gICAgICAgICAgICAgICAgLmFuZCgpXG4gICAgICAgICAgICAgICAgLmV4Y2VwdGlvbkhhbmRsaW5nKClcbiAgICAgICAgICAgICAgICAuYWNjZXNzRGVuaWVkSGFuZGxlcihyZXN0ZnVsQWNjZXNzRGVuaWVkSGFuZGxlcilcbiAgICAgICAgICAgICAgICAuYXV0aGVudGljYXRpb25FbnRyeVBvaW50KHJlc3RBdXRoZW50aWNhdGlvbkVudHJ5UG9pbnQpXG4gICAgICAgICAgICAgICAgLy8g6Ieq5a6a5LmJ5p2D6ZmQ5oum5oiq5ZmoSldU6L+H5ruk5ZmoXG4gICAgICAgICAgICAgICAgLmFuZCgpXG4gICAgICAgICAgICAgICAgLmFkZEZpbHRlckJlZm9yZShqd3RBdXRoZW50aWNhdGlvblRva2VuRmlsdGVyLCBVc2VybmFtZVBhc3N3b3JkQXV0aGVudGljYXRpb25GaWx0ZXIuY2xhc3MpO1xuICAgICAgICAvL+acieWKqOaAgeadg+mZkOmFjee9ruaXtua3u+WKoOWKqOaAgeadg+mZkOagoemqjOi/h+a7pOWZqFxuICAgICAgICBpZihkeW5hbWljU2VjdXJpdHlTZXJ2aWNlIT1udWxsKXtcbiAgICAgICAgICAgIHJlZ2lzdHJ5LmFuZCgpLmFkZEZpbHRlckJlZm9yZShkeW5hbWljU2VjdXJpdHlGaWx0ZXIsIEZpbHRlclNlY3VyaXR5SW50ZXJjZXB0b3IuY2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodHRwU2VjdXJpdHkuYnVpbGQoKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHdlYi9zcmMvdXRpbHMvYXV0aC5qc1xuaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJ1xuXG5jb25zdCBUb2tlbktleSA9ICdsb2dpblRva2VuJ1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0VG9rZW4oKSB7XG4gIHJldHVybiBDb29raWVzLmdldChUb2tlbktleSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldFRva2VuKHRva2VuKSB7XG4gIHJldHVybiBDb29raWVzLnNldChUb2tlbktleSwgdG9rZW4pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVUb2tlbigpIHtcbiAgcmV0dXJuIENvb2tpZXMucmVtb3ZlKFRva2VuS2V5KVxufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvc2VjdXJpdHkvY29uZmlnL0NvbW1vblNlY3VyaXR5Q29uZmlnLmphdmFcbi4uLlxuXG4vKipcbiAqIFNwcmluZ1NlY3VyaXR56YCa55So6YWN572uXG4gKiDljIXmi6zpgJrnlKhCZWFu44CBU2VjdXJpdHnpgJrnlKhCZWFu5Y+K5Yqo5oCB5p2D6ZmQ6YCa55SoQmVhblxuICovXG5AQ29uZmlndXJhdGlvblxucHVibGljIGNsYXNzIENvbW1vblNlY3VyaXR5Q29uZmlnIHtcblxuICAgIEBCZWFuXG4gICAgcHVibGljIFBhc3N3b3JkRW5jb2RlciBwYXNzd29yZEVuY29kZXIoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQkNyeXB0UGFzc3dvcmRFbmNvZGVyKCk7XG4gICAgfVxuXG4gICAgQEJlYW5cbiAgICBwdWJsaWMgSWdub3JlVXJsc0NvbmZpZyBpZ25vcmVVcmxzQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gbmV3IElnbm9yZVVybHNDb25maWcoKTtcbiAgICB9XG5cbiAgICBAQmVhblxuICAgIHB1YmxpYyBKd3RUb2tlblV0aWwgand0VG9rZW5VdGlsKCkge1xuICAgICAgICByZXR1cm4gbmV3IEp3dFRva2VuVXRpbCgpO1xuICAgIH1cblxuICAgIEBCZWFuXG4gICAgcHVibGljIFJlc3RmdWxBY2Nlc3NEZW5pZWRIYW5kbGVyIHJlc3RmdWxBY2Nlc3NEZW5pZWRIYW5kbGVyKCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc3RmdWxBY2Nlc3NEZW5pZWRIYW5kbGVyKCk7XG4gICAgfVxuXG4gICAgQEJlYW5cbiAgICBwdWJsaWMgUmVzdEF1dGhlbnRpY2F0aW9uRW50cnlQb2ludCByZXN0QXV0aGVudGljYXRpb25FbnRyeVBvaW50KCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc3RBdXRoZW50aWNhdGlvbkVudHJ5UG9pbnQoKTtcbiAgICB9XG5cbiAgICBAQmVhblxuICAgIHB1YmxpYyBKd3RBdXRoZW50aWNhdGlvblRva2VuRmlsdGVyIGp3dEF1dGhlbnRpY2F0aW9uVG9rZW5GaWx0ZXIoKXtcbiAgICAgICAgcmV0dXJuIG5ldyBKd3RBdXRoZW50aWNhdGlvblRva2VuRmlsdGVyKCk7XG4gICAgfVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvc2VjdXJpdHkvY29tcG9uZW50L0R5bmFtaWNTZWN1cml0eU1ldGFkYXRhU291cmNlLmphdmFcbi4uLlxuXG4vKipcbiAqIOWKqOaAgeadg+mZkOaVsOaNrua6kO+8jOeUqOS6juiOt+WPluWKqOaAgeadg+mZkOinhOWImVxuICovXG5wdWJsaWMgY2xhc3MgRHluYW1pY1NlY3VyaXR5TWV0YWRhdGFTb3VyY2UgaW1wbGVtZW50cyBGaWx0ZXJJbnZvY2F0aW9uU2VjdXJpdHlNZXRhZGF0YVNvdXJjZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBNYXA8U3RyaW5nLCBDb25maWdBdHRyaWJ1dGU+IGNvbmZpZ0F0dHJpYnV0ZU1hcCA9IG51bGw7XG4gICAgQEF1dG93aXJlZFxuICAgIHByaXZhdGUgRHluYW1pY1NlY3VyaXR5U2VydmljZSBkeW5hbWljU2VjdXJpdHlTZXJ2aWNlO1xuXG4gICAgQFBvc3RDb25zdHJ1Y3RcbiAgICBwdWJsaWMgdm9pZCBsb2FkRGF0YVNvdXJjZSgpIHtcbiAgICAgICAgY29uZmlnQXR0cmlidXRlTWFwID0gZHluYW1pY1NlY3VyaXR5U2VydmljZS5sb2FkRGF0YVNvdXJjZSgpO1xuICAgIH1cblxuICAgIHB1YmxpYyB2b2lkIGNsZWFyRGF0YVNvdXJjZSgpIHtcbiAgICAgICAgY29uZmlnQXR0cmlidXRlTWFwLmNsZWFyKCk7XG4gICAgICAgIGNvbmZpZ0F0dHJpYnV0ZU1hcCA9IG51bGw7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIENvbGxlY3Rpb248Q29uZmlnQXR0cmlidXRlPiBnZXRBdHRyaWJ1dGVzKE9iamVjdCBvKSB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIHtcbiAgICAgICAgaWYgKGNvbmZpZ0F0dHJpYnV0ZU1hcCA9PSBudWxsKSB0aGlzLmxvYWREYXRhU291cmNlKCk7XG4gICAgICAgIExpc3Q8Q29uZmlnQXR0cmlidXRlPiAgY29uZmlnQXR0cmlidXRlcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICAvL+iOt+WPluW9k+WJjeiuv+mXrueahOi3r+W+hFxuICAgICAgICBTdHJpbmcgdXJsID0gKChGaWx0ZXJJbnZvY2F0aW9uKSBvKS5nZXRSZXF1ZXN0VXJsKCk7XG4gICAgICAgIFN0cmluZyBwYXRoID0gVVJMVXRpbC5nZXRQYXRoKHVybCk7XG4gICAgICAgIFBhdGhNYXRjaGVyIHBhdGhNYXRjaGVyID0gbmV3IEFudFBhdGhNYXRjaGVyKCk7XG4gICAgICAgIEl0ZXJhdG9yPFN0cmluZz4gaXRlcmF0b3IgPSBjb25maWdBdHRyaWJ1dGVNYXAua2V5U2V0KCkuaXRlcmF0b3IoKTtcbiAgICAgICAgLy/ojrflj5borr/pl67or6Xot6/lvoTmiYDpnIDotYTmupBcbiAgICAgICAgd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSkge1xuICAgICAgICAgICAgU3RyaW5nIHBhdHRlcm4gPSBpdGVyYXRvci5uZXh0KCk7XG4gICAgICAgICAgICBpZiAocGF0aE1hdGNoZXIubWF0Y2gocGF0dGVybiwgcGF0aCkpIHtcbiAgICAgICAgICAgICAgICBjb25maWdBdHRyaWJ1dGVzLmFkZChjb25maWdBdHRyaWJ1dGVNYXAuZ2V0KHBhdHRlcm4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyDmnKrorr7nva7mk43kvZzor7fmsYLmnYPpmZDvvIzov5Tlm57nqbrpm4blkIhcbiAgICAgICAgcmV0dXJuIGNvbmZpZ0F0dHJpYnV0ZXM7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIENvbGxlY3Rpb248Q29uZmlnQXR0cmlidXRlPiBnZXRBbGxDb25maWdBdHRyaWJ1dGVzKCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9zZWN1cml0eS9jb21wb25lbnQvRHluYW1pY0FjY2Vzc0RlY2lzaW9uTWFuYWdlci5qYXZhXG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRlY2lkZShBdXRoZW50aWNhdGlvbiBhdXRoZW50aWNhdGlvbiwgT2JqZWN0IG9iamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgQ29sbGVjdGlvbjxDb25maWdBdHRyaWJ1dGU+IGNvbmZpZ0F0dHJpYnV0ZXMpIHRocm93cyBBY2Nlc3NEZW5pZWRFeGNlcHRpb24sIEluc3VmZmljaWVudEF1dGhlbnRpY2F0aW9uRXhjZXB0aW9uIHtcbiAgICAgICAgLy8g5b2T5o6l5Y+j5pyq6KKr6YWN572u6LWE5rqQ5pe255u05o6l5pS+6KGMXG4gICAgICAgIGlmIChDb2xsVXRpbC5pc0VtcHR5KGNvbmZpZ0F0dHJpYnV0ZXMpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgSXRlcmF0b3I8Q29uZmlnQXR0cmlidXRlPiBpdGVyYXRvciA9IGNvbmZpZ0F0dHJpYnV0ZXMuaXRlcmF0b3IoKTtcbiAgICAgICAgd2hpbGUgKGl0ZXJhdG9yLmhhc05leHQoKSkge1xuICAgICAgICAgICAgQ29uZmlnQXR0cmlidXRlIGNvbmZpZ0F0dHJpYnV0ZSA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIC8v5bCG6K6/6Zeu5omA6ZyA6LWE5rqQ5oiW55So5oi35oul5pyJ6LWE5rqQ6L+b6KGM5q+U5a+5XG4gICAgICAgICAgICBTdHJpbmcgbmVlZEF1dGhvcml0eSA9IGNvbmZpZ0F0dHJpYnV0ZS5nZXRBdHRyaWJ1dGUoKTtcbiAgICAgICAgICAgIGZvciAoR3JhbnRlZEF1dGhvcml0eSBncmFudGVkQXV0aG9yaXR5IDogYXV0aGVudGljYXRpb24uZ2V0QXV0aG9yaXRpZXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChuZWVkQXV0aG9yaXR5LnRyaW0oKS5lcXVhbHMoZ3JhbnRlZEF1dGhvcml0eS5nZXRBdXRob3JpdHkoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgQWNjZXNzRGVuaWVkRXhjZXB0aW9uKFwi5oqx5q2J77yM5oKo5rKh5pyJ6K6/6Zeu5p2D6ZmQXCIpO1xuICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL3NlY3VyaXR5L2NvbXBvbmVudC9EeW5hbWljU2VjdXJpdHlGaWx0ZXIuamF2YVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkb0ZpbHRlcihTZXJ2bGV0UmVxdWVzdCBzZXJ2bGV0UmVxdWVzdCwgU2VydmxldFJlc3BvbnNlIHNlcnZsZXRSZXNwb25zZSwgRmlsdGVyQ2hhaW4gZmlsdGVyQ2hhaW4pIHRocm93cyBJT0V4Y2VwdGlvbiwgU2VydmxldEV4Y2VwdGlvbiB7XG4gICAgICAgIEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0ID0gKEh0dHBTZXJ2bGV0UmVxdWVzdCkgc2VydmxldFJlcXVlc3Q7XG4gICAgICAgIEZpbHRlckludm9jYXRpb24gZmkgPSBuZXcgRmlsdGVySW52b2NhdGlvbihzZXJ2bGV0UmVxdWVzdCwgc2VydmxldFJlc3BvbnNlLCBmaWx0ZXJDaGFpbik7XG4gICAgICAgIC8vT1BUSU9OU+ivt+axguebtOaOpeaUvuihjFxuICAgICAgICBpZihyZXF1ZXN0LmdldE1ldGhvZCgpLmVxdWFscyhIdHRwTWV0aG9kLk9QVElPTlMudG9TdHJpbmcoKSkpe1xuICAgICAgICAgICAgZmkuZ2V0Q2hhaW4oKS5kb0ZpbHRlcihmaS5nZXRSZXF1ZXN0KCksIGZpLmdldFJlc3BvbnNlKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8v55m95ZCN5Y2V6K+35rGC55u05o6l5pS+6KGMXG4gICAgICAgIFBhdGhNYXRjaGVyIHBhdGhNYXRjaGVyID0gbmV3IEFudFBhdGhNYXRjaGVyKCk7XG4gICAgICAgIGZvciAoU3RyaW5nIHBhdGggOiBpZ25vcmVVcmxzQ29uZmlnLmdldFVybHMoKSkge1xuICAgICAgICAgICAgaWYocGF0aE1hdGNoZXIubWF0Y2gocGF0aCxyZXF1ZXN0LmdldFJlcXVlc3RVUkkoKSkpe1xuICAgICAgICAgICAgICAgIGZpLmdldENoYWluKCkuZG9GaWx0ZXIoZmkuZ2V0UmVxdWVzdCgpLCBmaS5nZXRSZXNwb25zZSgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy/mraTlpITkvJrosIPnlKhBY2Nlc3NEZWNpc2lvbk1hbmFnZXLkuK3nmoRkZWNpZGXmlrnms5Xov5vooYzpibTmnYPmk43kvZxcbiAgICAgICAgSW50ZXJjZXB0b3JTdGF0dXNUb2tlbiB0b2tlbiA9IHN1cGVyLmJlZm9yZUludm9jYXRpb24oZmkpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmkuZ2V0Q2hhaW4oKS5kb0ZpbHRlcihmaS5nZXRSZXF1ZXN0KCksIGZpLmdldFJlc3BvbnNlKCkpO1xuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgc3VwZXIuYWZ0ZXJJbnZvY2F0aW9uKHRva2VuLCBudWxsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRlc3Ryb3koKSB7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIENsYXNzPD8+IGdldFNlY3VyZU9iamVjdENsYXNzKCkge1xuICAgICAgICByZXR1cm4gRmlsdGVySW52b2NhdGlvbi5jbGFzcztcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU2VjdXJpdHlNZXRhZGF0YVNvdXJjZSBvYnRhaW5TZWN1cml0eU1ldGFkYXRhU291cmNlKCkge1xuICAgICAgICByZXR1cm4gZHluYW1pY1NlY3VyaXR5TWV0YWRhdGFTb3VyY2U7XG4gICAgfVxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9zZXJ2aWNlL2ltcGwvVW1zQWRtaW5TZXJ2aWNlSW1wbC5qYXZhXG4uLi5cbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubWFwcGVyLlVtc1Jlc291cmNlTWFwcGVyO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tYXBwZXIuVW1zUm9sZU1hcHBlcjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuKjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuc2VydmljZS5VbXNBZG1pbkNhY2hlU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuc2VydmljZS5VbXNBZG1pblJvbGVSZWxhdGlvblNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLnNlcnZpY2UuVW1zQWRtaW5TZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5zZXJ2aWNlLlVtc1JvbGVTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5zZWN1cml0eS51dGlsLkp3dFRva2VuVXRpbDtcbmltcG9ydCBjb20uYm9vdC53ZWIuc2VjdXJpdHkudXRpbC5TcHJpbmdVdGlsO1xuaW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7XG5pbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5CZWFuVXRpbHM7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuaW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuY29udGV4dC5hbm5vdGF0aW9uLkxhenk7XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBTdHJpbmcgbG9naW4oU3RyaW5nIHVzZXJuYW1lLCBTdHJpbmcgcGFzc3dvcmQpIHtcbiAgICAgICAgU3RyaW5nIHRva2VuID0gbnVsbDtcbiAgICAgICAgLy/lr4bnoIHpnIDopoHlrqLmiLfnq6/liqDlr4blkI7kvKDpgJJcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIFVzZXJEZXRhaWxzIHVzZXJEZXRhaWxzID0gbG9hZFVzZXJCeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgICAgIGlmKCFwYXNzd29yZEVuY29kZXIubWF0Y2hlcyhwYXNzd29yZCx1c2VyRGV0YWlscy5nZXRQYXNzd29yZCgpKSl7XG4gICAgICAgICAgICAgICAgQXNzZXJ0cy5mYWlsKFwi5a+G56CB5LiN5q2j56GuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoIXVzZXJEZXRhaWxzLmlzRW5hYmxlZCgpKXtcbiAgICAgICAgICAgICAgICBBc3NlcnRzLmZhaWwoXCLluJDlj7flt7LooqvnpoHnlKgs6K+35LiO5Lq65Yqb566h55CG5ZGY5oiW57uP55CG6L+b6KGM5Y2P5ZWG77yBXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVXNlcm5hbWVQYXNzd29yZEF1dGhlbnRpY2F0aW9uVG9rZW4gYXV0aGVudGljYXRpb24gPSBuZXcgVXNlcm5hbWVQYXNzd29yZEF1dGhlbnRpY2F0aW9uVG9rZW4odXNlckRldGFpbHMsIG51bGwsIHVzZXJEZXRhaWxzLmdldEF1dGhvcml0aWVzKCkpO1xuICAgICAgICAgICAgU2VjdXJpdHlDb250ZXh0SG9sZGVyLmdldENvbnRleHQoKS5zZXRBdXRoZW50aWNhdGlvbihhdXRoZW50aWNhdGlvbik7XG4gICAgICAgICAgICB0b2tlbiA9IGp3dFRva2VuVXRpbC5nZW5lcmF0ZVRva2VuKHVzZXJEZXRhaWxzKTtcbiAgICAgICAgICAgIHVwZGF0ZUxvZ2luVGltZUJ5VXNlcm5hbWUodXNlcm5hbWUpO1xuICAgICAgICAgICAgaW5zZXJ0TG9naW5Mb2codXNlcm5hbWUpO1xuICAgICAgICB9IGNhdGNoIChBdXRoZW50aWNhdGlvbkV4Y2VwdGlvbiBlKSB7XG4gICAgICAgICAgICBMT0dHRVIud2FybihcIueZu+W9leW8guW4uDp7fVwiLCBlLmdldE1lc3NhZ2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH1cbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFVzZXJEZXRhaWxzIGxvYWRVc2VyQnlVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpe1xuICAgICAgICAvL+iOt+WPlueUqOaIt+S/oeaBr1xuICAgICAgICBVbXNBZG1pbiBhZG1pbiA9IGdldEFkbWluQnlVc2VybmFtZSh1c2VybmFtZSk7XG4gICAgICAgIGlmIChhZG1pbiAhPSBudWxsKSB7XG4gICAgICAgICAgICBMaXN0PFVtc1Jlc291cmNlPiByZXNvdXJjZUxpc3QgPSBnZXRSZXNvdXJjZUxpc3QoYWRtaW4uZ2V0SWQoKSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFkbWluVXNlckRldGFpbHMoYWRtaW4scmVzb3VyY2VMaXN0KTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgVXNlcm5hbWVOb3RGb3VuZEV4Y2VwdGlvbihcIueUqOaIt+WQjeaIluWvhueggemUmeivr1wiKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgVW1zQWRtaW5DYWNoZVNlcnZpY2UgZ2V0Q2FjaGVTZXJ2aWNlKCkge1xuICAgICAgICByZXR1cm4gU3ByaW5nVXRpbC5nZXRCZWFuKFVtc0FkbWluQ2FjaGVTZXJ2aWNlLmNsYXNzKTtcbiAgICB9XG59XG4uLi5cblBhdGg6IHdlYi9zcmMvdXRpbHMvc3VwcG9ydC5qc1xuaW1wb3J0IENvb2tpZXMgZnJvbSBcImpzLWNvb2tpZVwiO1xuY29uc3QgU3VwcG9ydEtleT0nc3VwcG9ydEtleSc7XG5leHBvcnQgZnVuY3Rpb24gZ2V0U3VwcG9ydCgpIHtcbiAgcmV0dXJuIENvb2tpZXMuZ2V0KFN1cHBvcnRLZXkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTdXBwb3J0KGlzU3VwcG9ydCkge1xuICByZXR1cm4gQ29va2llcy5zZXQoU3VwcG9ydEtleSwgaXNTdXBwb3J0LHsgZXhwaXJlczogMyB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29va2llKGtleSx2YWx1ZSxleHBpcmVzKSB7XG4gIHJldHVybiBDb29raWVzLnNldChrZXksIHZhbHVlLHsgZXhwaXJlczogZXhwaXJlc30pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb29raWUoa2V5KSB7XG4gIHJldHVybiBDb29raWVzLmdldChrZXkpXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9kb21haW4vQWRtaW5Vc2VyRGV0YWlscy5qYXZhXG4uLi5cblxuLyoqXG4gKiBTcHJpbmdTZWN1cml0eemcgOimgeeahOeUqOaIt+ivpuaDhVxuICovXG5wdWJsaWMgY2xhc3MgQWRtaW5Vc2VyRGV0YWlscyBpbXBsZW1lbnRzIFVzZXJEZXRhaWxzIHtcblxuICAgIEBHZXR0ZXJcbiAgICBwcml2YXRlIFVtc0FkbWluIHVtc0FkbWluO1xuICAgIHByaXZhdGUgTGlzdDxVbXNSZXNvdXJjZT4gcmVzb3VyY2VMaXN0O1xuICAgIHB1YmxpYyBBZG1pblVzZXJEZXRhaWxzKFVtc0FkbWluIHVtc0FkbWluLCBMaXN0PFVtc1Jlc291Li4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiODZkZDUzODAtNTFlZS00NmJlLWExODctMmVkZDRmMDRmMDgwO3Rvb2x1XzAxQ1g4M3g4RHRuc1dMalJtajRRcEdrQyI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy91bXMvbW9kZWwvVW1zQWRtaW4uamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWw7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5UYWJsZU5hbWU7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uSWRUeXBlO1xuXG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uVGFibGVJZDtcbmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTtcblxuaW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5hbm5vdGF0aW9uLkpzb25Gb3JtYXQ7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbDtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsUHJvcGVydHk7XG5pbXBvcnQgbG9tYm9rLkRhdGE7XG5pbXBvcnQgbG9tYm9rLkVxdWFsc0FuZEhhc2hDb2RlO1xuXG4vKipcbiAqIDxwPlxuICog5ZCO5Y+w55So5oi36KGoXG4gKiA8L3A+XG4gKi9cbkBEYXRhXG5ARXF1YWxzQW5kSGFzaENvZGUoY2FsbFN1cGVyID0gZmFsc2UpXG5AVGFibGVOYW1lKFwidW1zX2FkbWluXCIpXG5AQXBpTW9kZWwodmFsdWU9XCJVbXNBZG1pbuWvueixoVwiLCBkZXNjcmlwdGlvbj1cIuWQjuWPsOeUqOaIt+ihqFwiKVxucHVibGljIGNsYXNzIFVtc0FkbWluIGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRD0xTDtcblxuICAgIEBUYWJsZUlkKHZhbHVlID0gXCJpZFwiLCB0eXBlID0gSWRUeXBlLkFVVE8pXG4gICAgcHJpdmF0ZSBMb25nIGlkO1xuXG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG5cbiAgICBwcml2YXRlIFN0cmluZyBwYXNzd29yZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLlpLTlg49cIilcbiAgICBwcml2YXRlIFN0cmluZyBpY29uO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIumCrueusVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGVtYWlsO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuaYteensFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIG5pY2tOYW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuaAp+WIq1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIGdlbmRlcjtcblxuICAgIEBKc29uRm9ybWF0KHBhdHRlcm4gPSBcInl5eXktTU0tZGRcIiwgdGltZXpvbmUgPSBcIkdNVCs4XCIpXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIueUn+aXpVwiKVxuICAgIHByaXZhdGUgRGF0ZSBiaXJ0aGRheTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLlubTpvoRcIilcbiAgICBwcml2YXRlIEludGVnZXIgYWdlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuiBlOezu+aWueW8j1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIHBob25lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWutuW6reS9j+WdgFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5aSH5rOo5L+h5oGvXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgbm90ZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLliJvlu7rml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgY3JlYXRlVGltZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLmnIDlkI7nmbvlvZXml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgbG9naW5UaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuW4kOWPt+WQr+eUqOeKtuaAge+8mjAtPuemgeeUqO+8mzEtPuWQr+eUqFwiKVxuICAgIHByaXZhdGUgSW50ZWdlciBzdGF0dXM7XG4gICAgXG4gICAgLyogXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuinkuiJsklE77yaMS0+566h55CG5ZGYXCIpXG4gICAgcHJpdmF0ZSBMb25nIHJvbGVJZDtcbiAgICAqL1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy91bXMvdm8vVW1zQWRtaW5SZXNwb25zZS5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy52bztcblxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsUHJvcGVydHk7XG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBsb21ib2suU2V0dGVyO1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgVW1zQWRtaW5SZXNwb25zZSBleHRlbmRzIFVtc0FkbWluIHtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi56eR5a6k5ZCN56ewXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgZGVwdE5hbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuenkeWupOe8luWPt+S7o+eggVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGRlcHRDb2RlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLnp5HlrqTmj4/ov7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBkZXB0RGVzYztcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL2R0by9VbXNBZG1pblBhcmFtLmphdmFcbi4uLlxuXG4vKipcbiAqIOeUqOaIt+eZu+W9leWPguaVsFxuICovXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgVW1zQWRtaW5QYXJhbSB7XG4gICAgQE5vdEVtcHR5XG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIueUqOaIt+WQjVwiLCByZXF1aXJlZCA9IHRydWUpXG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlcm5hbWU7XG4gICAgQE5vdEVtcHR5XG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWvhueggVwiLCByZXF1aXJlZCA9IHRydWUpXG4gICAgcHJpdmF0ZSBTdHJpbmcgcGFzc3dvcmQ7XG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIueUqOaIt+WktOWDj1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIGljb247XG4gICAgQEVtYWlsXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIumCrueusVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGVtYWlsO1xuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLnlKjmiLfmmLXnp7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBuaWNrTmFtZTtcbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5oCn5YirXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgZ2VuZGVyO1xuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLnlJ/ml6VcIilcbiAgICBwcml2YXRlIExvY2FsRGF0ZSBiaXJ0aGRheTtcbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5aSH5rOoXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgbm90ZTtcbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5bm06b6EXCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIGFnZTtcbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi6IGU57O75pa55byPXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgcGhvbmU7XG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWutuW6reS9j+WdgFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGFkZHJlc3M7XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL21hcHBlci9VbXNBZG1pbk1hcHBlci5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tYXBwZXI7XG5cbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmNvcmUubWFwcGVyLkJhc2VNYXBwZXI7XG5pbXBvcnQgb3JnLmFwYWNoZS5pYmF0aXMuYW5ub3RhdGlvbnMuUGFyYW07XG5cbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKiA8cD5cbiAqIOWQjuWPsOeUqOaIt+ihqCBNYXBwZXIg5o6l5Y+jXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBtYWNyb1xuICogQHNpbmNlIDIwMjUtMDMtMjdcbiAqL1xucHVibGljIGludGVyZmFjZSBVbXNBZG1pbk1hcHBlciBleHRlbmRzIEJhc2VNYXBwZXI8VW1zQWRtaW4+IHtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlui1hOa6kOebuOWFs+eUqOaIt0lE5YiX6KGoXG4gICAgICovXG4gICAgTGlzdDxMb25nPiBnZXRBZG1pbklkTGlzdChAUGFyYW0oXCJyZXNvdXJjZUlkXCIpIExvbmcgcmVzb3VyY2VJZCk7XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL21vZGVsL1Vtc1JvbGUuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDlkI7lj7DnlKjmiLfop5LoibLooahcbiAqIDwvcD5cbiAqXG4gKiBAYXV0aG9yIG1hY3JvXG4gKiBAc2luY2UgMjAyNS0wMy0yN1xuICovXG5ARGF0YVxuQEVxdWFsc0FuZEhhc2hDb2RlKGNhbGxTdXBlciA9IGZhbHNlKVxuQFRhYmxlTmFtZShcInVtc19yb2xlXCIpXG5AQXBpTW9kZWwodmFsdWU9XCJVbXNSb2xl5a+56LGhXCIsIGRlc2NyaXB0aW9uPVwi5ZCO5Y+w55So5oi36KeS6Imy6KGoXCIpXG5wdWJsaWMgY2xhc3MgVW1zUm9sZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQ9MUw7XG5cbiAgICBAVGFibGVJZCh2YWx1ZSA9IFwiaWRcIiwgdHlwZSA9IElkVHlwZS5BVVRPKVxuICAgIHByaXZhdGUgTG9uZyBpZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLlkI3np7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuaPj+i/sFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIGRlc2NyaXB0aW9uO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWQjuWPsOeUqOaIt+aVsOmHj1wiKVxuICAgIHByaXZhdGUgSW50ZWdlciBhZG1pbkNvdW50O1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWIm+W7uuaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWQr+eUqOeKtuaAge+8mjAtPuemgeeUqO+8mzEtPuWQr+eUqFwiKVxuICAgIHByaXZhdGUgSW50ZWdlciBzdGF0dXM7XG5cbiAgICBwcml2YXRlIEludGVnZXIgc29ydDtcblxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9tb2RlbC9VbXNBZG1pbkxvZ2luTG9nLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1vZGVsO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uVGFibGVOYW1lO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLklkVHlwZTtcbmltcG9ydCBqYXZhLnV0aWwuRGF0ZTtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5UYWJsZUlkO1xuaW1wb3J0IGphdmEuaW8uU2VyaWFsaXphYmxlO1xuaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpTW9kZWw7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbFByb3BlcnR5O1xuaW1wb3J0IGxvbWJvay5EYXRhO1xuaW1wb3J0IGxvbWJvay5FcXVhbHNBbmRIYXNoQ29kZTtcblxuLyoqXG4gKiA8cD5cbiAqIOWQjuWPsOeUqOaIt+eZu+W9leaXpeW/l+ihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgbWFjcm9cbiAqIEBzaW5jZSAyMDI1LTAzLTI3XG4gKi9cbkBEYXRhXG5ARXF1YWxzQW5kSGFzaENvZGUoY2FsbFN1cGVyID0gZmFsc2UpXG5AVGFibGVOYW1lKFwidW1zX2FkbWluX2xvZ2luX2xvZ1wiKVxuQEFwaU1vZGVsKHZhbHVlPVwiVW1zQWRtaW5Mb2dpbkxvZ+WvueixoVwiLCBkZXNjcmlwdGlvbj1cIuWQjuWPsOeUqOaIt+eZu+W9leaXpeW/l+ihqFwiKVxucHVibGljIGNsYXNzIFVtc0FkbWluTG9naW5Mb2cgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEPTFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBwcml2YXRlIExvbmcgYWRtaW5JZDtcblxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG4gICAgcHJpdmF0ZSBTdHJpbmcgaXA7XG5cbiAgICBwcml2YXRlIFN0cmluZyBhZGRyZXNzO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIua1j+iniOWZqOeZu+W9leexu+Wei1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJBZ2VudDtcblxuXG59XG4uLi5cblBhdGg6IHNlcnZlci9zcWwvYmFzZS5zcWxcbi4uLlxuXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4tLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHVtc19hZG1pblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuRFJPUCBUQUJMRSBJRiBFWElTVFMgYHVtc19hZG1pbmA7XG5DUkVBVEUgVEFCTEUgYHVtc19hZG1pbmAgKFxuICBgaWRgIGJpZ2ludCgyMCkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4gIGB1c2VybmFtZWAgdmFyY2hhcig2NCkgREVGQVVMVCBOVUxMLFxuICBgcGFzc3dvcmRgIHRleHQgREVGQVVMVCBOVUxMLFxuICBgaWNvbmAgdmFyY2hhcig1MDApIERFRkFVTFQgTlVMTCBDT01NRU5UICflpLTlg48nLFxuICBgZW1haWxgIHZhcmNoYXIoMTAwKSBERUZBVUxUIE5VTEwgQ09NTUVOVCAn6YKu566xJyxcbiAgYG5pY2tfbmFtZWAgdmFyY2hhcigyMDApIERFRkFVTFQgTlVMTCBDT01NRU5UICfmmLXnp7AnLFxuICBgZ2VuZGVyYCB2YXJjaGFyKDE2KSBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5oCn5YirJyxcbiAgYGJpcnRoZGF5YCBEQVRFIERFRkFVTFQgTlVMTCBDT01NRU5UICfnlJ/ml6UnLFxuICBgYWdlYCBpbnQoMTApIERFRkFVTFQgTlVMTCBDT01NRU5UICflubTpvoQnLFxuICBgcGhvbmVgIHZhcmNoYXIoMTEpIERFRkFVTFQgTlVMTCBDT01NRU5UICfogZTns7vmlrnlvI8nLFxuICBgYWRkcmVzc2AgdmFyY2hhcig1MDApIERFRkFVTFQgTlVMTCBDT01NRU5UICflrrbluq3kvY/lnYAnLFxuICBgbm90ZWAgdmFyY2hhcig1MDApIERFRkFVTFQgTlVMTCBDT01NRU5UICfpg6jpl6jogYzkvY3nrYnkv6Hmga8nLFxuICBgY3JlYXRlX3RpbWVgIGRhdGV0aW1lIERFRkFVTFQgTlVMTCBDT01NRU5UICfliJvlu7rml7bpl7QnLFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy91bXMvbW9kZWwvVW1zTWVudS5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOWQjuWPsOiPnOWNleihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgbWFjcm9cbiAqIEBzaW5jZSAyMDI1LTAzLTI3XG4gKi9cbkBEYXRhXG5ARXF1YWxzQW5kSGFzaENvZGUoY2FsbFN1cGVyID0gZmFsc2UpXG5AVGFibGVOYW1lKFwidW1zX21lbnVcIilcbkBBcGlNb2RlbCh2YWx1ZT1cIlVtc01lbnXlr7nosaFcIiwgZGVzY3JpcHRpb249XCLlkI7lj7Doj5zljZXooahcIilcbnB1YmxpYyBjbGFzcyBVbXNNZW51IGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRD0xTDtcblxuICAgIEBUYWJsZUlkKHZhbHVlID0gXCJpZFwiLCB0eXBlID0gSWRUeXBlLkFVVE8pXG4gICAgcHJpdmF0ZSBMb25nIGlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIueItue6p0lEXCIpXG4gICAgcHJpdmF0ZSBMb25nIHBhcmVudElkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWIm+W7uuaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuiPnOWNleWQjeensFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIHRpdGxlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuiPnOWNlee6p+aVsFwiKVxuICAgIHByaXZhdGUgSW50ZWdlciBsZXZlbDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLoj5zljZXmjpLluo9cIilcbiAgICBwcml2YXRlIEludGVnZXIgc29ydDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLliY3nq6/lkI3np7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBuYW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkodmFsdWUgPSBcIuWJjeerr+Wbvuagh1wiKVxuICAgIHByaXZhdGUgU3RyaW5nIGljb247XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9tb2RlbC9VbXNBZG1pblJvbGVSZWxhdGlvbi5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbDtcblxuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLlRhYmxlTmFtZTtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5JZFR5cGU7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uVGFibGVJZDtcbmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsO1xuaW1wb3J0IGxvbWJvay5EYXRhO1xuaW1wb3J0IGxvbWJvay5FcXVhbHNBbmRIYXNoQ29kZTtcblxuLyoqXG4gKiA8cD5cbiAqIOWQjuWPsOeUqOaIt+WSjOinkuiJsuWFs+ezu+ihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgbWFjcm9cbiAqIEBzaW5jZSAyMDI1LTAzLTI3XG4gKi9cbkBEYXRhXG5ARXF1YWxzQW5kSGFzaENvZGUoY2FsbFN1cGVyID0gZmFsc2UpXG5AVGFibGVOYW1lKFwidW1zX2FkbWluX3JvbGVfcmVsYXRpb25cIilcbkBBcGlNb2RlbCh2YWx1ZT1cIlVtc0FkbWluUm9sZVJlbGF0aW9u5a+56LGhXCIsIGRlc2NyaXB0aW9uPVwi5ZCO5Y+w55So5oi35ZKM6KeS6Imy5YWz57O76KGoXCIpXG5wdWJsaWMgY2xhc3MgVW1zQWRtaW5Sb2xlUmVsYXRpb24gaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEPTFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBwcml2YXRlIExvbmcgYWRtaW5JZDtcblxuICAgIHByaXZhdGUgTG9uZyByb2xlSWQ7XG5cblxufVxuLi4uXG5QYXRoOiBvZmZpY2VfcGxhbi5zcWxcbi4uLlxuXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4tLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHVtc19hZG1pblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuRFJPUCBUQUJMRSBJRiBFWElTVFMgYHVtc19hZG1pbmA7XG5DUkVBVEUgVEFCTEUgYHVtc19hZG1pbmAgIChcbiAgYGlkYCBiaWdpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4gIGB1c2VybmFtZWAgdmFyY2hhcig2NCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgREVGQVVMVCBOVUxMLFxuICBgcGFzc3dvcmRgIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwsXG4gIGBpY29uYCB2YXJjaGFyKDUwMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+WktOWDjycsXG4gIGBlbWFpbGAgdmFyY2hhcigxMDApIENIQVJBQ1RFUiBTRVQgdXRmOG1iMyBDT0xMQVRFIHV0ZjhtYjNfZ2VuZXJhbF9jaSBOVUxMIERFRkFVTFQgTlVMTCBDT01NRU5UICfpgq7nrrEnLFxuICBgbmlja19uYW1lYCB2YXJjaGFyKDIwMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+aYteensCcsXG4uLi5cblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLS0gUmVjb3JkcyBvZiB1bXNfYWRtaW5cbi0tIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbklOU0VSVCBJTlRPIGB1bXNfYWRtaW5gIFZBTFVFUyAoMSwgJ2FkbWluJywgJyQyYSQxMCROWjVvN3IyRS5heVQyWm94Z2psSS5lSjZPRVlxakg3SU5SL0YubVhEYmpaSmk5SEYwWUNWRycsICdodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzAvODgvMDNiMGQzOTU4M2Y0ODIwNjc2OGE3NTM0ZTU1YmNwbmcucG5nJywgJ3Rlc3RAcXEuY29tJywgJ+euoeeQhuWRmCcsICfnlLcnLCAnMjAyNS0wMy0yNycsIDE4LCAnMTMwODg4ODY2NjYnLCAn5YyX5Lqs5biCJywgTlVMTCwgJzIwMjUtMDQtMjkgMDU6MDE6NTknLCAnMjAyNS0wNC0zMCAxMzowMzoxMycsIDEpO1xuSU5TRVJUIElOVE8gYHVtc19hZG1pbmAgVkFMVUVTICgyLCAndXNlcjEnLCAnJDJhJDEwJHhPcllBcmxqcTBWeUdKVmh0ckVaeXVnMmZGOTdXWTVoU0FyQTA4M3Iva3liZC5DYUJLQmR1JywgJ2h0dHBzOi8vY3ViZS5lbGVtZWNkbi5jb20vMC84OC8wM2IwZDM5NTgzZjQ4MjA2NzY4YTc1MzRlNTViY3BuZy5wbmcnLCAndXNlcjFAZXhhbXBsZS5jb20nLCAn5byg5LyfJywgJ+eUtycsICcxOTkwLTAxLTE1JywgMzUsICcxMzgwMDAwMDAwMScsICfljJfkuqzluILmnJ3pmLPljLrmnJvkuqzooZfpgZMnLCAn5oqA5pyv6YOo5ZCO56uv5byA5Y+R5bel56iL5biIJywgJzIwMjUtMDQtMjkgMDU6MDE6NTknLCAnMjAyNS0wNC0zMCAxMzowNzowMicsIDEpO1xuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vcmVzb3VyY2VzL21hcHBlci91bXMvVW1zQWRtaW5NYXBwZXIueG1sXG4uLi5cblxuICAgIDwhLS0g6YCa55So5p+l6K+i5pig5bCE57uT5p6cIC0tPlxuICAgIDxyZXN1bHRNYXAgaWQ9XCJCYXNlUmVzdWx0TWFwXCIgdHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pblwiPlxuICAgICAgICA8aWQgY29sdW1uPVwiaWRcIiBwcm9wZXJ0eT1cImlkXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJ1c2VybmFtZVwiIHByb3BlcnR5PVwidXNlcm5hbWVcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cInBhc3N3b3JkXCIgcHJvcGVydHk9XCJwYXNzd29yZFwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiaWNvblwiIHByb3BlcnR5PVwiaWNvblwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiZW1haWxcIiBwcm9wZXJ0eT1cImVtYWlsXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJuaWNrX25hbWVcIiBwcm9wZXJ0eT1cIm5pY2tOYW1lXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJnZW5kZXJcIiBwcm9wZXJ0eT1cImdlbmRlclwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwiYmlydGhkYXlcIiBwcm9wZXJ0eT1cImJpcnRoZGF5XCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJhZ2VcIiBwcm9wZXJ0eT1cImFnZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwicGhvbmVcIiBwcm9wZXJ0eT1cInBob25lXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJhZGRyZXNzXCIgcHJvcGVydHk9XCJhZGRyZXNzXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJub3RlXCIgcHJvcGVydHk9XCJub3RlXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJjcmVhdGVfdGltZVwiIHByb3BlcnR5PVwiY3JlYXRlVGltZVwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwibG9naW5fdGltZVwiIHByb3BlcnR5PVwibG9naW5UaW1lXCIgLz5cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL3NlcnZpY2UvaW1wbC9VbXNBZG1pblNlcnZpY2VJbXBsLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLnNlcnZpY2UuaW1wbDtcblxuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLmNvbGxlY3Rpb24uQ29sbFV0aWw7XG5pbXBvcnQgY24uaHV0b29sLmNvcmUudXRpbC5PYmplY3RVdGlsO1xuaW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuU3RyVXRpbDtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LkxhbWJkYVF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5pbXBsLlNlcnZpY2VJbXBsO1xuaW1wb3J0IGNvbS5ib290LndlYi5jb21tb24uZXhjZXB0aW9uLkFzc2VydHM7XG5pbXBvcnQgY29tLmJvb3Qud2ViLmRvbWFpbi5BZG1pblVzZXJEZXRhaWxzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5kdG8uVW1zQWRtaW5QYXJhbTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuZHRvLlVwZGF0ZUFkbWluUGFzc3dvcmRQYXJhbTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubWFwcGVyLlVtc0FkbWluTG9naW5Mb2dNYXBwZXI7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1hcHBlci5VbXNBZG1pbk1hcHBlcjtcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFVtc0FkbWluIHJlZ2lzdGVyKFVtc0FkbWluUGFyYW0gdW1zQWRtaW5QYXJhbSkge1xuICAgICAgICBVbXNBZG1pbiB1bXNBZG1pbiA9IG5ldyBVbXNBZG1pbigpO1xuICAgICAgICBCZWFuVXRpbHMuY29weVByb3BlcnRpZXModW1zQWRtaW5QYXJhbSwgdW1zQWRtaW4pO1xuICAgICAgICB1bXNBZG1pbi5zZXRDcmVhdGVUaW1lKG5ldyBEYXRlKCkpO1xuICAgICAgICB1bXNBZG1pbi5zZXRTdGF0dXMoMSk7XG4gICAgICAgIHVtc0FkbWluLnNldEljb24oXCJodHRwczovL2N1YmUuZWxlbWVjZG4uY29tLzAvODgvMDNiMGQzOTU4M2Y0ODIwNjc2OGE3NTM0ZTU1YmNwbmcucG5nXCIpO1xuICAgICAgICAvL+afpeivouaYr+WQpuacieebuOWQjOeUqOaIt+WQjeeahOeUqOaIt1xuICAgICAgICBRdWVyeVdyYXBwZXI8VW1zQWRtaW4+IHdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgICAgICAgd3JhcHBlci5sYW1iZGEoKS5lcShVbXNBZG1pbjo6Z2V0VXNlcm5hbWUsdW1zQWRtaW4uZ2V0VXNlcm5hbWUoKSk7XG4gICAgICAgIExpc3Q8VW1zQWRtaW4+IHVtc0FkbWluTGlzdCA9IGxpc3Qod3JhcHBlcik7XG4gICAgICAgIGlmICh1bXNBZG1pbkxpc3Quc2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgLy/lsIblr4bnoIHov5vooYzliqDlr4bmk43kvZxcbiAgICAgICAgU3RyaW5nIGVuY29kZVBhc3N3b3JkID0gcGFzc3dvcmRFbmNvZGVyLmVuY29kZSh1bXNBZG1pbi5nZXRQYXNzd29yZCgpKTtcbiAgICAgICAgdW1zQWRtaW4uc2V0UGFzc3dvcmQoZW5jb2RlUGFzc3dvcmQpO1xuICAgICAgICBsb25nIGFkbWluSWQgPSBiYXNlTWFwcGVyLmluc2VydCh1bXNBZG1pbik7XG4vLyAgICAgICAgTGlzdDxMb25nPiByb2xlSWRMaXN0ID0gcm9sZVNlcnZpY2UubGlzdCgpLnN0cmVhbSgpLm1hcChVbXNSb2xlOjpnZXRJZCkuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICAgICAgTGlzdDxMb25nPiByb2xlSWRMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIHJvbGVJZExpc3QuYWRkKDJMKTtcbiAgICAgICAgdGhpcy51cGRhdGVSb2xlKHVtc0FkbWluLmdldElkKCksIHJvbGVJZExpc3QpO1xuICAgICAgICByZXR1cm4gdW1zQWRtaW47XG4gICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxVbXNBZG1pbj4gbGlzdChTdHJpbmcga2V5d29yZCwgSW50ZWdlciBzdGF0dXMsIEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSkge1xuICAgICAgICBQYWdlPFVtc0FkbWluPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLHBhZ2VTaXplKTtcbiAgICAgICAgUXVlcnlXcmFwcGVyPFVtc0FkbWluPiB3cmFwcGVyID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICAgICAgIExhbWJkYVF1ZXJ5V3JhcHBlcjxVbXNBZG1pbj4gbGFtYmRhID0gd3JhcHBlci5sYW1iZGEoKTtcbiAgICAgICAgaWYoU3RyVXRpbC5pc05vdEVtcHR5KGtleXdvcmQpKXtcbiAgICAgICAgICAgIGxhbWJkYS5saWtlKFVtc0FkbWluOjpnZXRVc2VybmFtZSxrZXl3b3JkKTtcbiAgICAgICAgICAgIGxhbWJkYS5vcigpLmxpa2UoVW1zQWRtaW46OmdldE5pY2tOYW1lLGtleXdvcmQpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChPYmplY3RVdGlsLmlzTm90RW1wdHkoc3RhdHVzKSkge1xuICAgICAgICAgICAgbGFtYmRhLmVxKFVtc0FkbWluOjpnZXRTdGF0dXMsIHN0YXR1cyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcGFnZShwYWdlLHdyYXBwZXIpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBib29sZWFuIHVwZGF0ZShMb25nIGlkLCBVbXNBZG1pbiBhZG1pbikge1xuICAgICAgICBhZG1pbi5zZXRJZChpZCk7XG4gICAgICAgIFVtc0FkbWluIHJhd0FkbWluID0gZ2V0QnlJZChpZCk7XG4gICAgICAgIGlmKHJhd0FkbWluLmdldFBhc3N3b3JkKCkuZXF1YWxzKGFkbWluLmdldFBhc3N3b3JkKCkpKXtcbiAgICAgICAgICAgIC8v5LiO5Y6f5Yqg5a+G5a+G56CB55u45ZCM55qE5LiN6ZyA6KaB5L+u5pS5XG4gICAgICAgICAgICBhZG1pbi5zZXRQYXNzd29yZChudWxsKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL+S4juWOn+WKoOWvhuWvhueggeS4jeWQjOeahOmcgOimgeWKoOWvhuS/ruaUuVxuICAgICAgICAgICAgaWYoU3RyVXRpbC5pc0VtcHR5KGFkbWluLmdldFBhc3N3b3JkKCkpKXtcbiAgICAgICAgICAgICAgICBhZG1pbi5zZXRQYXNzd29yZChudWxsKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGFkbWluLnNldFBhc3N3b3JkKHBhc3N3b3JkRW5jb2Rlci5lbmNvZGUoYWRtaW4uZ2V0UGFzc3dvcmQoKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHVwZGF0ZUJ5SWQoYWRtaW4pO1xuICAgICAgICBnZXRDYWNoZVNlcnZpY2UoKS5kZWxBZG1pbihpZCk7XG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBib29sZWFuIGRlbGV0ZShMb25nIGlkKSB7XG4gICAgICAgIGdldENhY2hlU2VydmljZSgpLmRlbEFkbWluKGlkKTtcbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gcmVtb3ZlQnlJZChpZCk7XG4gICAgICAgIGdldENhY2hlU2VydmljZSgpLmRlbFJlc291cmNlTGlzdChpZCk7XG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvdW1zL3NlcnZpY2UvVW1zQWRtaW5TZXJ2aWNlLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLnNlcnZpY2U7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5JU2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuZHRvLlVtc0FkbWluUGFyYW07XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLmR0by5VcGRhdGVBZG1pblBhc3N3b3JkUGFyYW07XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMudW1zLm1vZGVsLlVtc0FkbWluO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNSZXNvdXJjZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zUm9sZTtcbmltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnNlY3VyaXR5LmNvcmUudXNlcmRldGFpbHMuVXNlckRldGFpbHM7XG5pbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay50cmFuc2FjdGlvbi5hbm5vdGF0aW9uLlRyYW5zYWN0aW9uYWw7XG5cbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcblxuLyoqXG4gKiDlkI7lj7DnrqHnkIblkZjnrqHnkIZTZXJ2aWNlXG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgVW1zQWRtaW5TZXJ2aWNlIGV4dGVuZHMgSVNlcnZpY2U8VW1zQWRtaW4+IHtcbiAgICAvKipcbiAgICAgKiDmoLnmja7nlKjmiLflkI3ojrflj5blkI7lj7DnrqHnkIblkZhcbiAgICAgKi9cbiAgICBVbXNBZG1pbiBnZXRBZG1pbkJ5VXNlcm5hbWUoU3RyaW5nIHVzZXJuYW1lKTtcblxuICAgIC8qKlxuICAgICAqIOazqOWGjOWKn+iDvVxuICAgICAqL1xuICAgIFVtc0FkbWluIHJlZ2lzdGVyKFVtc0FkbWluUGFyYW0gdW1zQWRtaW5QYXJhbSk7XG5cbiAgICAvKipcbiAgICAgKiDnmbvlvZXlip/og71cbiAgICAgKiBAcGFyYW0gdXNlcm5hbWUg55So5oi35ZCNXG4gICAgICogQHBhcmFtIHBhc3N3b3JkIOWvhueggVxuICAgICAqIEByZXR1cm4g55Sf5oiQ55qESldU55qEdG9rZW5cbiAgICAgKi9cbiAgICBTdHJpbmcgbG9naW4oU3RyaW5nIHVzZXJuYW1lLFN0cmluZyBwYXNzd29yZCk7XG5cbiAgICAvKipcbiAgICAgKiDliLfmlrB0b2tlbueahOWKn+iDvVxuICAgICAqIEBwYXJhbSBvbGRUb2tlbiDml6fnmoR0b2tlblxuICAgICAqL1xuICAgIFN0cmluZyByZWZyZXNoVG9rZW4oU3RyaW5nIG9sZFRva2VuKTtcblxuICAgIC8qKlxuICAgICAqIOagueaNrueUqOaIt+WQjeaIluaYteensOWIhumhteafpeivoueUqOaIt1xuICAgICAqL1xuICAgIFBhZ2U8VW1zQWRtaW4+IGxpc3QoU3RyaW5nIGtleXdvcmQsIEludGVnZXIgc3RhdHVzLCBJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0pO1xuXG4gICAgLyoqXG4gICAgICog5L+u5pS55oyH5a6a55So5oi35L+h5oGvXG4gICAgICovXG4gICAgYm9vbGVhbiB1cGRhdGUoTG9uZyBpZCwgVW1zQWRtaW4gYWRtaW4pO1xuXG4gICAgLyoqXG4gICAgICog5Yig6Zmk5oyH5a6a55So5oi3XG4gICAgICovXG4gICAgYm9vbGVhbiBkZWxldGUoTG9uZyBpZCk7XG5cbiAgICAvKipcbiAgICAgKiDkv67mlLnnlKjmiLfop5LoibLlhbPns7tcbiAgICAgKi9cbiAgICBAVHJhbnNhY3Rpb25hbFxuICAgIGludCB1cGRhdGVSb2xlKExvbmcgYWRtaW5JZCwgTGlzdDxMb25nPiByb2xlSWRzKTtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlueUqOaIt+WvueS6juinkuiJslxuICAgICAqL1xuICAgIExpc3Q8VW1zUm9sZT4gZ2V0Um9sZUxpc3QoTG9uZyBhZG1pbklkKTtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPluaMh+WumueUqOaIt+eahOWPr+iuv+mXrui1hOa6kFxuICAgICAqL1xuICAgIExpc3Q8VW1zUmVzb3VyY2U+IGdldFJlc291cmNlTGlzdChMb25nIGFkbWluSWQpO1xuXG4gICAgLyoqXG4gICAgICog5L+u5pS55a+G56CBXG4gICAgICovXG4gICAgaW50IHVwZGF0ZVBhc3N3b3JkKFVwZGF0ZUFkbWluUGFzc3dvcmRQYXJhbSB1cGRhdGVQYXNzd29yZFBhcmFtKTtcblxuICAgIC8qKlxuICAgICAqIOiOt+WPlueUqOaIt+S/oeaBr1xuICAgICAqL1xuICAgIFVzZXJEZXRhaWxzIGxvYWRVc2VyQnlVc2VybmFtZShTdHJpbmcgdXNlcm5hbWUpO1xuXG4gICAgLyoqXG4gICAgICog6I635Y+W57yT5a2Y5pyN5YqhXG4gICAgICovXG4gICAgVW1zQWRtaW5DYWNoZVNlcnZpY2UgZ2V0Q2FjaGVTZXJ2aWNlKCk7XG59XG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3MvdW1zL2FkbWluL2luZGV4LnZ1ZVxuLi4uXG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBuYW1lOiAnYWRtaW5MaXN0JyxcbiAgICBkYXRhKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGlzdFF1ZXJ5OiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KSxcbiAgICAgICAgbGlzdDogbnVsbCxcbiAgICAgICAgdG90YWw6IG51bGwsXG4gICAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIGFkbWluOiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWRtaW4pLFxuICAgICAgICBpc0VkaXQ6IGZhbHNlLFxuICAgICAgICBhbGxvY0RpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBhbGxvY1JvbGVJZHM6W10sXG4gICAgICAgIGFsbFJvbGVMaXN0OltdLFxuICAgICAgICBhbGxvY0FkbWluSWQ6bnVsbFxuICAgICAgfVxuICAgIH0sXG4gICAgY3JlYXRlZCgpIHtcbiAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgdGhpcy5nZXRBbGxSb2xlTGlzdCgpO1xuICAgIH0sXG4gICAgZmlsdGVyczoge1xuICAgICAgZm9ybWF0RGF0ZVRpbWUodGltZSkge1xuICAgICAgICBpZiAodGltZSA9PSBudWxsIHx8IHRpbWUgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuICdOL0EnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tOnNzJylcbiAgICAgIH1cbiAgICB9LFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy91bXMvY29udHJvbGxlci9VbXNBZG1pbkNvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLojrflj5blvZPliY3nmbvlvZXnlKjmiLfkv6Hmga9cIilcbiAgICBAUmVxdWVzdE1hcHBpbmcodmFsdWUgPSBcIi9pbmZvXCIsIG1ldGhvZCA9IFJlcXVlc3RNZXRob2QuR0VUKVxuICAgIEBSZXNwb25zZUJvZHlcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0IGdldEFkbWluSW5mbyhQcmluY2lwYWwgcHJpbmNpcGFsKSB7XG4gICAgICAgIGlmIChwcmluY2lwYWwgPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC51bmF1dGhvcml6ZWQobnVsbCk7XG4gICAgICAgIH1cbiAgICAgICAgU3RyaW5nIHVzZXJuYW1lID0gcHJpbmNpcGFsLmdldE5hbWUoKTtcbiAgICAgICAgVW1zQWRtaW4gdW1zQWRtaW4gPSBhZG1pblNlcnZpY2UuZ2V0QWRtaW5CeVVzZXJuYW1lKHVzZXJuYW1lKTtcbiAgICAgICAgTWFwPFN0cmluZywgT2JqZWN0PiBkYXRhID0gbmV3IEhhc2hNYXA8PigpO1xuICAgICAgICBkYXRhLnB1dChcInVzZXJuYW1lXCIsIHVtc0FkbWluLmdldFVzZXJuYW1lKCkpO1xuICAgICAgICBkYXRhLnB1dChcIm1lbnVzXCIsIHJvbGVTZXJ2aWNlLmdldE1lbnVMaXN0KHVtc0FkbWluLmdldElkKCkpKTtcbiAgICAgICAgZGF0YS5wdXQoXCJpY29uXCIsIHVtc0FkbWluLmdldEljb24oKSk7XG4gICAgICAgIExpc3Q8VW1zUm9sZT4gcm9sZUxpc3QgPSBhZG1pblNlcnZpY2UuZ2V0Um9sZUxpc3QodW1zQWRtaW4uZ2V0SWQoKSk7XG4gICAgICAgIGlmIChDb2xsVXRpbC5pc05vdEVtcHR5KHJvbGVMaXN0KSkge1xuICAgICAgICAgICAgTGlzdDxTdHJpbmc+IHJvbGVzID0gcm9sZUxpc3Quc3RyZWFtKCkubWFwKFVtc1JvbGU6OmdldE5hbWUpLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSk7XG4gICAgICAgICAgICBkYXRhLnB1dChcInJvbGVzXCIsIHJvbGVzKTtcbiAgICAgICAgfVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5p+l6K+i5omA5pyJ55So5oi35YiX6KGoXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvbGlzdEFsbFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TGlzdDxVbXNBZG1pbj4+IGxpc3RBbGwoKSB7XG4gICAgICAgIExpc3Q8VW1zQWRtaW4+IGFkbWluTGlzdCA9IGFkbWluU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8VW1zQWRtaW4+KCkubGFtYmRhKCkubmUoVW1zQWRtaW46OmdldElkLCAxKSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKGFkbWluTGlzdCk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi6I635Y+W5b2T5YmN55m75b2V6K+m57uG5L+h5oGvXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvdXNlckluZm9cIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PFVtc0FkbWluPiBnZXRVc2VySW5mbygpIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKFNlY3VyaXR5VXRpbHMuZ2V0VXNlcigpKTtcbiAgICB9XG5cbn1cblxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvZG9tYWluL0FkbWluVXNlckRldGFpbHMuamF2YVxuLi4uXG5cbi8qKlxuICogU3ByaW5nU2VjdXJpdHnpnIDopoHnmoTnlKjmiLfor6bmg4VcbiAqL1xucHVibGljIGNsYXNzIEFkbWluVXNlckRldGFpbHMgaW1wbGVtZW50cyBVc2VyRGV0YWlscyB7XG5cbiAgICBAR2V0dGVyXG4gICAgcHJpdmF0ZSBVbXNBZG1pbiB1bXNBZG1pbjtcbiAgICBwcml2YXRlIExpc3Q8VW1zUmVzb3VyY2U+IHJlc291cmNlTGlzdDtcbiAgICBwdWJsaWMgQWRtaW5Vc2VyRGV0YWlscyhVbXNBZG1pbiB1bXNBZG1pbiwgTGlzdDxVbXNSZXNvdXJjZT4gcmVzb3VyY2VMaXN0KSB7XG4gICAgICAgIHRoaXMudW1zQWRtaW4gPSB1bXNBZG1pbjtcbiAgICAgICAgdGhpcy5yZXNvdXJjZUxpc3QgPSByZXNvdXJjZUxpc3Q7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIENvbGxlY3Rpb248PyBleHRlbmRzIEdyYW50ZWRBdXRob3JpdHk+IGdldEF1dGhvcml0aWVzKCkge1xuICAgICAgICAvL+i/lOWbnuW9k+WJjeeUqOaIt+eahOinkuiJslxuICAgICAgICByZXR1cm4gcmVzb3VyY2VMaXN0LnN0cmVhbSgpXG4gICAgICAgICAgICAgICAgLm1hcChyb2xlIC0+bmV3IFNpbXBsZUdyYW50ZWRBdXRob3JpdHkocm9sZS5nZXRJZCgpK1wiOlwiK3JvbGUuZ2V0TmFtZSgpKSlcbiAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU3RyaW5nIGdldFBhc3N3b3JkKCkge1xuICAgICAgICByZXR1cm4gdW1zQWRtaW4uZ2V0UGFzc3dvcmQoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU3RyaW5nIGdldFVzZXJuYW1lKCkge1xuICAgICAgICByZXR1cm4gdW1zQWRtaW4uZ2V0VXNlcm5hbWUoKTtcbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgYm9vbGVhbiBpc0FjY291bnROb25FeHBpcmVkKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9zZXJ2aWNlL2ltcGwvVW1zQWRtaW5DYWNoZVNlcnZpY2VJbXBsLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZGVsUmVzb3VyY2VMaXN0QnlSZXNvdXJjZShMb25nIHJlc291cmNlSWQpIHtcbiAgICAgICAgTGlzdDxMb25nPiBhZG1pbklkTGlzdCA9IGFkbWluTWFwcGVyLmdldEFkbWluSWRMaXN0KHJlc291cmNlSWQpO1xuICAgICAgICBpZiAoQ29sbFV0aWwuaXNOb3RFbXB0eShhZG1pbklkTGlzdCkpIHtcbiAgICAgICAgICAgIFN0cmluZyBrZXlQcmVmaXggPSBSRURJU19EQVRBQkFTRSArIFwiOlwiICsgUkVESVNfS0VZX1JFU09VUkNFX0xJU1QgKyBcIjpcIjtcbiAgICAgICAgICAgIExpc3Q8U3RyaW5nPiBrZXlzID0gYWRtaW5JZExpc3Quc3RyZWFtKCkubWFwKGFkbWluSWQgLT4ga2V5UHJlZml4ICsgYWRtaW5JZCkuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgICAgICAgICAgIHJlZGlzU2VydmljZS5kZWwoa2V5cyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgVW1zQWRtaW4gZ2V0QWRtaW4oU3RyaW5nIHVzZXJuYW1lKSB7XG4gICAgICAgIFN0cmluZyBrZXkgPSBSRURJU19EQS4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjBmMGIzZTQ2LTJkZTUtNDgyMi05Mjg1LWNmODBmYWIwMDgyNzt0b29sdV8wMVVpem1YNmNraVozeU5DUG5TaWpjSnYiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvc2VjdXJpdHkvdXRpbC9TZWN1cml0eVV0aWxzLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgMVx0cGFja2FnZSBjb20uYm9vdC53ZWIuc2VjdXJpdHkudXRpbDtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBjb20uYm9vdC53ZWIuZG9tYWluLkFkbWluVXNlckRldGFpbHM7XG4gICAgIDRcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG4gICAgIDVcdGltcG9ydCBsb21ib2suZXhwZXJpbWVudGFsLlV0aWxpdHlDbGFzcztcbiAgICAgNlx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS5BdXRoZW50aWNhdGlvbjtcbiAgICAgN1x0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2VjdXJpdHkuY29yZS5jb250ZXh0LlNlY3VyaXR5Q29udGV4dEhvbGRlcjtcbiAgICAgOFx0XG4gICAgIDlcdEBVdGlsaXR5Q2xhc3NcbiAgICAxMFx0cHVibGljIGNsYXNzIFNlY3VyaXR5VXRpbHMge1xuICAgIDExXHRcbiAgICAxMlx0ICAgIC8qKlxuICAgIDEzXHQgICAgICog6I635Y+WQXV0aGVudGljYXRpb25cbiAgICAxNFx0ICAgICAqL1xuICAgIDE1XHQgICAgcHVibGljIEF1dGhlbnRpY2F0aW9uIGdldEF1dGhlbnRpY2F0aW9uKCkge1xuICAgIDE2XHQgICAgICAgIHJldHVybiBTZWN1cml0eUNvbnRleHRIb2xkZXIuZ2V0Q29udGV4dCgpLmdldEF1dGhlbnRpY2F0aW9uKCk7XG4gICAgMTdcdCAgICB9XG4gICAgMThcdFxuICAgIDE5XHQgICAgLyoqXG4gICAgMjBcdCAgICAgKiDojrflj5bnlKjmiLdcbiAgICAyMVx0ICAgICAqL1xuICAgIDIyXHQgICAgcHVibGljIFVtc0FkbWluIGdldFVzZXIoQXV0aGVudGljYXRpb24gYXV0aGVudGljYXRpb24pIHtcbiAgICAyM1x0ICAgICAgICBPYmplY3QgcHJpbmNpcGFsID0gYXV0aGVudGljYXRpb24uZ2V0UHJpbmNpcGFsKCk7XG4gICAgMjRcdCAgICAgICAgaWYgKHByaW5jaXBhbCBpbnN0YW5jZW9mIEFkbWluVXNlckRldGFpbHMpIHtcbiAgICAyNVx0ICAgICAgICAgICAgQWRtaW5Vc2VyRGV0YWlscyBhZG1pblVzZXJEZXRhaWxzID0gIChBZG1pblVzZXJEZXRhaWxzKSBwcmluY2lwYWw7XG4gICAgMjZcdCAgICAgICAgICAgIHJldHVybiBhZG1pblVzZXJEZXRhaWxzLmdldFVtc0FkbWluKCk7XG4gICAgMjdcdCAgICAgICAgfVxuICAgIDI4XHQgICAgICAgIHJldHVybiBudWxsO1xuICAgIDI5XHQgICAgfVxuICAgIDMwXHRcbiAgICAzMVx0ICAgIC8qKlxuICAgIDMyXHQgICAgICog6I635Y+W55So5oi3XG4gICAgMzNcdCAgICAgKi9cbiAgICAzNFx0ICAgIHB1YmxpYyBVbXNBZG1pbiBnZXRVc2VyKCkge1xuICAgIDM1XHQgICAgICAgIEF1dGhlbnRpY2F0aW9uIGF1dGhlbnRpY2F0aW9uID0gZ2V0QXV0aGVudGljYXRpb24oKTtcbiAgICAzNlx0ICAgICAgICBpZiAoYXV0aGVudGljYXRpb24gPT0gbnVsbCkge1xuICAgIDM3XHQgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAzOFx0ICAgICAgICB9XG4gICAgMzlcdCAgICAgICAgcmV0dXJuIGdldFVzZXIoYXV0aGVudGljYXRpb24pO1xuICAgIDQwXHQgICAgfVxuICAgIDQxXHRcbiAgICA0Mlx0ICAgIC8qKlxuICAgIDQzXHQgICAgICog6I635Y+W5b2T5YmN55So5oi3SURcbiAgICA0NFx0ICAgICAqL1xuICAgIDQ1XHQgICAgcHVibGljIExvbmcgZ2V0Q3VycmVudFVzZXJJZCgpIHtcbiAgICA0Nlx0ICAgICAgICBVbXNBZG1pbiBhZG1pbiA9IGdldFVzZXIoKTtcbiAgICA0N1x0ICAgICAgICByZXR1cm4gYWRtaW4gIT0gbnVsbCA/IGFkbWluLmdldElkKCkgOiBudWxsO1xuICAgIDQ4XHQgICAgfVxuICAgIDQ5XHRcbiAgICA1MFx0fVxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIyYmJkMWRkNC1mNDY3LTQwMjMtODIyNy04NGQxYjg2ZWJlOWE7dG9vbHVfMDFOZUZCRExpejJ5ZzRoc3AzSmN4VjI2Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1NjaGVkdWxlQ29udHJvbGxlci5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqCDliY3nq6/mjqfliLblmahcbiAqIDwvcD5cbiAqL1xuQFJlc3RDb250cm9sbGVyXG5AUmVxdWVzdE1hcHBpbmcoXCIvd2ViL3NjaGVkdWxlXCIpXG5wdWJsaWMgY2xhc3MgU2NoZWR1bGVDb250cm9sbGVyIHtcbiAgICBAQXV0b3dpcmVkXG4gICAgcHJpdmF0ZSBTY2hlZHVsZVNlcnZpY2Ugc2NoZWR1bGVTZXJ2aWNlO1xuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IGxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zZWFyY2gocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi55So5oi35pel56iL5p+l6K+iIC0g5pm66IO95o6S5bqPXCIpXG4gICAgQEdldE1hcHBpbmcoXCIvdXNlci9zbWFydFNvcnRcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IHVzZXJTbWFydFNvcnQoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInBhZ2VOdW1cIiwgZGVmYXVsdFZhbHVlID0gXCIxXCIpIEludGVnZXIgcGFnZU51bSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzZWFyY2hLZXlcIiwgcmVxdWlyZWQgPSBmYWxzZSkgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBMb25nIHVzZXJJZCA9IFNlY3VyaXR5VXRpbHMuZ2V0Q3VycmVudFVzZXJJZCgpO1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNjaGVkdWxlUGFnZSA9IHNjaGVkdWxlU2VydmljZS5zbWFydFNvcnRVc2VyKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIHVzZXJJZCk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbih2YWx1ZSA9IFwi5Yib5bu65pel56iL5a6J5o6SXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL2NyZWF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBTY2hlZHVsZSBzY2hlZHVsZSkge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3Moc2NoZWR1bGVTZXJ2aWNlLmNyZWF0ZShzY2hlZHVsZSkpO1xuICAgIH1cbi4uLlxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuagueaNruadoeS7tuafpeivouWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL3VzZXIvbGlzdFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxTY2hlZHVsZVZvPj4gdXNlckxpc3QoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlTnVtXCIsIGRlZmF1bHRWYWx1ZSA9IFwiMVwiKSBJbnRlZ2VyIHBhZ2VOdW0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInNlYXJjaEtleVwiLCByZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gc2NoZWR1bGVQYWdlID0gc2NoZWR1bGVTZXJ2aWNlLnNlYXJjaFVzZXIocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgU2VjdXJpdHlVdGlscy5nZXRVc2VyKCkuZ2V0SWQoKSk7XG5cbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKENvbW1vblBhZ2UucmVzdFBhZ2Uoc2NoZWR1bGVQYWdlKSk7XG4gICAgfVxuICAgIFxuICAgIEBBcGlPcGVyYXRpb24oXCLmjInmnIjku73mn6Xor6Lml6XnqIvlronmjpJcIilcbiAgICBAR2V0TWFwcGluZyhcIi9tb250aC97eWVhck1vbnRofVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8TWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4+IGdldFNjaGVkdWxlc0J5TW9udGgoQFBhdGhWYXJpYWJsZSBTdHJpbmcgeWVhck1vbnRoKSB7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhzY2hlZHVsZVNlcnZpY2UuZ2V0U2NoZWR1bGVzQnlNb250aCh5ZWFyTW9udGgpKTtcbiAgICB9XG4gICAgXG4gICAgQEFwaU9wZXJhdGlvbihcIuaMieaciOS7veafpeivouWfuuS6jueUqOaIt+adg+mZkOeahOaXpeeoi+WuieaOklwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL21vbnRoL3VzZXIve3llYXJNb250aH1cIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihAUGF0aFZhcmlhYmxlIFN0cmluZyB5ZWFyTW9udGgpIHtcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN55So5oi3XG4gICAgICAgIExvbmcgdXNlcklkID0gU2VjdXJpdHlVdGlscy5nZXRVc2VyKCkuZ2V0SWQoKTtcbiAgICAgICAgLy8g5Yik5pat55So5oi355qE6KeS6Imy77yM5LuOdW1zX2FkbWluX3JvbGVfcmVsYXRpb27ooajor7vlj5bvvIxyb2xlSWQ9MeihqOekuueuoeeQhuWRmFxuICAgICAgICBib29sZWFuIGlzQWRtaW4gPSBmYWxzZTtcbiAgICAgICAgLy8g5q2k5aSE5pS55Li65qC55o2u55So5oi3SUTnm7TmjqXliKTmlq3mmK/lkKbkuLox5Y+355So5oi377yI566h55CG5ZGY77yJXG4gICAgICAgIGlmICh1c2VySWQgIT0gbnVsbCAmJiB1c2VySWQgPT0gMSkge1xuICAgICAgICAgICAgaXNBZG1pbiA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhzY2hlZHVsZVNlcnZpY2UuZ2V0U2NoZWR1bGVzQnlNb250aEFuZFVzZXIoeWVhck1vbnRoLCB1c2VySWQsIGlzQWRtaW4pKTtcbiAgICB9XG59XG5cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuICAgIFxuICAgIDwhLS0g5LyY6ZuF55qE5pel56iL5pe26Ze06L20IC0tPlxuICAgIDxlbC1jYXJkIHNoYWRvdz1cImhvdmVyXCIgY2xhc3M9XCJzY2hlZHVsZXItY29udGFpbmVyXCIgdi1sb2FkaW5nPVwibGlzdExvYWRpbmdcIj5cbiAgICAgIDxkaXYgdi1pZj1cIk9iamVjdC5rZXlzKGdyb3VwZWRTY2hlZHVsZXMpLmxlbmd0aCA9PT0gMFwiIGNsYXNzPVwiZW1wdHktc3RhdGVcIj5cbiAgICAgICAgPGVsLWVtcHR5IGRlc2NyaXB0aW9uPVwi5pqC5peg5pel56iL5pWw5o2uXCI+XG4gICAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwicHJpbWFyeVwiIEBjbGljaz1cImhhbmRsZUFkZFwiIHNpemU9XCJzbWFsbFwiIHNsb3Q9XCJkZXNjcmlwdGlvblwiPueri+WNs+WIm+W7ujwvZWwtYnV0dG9uPlxuICAgICAgICA8L2VsLWVtcHR5PlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IHYtZWxzZSBjbGFzcz1cInNjaGVkdWxlci13cmFwcGVyXCI+XG4gICAgICAgIDxkaXYgdi1mb3I9XCIoc2NoZWR1bGVzLCBkYXRlKSBpbiBncm91cGVkU2NoZWR1bGVzXCIgOmtleT1cImRhdGVcIiBjbGFzcz1cImRheS1ncm91cFwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktaGVhZGVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LWxlZnRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1udW1iZXJcIj57eyBnZXREYXlOdW1iZXIoZGF0ZSkgfX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS13ZWVrZGF5XCI+e3sgZ2V0RGF5V2Vla2RheShkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LWRhdGVcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGUtdGFnXCI+e3sgZ2V0RGF0ZVRhZyhkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS1mdWxsXCI+e3sgZm9ybWF0RGF5RGF0ZShkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVsaW5lLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVsaW5lLXRyYWNrXCI+PC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgdi1mb3I9XCJzY2hlZHVsZSBpbiBzY2hlZHVsZXNcIiA6a2V5PVwic2NoZWR1bGUuaWRcIiBjbGFzcz1cInRpbWVsaW5lLWV2ZW50XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC10aW1lXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+e3sgZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpIH19PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1hcmtlclwiIDpzdHlsZT1cIntiYWNrZ3JvdW5kQ29sb3I6IGdldFRpbWVTbG90Q29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuZG90Q29sb3J9XCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImV2ZW50LWNvbm5lY3RvclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb25uZWN0b3ItZG90XCIgOmNsYXNzPVwieydjb25mbGljdC1kb3QnOiBzY2hlZHVsZS5oYXNDb25mbGljdH1cIiA6c3R5bGU9XCJ7YmFja2dyb3VuZENvbG9yOiBnZXRUaW1lU2xvdENvbG9ycyhmb3JtYXRUaW1lKHNjaGVkdWxlLnN0YXJ0VGltZSkpLmRvdENvbG9yfVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb25uZWN0b3ItbGluZVwiPjwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC1jYXJkXCIgXG4gICAgICAgICAgICAgICAgOmNsYXNzPVwie1xuICAgICAgICAgICAgICAgICAgJ2NvbmZsaWN0LWNhcmQnOiBzY2hlZHVsZS5oYXNDb25mbGljdCxcbiAgICAgICAgICAgICAgICAgICdvdmVyZHVlLWNhcmQnOiBpc092ZXJkdWUoc2NoZWR1bGUpXG4gICAgICAgICAgICAgICAgfVwiXG4gICAgICAgICAgICAgICAgOnN0eWxlPVwie1xuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAhaXNPdmVyZHVlKHNjaGVkdWxlKSA/IGdldFRpbWVTbG90Q29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuYmFja2dyb3VuZENvbG9yIDogJyNmNWY3ZmEnLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyTGVmdENvbG9yOiBzY2hlZHVsZS5oYXNDb25mbGljdCA/ICcjRjU2QzZDJyA6IChpc092ZXJkdWUoc2NoZWR1bGUpID8gJyNkY2RmZTYnIDogZ2V0VGltZVNsb3RDb2xvcnMoZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpKS5ib3JkZXJDb2xvcilcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVDbGlja1Rhc2tDYXJkKHNjaGVkdWxlKVwiPlxuICAgICAgICAgICAgICAgIDxlbC10YWdcbiAgICAgICAgICAgICAgICAgIDp0eXBlPVwiZ2V0U3RhdHVzVGFnVHlwZShzY2hlZHVsZS5zdGF0dXMpXCJcbiAgICAgICAgICAgICAgICAgIHNpemU9XCJtaW5pXCJcbiAgICAgICAgICAgICAgICAgIGVmZmVjdD1cImRhcmtcIlxuICAgICAgICAgICAgICAgICAgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMTBweDsgbGVmdDogMTBweDsgei1pbmRleDogMztcIiBcbiAgICAgICAgICAgICAgICAgIHYtaWY9XCJzY2hlZHVsZS5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiBzY2hlZHVsZS5zdGF0dXMgIT09IG51bGxcIj5cbiAgICAgICAgICAgICAgICAgIHt7IHNjaGVkdWxlLnN0YXR1cyB8IGZvcm1hdFN0YXR1cyB9fVxuICAgICAgICAgICAgICAgIDwvZWwtdGFnPlxuLi4uXG4gICAgICA8L3NwYW4+XG4gICAgPC9lbC1kaWFsb2c+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cbjxzY3JpcHQ+XG4gIGltcG9ydCB7ZmV0Y2hTY2hlZHVsZUxpc3QsIGZldGNoU2NoZWR1bGVTbWFydFNvcnQsIGNyZWF0ZVNjaGVkdWxlLHVwZGF0ZVNjaGVkdWxlLGRlbGV0ZVNjaGVkdWxlLGZldGNoQWxsVGFza0xpc3QsZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzLGZldGNoVGFza0luZm8sZmV0Y2hDb25mbGljdFNjaGVkdWxlTGlzdCx1cGRhdGVUYXNrU3RhdHVzLHNldFRhc2tSZW1pbmRlcn0gZnJvbSAnQC9hcGkvYXBpJztcbiAgaW1wb3J0IEpzQmFyY29kZSBmcm9tICdqc2JhcmNvZGUnO1xuICBpbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnO1xuICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG5cbiAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgICBwYWdlTnVtOiAxLFxuICAgIHBhZ2VTaXplOiAxMCxcbiAgICBzZWFyY2hLZXk6IG51bGwsXG4gICAgdHlwZTogbnVsbCxcbiAgfTtcbiAgY29uc3QgZGVmYXVsdEFkbWluID0ge1xuICAgIGlkOiBudWxsLFxuICAgIHRhc2tJZDogbnVsbCxcbiAgICBzdGFydFRpbWU6IG51bGwsXG4gICAgZW5kVGltZTogbnVsbCxcbiAgICByZW1pbmRlclRpbWU6IG51bGwsXG4gIH07XG4uLi5cbiAgICBjb21wdXRlZDoge1xuICAgICAgLy8g5oyJ5pel5pyf5YiG57uE5pel56iL5a6J5o6SXG4gICAgICBncm91cGVkU2NoZWR1bGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMubGlzdCkgcmV0dXJuIHt9O1xuICAgICAgICBcbiAgICAgICAgLy8g5Yib5bu65Z+65LqO5pel5pyf55qE5YiG57uEXG4gICAgICAgIGNvbnN0IGdyb3VwcyA9IHt9O1xuICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaChzY2hlZHVsZSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0ZSA9IHRoaXMuZ2V0RGF0ZVN0cihzY2hlZHVsZS5zdGFydFRpbWUpO1xuICAgICAgICAgIGlmICghZ3JvdXBzW2RhdGVdKSB7XG4gICAgICAgICAgICBncm91cHNbZGF0ZV0gPSBbXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZ3JvdXBzW2RhdGVdLnB1c2goc2NoZWR1bGUpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIOaMieaXpeacn+aOkuW6j1xuICAgICAgICBjb25zdCBzb3J0ZWREYXRlcyA9IE9iamVjdC5rZXlzKGdyb3Vwcykuc29ydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcbiAgICAgICAgXG4gICAgICAgIHNvcnRlZERhdGVzLmZvckVhY2goZGF0ZSA9PiB7XG4gICAgICAgICAgLy8g5oyJ5byA5aeL5pe26Ze05o6S5bqP5q+P5LiA5aSp55qE5pel56iLXG4gICAgICAgICAgY29uc3Qgc29ydGVkID0gZ3JvdXBzW2RhdGVdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShhLnN0YXJ0VGltZSkgLSBuZXcgRGF0ZShiLnN0YXJ0VGltZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVzdWx0W2RhdGVdID0gc29ydGVkO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG4gICAgfSxcbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5pel56iL5a6J5o6S6KGoIOacjeWKoeexu1xuICogPC9wPlxuICovXG5wdWJsaWMgaW50ZXJmYWNlIFNjaGVkdWxlU2VydmljZSBleHRlbmRzIElTZXJ2aWNlPFNjaGVkdWxlPiB7XG5cbiAgICBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpO1xuXG4gICAgQm9vbGVhbiBjcmVhdGUoU2NoZWR1bGUgc2NoZWR1bGUpO1xuXG4gICAgYm9vbGVhbiB1cGRhdGVTY2hlZHVsZShTY2hlZHVsZSBzY2hlZHVsZSk7XG5cbiAgICBMaXN0PFRhc2tWbz4gY29uZmxpY3RMaXN0KExvbmcgaWQsIExpc3Q8TG9uZz4gc2NoZWR1bGVJZHMpO1xuXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBpZCk7XG4gICAgXG4gICAgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gZ2V0U2NoZWR1bGVzQnlNb250aChTdHJpbmcgeWVhck1vbnRoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiDmoLnmja7mnIjku73lkoznlKjmiLfmnYPpmZDojrflj5bml6XnqIvlronmjpJcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geWVhck1vbnRoIOW5tOaciO+8jOagvOW8j+S4uu+8mnl5eXktTU1cbiAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lE77yM5aaC5p6c5piv566h55CG5ZGY5YiZ6I635Y+W5omA5pyJ5pel56iL77yM5ZCm5YiZ5Y+q6I635Y+W5LiO55So5oi355u45YWz55qE5pel56iLXG4gICAgICogQHBhcmFtIGlzQWRtaW4g5piv5ZCm5Li6566h55CG5ZGYXG4gICAgICogQHJldHVybiDml6XmnJ/kuLrplK7vvIzml6XnqIvliJfooajkuLrlgLznmoTmmKDlsIRcbiAgICAgKi9cbiAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCwgYm9vbGVhbiBpc0FkbWluKTtcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXG4uLi5cbiAgICBcbiAgICA8IS0tIOaXpeeoi+aXtumXtOi9tCAtLT5cbiAgICA8ZWwtY2FyZCBzaGFkb3c9XCJob3ZlclwiIGNsYXNzPVwic2NoZWR1bGVyLWNvbnRhaW5lclwiIHYtbG9hZGluZz1cImxpc3RMb2FkaW5nXCI+XG4gICAgICA8ZGl2IHYtaWY9XCJPYmplY3Qua2V5cyhncm91cGVkU2NoZWR1bGVzKS5sZW5ndGggPT09IDBcIiBjbGFzcz1cImVtcHR5LXN0YXRlXCI+XG4gICAgICAgIDxlbC1lbXB0eSBkZXNjcmlwdGlvbj1cIuaaguaXoOaXpeeoi+aVsOaNrlwiPjwvZWwtZW1wdHk+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgdi1lbHNlIGNsYXNzPVwic2NoZWR1bGVyLXdyYXBwZXJcIj5cbiAgICAgICAgPGRpdiB2LWZvcj1cIihzY2hlZHVsZXMsIGRhdGUpIGluIGdyb3VwZWRTY2hlZHVsZXNcIiA6a2V5PVwiZGF0ZVwiIGNsYXNzPVwiZGF5LWdyb3VwXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbGVmdFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LW51bWJlclwiPnt7IGdldERheU51bWJlcihkYXRlKSB9fTwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LXdlZWtkYXlcIj57eyBnZXREYXlXZWVrZGF5KGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktZGF0ZVwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS10YWdcIj57eyBnZXREYXRlVGFnKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLWZ1bGxcIj57eyBmb3JtYXREYXlEYXRlKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICBcbiAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZWxpbmUtY29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGltZWxpbmUtdHJhY2tcIj48L2Rpdj5cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21hcHBlci9TY2hlZHVsZU1hcHBlci5qYXZhXG4uLi5cblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqCBNYXBwZXIg5o6l5Y+jXG4gKiA8L3A+XG4gKi9cbnB1YmxpYyBpbnRlcmZhY2UgU2NoZWR1bGVNYXBwZXIgZXh0ZW5kcyBCYXNlTWFwcGVyPFNjaGVkdWxlPiB7XG5cbiAgICBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaFNjaGVkdWxlKFBhZ2U8U2NoZWR1bGVWbz4gcGFnZSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQpO1xuXG4gICAgTGlzdDxTY2hlZHVsZVZvPiBmaW5kQWxsU2NoZWR1bGVzKCk7XG5cbiAgICBMaXN0PFNjaGVkdWxlVm8+IGZpbmRCeUlkcyhMaXN0PExvbmc+IGlkcyk7XG4gICAgXG4gICAgTGlzdDxTY2hlZHVsZVZvPiBmaW5kU2NoZWR1bGVzQnlNb250aChTdHJpbmcgeWVhck1vbnRoKTtcbiAgICBcbiAgICAvKipcbiAgICAgKiDmoLnmja7mnIjku73lkoznlKjmiLdJROafpeivouS4jueUqOaIt+ebuOWFs+eahOaXpeeoi1xuICAgICAqIEBwYXJhbSB5ZWFyTW9udGgg5bm05pyI77yM5qC85byP5Li677yaeXl5eS1NTVxuICAgICAqIEBwYXJhbSB1c2VySWQg55So5oi3SURcbiAgICAgKiBAcmV0dXJuIOaXpeeoi+WIl+ihqFxuICAgICAqL1xuICAgIExpc3Q8U2NoZWR1bGVWbz4gZmluZFNjaGVkdWxlc0J5TW9udGhBbmRVc2VyKFN0cmluZyB5ZWFyTW9udGgsIExvbmcgdXNlcklkKTtcbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9TY2hlZHVsZVNlcnZpY2VJbXBsLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgQFRyYW5zYWN0aW9uYWwocm9sbGJhY2tGb3IgPSBFeGNlcHRpb24uY2xhc3MpXG4gICAgcHVibGljIEJvb2xlYW4gY3JlYXRlKFNjaGVkdWxlIHNjaGVkdWxlKSB7XG4gICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgICAgICAvLyDkv67mlLnku7vliqHnirbmgIFcbiAgICAgICAgdGFzay5zZXRTdGF0dXMoMik7XG4gICAgICAgIFxuICAgICAgICAvLyDorr7nva7nu5PmnZ/ml7bpl7TvvIzlpoLmnpzmnKrorr7nva7liJnoh6rliqjmoLnmja7ku7vliqHogJfml7borqHnrpdcbiAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsICYmIHRhc2suZ2V0VGltZVNwZW5kKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g5qC55o2u5Lu75Yqh6aKE5Lyw5pe26Ze06K6+572u57uT5p2f5pe26Ze0XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNNaW51dGVzKHRhc2suZ2V0VGltZVNwZW5kKCkpKTtcbiAgICAgICAgfSBlbHNlIGlmIChzY2hlZHVsZS5nZXRFbmRUaW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g6buY6K6k6K6+572u57uT5p2f5pe26Ze05Li65byA5aeL5pe26Ze05ZCOMeWwj+aXtlxuICAgICAgICAgICAgc2NoZWR1bGUuc2V0RW5kVGltZShzY2hlZHVsZS5nZXRTdGFydFRpbWUoKS5wbHVzSG91cnMoMSkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuXG4gICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRoaXMuc2F2ZShzY2hlZHVsZSk7XG5cbiAgICAgICAgLy8g5Y+R6YCB5o+Q6YaSXG4gICAgICAgIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIgPSBuZXcgT2JqZWN0TWFwcGVyKCk7XG4gICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAgICAgIExpc3Q8Tm90aWZpY2F0aW9uPiBub3RpZmljYXRpb25zID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgICAgIHVzZXJJZHMuZm9yRWFjaChpZCAtPiB7XG4gICAgICAgICAgICBOb3RpZmljYXRpb24gbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbigpO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFNjaGVkdWxlSWQoc2NoZWR1bGUuZ2V0SWQoKSk7XG4gICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VXNlcklkKGlkKTtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRNZXNzYWdlKFwi5oKo5pyJ5paw55qE5Lu75Yqh5a6J5o6S77yM6K+35Y+K5pe25p+l55yLXCIpO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5hZGQobm90aWZpY2F0aW9uKTtcbiAgICAgICAgfSk7XG4gICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuXG4gICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgIH1cbi4uLlxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0TWVzc2FnZShcIuaCqOWPguS4jueahOS7u+WKoSBcXFwiXCIgKyBmaW5hbFRhc2suZ2V0VGl0bGUoKSArIFwiXFxcIiDmiafooYzml7bpl7Tlt7Lmm7TmlrBcIik7IC8vIFVzZSB0aGUgZmluYWwgY29weVxuICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmFkZChub3RpZmljYXRpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHN1Y2Nlc3MgJiYgdGFzayA9PSBudWxsKSB7XG4gICAgICAgICAgICAgbG9nLndhcm4oXCLml6XnqIsge30g5pu05paw5oiQ5Yqf77yM5L2G5peg5rOV5Y+R6YCB6YCa55+l77yM5Zug5Li65YWz6IGU5Lu75Yqh5LiN5a2Y5ZyoXCIsIGV4aXN0aW5nU2NoZWR1bGUuZ2V0SWQoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICog5q+P6ZqUNeWIhumSn+ajgOafpeS4gOasoe+8jOWPkemAgeS7u+WKoeaPkOmGklxuICAgICAqL1xuICAgIEBTY2hlZHVsZWQoY3JvbiA9IFwiMCAqLzUgKiAqICogP1wiKVxuICAgIHB1YmxpYyB2b2lkIGNoZWNrQW5kU2VuZFJlbWluZGVycygpIHtcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN5pe26Ze0XG4gICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiOt+WPluaJgOacieS7u+WKoVxuICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGFza1NlcnZpY2UubGlzdCgpO1xuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnQoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIC8vIOiOt+WPluWOn+Wni+aXpeeoi+WIl+ihqFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IG9yaWdpbmFsUGFnZSA9IHNlYXJjaChwYWdlU2l6ZSwgcGFnZU51bSwgc2VhcmNoS2V5KTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZUxpc3QgPSBvcmlnaW5hbFBhZ2UuZ2V0UmVjb3JkcygpO1xuICAgICAgICBcbiAgICAgICAgLy8g6K6h566X5q+P5Liq5pel56iL55qE5LyY5YWI57qn5b6X5YiGXG4gICAgICAgIE1hcDxMb25nLCBEb3VibGU+IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKFNjaGVkdWxlVm8gc2NoZWR1bGUgOiBzY2hlZHVsZUxpc3QpIHtcbiAgICAgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X5LyY5YWI57qn5b6X5YiGXG4gICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUoc2NoZWR1bGUsIHRhc2spO1xuICAgICAgICAgICAgc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5wdXQoc2NoZWR1bGUuZ2V0SWQoKSwgcHJpb3JpdHlTY29yZSk7XG4gICAgICAgIH1cbi4uLlxuICAgICAgICBcbiAgICAgICAgLy8g5qC55o2u5LyY5YWI57qn5b6X5YiG5o6S5bqP5pel56iLXG4gICAgICAgIHNjaGVkdWxlTGlzdC5zb3J0KChhLCBiKSAtPiB7XG4gICAgICAgICAgICBEb3VibGUgc2NvcmVBID0gc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYS5nZXRJZCgpLCAwLjApO1xuICAgICAgICAgICAgRG91YmxlIHNjb3JlQiA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGIuZ2V0SWQoKSwgMC4wKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5YiG5pWw6auY55qE5o6S5Zyo5YmN6Z2iXG4gICAgICAgICAgICByZXR1cm4gRG91YmxlLmNvbXBhcmUoc2NvcmVCLCBzY29yZUEpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWIm+W7uuaWsOeahOWIhumhtee7k+aenFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNvcnRlZFBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplLCBvcmlnaW5hbFBhZ2UuZ2V0VG90YWwoKSk7XG4gICAgICAgIHNvcnRlZFBhZ2Uuc2V0UmVjb3JkcyhzY2hlZHVsZUxpc3QpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHNvcnRlZFBhZ2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5q+P5bCP5pe25qOA5p+l5LiA5qyh5Lu75Yqh5oiq5q2i5pe26Ze077yM5pu05paw6YC+5pyf5Lu75Yqh54q25oCBXG4gICAgICovXG4gICAgQFNjaGVkdWxlZChjcm9uID0gXCIwIDAgKiAqICogP1wiKSAvLyDmr4/lsI/ml7bmiafooYzkuIDmrKFcbiAgICBwdWJsaWMgdm9pZCBjaGVja0FuZFVwZGF0ZU92ZXJkdWVUYXNrcygpIHtcbiAgICAgICAgbG9nLmluZm8oXCLmiafooYzku7vliqHpgL7mnJ/nirbmgIHmo4Dmn6UuLi5cIik7XG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDmn6Xor6LmiYDmnInlvoXlip7jgIHlt7LlronmjpLjgIHov5vooYzkuK3nirbmgIHnmoTku7vliqFcbiAgICAgICAgTGlzdDxUYXNrPiB0YXNrcyA9IHRhc2tTZXJ2aWNlLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxUYXNrPigpLmxhbWJkYSgpXG4gICAgICAgICAgICAgICAgLmluKFRhc2s6OmdldFN0YXR1cywgQXJyYXlzLmFzTGlzdCgxLCAyLCAzKSkpO1xuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vcmVzb3VyY2VzL21hcHBlci93ZWIvU2NoZWR1bGVNYXBwZXIueG1sXG48P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz5cbjwhRE9DVFlQRSBtYXBwZXIgUFVCTElDIFwiLS8vbXliYXRpcy5vcmcvL0RURCBNYXBwZXIgMy4wLy9FTlwiIFwiaHR0cDovL215YmF0aXMub3JnL2R0ZC9teWJhdGlzLTMtbWFwcGVyLmR0ZFwiPlxuPG1hcHBlciBuYW1lc3BhY2U9XCJjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyLlNjaGVkdWxlTWFwcGVyXCI+XG5cbiAgICA8IS0tIOmAmueUqOafpeivouaYoOWwhOe7k+aenCAtLT5cbiAgICA8cmVzdWx0TWFwIGlkPVwiQmFzZVJlc3VsdE1hcFwiIHR5cGU9XCJjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuU2NoZWR1bGVcIj5cbiAgICAgICAgPGlkIGNvbHVtbj1cImlkXCIgcHJvcGVydHk9XCJpZFwiIC8+XG4gICAgICAgIDxyZXN1bHQgY29sdW1uPVwidGFza19pZFwiIHByb3BlcnR5PVwidGFza0lkXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJzdGFydF90aW1lXCIgcHJvcGVydHk9XCJzdGFydFRpbWVcIiAvPlxuICAgICAgICA8cmVzdWx0IGNvbHVtbj1cImVuZF90aW1lXCIgcHJvcGVydHk9XCJlbmRUaW1lXCIgLz5cbiAgICAgICAgPHJlc3VsdCBjb2x1bW49XCJjcmVhdGVfdGltZVwiIHByb3BlcnR5PVwiY3JlYXRlVGltZVwiIC8+XG4gICAgPC9yZXN1bHRNYXA+XG4gICAgPHNlbGVjdCBpZD1cInNlYXJjaFNjaGVkdWxlXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcy4qLFxuICAgICAgICAgICAgdC50aXRsZSBBUyB0YXNrTmFtZSxcbiAgICAgICAgICAgIHQuY29kZSBBUyB0YXNrQ29kZSxcbiAgICAgICAgICAgIHQudXNlcl9kYXRhIEFTIHVzZXJEYXRhLFxuICAgICAgICAgICAgdC5yZXNvdXJjZXNfZGF0YSBBUyByZXNvdXJjZXNEYXRhLFxuICAgICAgICAgICAgdC5zdGF0dXMgQVMgc3RhdHVzLFxuICAgICAgICAgICAgdC5kZWFkbGluZSBBUyBkZWFkbGluZSxcbiAgICAgICAgICAgIHMuZW5kX3RpbWUgQVMgZW5kVGltZVxuICAgICAgICBGUk9NXG4gICAgICAgICAgICBzY2hlZHVsZSBzXG4gICAgICAgIExFRlQgSk9JTlxuICAgICAgICAgICAgdGFzayB0IE9OIHQuaWQgPSBzLnRhc2tfaWRcbiAgICAgICAgPHdoZXJlPlxuICAgICAgICAgICAgPGlmIHRlc3Q9XCJzZWFyY2hLZXkgIT0gbnVsbCBhbmQgc2VhcmNoS2V5ICE9ICcnXCI+XG4gICAgICAgICAgICAgICAgQU5EICh0LnRpdGxlIExJS0UgQ09OQ0FUKCclJywgI3tzZWFyY2hLZXl9LCAnJScpIE9SIHQuY29kZSBMSUtFIENPTkNBVCgnJScsICN7c2VhcmNoS2V5fSwgJyUnKSlcbiAgICAgICAgICAgIDwvaWY+XG4gICAgICAgICAgICA8aWYgdGVzdD1cInVzZXJJZCAhPSBudWxsXCI+XG4gICAgICAgICAgICAgICAgQU5EIEpTT05fQ09OVEFJTlModC51c2VyX2RhdGEsIENBU1QoI3t1c2VySWR9IEFTIEpTT04pLCAnJCcpXG4gICAgICAgICAgICA8L2lmPlxuICAgICAgICA8L3doZXJlPlxuICAgICAgICBPUkRFUiBCWVxuICAgICAgICAgICAgcy5zdGFydF90aW1lIEFTQ1xuICAgIDwvc2VsZWN0PlxuICAgIDxzZWxlY3QgaWQ9XCJmaW5kQWxsU2NoZWR1bGVzXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcy4qLFxuICAgICAgICAgICAgdC50aXRsZSBBUyB0YXNrTmFtZSxcbiAgICAgICAgICAgIHQuY29kZSBBUyB0YXNrQ29kZSxcbiAgICAgICAgICAgIHQudXNlcl9kYXRhIEFTIHVzZXJEYXRhLFxuICAgICAgICAgICAgdC5yZXNvdXJjZXNfZGF0YSBBUyByZXNvdXJjZXNEYXRhLFxuICAgICAgICAgICAgdC5zdGF0dXMgQVMgc3RhdHVzLFxuICAgICAgICAgICAgdC5kZWFkbGluZSBBUyBkZWFkbGluZSxcbiAgICAgICAgICAgIHMuZW5kX3RpbWUgQVMgZW5kVGltZVxuICAgICAgICBGUk9NXG4gICAgICAgICAgICBzY2hlZHVsZSBzXG4gICAgICAgIExFRlQgSk9JTlxuICAgICAgICAgICAgdGFzayB0IE9OIHQuaWQgPSBzLnRhc2tfaWRcbiAgICAgICAgT1JERVIgQllcbiAgICAgICAgICAgIHMuc3RhcnRfdGltZSBBU0NcbiAgICA8L3NlbGVjdD5cbiAgICA8c2VsZWN0IGlkPVwiZmluZEJ5SWRzXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcy4qLFxuICAgICAgICAgICAgdC50aXRsZSBBUyB0YXNrTmFtZSxcbiAgICAgICAgICAgIHQuY29kZSBBUyB0YXNrQ29kZSxcbiAgICAgICAgICAgIHQudXNlcl9kYXRhIEFTIHVzZXJEYXRhLFxuLi4uXG4gICAgXG4gICAgPHNlbGVjdCBpZD1cImZpbmRTY2hlZHVsZXNCeU1vbnRoXCIgcmVzdWx0VHlwZT1cImNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvXCI+XG4gICAgICAgIFNFTEVDVFxuICAgICAgICAgICAgcy4qLFxuICAgICAgICAgICAgdC50aXRsZSBBUyB0YXNrTmFtZSxcbiAgICAgICAgICAgIHQuY29kZSBBUyB0YXNrQ29kZSxcbiAgICAgICAgICAgIHQuY2F0ZWdvcnlfaWQgQVMgY2F0ZWdvcnlJZCxcbiAgICAgICAgICAgIHQudGltZV9zcGVuZCBBUyB0aW1lU3BlbmQsXG4gICAgICAgICAgICB0LnN0YXR1cyBBUyBzdGF0dXMsXG4gICAgICAgICAgICB0LmRlYWRsaW5lIEFTIGRlYWRsaW5lLFxuICAgICAgICAgICAgdC51c2VyX2RhdGEgQVMgdXNlckRhdGEsXG4gICAgICAgICAgICB0LnJlc291cmNlc19kYXRhIEFTIHJlc291cmNlc0RhdGEsXG4gICAgICAgICAgICBzLmVuZF90aW1lIEFTIGVuZFRpbWVcbiAgICAgICAgRlJPTVxuICAgICAgICAgICAgc2NoZWR1bGUgc1xuICAgICAgICBMRUZUIEpPSU5cbiAgICAgICAgICAgIHRhc2sgdCBPTiB0LmlkID0gcy50YXNrX2lkXG4gICAgICAgIFdIRVJFXG4gICAgICAgICAgICBEQVRFX0ZPUk1BVChzLnN0YXJ0X3RpbWUsICclWS0lbScpID0gI3t5ZWFyTW9udGh9XG4gICAgICAgIE9SREVSIEJZXG4gICAgICAgICAgICBzLnN0YXJ0X3RpbWUgQVNDXG4gICAgPC9zZWxlY3Q+XG4gICAgXG4gICAgPHNlbGVjdCBpZD1cImZpbmRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlclwiIHJlc3VsdFR5cGU9XCJjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uU2NoZWR1bGVWb1wiPlxuICAgICAgICBTRUxFQ1RcbiAgICAgICAgICAgIHMuKixcbiAgICAgICAgICAgIHQudGl0bGUgQVMgdGFza05hbWUsXG4gICAgICAgICAgICB0LmNvZGUgQVMgdGFza0NvZGUsXG4gICAgICAgICAgICB0LmNhdGVnb3J5X2lkIEFTIGNhdGVnb3J5SWQsXG4gICAgICAgICAgICB0LnRpbWVfc3BlbmQgQVMgdGltZVNwZW5kLFxuICAgICAgICAgICAgdC5zdGF0dXMgQVMgc3RhdHVzLFxuICAgICAgICAgICAgdC5kZWFkbGluZSBBUyBkZWFkbGluZSxcbiAgICAgICAgICAgIHQudXNlcl9kYXRhIEFTIHVzZXJEYXRhLFxuICAgICAgICAgICAgdC5yZXNvdXJjZXNfZGF0YSBBUyByZXNvdXJjZXNEYXRhLFxuICAgICAgICAgICAgcy5lbmRfdGltZSBBUyBlbmRUaW1lXG4gICAgICAgIEZST01cbiAgICAgICAgICAgIHNjaGVkdWxlIHNcbiAgICAgICAgTEVGVCBKT0lOXG4gICAgICAgICAgICB0YXNrIHQgT04gdC5pZCA9IHMudGFza19pZFxuICAgICAgICBXSEVSRVxuICAgICAgICAgICAgREFURV9GT1JNQVQocy5zdGFydF90aW1lLCAnJVktJW0nKSA9ICN7eWVhck1vbnRofVxuICAgICAgICAgICAgQU5EIEpTT05fQ09OVEFJTlModC51c2VyX2RhdGEsIENBU1QoI3t1c2VySWR9IEFTIEpTT04pLCAnJCcpXG4gICAgICAgIE9SREVSIEJZXG4gICAgICAgICAgICBzLnN0YXJ0X3RpbWUgQVNDXG4gICAgPC9zZWxlY3Q+XG48L21hcHBlcj5cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21vZGVsL1NjaGVkdWxlLmphdmFcbnBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsO1xuXG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uSWRUeXBlO1xuaW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5hbm5vdGF0aW9uLlRhYmxlSWQ7XG5pbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7XG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5pbXBvcnQgamF2YS51dGlsLkRhdGU7XG5cbmltcG9ydCBjb20uZmFzdGVyeG1sLmphY2tzb24uYW5ub3RhdGlvbi5Kc29uRm9ybWF0O1xuaW1wb3J0IGlvLnN3YWdnZXIuYW5ub3RhdGlvbnMuQXBpTW9kZWw7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbFByb3BlcnR5O1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuLyoqXG4gKiA8cD5cbiAqIOaXpeeoi+WuieaOkuihqFxuICogPC9wPlxuICpcbiAqIEBhdXRob3IgYWlkZW56MjMzXG4gKiBAc2luY2UgMjAyNS0wNC0xNlxuICovXG5AR2V0dGVyXG5AU2V0dGVyXG5AQXBpTW9kZWwodmFsdWUgPSBcIlNjaGVkdWxl5a+56LGhXCIsIGRlc2NyaXB0aW9uID0gXCLml6XnqIvlronmjpLooahcIilcbnB1YmxpYyBjbGFzcyBTY2hlZHVsZSBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcblxuICAgIEBUYWJsZUlkKHZhbHVlID0gXCJpZFwiLCB0eXBlID0gSWRUeXBlLkFVVE8pXG4gICAgcHJpdmF0ZSBMb25nIGlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqFJRFwiKVxuICAgIHByaXZhdGUgTG9uZyB0YXNrSWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuW8gOWni+aXtumXtFwiKVxuICAgIEBKc29uRm9ybWF0KHBhdHRlcm4gPSBcInl5eXktTU0tZGQgSEg6bW06c3NcIilcbiAgICBwcml2YXRlIExvY2FsRGF0ZVRpbWUgc3RhcnRUaW1lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLnu5PmnZ/ml7bpl7RcIilcbiAgICBASnNvbkZvcm1hdChwYXR0ZXJuID0gXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIpXG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGVuZFRpbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuWIm+W7uuaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSBjcmVhdGVUaW1lO1xuXG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3ZvL1NjaGVkdWxlVm8uamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm87XG5cbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuU2NoZWR1bGU7XG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBsb21ib2suU2V0dGVyO1xuXG5pbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG5cbkBHZXR0ZXJcbkBTZXR0ZXJcbnB1YmxpYyBjbGFzcyBTY2hlZHVsZVZvIGV4dGVuZHMgU2NoZWR1bGUge1xuICAgIHByaXZhdGUgU3RyaW5nIHRhc2tOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIHRhc2tDb2RlO1xuICAgIHByaXZhdGUgSW50ZWdlciBzdGF0dXM7XG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGRlYWRsaW5lO1xuXG4gICAgcHJpdmF0ZSBCb29sZWFuIGhhc0NvbmZsaWN0O1xuICAgIHByaXZhdGUgU3RyaW5nIGNvbmZsaWN0U2NoZWR1bGVJZHM7XG4gICAgcHJpdmF0ZSBTdHJpbmcgdXNlckRhdGE7XG4gICAgcHJpdmF0ZSBTdHJpbmcgcmVzb3VyY2VzRGF0YTtcblxuICAgIHByaXZhdGUgTG9jYWxEYXRlVGltZSBlbmRUaW1lO1xufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvbW9kZWwvUHJpb3JpdHkuamF2YVxuLi4uXG5cbi8qKlxuICogPHA+XG4gKiDkvJjlhYjnuqfooahcbiAqIDwvcD5cbiAqXG4gKiBAYXV0aG9yIGFpZGVuejIzM1xuICogQHNpbmNlIDIwMjUtMDQtMTZcbiAqL1xuQEdldHRlclxuQFNldHRlclxuQEFwaU1vZGVsKHZhbHVlID0gXCJQcmlvcml0eeWvueixoVwiLCBkZXNjcmlwdGlvbiA9IFwi5LyY5YWI57qn6KGoXCIpXG5wdWJsaWMgY2xhc3MgUHJpb3JpdHkgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEID0gMUw7XG5cbiAgICBAVGFibGVJZCh2YWx1ZSA9IFwiaWRcIiwgdHlwZSA9IElkVHlwZS5BVVRPKVxuICAgIHByaXZhdGUgTG9uZyBpZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi6KeE5YiZ5qCH6aKYXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTtcblxuICAgIC4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjk3Y2UxNDU1LTNmZmQtNGZiNy04NTZiLTZmZWUzODBhYmQxZDt0b29sdV8wMVBtMW9Fd2pGZ0I4eUtjU2I4ekxFcEEiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21vZGVsL1Rhc2suamF2YVxucGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWw7XG5cbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuYW5ub3RhdGlvbi5JZFR5cGU7XG5pbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmFubm90YXRpb24uVGFibGVJZDtcbmltcG9ydCBqYXZhLmlvLlNlcmlhbGl6YWJsZTtcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlO1xuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xuaW1wb3J0IGphdmEudXRpbC5EYXRlO1xuXG5pbXBvcnQgY29tLmZhc3RlcnhtbC5qYWNrc29uLmFubm90YXRpb24uSnNvbkZvcm1hdDtcbmltcG9ydCBjb20uZmFzdGVyeG1sLmphY2tzb24uYW5ub3RhdGlvbi5Kc29uUHJvcGVydHk7XG5pbXBvcnQgaW8uc3dhZ2dlci5hbm5vdGF0aW9ucy5BcGlNb2RlbDtcbmltcG9ydCBpby5zd2FnZ2VyLmFubm90YXRpb25zLkFwaU1vZGVsUHJvcGVydHk7XG5pbXBvcnQgbG9tYm9rLkdldHRlcjtcbmltcG9ydCBsb21ib2suU2V0dGVyO1xuXG4vKipcbiAqIDxwPlxuICog5Lu75Yqh6KGoXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBhaWRlbnoyMzNcbiAqIEBzaW5jZSAyMDI1LTA0LTE2XG4gKi9cbkBHZXR0ZXJcbkBTZXR0ZXJcbkBBcGlNb2RlbCh2YWx1ZSA9IFwiVGFza+WvueixoVwiLCBkZXNjcmlwdGlvbiA9IFwi5Lu75Yqh6KGoXCIpXG5wdWJsaWMgY2xhc3MgVGFzayBpbXBsZW1lbnRzIFNlcmlhbGl6YWJsZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBmaW5hbCBsb25nIHNlcmlhbFZlcnNpb25VSUQgPSAxTDtcblxuICAgIEBUYWJsZUlkKHZhbHVlID0gXCJpZFwiLCB0eXBlID0gSWRUeXBlLkFVVE8pXG4gICAgcHJpdmF0ZSBMb25nIGlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmoIfpophcIilcbiAgICBwcml2YXRlIFN0cmluZyB0aXRsZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh57yW56CBXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgY29kZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh57G75Z6LSURcIilcbiAgICBwcml2YXRlIExvbmcgY2F0ZWdvcnlJZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5o+P6L+wXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgZGVzY3JpcHRpb247XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuS7u+WKoeeKtuaAge+8iDE65b6F5YqeLCAyOuW3suWuieaOkiwgMzrov5vooYzkuK0sIDQ65bey5a6M5oiQLCA1OuW3sumAvuacn++8iVwiKVxuICAgIHByaXZhdGUgSW50ZWdlciBzdGF0dXM7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIumHjeimgeaAp+adg+mHjeiuvue9rlwiKVxuICAgIHByaXZhdGUgTG9uZyBpbXBvcnRhbmNlSWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIue0p+aApeaAp+adg+mHjeiuvue9rlwiKVxuICAgIHByaXZhdGUgTG9uZyBleGlnZW5jeUlkO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmiYDpnIDotYTmupDmlbDmja7vvIhKU09O5qC85byP77yJXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgcmVzb3VyY2VzRGF0YTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75Yqh5omA6ZyA5Lq65ZGY5pWw5o2u77yISlNPTuagvOW8j++8iVwiKVxuICAgIHByaXZhdGUgU3RyaW5nIHVzZXJEYXRhO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmiYDpnIDml7bpl7TliIbpkp/mlbBcIilcbiAgICBwcml2YXRlIEludGVnZXIgdGltZVNwZW5kO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmiKrmraLml7bpl7RcIilcbiAgICBASnNvbkZvcm1hdChwYXR0ZXJuID0gXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIpXG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIGRlYWRsaW5lO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLku7vliqHmj5DphpLml7bpl7RcIilcbiAgICBASnNvbkZvcm1hdChwYXR0ZXJuID0gXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXCIpXG4gICAgcHJpdmF0ZSBMb2NhbERhdGVUaW1lIHJlbWluZGVyVGltZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Yib5bu65pe26Ze0XCIpXG4gICAgcHJpdmF0ZSBEYXRlIGNyZWF0ZVRpbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuabtOaWsOaXtumXtFwiKVxuICAgIHByaXZhdGUgRGF0ZSB1cGRhdGVUaW1lO1xuXG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9UYXNrU2VydmljZUltcGwuamF2YVxuLi4uXG5cbmltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLklkVXRpbDtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbmltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnBsdWdpbnMucGFnaW5hdGlvbi5QYWdlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuc2VydmljZS5VbXNBZG1pblNlcnZpY2U7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLkNhdGVnb3J5O1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5TY2hlZHVsZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubWFwcGVyLlRhc2tNYXBwZXI7XG5pbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuQ2F0ZWdvcnlTZXJ2aWNlO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlByaW9yaXR5U2VydmljZTtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5SZXNvdXJjZXNTZXJ2aWNlO1xuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgTGlzdDxUYXNrVm8+IGxpc3RBbGwoSW50ZWdlciBzdGF0dXMpIHtcbiAgICAgICAgLy8g5YWI5pu05paw5omA5pyJ5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKTtcblxuICAgICAgICByZXR1cm4gdGFza01hcHBlci5saXN0QWxsKHN0YXR1cyk7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFRhc2tWbyBnZXRJbmZvKExvbmcgaWQpIHtcbiAgICAgICAgLy8g5pu05paw5b2T5YmN5Lu75Yqh54q25oCBXG4gICAgICAgIHVwZGF0ZVRhc2tTdGF0dXModGhpcy5nZXRCeUlkKGlkKSk7XG5cbiAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgICAgICAgVGFzayB0YXNrID0gdGhpcy5nZXRCeUlkKGlkKTtcbiAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHRhc2ssIHRhc2tWbyk7XG4gICAgICAgIENhdGVnb3J5IGNhdGVnb3J5ID0gY2F0ZWdvcnlTZXJ2aWNlLmdldEJ5SWQodGFzay5nZXRDYXRlZ29yeUlkKCkpO1xuICAgICAgICB0YXNrVm8uc2V0Q2F0ZWdvcnlOYW1lKGNhdGVnb3J5LmdldE5hbWUoKSk7XG4gICAgICAgIFByaW9yaXR5IGltcG9ydGFuY2VQcmlvcml0eSA9IHByaW9yaXR5U2VydmljZS5nZXRCeUlkKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xuICAgICAgICB0YXNrVm8uc2V0SW1wb3J0YW5jZU5hbWUoaW1wb3J0YW5jZVByaW9yaXR5LmdldE5hbWUoKSk7XG4gICAgICAgIFByaW9yaXR5IGV4aWdlbmN5UHJpb3JpdHkgPSBwcmlvcml0eVNlcnZpY2UuZ2V0QnlJZCh0YXNrLmdldEV4aWdlbmN5SWQoKSk7XG4gICAgICAgIHRhc2tWby5zZXRJbXBvcnRhbmNlTmFtZShleGlnZW5jeVByaW9yaXR5LmdldE5hbWUoKSk7XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBCb29sZWFuIGNyZWF0ZShUYXNrIHRhc2spIHtcbiAgICAgICAgdGFzay5zZXRDb2RlKElkVXRpbC5yYW5kb21VVUlEKCkpO1xuICAgICAgICBMaXN0PFByaW9yaXR5PiBwcmlvcml0aWVzID0gcHJpb3JpdHlTZXJ2aWNlLmxpc3QoKTtcblxuICAgICAgICAvLyDlvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOmBjeWOhuS8mOWFiOe6p+aVsOaNru+8jOiuvue9riBpbXBvcnRhbmNlSWQg5ZKMIGV4aWdlbmN5SWRcbiAgICAgICAgZm9yIChQcmlvcml0eSBwcmlvcml0eSA6IHByaW9yaXRpZXMpIHtcbiAgICAgICAgICAgIC8vIOWMuemFjSBpbXBvcnRhbmNlSWQgKHR5cGU9MSDkuJQgY2F0ZWdvcnlJZCDnm7jlkIwpXG4gICAgICAgICAgICBpZiAocHJpb3JpdHkuZ2V0VHlwZSgpID09IDEgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpICE9IG51bGwgJiYgcHJpb3JpdHkuZ2V0Q2F0ZWdvcnlJZCgpLmVxdWFscyh0YXNrLmdldENhdGVnb3J5SWQoKSkpIHtcbiAgICAgICAgICAgICAgICB0YXNrLnNldEltcG9ydGFuY2VJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgIH1cbi4uLlxuXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhpblJhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2suc2V0RXhpZ2VuY3lJZChwcmlvcml0eS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyDorr7nva7ku7vliqHliJ3lp4vnirbmgIHkuLrlvoXlip5cbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5zYXZlKHRhc2spO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBCb29sZWFuIHVwZGF0ZVRhc2soVGFzayB0YXNrKSB7XG4gICAgICAgIExpc3Q8UHJpb3JpdHk+IHByaW9yaXRpZXMgPSBwcmlvcml0eVNlcnZpY2UubGlzdCgpO1xuXG4gICAgICAgIC8vIOW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG5cbiAgICAgICAgLy8g6YGN5Y6G5LyY5YWI57qn5pWw5o2u77yM6K6+572uIGltcG9ydGFuY2VJZCDlkowgZXhpZ2VuY3lJZFxuICAgICAgICBmb3IgKFByaW9yaXR5IHByaW9yaXR5IDogcHJpb3JpdGllcykge1xuICAgICAgICAgICAgLy8g5Yy56YWNIGltcG9ydGFuY2VJZCAodHlwZT0xIOS4lCBjYXRlZ29yeUlkIOebuOWQjClcbiAgICAgICAgICAgIGlmIChwcmlvcml0eS5nZXRUeXBlKCkgPT0gMSAmJiBwcmlvcml0eS5nZXRDYXRlZ29yeUlkKCkgIT0gbnVsbCAmJiBwcmlvcml0eS5nZXRDYXRlZ29yeUlkKCkuZXF1YWxzKHRhc2suZ2V0Q2F0ZWdvcnlJZCgpKSkge1xuICAgICAgICAgICAgICAgIHRhc2suc2V0SW1wb3J0YW5jZUlkKHByaW9yaXR5LmdldElkKCkpO1xuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICAgICAgICAgICAgICBpZiAod2l0aGluUmFuZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRFeGlnZW5jeUlkKHByaW9yaXR5LmdldElkKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWmguaenOaJi+WKqOWwhuS7u+WKoeiuvue9ruS4uuW3suWujOaIkO+8jOS/neaMgeivpeeKtuaAgVxuICAgICAgICBUYXNrIG9sZFRhc2sgPSB0aGlzLmdldEJ5SWQodGFzay5nZXRJZCgpKTtcbiAgICAgICAgaWYgKG9sZFRhc2sgIT0gbnVsbCAmJiBvbGRUYXNrLmdldFN0YXR1cygpICE9IDQgJiYgdGFzay5nZXRTdGF0dXMoKSAhPSA0KSB7XG4gICAgICAgICAgICAvLyDoh6rliqjmm7TmlrDku7vliqHnirbmgIFcbiAgICAgICAgICAgIHVwZGF0ZVRhc2tTdGF0dXModGFzayk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy51cGRhdGVCeUlkKHRhc2spO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOavj+WkqeWHjOaZqOaJp+ihjOS4gOasoe+8jOiHquWKqOabtOaWsOaJgOacieS7u+WKoeeahOeKtuaAgVxuICAgICAqL1xuICAgIEBTY2hlZHVsZWQoY3JvbiA9IFwiMCAwIDAgKiAqID9cIilcbiAgICBwdWJsaWMgdm9pZCBzY2hlZHVsZWRVcGRhdGVBbGxUYXNrU3RhdHVzKCkge1xuICAgICAgICB1cGRhdGVBbGxUYXNrU3RhdHVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICog5pu05paw5omA5pyJ5Lu75Yqh55qE54q25oCBXG4gICAgICovXG4gICAgcHJpdmF0ZSB2b2lkIHVwZGF0ZUFsbFRhc2tTdGF0dXMoKSB7XG4gICAgICAgIExpc3Q8VGFzaz4gYWxsVGFza3MgPSB0aGlzLmxpc3QoKTtcbiAgICAgICAgYWxsVGFza3MuZm9yRWFjaCh0aGlzOjp1cGRhdGVUYXNrU3RhdHVzKTtcbiAgICAgICAgdGhpcy51cGRhdGVCYXRjaEJ5SWQoYWxsVGFza3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOagueaNruS7u+WKoeeahOaIquatouaXtumXtOiHquWKqOabtOaWsOS7u+WKoeeKtuaAgVxuICAgICAqIOS7u+WKoeeKtuaAge+8mjEt5b6F5YqeLCAyLeW3suWuieaOkiwgMy3ov5vooYzkuK0sIDQt5bey5a6M5oiQLCA1LeW3sumAvuacn1xuICAgICAqL1xuICAgIHByaXZhdGUgdm9pZCB1cGRhdGVUYXNrU3RhdHVzKFRhc2sgdGFzaykge1xuICAgICAgICAvLyDlpoLmnpzku7vliqHlt7Lnu4/mmK/lt7LlrozmiJDnirbmgIEoNCnvvIzkuI3lgZrmlLnlj5hcbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuXG4gICAgICAgIC8vIOafpeaJvuS7u+WKoeWvueW6lOeahOaXpeeoi+WuieaOklxuICAgICAgICBMaXN0PFNjaGVkdWxlPiBzY2hlZHVsZXMgPSBzY2hlZHVsZVNlcnZpY2UubGlzdChcbiAgICAgICAgICAgIG5ldyBRdWVyeVdyYXBwZXI8U2NoZWR1bGU+KCkuZXEoXCJ0YXNrX2lkXCIsIHRhc2suZ2V0SWQoKSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyDlpoLmnpzmnInml6XnqIvlronmjpLvvIzkvJjlhYjkvb/nlKjml6XnqIvnmoTnu5PmnZ/ml7bpl7TmnaXliKTmlq3mmK/lkKbpgL7mnJ9cbiAgICAgICAgaWYgKCFzY2hlZHVsZXMuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5bey6YC+5pyf77yI57uT5p2f5pe26Ze05bey6L+H77yJXG4gICAgICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIG5vdy5pc0FmdGVyKHNjaGVkdWxlLmdldEVuZFRpbWUoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIOWmguaenOayoeacieaXpeeoi+WuieaOku+8jOWImeS9v+eUqOS7u+WKoeeahOaIquatouaXtumXtOWIpOaWrVxuICAgICAgICBlbHNlIGlmICh0YXNrLmdldERlYWRsaW5lKCkgIT0gbnVsbCAmJiBub3cuaXNBZnRlcih0YXNrLmdldERlYWRsaW5lKCkpKSB7XG4gICAgICAgICAgICB0YXNrLnNldFN0YXR1cyg1KTsgLy8g5bey6YC+5pyfXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyDlpoLmnpzlvZPliY3mmK/lvoXlip4oMSnmiJblt7LlronmjpIoMinvvIzmo4Dmn6XmmK/lkKbpnIDopoHlj5jkuLrov5vooYzkuK0oMylcbiAgICAgICAgaWYgKCh0YXNrLmdldFN0YXR1cygpID09IDEgfHwgdGFzay5nZXRTdGF0dXMoKSA9PSAyKSAmJlxuICAgICAgICAgICAgdGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcblxuICAgICAgICAgICAgLy8g5aaC5p6c56a75oiq5q2i5pe26Ze05LiN5YiwMjTlsI/ml7bvvIzliJnorr7kuLrov5vooYzkuK1cbiAgICAgICAgICAgIGxvbmcgaG91cnNEaWZmZXJlbmNlID0gRHVyYXRpb24uYmV0d2Vlbihub3csIHRhc2suZ2V0RGVhZGxpbmUoKSkudG9Ib3VycygpO1xuICAgICAgICAgICAgaWYgKGhvdXJzRGlmZmVyZW5jZSA8IDI0KSB7XG4gICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoMyk7IC8vIOi/m+ihjOS4rVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8g6L6F5Yqp5pa55rOV77ya5bCGIEpTT04g5pWw57uE5a2X56ym5Liy6Kej5p6Q5Li6IFNldDxMb25nPlxuICAgIHByaXZhdGUgU2V0PExvbmc+IHBhcnNlSnNvbkFycmF5VG9TZXQoU3RyaW5nIGpzb25BcnJheSwgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKGpzb25BcnJheSA9PSBudWxsIHx8IGpzb25BcnJheS5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgSGFzaFNldDw+KEFycmF5cy5hc0xpc3Qob2JqZWN0TWFwcGVyLnJlYWRWYWx1ZShqc29uQXJyYXksIExvbmdbXS5jbGFzcykpKTtcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3ZvL1Rhc2tWby5qYXZhXG5wYWNrYWdlIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52bztcblxuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbmltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuaW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuaW1wb3J0IGxvbWJvay5HZXR0ZXI7XG5pbXBvcnQgbG9tYm9rLlNldHRlcjtcblxuaW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xuXG5AR2V0dGVyXG5AU2V0dGVyXG5wdWJsaWMgY2xhc3MgVGFza1ZvIGV4dGVuZHMgVGFzayB7XG4gICAgcHJpdmF0ZSBTdHJpbmcgY2F0ZWdvcnlOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGltcG9ydGFuY2VOYW1lO1xuICAgIHByaXZhdGUgU3RyaW5nIGV4aWdlbmN5TmFtZTtcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgcHJpb3JpdHlTY29yZTtcblxuICAgIHByaXZhdGUgTGlzdDxVbXNBZG1pbj4gdXNlckxpc3Q7XG4gICAgcHJpdmF0ZSBMaXN0PFJlc291cmNlcz4gcmVzb3VyY2VzTGlzdDtcbn1cbi4uLlxuUGF0aDogb2ZmaWNlX3BsYW4uc3FsXG4uLi5cblxuLS0gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YXNrXG4tLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5EUk9QIFRBQkxFIElGIEVYSVNUUyBgdGFza2A7XG5DUkVBVEUgVEFCTEUgYHRhc2tgICAoXG4gIGBpZGAgYmlnaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULFxuICBgdGl0bGVgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjhtYjMgQ09MTEFURSB1dGY4bWIzX2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5qCH6aKYJyxcbiAgYGNvZGVgIHZhcmNoYXIoMjU1KSBDSEFSQUNURVIgU0VUIHV0ZjhtYjMgQ09MTEFURSB1dGY4bWIzX2dlbmVyYWxfY2kgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57yW56CBJyxcbiAgYGNhdGVnb3J5X2lkYCBiaWdpbnQgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57G75Z6LSUQnLFxuICBgZGVzY3JpcHRpb25gIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWIzIENPTExBVEUgdXRmOG1iM19nZW5lcmFsX2NpIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5o+P6L+wJyxcbiAgYHN0YXR1c2AgaW50IE5VTEwgREVGQVVMVCAxIENPTU1FTlQgJ+S7u+WKoeeKtuaAge+8iDE65b6F5YqeLCAyOuW3suWuieaOkiwgMzrlt7LlrozmiJDvvIknLFxuICBgaW1wb3J0YW5jZV9pZGAgYmlnaW50IE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+mHjeimgeaAp+adg+mHjeiuvue9ricsXG4gIGBleGlnZW5jeV9pZGAgYmlnaW50IE5VTEwgREVGQVVMVCBOVUxMIENPTU1FTlQgJ+e0p+aApeaAp+adg+mHjeiuvue9ricsXG4gIGByZXNvdXJjZXNfZGF0YWAganNvbiBOVUxMIENPTU1FTlQgJ+S7u+WKoeaJgOmcgOi1hOa6kOaVsOaNru+8iEpTT07moLzlvI/vvIknLFxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3FsL29mZmljZV9wbGFuLnNxbFxuLi4uXG5cbkRST1AgVEFCTEUgSUYgRVhJU1RTIGB0YXNrYDtcbkNSRUFURSBUQUJMRSBgdGFza2AgKFxuICBgaWRgIGJpZ2ludCgyMCkgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsXG4gIGB0aXRsZWAgdmFyY2hhcigyNTUpIE5PVCBOVUxMIENPTU1FTlQgJ+S7u+WKoeagh+mimCcsXG4gIGBjb2RlYCB2YXJjaGFyKDI1NSkgTk9UIE5VTEwgQ09NTUVOVCAn5Lu75Yqh57yW56CBJyxcbiAgYGNhdGVnb3J5X2lkYCAgYmlnaW50KDIwKSBOT1QgTlVMTCBDT01NRU5UICfku7vliqHnsbvlnotJRCcsXG4gIGBkZXNjcmlwdGlvbmAgdGV4dCBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5o+P6L+wJyxcbiAgYHN0YXR1c2AgaW50KDExKSBERUZBVUxUIDEgQ09NTUVOVCAn5Lu75Yqh54q25oCB77yIMTrlvoXlip4sIDI65bey5a6J5o6SLCAzOuW3suWujOaIkO+8iScsXG4gIGBpbXBvcnRhbmNlX2lkYCAgYmlnaW50KDIwKSBERUZBVUxUIE5VTEwgQ09NTUVOVCAn6YeN6KaB5oCn5p2D6YeN6K6+572uJyxcbiAgYGV4aWdlbmN5X2lkYCAgYmlnaW50KDIwKSBERUZBVUxUIE5VTEwgQ09NTUVOVCAn57Sn5oCl5oCn5p2D6YeN6K6+572uJyxcbiAgYHJlc291cmNlc19kYXRhYCBqc29uIERFRkFVTFQgTlVMTCBDT01NRU5UICfku7vliqHmiYDpnIDotYTmupDmlbDmja7vvIhKU09O5qC85byP77yJJyxcbiAgYHVzZXJfZGF0YWAganNvbiBERUZBVUxUIE5VTEwgQ09NTUVOVCAn5Lu75Yqh5omA6ZyA5Lq65ZGY5pWw5o2u77yISlNPTuagvOW8j++8iScsXG4gIGB0aW1lX3NwZW5kYCBpbnQoMTEpIE5PVCBOVUxMIENPTU1FTlQgJ+S7u+WKoeaJgOmcgOaXtumXtOWIhumSn+aVsCcsXG4gIGBkZWFkbGluZWAgVElNRVNUQU1QIE5PVCBOVUxMIENPTU1FTlQgJ+S7u+WKoeaIquatouaXtumXtCcsXG4gIGBjcmVhdGVfdGltZWAgVElNRVNUQU1QIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAgQ09NTUVOVCAn5Yib5bu65pe26Ze0JyxcbiAgYHVwZGF0ZV90aW1lYCBUSU1FU1RBTVAgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVAgQ09NTUVOVCAn5pu05paw5pe26Ze0JyxcbiAgUFJJTUFSWSBLRVkgKGBpZGApIFVTSU5HIEJUUkVFXG4pIEVOR0lORSA9IElubm9EQiBBVVRPX0lOQ1JFTUVOVCA9IDEgQ0hBUkFDVEVSIFNFVCA9IHV0ZjggQ09MTEFURSA9IHV0ZjhfZ2VuZXJhbF9jaSBDT01NRU5UID0gJ+S7u+WKoeihqCc7XG5cbklOU0VSVCBJTlRPIGB0YXNrYCAoYHRpdGxlYCwgYGNvZGVgLCBgY2F0ZWdvcnlfaWRgLCBgZGVzY3JpcHRpb25gLCBgaW1wb3J0YW5jZV9pZGAsIGBleGlnZW5jeV9pZGAsIGByZXNvdXJjZXNfZGF0YWAsIGB1c2VyX2RhdGFgLCBgdGltZV9zcGVuZGAsIGBkZWFkbGluZWAsIGBjcmVhdGVfdGltZWApIFZBTFVFU1xuKCfku7vliqExLemhueebruW8gOWPkScsIFVVSUQoKSwgMiwgJ+WujOaIkOmhueebruaooeWdl0HnmoTlvIDlj5EnLCBGTE9PUigxICsgUkFORCgpICogMyksIEZMT09SKDQgKyBSQU5EKCkgKiAzKSwgSlNPTl9BUlJBWShGTE9PUigxICsgUkFORCgpICogMTUpKSwgSlNPTl9BUlJBWShGTE9PUigyICsgUkFORCgpICogMzApLCBGTE9PUigyICsgUkFORCgpICogMzApKSwgRkxPT1IoNjAgKyBSQU5EKCkgKiAyNDApLCBEQVRFX0FERChEQVRFKE5PVygpKSwgSU5URVJWQUwgRkxPT1IoMSArIFJBTkQoKSAqIDE1KSBEQVkpLCBEQVRFX1NVQihOT1coKSwgSU5URVJWQUwgRkxPT1IoMSArIFJBTkQoKSAqIDMwKSBEQVkpKSxcbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL21vZGVsL1ByaW9yaXR5LmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5LyY5YWI57qn6KGoXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBhaWRlbnoyMzNcbiAqIEBzaW5jZSAyMDI1LTA0LTE2XG4gKi9cbkBHZXR0ZXJcbkBTZXR0ZXJcbkBBcGlNb2RlbCh2YWx1ZSA9IFwiUHJpb3JpdHnlr7nosaFcIiwgZGVzY3JpcHRpb24gPSBcIuS8mOWFiOe6p+ihqFwiKVxucHVibGljIGNsYXNzIFByaW9yaXR5IGltcGxlbWVudHMgU2VyaWFsaXphYmxlIHtcblxuICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIGxvbmcgc2VyaWFsVmVyc2lvblVJRCA9IDFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuinhOWImeagh+mimFwiKVxuICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eShcIuexu+Wei++8iDE66YeN6KaB5oCnLCAyOiDntKfmgKXmgKfvvIlcIilcbiAgICBwcml2YXRlIEludGVnZXIgdHlwZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5YiG5pWwXCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIHNjb3JlO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmnYPph41cIilcbiAgICBwcml2YXRlIEJpZ0RlY2ltYWwgd2VpZ2h0O1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLop4TliJnmj4/ov7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5Lu75YqhSURcIilcbiAgICBwcml2YXRlIExvbmcgY2F0ZWdvcnlJZDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KFwi5pyA5bCP5pe26Ze05Yy66Ze0XCIpXG4gICAgcHJpdmF0ZSBJbnRlZ2VyIG1pbkhvdXJzO1xuXG4gICAgQEFwaU1vZGVsUHJvcGVydHkoXCLmnIDlpKfml7bpl7TljLrpl7RcIilcbiAgICBwcml2YXRlIEludGVnZXIgbWF4SG91cnM7XG5cbn1cbi4uLlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL2NvbnRyb2xsZXIvVGFza0NvbnRyb2xsZXIuamF2YVxuLi4uXG5cbiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLliJvlu7rku7vliqFcIilcbiAgICBAUG9zdE1hcHBpbmcoXCIvY3JlYXRlXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiBjcmVhdGUoQFJlcXVlc3RCb2R5IFRhc2sgdGFzaykge1xuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3ModGFza1NlcnZpY2UuY3JlYXRlKHRhc2spKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKFwi5L+u5pS55Lu75YqhXCIpXG4gICAgQFBvc3RNYXBwaW5nKFwiL3VwZGF0ZVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gdXBkYXRlKEBSZXF1ZXN0Qm9keSBUYXNrIHRhc2spIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLnVwZGF0ZVRhc2sodGFzaykpO1xuICAgIH1cblxuICAgIEBBcGlPcGVyYXRpb24oXCLkv67mlLnku7vliqHnirbmgIFcIilcbiAgICBAUG9zdE1hcHBpbmcoXCIvdXBkYXRlU3RhdHVzXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiB1cGRhdGVTdGF0dXMoQFJlcXVlc3RQYXJhbSBMb25nIGlkLCBAUmVxdWVzdFBhcmFtIEludGVnZXIgc3RhdHVzKSB7XG4gICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgICAgICBpZiAodGFzayAhPSBudWxsKSB7XG4gICAgICAgICAgICB0YXNrLnNldFN0YXR1cyhzdGF0dXMpO1xuICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzaykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuZmFpbGVkKFwi5Lu75Yqh5LiN5a2Y5ZyoXCIpO1xuICAgIH1cbi4uLlxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuenu+mZpOS7u+WKoVwiKVxuICAgIEBQb3N0TWFwcGluZyhcIi9kZWxldGUve2lkfVwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8U3RyaW5nPiBkZWxldGUoQFBhdGhWYXJpYWJsZSBMb25nIGlkKSB7XG4gICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoaWQpO1xuICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSB0YXNrU2VydmljZS5yZW1vdmVCeUlkKHRhc2spO1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKG51bGwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuZmFpbGVkKFwi56e76Zmk5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VXCIpO1xuICAgIH1cblxuICAgIEBBcGlPcGVyYXRpb24oXCLmn6Xor6LmiYDmnInliJfooahcIilcbiAgICBAR2V0TWFwcGluZyhcIi9saXN0QWxsQnlTdGF0dXNcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PExpc3Q8VGFza1ZvPj4gbGlzdEFsbChAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzdGF0dXNcIiwgcmVxdWlyZWQgPSBmYWxzZSkgSW50ZWdlciBzdGF0dXMpIHtcbiAgICAgICAgcmV0dXJuIENvbW1vblJlc3VsdC5zdWNjZXNzKHRhc2tTZXJ2aWNlLmxpc3RBbGwoc3RhdHVzKSk7XG4gICAgfVxuXG4gICAgQEFwaU9wZXJhdGlvbihcIuafpeivouaJgOacieWIl+ihqFwiKVxuICAgIEBHZXRNYXBwaW5nKFwiL2xpc3RBbGxcIilcbiAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PExpc3Q8VGFzaz4+IGxpc3RBbGwoKSB7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2Vzcyh0YXNrU2VydmljZS5saXN0KCkpO1xuICAgIH1cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy90YXNrL2luZGV4LnZ1ZVxuLi4uXG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiB3aWR0aD1cIjEyMFwiIGxhYmVsPVwi5p2D6YeN5YiG5YC8XCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj48ZWwtdGFnIHR5cGU9XCJkYW5nZXJcIj57e3Njb3BlLnJvdy5wcmlvcml0eVNjb3JlIHx8IDB9fTwvZWwtdGFnPjwvdGVtcGxhdGU+XG4gICAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBsYWJlbD1cIueKtuaAgVwiIHdpZHRoPVwiMTYwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy5zdGF0dXMgfCBmb3JtYXRTdGF0dXN9fTwvdGVtcGxhdGU+XG4gICAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBsYWJlbD1cIumihOS8sOaXtumXtFwiIHdpZHRoPVwiMTYwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy50aW1lU3BlbmR9fSDliIbpkp88L3RlbXBsYXRlPlxuICAgICAgICAgIDwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gd2lkdGg9XCIzMDBcIiBsYWJlbD1cIuS7u+WKoeaPj+i/sFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8dGVtcGxhdGUgc2xvdC1zY29wZT1cInNjb3BlXCI+e3tzY29wZS5yb3cuZGVzY3JpcHRpb259fTwvdGVtcGxhdGU+XG4gICAgICAgICAgPC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBsYWJlbD1cIuaIquatouaXtumXtFwiIHdpZHRoPVwiMTYwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIDx0ZW1wbGF0ZSBzbG90LXNjb3BlPVwic2NvcGVcIj57e3Njb3BlLnJvdy5kZWFkbGluZSB8IGZvcm1hdERhdGVUaW1lfX08L3RlbXBsYXRlPlxuLi4uXG4gICAgICBmaWx0ZXJzOiB7XG4gICAgICAgIGZvcm1hdERhdGVUaW1lKHRpbWUpIHtcbiAgICAgICAgICBpZiAodGltZSA9PSBudWxsIHx8IHRpbWUgPT09ICcnKSB7XG4gICAgICAgICAgICByZXR1cm4gJ04vQSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXktTU0tZGQgaGg6bW06c3MnKVxuICAgICAgICB9LFxuICAgICAgICBmb3JtYXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgICAgLy8gaWYgKHN0YXR1cyA9PSAwKSB7XG4gICAgICAgICAgLy8gICByZXR1cm4gJ+W+heWuoeaguCc7XG4gICAgICAgICAgLy8gfVxuICAgICAgICAgIGlmIChzdGF0dXMgPT0gMSkge1xuICAgICAgICAgICAgcmV0dXJuICflvoXlip4nO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdHVzID09IDIpIHtcbiAgICAgICAgICAgIHJldHVybiAn5bey5a6J5o6SJztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXR1cyA9PSAzKSB7XG4gICAgICAgICAgICByZXR1cm4gJ+i/m+ihjOS4rSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0dXMgPT0gNCkge1xuICAgICAgICAgICAgcmV0dXJuICflt7LlrozmiJAnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdHVzID09IDUpIHtcbiAgICAgICAgICAgIHJldHVybiAn5bey6YC+5pyfJztcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuICfmnKrnn6UnO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGNyZWF0ZWQoKSB7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpO1xuICAgICAgICB0aGlzLmdldFByaW9yaXR5TGlzdCgpO1xuICAgICAgICB0aGlzLmdldFVzZXJMaXN0KCk7XG4gICAgICAgIHRoaXMuZ2V0UmVzb3VyY2VMaXN0KCk7XG4gICAgICB9LFxuLi4uXG5QYXRoOiB3ZWIvc3JjL3ZpZXdzL3VzZXJUYXNrL2luZGV4LnZ1ZVxuLi4uXG4gICAgZmlsdGVyczoge1xuICAgICAgZm9ybWF0RGF0ZVRpbWUodGltZSkge1xuICAgICAgICBpZiAodGltZSA9PSBudWxsIHx8IHRpbWUgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuICdOL0EnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tOnNzJylcbiAgICAgIH0sXG4gICAgICBmb3JtYXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgIC8vIGlmIChzdGF0dXMgPT0gMCkge1xuICAgICAgICAvLyAgIHJldHVybiAn5b6F5a6h5qC4JztcbiAgICAgICAgLy8gfVxuICAgICAgICBpZiAoc3RhdHVzID09IDEpIHtcbiAgICAgICAgICByZXR1cm4gJ+W+heWKnic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1cyA9PSAyKSB7XG4gICAgICAgICAgcmV0dXJuICflt7LlronmjpInO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0dXMgPT0gMykge1xuICAgICAgICAgIHJldHVybiAn6L+b6KGM5LitJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdHVzID09IDQpIHtcbiAgICAgICAgICByZXR1cm4gJ+W3suWujOaIkCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1cyA9PSA1KSB7XG4gICAgICAgICAgcmV0dXJuICflt7LpgL7mnJ8nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAn5pyq55+lJztcbiAgICAgIH0sXG4gICAgfSxcbiAgICBjcmVhdGVkKCkge1xuICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpO1xuICAgICAgdGhpcy5nZXRQcmlvcml0eUxpc3QoKTtcbiAgICAgIHRoaXMuZ2V0VXNlckxpc3QoKTtcbiAgICAgIHRoaXMuZ2V0UmVzb3VyY2VMaXN0KCk7XG4gICAgfSxcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuXG4gICAgPCEtLSDnirbmgIHlj5jmm7Tlr7nor53moYYgLS0+XG4gICAgPGVsLWRpYWxvZ1xuICAgICAgdGl0bGU9XCLlj5jmm7Tku7vliqHnirbmgIFcIlxuICAgICAgOnZpc2libGUuc3luYz1cInN0YXR1c0NoYW5nZVZpc2libGVcIlxuICAgICAgd2lkdGg9XCIzMCVcIj5cbiAgICAgIDxlbC1mb3JtIDptb2RlbD1cInN0YXR1c0Zvcm1cIiBsYWJlbC13aWR0aD1cIjgwcHhcIj5cbiAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuW9k+WJjeeKtuaAgVwiPlxuICAgICAgICAgIDxlbC10YWcgOnR5cGU9XCJnZXRTdGF0dXNUYWdUeXBlKHRhc2tEZXRhaWwuc3RhdHVzKVwiPnt7IHRhc2tEZXRhaWwuc3RhdHVzIHwgZm9ybWF0U3RhdHVzIH19PC9lbC10YWc+XG4gICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5paw54q25oCBXCI+XG4gICAgICAgICAgPGVsLXNlbGVjdCB2LW1vZGVsPVwic3RhdHVzRm9ybS5zdGF0dXNcIiBwbGFjZWhvbGRlcj1cIuivt+mAieaLqeaWsOeKtuaAgVwiPlxuICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIxXCIgbGFiZWw9XCLlvoXlip5cIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiMlwiIGxhYmVsPVwi5bey5a6J5o6SXCI+PC9lbC1vcHRpb24+XG4gICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjNcIiBsYWJlbD1cIui/m+ihjOS4rVwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCI0XCIgbGFiZWw9XCLlt7LlrozmiJBcIj48L2VsLW9wdGlvbj5cbiAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICA8L2VsLWZvcm0+XG4gICAgICA8c3BhbiBzbG90PVwiZm9vdGVyXCIgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgIDxlbC1idXR0b24gQGNsaWNrPVwic3RhdHVzQ2hhbmdlVmlzaWJsZSA9IGZhbHNlXCI+5Y+WIOa2iDwvZWwtYnV0dG9uPlxuLi4uXG4gICAgICBcbiAgICAgIC8vIOiOt+WPlueKtuaAgeagh+etvuexu+Wei1xuICAgICAgZ2V0U3RhdHVzVGFnVHlwZShzdGF0dXMpIHtcbiAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiAnaW5mbyc7ICAgIC8vIOW+heWKnlxuICAgICAgICAgIGNhc2UgMjogcmV0dXJuICd3YXJuaW5nJzsgLy8g5bey5a6J5o6SXG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gJ3ByaW1hcnknOyAvLyDov5vooYzkuK1cbiAgICAgICAgICBjYXNlIDQ6IHJldHVybiAnc3VjY2Vzcyc7IC8vIOW3suWujOaIkFxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuICdkYW5nZXInOyAgLy8g5bey6YC+5pyfXG4gICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdpbmZvJztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8g5aSE55CG54q25oCB5Y+Y5pu0XG4gICAgICBoYW5kbGVTdGF0dXNDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgICAgICB1cGRhdGVUYXNrU3RhdHVzKHRoaXMudGFza0RldGFpbC5pZCwgdGhpcy5zdGF0dXNGb3JtLnN0YXR1cykudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zdGF0dXNDaGFuZ2VWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy50YXNrRGV0YWlsLnN0YXR1cyA9IHRoaXMuc3RhdHVzRm9ybS5zdGF0dXM7XG4gICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnirbmgIHmm7TmlrDmiJDlip8nKTtcbiAgICAgICAgICB0aGlzLmdldExpc3QoKTsgLy8g5Yi35paw5YiX6KGoXG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBcbiAgICAgIC8vIOaYvuekuuaPkOmGkuiuvue9ruWvueivneahhlxuICAgICAgc2hvd1JlbWluZGVyRGlhbG9nKCkge1xuICAgICAgICB0aGlzLnJlbWluZGVyVGltZSA9IHRoaXMudGFza0RldGFpbC5yZW1pbmRlclRpbWU7XG4gICAgICAgIHRoaXMucmVtaW5kZXJEaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhXG4uLi5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5aaC5p6c5Lu75Yqh5pyJ5a+55bqU55qE5pel56iLXG4gICAgICAgICAgICBpZiAoIXNjaGVkdWxlcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaXpeeoi+aciee7k+adn+aXtumXtO+8jOS4lOe7k+adn+aXtumXtOW3sui/h++8jOabtOaWsOS7u+WKoeeKtuaAgeS4uuW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpICE9IG51bGwgJiYgc2NoZWR1bGUuZ2V0RW5kVGltZSgpLmlzQmVmb3JlKG5vdykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWwhueKtuaAgeabtOaWsOS4uuW3sumAvuacn1xuICAgICAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlj5HpgIHpgL7mnJ/pgJrnn6VcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOino+aekOeUqOaIt+aVsOaNrlxuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWPkemAgemAvuacn+mAmuefpVxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxOb3RpZmljYXRpb24+IG5vdGlmaWNhdGlvbnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJJZHMuZm9yRWFjaChpZCAtPiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0U2NoZWR1bGVJZChzY2hlZHVsZS5nZXRJZCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VXNlcklkKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VHlwZSg0KTsgLy8g6YC+5pyf6YCa55+l57G75Z6LXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldE1lc3NhZ2UoXCLmgqjnmoTku7vliqEgXFxcIlwiICsgdGFzay5nZXRUaXRsZSgpICsgXCJcXFwiIOW3sumAvuacn++8jOivt+WwveW/q+WkhOeQhlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmFkZChub3RpZmljYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3Vtcy9tb2RlbC9VbXNSb2xlLmphdmFcbi4uLlxuXG4vKipcbiAqIDxwPlxuICog5ZCO5Y+w55So5oi36KeS6Imy6KGoXG4gKiA8L3A+XG4gKlxuICogQGF1dGhvciBtYWNyb1xuICogQHNpbmNlIDIwMjUtMDMtMjdcbiAqL1xuQERhdGFcbkBFcXVhbHNBbmRIYXNoQ29kZShjYWxsU3VwZXIgPSBmYWxzZSlcbkBUYWJsZU5hbWUoXCJ1bXNfcm9sZVwiKVxuQEFwaU1vZGVsKHZhbHVlPVwiVW1zUm9sZeWvueixoVwiLCBkZXNjcmlwdGlvbj1cIuWQjuWPsOeUqOaIt+inkuiJsuihqFwiKVxucHVibGljIGNsYXNzIFVtc1JvbGUgaW1wbGVtZW50cyBTZXJpYWxpemFibGUge1xuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgbG9uZyBzZXJpYWxWZXJzaW9uVUlEPTFMO1xuXG4gICAgQFRhYmxlSWQodmFsdWUgPSBcImlkXCIsIHR5cGUgPSBJZFR5cGUuQVVUTylcbiAgICBwcml2YXRlIExvbmcgaWQ7XG5cbiAgICBAQXBpTW9kZWxQcm9wZXJ0eSh2YWx1ZSA9IFwi5ZCN56ewXCIpXG4gICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLmj4/ov7BcIilcbiAgICBwcml2YXRlIFN0cmluZyBkZXNjcmlwdGlvbjtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLlkI7lj7DnlKjmiLfmlbDph49cIilcbiAgICBwcml2YXRlIEludGVnZXIgYWRtaW5Db3VudDtcblxuICAgIEBBcGlNb2RlbFByb3BlcnR5KHZhbHVlID0gXCLliJvlu7rml7bpl7RcIilcbiAgICBwcml2YXRlIERhdGUgY3JlYXRlVGltZTtcblxuICAgIEBBcGlNb2RlbFAuLi4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIyNzgxMTFmYi00ODdjLTQ3OWUtYTk0MC1jNDJmYWQzMDNkOGM7dG9vbHVfMDFEYTlibzQ3aE5oZDFkUG5odGhGZkh4Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHdlYi9zcmMvYXBpL2FwaS5qc1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0J1xuXG4vLyDotYTmupDliIbnsbtcbmV4cG9ydCBmdW5jdGlvbiBmZXRjaENhdGVnb3J5TGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2F0ZWdvcnkvbGlzdCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNhdGVnb3J5KGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2F0ZWdvcnkvY3JlYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlQ2F0ZWdvcnkoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9jYXRlZ29yeS91cGRhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGFcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZUNhdGVnb3J5KGlkKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL2NhdGVnb3J5L2RlbGV0ZS8nICsgaWQsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaEFsbENhdGVnb3J5TGlzdCgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2F0ZWdvcnkvbGlzdEFsbCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuLy8g6aaW6aG15pWw5o2uXG5leHBvcnQgZnVuY3Rpb24gaG9tZURhdGEoKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL2hvbWUnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG4uLi5cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVJlc291cmNlKGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcmVzb3VyY2VzL3VwZGF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUmVzb3VyY2UoaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcmVzb3VyY2VzL2RlbGV0ZS8nICsgaWQsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaEFsbFJlc291cmNlTGlzdCgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcmVzb3VyY2VzL2xpc3RBbGwnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cbi8vIOadg+mHjVxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoUHJpb3JpdHlMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9wcmlvcml0eS9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJpb3JpdHkoZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9wcmlvcml0eS9jcmVhdGUnLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgIGRhdGE6IGRhdGEsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVQcmlvcml0eShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3ByaW9yaXR5L3VwZGF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUHJpb3JpdHkoaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvcHJpb3JpdHkvZGVsZXRlLycgKyBpZCxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsUHJpb3JpdHlMaXN0KHBhcmFtcykge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9wcmlvcml0eS9saXN0QWxsJyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG5cbi8vIOS7u+WKoVxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVGFza0xpc3QocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svbGlzdCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRhc2soZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL2NyZWF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YSxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVRhc2soZGF0YSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL3VwZGF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdXBkYXRlVGFza1N0YXR1cyhpZCwgc3RhdHVzKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svdXBkYXRlU3RhdHVzJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBwYXJhbXM6IHsgaWQsIHN0YXR1cyB9XG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRUYXNrUmVtaW5kZXIoaWQsIHJlbWluZGVyVGltZSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL3NldFJlbWluZGVyJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBwYXJhbXM6IHsgaWQsIHJlbWluZGVyVGltZSB9XG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVUYXNrKGlkKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svZGVsZXRlLycgKyBpZCxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cyhwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvdGFzay9saXN0QWxsQnlTdGF0dXMnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaEFsbFRhc2tMaXN0KCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi90YXNrL2xpc3RBbGwnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFRhc2tJbmZvKGlkKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3Rhc2svaW5mby8nICsgaWQsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgfSlcbn1cblxuLy8g5a6J5o6SXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hTY2hlZHVsZUxpc3QocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL2xpc3QnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbi8vIOaXpeeoi+aZuuiDveaOkuW6j1xuZXhwb3J0IGZ1bmN0aW9uIGZldGNoU2NoZWR1bGVTbWFydFNvcnQocGFyYW1zKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL3NtYXJ0U29ydCcsXG4gICAgbWV0aG9kOiAnZ2V0JyxcbiAgICBwYXJhbXM6IHBhcmFtcyxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoVXNlclNjaGVkdWxlTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvdXNlci9saXN0JyxcbiAgICBtZXRob2Q6ICdnZXQnLFxuICAgIHBhcmFtczogcGFyYW1zLFxuICB9KVxufVxuXG4vLyDnlKjmiLfml6XnqIvmmbrog73mjpLluo9cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFVzZXJTY2hlZHVsZVNtYXJ0U29ydChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvdXNlci9zbWFydFNvcnQnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaE1vbnRoU2NoZWR1bGVMaXN0KHllYXJNb250aCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiBgL3dlYi9zY2hlZHVsZS9tb250aC8ke3llYXJNb250aH1gLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmZXRjaFVzZXJNb250aFNjaGVkdWxlTGlzdCh5ZWFyTW9udGgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogYC93ZWIvc2NoZWR1bGUvbW9udGgvdXNlci8ke3llYXJNb250aH1gLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTY2hlZHVsZShkYXRhKSB7XG4gIHJldHVybiByZXF1ZXN0KHtcbiAgICB1cmw6ICcvd2ViL3NjaGVkdWxlL2NyZWF0ZScsXG4gICAgbWV0aG9kOiAncG9zdCcsXG4gICAgZGF0YTogZGF0YSxcbiAgfSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNjaGVkdWxlKGRhdGEpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvdXBkYXRlJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBkYXRhOiBkYXRhXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVTY2hlZHVsZVRpbWUoaWQsIHN0YXJ0VGltZSwgZW5kVGltZSkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS91cGRhdGVUaW1lJyxcbiAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICBwYXJhbXM6IHsgaWQsIHN0YXJ0VGltZSwgZW5kVGltZSB9XG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVTY2hlZHVsZShpZCkge1xuICByZXR1cm4gcmVxdWVzdCh7XG4gICAgdXJsOiAnL3dlYi9zY2hlZHVsZS9kZWxldGUvJyArIGlkLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hDb25mbGljdFNjaGVkdWxlTGlzdChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvc2NoZWR1bGUvY29uZmxpY3QvbGlzdC8nICsgcGFyYW1zLmlkLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG4uLi5cblxuZXhwb3J0IGZ1bmN0aW9uIG1hcmtOb3RpZmljYXRpb25Bc1JlYWQoaWQpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvbm90aWZpY2F0aW9uL3JlYWQvJyArIGlkLFxuICAgIG1ldGhvZDogJ3Bvc3QnLFxuICB9KVxufVxuXG4vLyDmiqXooahcbmV4cG9ydCBmdW5jdGlvbiB0cmVuZFBpZSgpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2hhcnQvdHJlbmRQaWUnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmVuZChwYXJhbXMpIHtcbiAgcmV0dXJuIHJlcXVlc3Qoe1xuICAgIHVybDogJy93ZWIvY2hhcnQvdHJlbmQnLFxuICAgIG1ldGhvZDogJ2dldCcsXG4gICAgcGFyYW1zOiBwYXJhbXMsXG4gIH0pXG59XG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlXG4uLi5cbiAgICAgIDwvc3Bhbj5cbiAgICA8L2VsLWRpYWxvZz5cbiAgPC9kaXY+XG48L3RlbXBsYXRlPlxuPHNjcmlwdD5cbiAgaW1wb3J0IHtmZXRjaFNjaGVkdWxlTGlzdCwgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCwgY3JlYXRlU2NoZWR1bGUsdXBkYXRlU2NoZWR1bGUsZGVsZXRlU2NoZWR1bGUsZmV0Y2hBbGxUYXNrTGlzdCxmZXRjaEFsbFRhc2tMaXN0QnlTdGF0dXMsZmV0Y2hUYXNrSW5mbyxmZXRjaENvbmZsaWN0U2NoZWR1bGVMaXN0LHVwZGF0ZVRhc2tTdGF0dXMsc2V0VGFza1JlbWluZGVyfSBmcm9tICdAL2FwaS9hcGknO1xuICBpbXBvcnQgSnNCYXJjb2RlIGZyb20gJ2pzYmFyY29kZSc7XG4gIGltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7XG4gIGltcG9ydCB7Zm9ybWF0RGF0ZX0gZnJvbSAnQC91dGlscy9kYXRlJztcblxuICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgIHBhZ2VOdW06IDEsXG4gICAgcGFnZVNpemU6IDEwLFxuICAgIHNlYXJjaEtleTogbnVsbCxcbiAgICB0eXBlOiBudWxsLFxuICB9O1xuICBjb25zdCBkZWZhdWx0QWRtaW4gPSB7XG4gICAgaWQ6IG51bGwsXG4gICAgdGFza0lkOiBudWxsLFxuICAgIHN0YXJ0VGltZTogbnVsbCxcbiAgICBlbmRUaW1lOiBudWxsLFxuICAgIHJlbWluZGVyVGltZTogbnVsbCxcbiAgfTtcbi4uLlxuICAgICAgLy8g5qC85byP5YyW5bGV56S65pel5pyfXG4gICAgICBmb3JtYXREYXlEYXRlKGRhdGVTdHIpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlLCAneXl5eeW5tE1N5pyIZGTml6UnKTtcbiAgICAgIH0sXG4gICAgICAvLyDmoLzlvI/ljJbml7bpl7TkuLpISDpNTeagvOW8j1xuICAgICAgZm9ybWF0VGltZShkYXRlVGltZVN0cikge1xuICAgICAgICBpZiAoIWRhdGVUaW1lU3RyKSByZXR1cm4gJyc7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVRpbWVTdHIuc3BsaXQoJyAnKTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDIgfHwgIXBhcnRzWzFdKSByZXR1cm4gJyc7XG4gICAgICAgIHJldHVybiBwYXJ0c1sxXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0VGFza0xpc3QocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzKHBhcmFtcylcbiAgICAgICAgdGhpcy50YXNrTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0QWxsVGFza0xpc3QoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbGxUYXNrTGlzdCgpXG4gICAgICAgIHRoaXMudGFza0xpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldFRhc2tJbmZvKGlkKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hUYXNrSW5mbyhpZCk7XG4gICAgICAgIHRoaXMudGFza0luZm8gPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHZpZXdCYXJjb2RlKHJvdykge1xuICAgICAgICB0aGlzLmN1cnJlbnRDb2RlID0gcm93LnRhc2tDb2RlO1xuICAgICAgICBhd2FpdCB0aGlzLmdldFRhc2tJbmZvKHJvdy50YXNrSWQpO1xuICAgICAgICB0aGlzLmJhcmNvZGVEaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3MvdXNlclNjaGVkdWxlL2luZGV4LnZ1ZVxuLi4uXG4gIGltcG9ydCB7ZmV0Y2hVc2VyU2NoZWR1bGVMaXN0LCBmZXRjaFVzZXJTY2hlZHVsZVNtYXJ0U29ydCwgZmV0Y2hNb250aFNjaGVkdWxlTGlzdCwgZmV0Y2hVc2VyTW9udGhTY2hlZHVsZUxpc3QsIGNyZWF0ZVNjaGVkdWxlLCB1cGRhdGVTY2hlZHVsZSwgZGVsZXRlU2NoZWR1bGUsIGZldGNoQWxsVGFza0xpc3QsIGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cywgZmV0Y2hUYXNrSW5mbywgZmV0Y2hDb25mbGljdFNjaGVkdWxlTGlzdCwgdXBkYXRlVGFza1N0YXR1cywgc2V0VGFza1JlbWluZGVyfSBmcm9tICdAL2FwaS9hcGknO1xuICBpbXBvcnQgSnNCYXJjb2RlIGZyb20gJ2pzYmFyY29kZSc7XG4gIGltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7XG4gIGltcG9ydCB7Zm9ybWF0RGF0ZX0gZnJvbSAnQC91dGlscy9kYXRlJztcblxuICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgIHBhZ2VOdW06IDEsXG4gICAgcGFnZVNpemU6IDEwLFxuICAgIHNlYXJjaEtleTogbnVsbCxcbiAgICB0eXBlOiBudWxsLFxuICB9O1xuICBjb25zdCBkZWZhdWx0QWRtaW4gPSB7XG4gICAgaWQ6IG51bGwsXG4gICAgdGFza0lkOiBudWxsLFxuICAgIHN0YXJ0VGltZTogbnVsbCxcbiAgICBlbmRUaW1lOiBudWxsLFxuICAgIHJlbWluZGVyVGltZTogbnVsbCxcbiAgfTtcbi4uLlxuICAgICAgYXN5bmMgZ2V0QWxsVGFza0xpc3QoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbGxUYXNrTGlzdCgpXG4gICAgICAgIHRoaXMudGFza0xpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldFRhc2tJbmZvKGlkKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hUYXNrSW5mbyhpZCk7XG4gICAgICAgIHRoaXMudGFza0luZm8gPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHZpZXdCYXJjb2RlKHJvdykge1xuICAgICAgICB0aGlzLmN1cnJlbnRDb2RlID0gcm93LnRhc2tDb2RlO1xuICAgICAgICBhd2FpdCB0aGlzLmdldFRhc2tJbmZvKHJvdy50YXNrSWQpO1xuICAgICAgICB0aGlzLmJhcmNvZGVEaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgICBhc3luYyB2aWV3SW5mbyhyb3cpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRUYXNrSW5mbyhyb3cudGFza0lkKTtcbiAgICAgICAgdGhpcy5pbmZvRGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdmlld0NvbmZsaWN0KHJvdykge1xuICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaENvbmZsaWN0U2NoZWR1bGVMaXN0KHtpZDpyb3cuaWQsc2NoZWR1bGVJZHM6IHJvdy5jb25mbGljdFNjaGVkdWxlSWRzIHx8ICcnfSk7XG4gICAgICAgIHRoaXMuY29uZmxpY3RMaXN0ID0gcmVzLmRhdGE7XG4gICAgICAgIHRoaXMuY29uZmxpY3REaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3MvdGFzay9zbWFydC1zY2hlZHVsZS52dWVcbi4uLlxuICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwicmVzdWx0RGlhbG9nVmlzaWJsZSA9IGZhbHNlXCI+56GuIOWumjwvZWwtYnV0dG9uPlxuICAgICAgPC9zcGFuPlxuICAgIDwvZWwtZGlhbG9nPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgeyBmZXRjaFByaW9yaXRpemVkVGFza0xpc3QsIGF1dG9TY2hlZHVsZVRhc2tzLCBjcmVhdGVTY2hlZHVsZSB9IGZyb20gJ0AvYXBpL2FwaSc7XG5pbXBvcnQgeyBmb3JtYXREYXRlIH0gZnJvbSAnQC91dGlscy9kYXRlJztcbi4uLlxuICBtZXRob2RzOiB7XG4gICAgZmV0Y2hQcmlvcml0aXplZFRhc2tzKCkge1xuICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICBmZXRjaFByaW9yaXRpemVkVGFza0xpc3QoKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgdGhpcy5wcmlvcml0aXplZFRhc2tzID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hQcmlvcml0aXplZFRhc2tzKCkge1xuICAgICAgdGhpcy5mZXRjaFByaW9yaXRpemVkVGFza3MoKTtcbiAgICB9LFxuICAgIGdldFByaW9yaXR5VGFnVHlwZShzY29yZSkge1xuICAgICAgY29uc3Qgc2NvcmVOdW0gPSBOdW1iZXIoc2NvcmUpO1xuICAgICAgaWYgKHNjb3JlTnVtID49IDE1MCkgcmV0dXJuICdkYW5nZXInO1xuICAgICAgaWYgKHNjb3JlTnVtID49IDEwMCkgcmV0dXJuICd3YXJuaW5nJztcbiAgICAgIGlmIChzY29yZU51bSA+PSA1MCkgcmV0dXJuICdzdWNjZXNzJztcbiAgICAgIHJldHVybiAnaW5mbyc7XG4gICAgfSxcbiAgICBoYW5kbGVBdXRvU2NoZWR1bGUoKSB7XG4gICAgICBjb25zdCB7IHNjaGVkdWxlRGF0ZSB9ID0gdGhpcy5xdWVyeVBhcmFtcztcbiAgICAgIGlmICghc2NoZWR1bGVEYXRlKSB7XG4gICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivt+mAieaLqeaXpeacn++8gScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4uLi5cbiAgICBzdWJtaXRTY2hlZHVsZVRhc2soKSB7XG4gICAgICBjb25zdCB7IHRhc2tJZCwgc3RhcnRUaW1lLCBlbmRUaW1lIH0gPSB0aGlzLnNjaGVkdWxlRm9ybTtcbiAgICAgIFxuICAgICAgaWYgKCFzdGFydFRpbWUgfHwgIWVuZFRpbWUpIHtcbiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+36YCJ5oup5byA5aeL5ZKM57uT5p2f5pe26Ze077yBJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKG5ldyBEYXRlKGVuZFRpbWUpIDw9IG5ldyBEYXRlKHN0YXJ0VGltZSkpIHtcbiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign57uT5p2f5pe26Ze05b+F6aG75pma5LqO5byA5aeL5pe26Ze077yBJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY3JlYXRlU2NoZWR1bGUoe1xuICAgICAgICB0YXNrSWQsXG4gICAgICAgIHN0YXJ0VGltZSxcbiAgICAgICAgZW5kVGltZVxuICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5a6J5o6S5oiQ5Yqf77yBJyk7XG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlZnJlc2hQcmlvcml0aXplZFRhc2tzKCk7XG4gICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgIC8vIOmUmeivr+WkhOeQhlxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG48L3NjcmlwdD5cblxuPHN0eWxlIHNjb3BlZD5cbi50YXNrLXByaW9yaXR5LWluZm8ge1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG4udGFzay1wcmlvcml0eS1saXN0IHtcbiAgbWFyZ2luLXRvcDogMjBweDtcbn1cbjwvc3R5bGU+IC4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy90YXNrL2luZGV4LnZ1ZVxuLi4uXG4gICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICAgIDwvZWwtZm9ybT5cbiAgICAgICAgPHNwYW4gc2xvdD1cImZvb3RlclwiIGNsYXNzPVwiZGlhbG9nLWZvb3RlclwiPlxuICAgICAgICAgIDxlbC1idXR0b24gQGNsaWNrPVwiZGlhbG9nVmlzaWJsZSA9IGZhbHNlXCIgc2l6ZT1cInNtYWxsXCI+5Y+WIOa2iDwvZWwtYnV0dG9uPlxuICAgICAgICAgIDxlbC1idXR0b24gdHlwZT1cInByaW1hcnlcIiBAY2xpY2s9XCJoYW5kbGVEaWFsb2dDb25maXJtKClcIiBzaXplPVwic21hbGxcIj7noa4g5a6aPC9lbC1idXR0b24+XG4gICAgICAgIDwvc3Bhbj5cbiAgICAgIDwvZWwtZGlhbG9nPlxuICAgIDwvZGl2PlxuICA8L3RlbXBsYXRlPlxuICA8c2NyaXB0PlxuICAgIGltcG9ydCB7ZmV0Y2hUYXNrTGlzdCxjcmVhdGVUYXNrLHVwZGF0ZVRhc2ssZGVsZXRlVGFzayxmZXRjaEFsbENhdGVnb3J5TGlzdCwgZmV0Y2hBbGxQcmlvcml0eUxpc3QsIGZldGNoQWxsUmVzb3VyY2VMaXN0fSBmcm9tICdAL2FwaS9hcGknO1xuICAgIGltcG9ydCB7ZmV0Y2hBbGxVc2VyTGlzdH0gZnJvbSAnQC9hcGkvbG9naW4nO1xuXG4gICAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuXG4gICAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgICAgIHBhZ2VOdW06IDEsXG4gICAgICBwYWdlU2l6ZTogMTAsXG4gICAgICBzZWFyY2hLZXk6IG51bGwsXG4gICAgICBjYXRlZ29yeUlkOiBudWxsLFxuICAgIH07XG4uLi5cbiAgICAgIG1ldGhvZHM6IHtcbiAgICAgICAgZ2V0VXNlckxpc3QoKSB7XG4gICAgICAgICAgZmV0Y2hBbGxVc2VyTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy51c2VyTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFJlc291cmNlTGlzdCgpIHtcbiAgICAgICAgICBmZXRjaEFsbFJlc291cmNlTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvdXJjZUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRQcmlvcml0eUxpc3QoKSB7XG4gICAgICAgICAgZmV0Y2hBbGxQcmlvcml0eUxpc3Qoe3R5cGU6IDF9KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW1wb3J0YW5jZUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGZldGNoQWxsUHJpb3JpdHlMaXN0KHt0eXBlOiAyfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmV4aWdlbmN5TGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZVJlc2V0U2VhcmNoKCkge1xuICAgICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XG4gICAgICAgICAgdGhpcy5nZXRMaXN0KClcbiAgICAgICAgfSxcbi4uLlxuICAgICAgICBoYW5kbGVEaWFsb2dDb25maXJtKCkge1xuICAgICAgICAgIHRoaXMuJHJlZnMuYWRtaW5Gb3JtLnZhbGlkYXRlKHZhbGlkID0+IHtcbiAgICAgICAgICAgIGlmICh2YWxpZCkge1xuICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbopoHnoa7orqQ/JywgJ+aPkOekuicsIHtcbiAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsXG4gICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsXG4gICAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnXG4gICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRtaW4udXNlckRhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmFkbWluLnVzZXJJZHMpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRtaW4ucmVzb3VyY2VzRGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuYWRtaW4ucmVzb3VyY2VJZHMpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdCkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlVGFzayh0aGlzLmFkbWluKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKn++8gScsXG4gICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjcmVhdGVUYXNrKHRoaXMuYWRtaW4pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yib5bu65oiQ5Yqf77yBJyxcbiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVTZWFyY2hMaXN0KCkge1xuICAgICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSAxO1xuICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkge1xuICAgICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSAxO1xuICAgICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplID0gdmFsO1xuICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkge1xuICAgICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSB2YWw7XG4gICAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUFkZCgpIHtcbiAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgICAgLy8gdGhpcy51c2VySWRzID0gW107XG4gICAgICAgICAgLy8gdGhpcy5yZXNvdXJjZUlkcyA9IFtdO1xuICAgICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWRtaW4pO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVEZWxldGUoaW5kZXgsIHJvdykge1xuICAgICAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuimgeWIoOmZpOivpeS7u+WKoT/liKDpmaTlkI7lsIbml6Dms5XmkqTplIAnLCAn5o+Q56S6Jywge1xuICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLFxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsXG4gICAgICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZVRhc2socm93LmlkKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlVXBkYXRlKHJvdykge1xuICAgICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcm93LnVzZXJJZHMgPSBKU09OLnBhcnNlKHJvdy51c2VyRGF0YSk7XG4gICAgICAgICAgICByb3cucmVzb3VyY2VJZHMgPSBKU09OLnBhcnNlKHJvdy5yZXNvdXJjZXNEYXRhKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcm93LnVzZXJJZHMgPSBbXTtcbiAgICAgICAgICAgIHJvdy5yZXNvdXJjZUlkcyA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmFkbWluID0gT2JqZWN0LmFzc2lnbih7fSxyb3cpO1xuICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICAgIGdldExpc3QoKSB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgZmV0Y2hUYXNrTGlzdCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlU3VjY2VzcyhyZXNwb25zZSwgZmlsZSkge1xuICAgICAgICAgIC8vIOWkhOeQhuS4iuS8oOaIkOWKn+WQjueahOmAu+i+ke+8jOiOt+WPluWQjuerr+i/lOWbnueahOaWh+S7tui3r+W+hFxuICAgICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICB0aGlzLmFkbWluLmltYWdlID0gYCR7cHJvY2Vzcy5lbnYuQkFTRV9BUEl9LyR7ZmlsZVBhdGh9YDtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGZpbGVQYXRoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2F0ZWdvcnlMaXN0KCkge1xuICAgICAgICAgIGZldGNoQWxsQ2F0ZWdvcnlMaXN0KCkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSByZXMuZGF0YVxuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4uLi5cblBhdGg6IHdlYi9zcmMvdmlld3MvdXNlclRhc2svaW5kZXgudnVlXG4uLi5cbiAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICA8L2VsLWZvcm0+XG4gICAgICA8c3BhbiBzbG90PVwiZm9vdGVyXCIgY2xhc3M9XCJkaWFsb2ctZm9vdGVyXCI+XG4gICAgICAgIDxlbC1idXR0b24gQGNsaWNrPVwiZGlhbG9nVmlzaWJsZSA9IGZhbHNlXCIgc2l6ZT1cInNtYWxsXCI+5Y+WIOa2iDwvZWwtYnV0dG9uPlxuICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiaGFuZGxlRGlhbG9nQ29uZmlybSgpXCIgc2l6ZT1cInNtYWxsXCI+56GuIOWumjwvZWwtYnV0dG9uPlxuICAgICAgPC9zcGFuPlxuICAgIDwvZWwtZGlhbG9nPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG48c2NyaXB0PlxuICBpbXBvcnQge2ZldGNoVGFza0xpc3QsY3JlYXRlVGFzayx1cGRhdGVUYXNrLGRlbGV0ZVRhc2ssZmV0Y2hBbGxDYXRlZ29yeUxpc3QsIGZldGNoQWxsUHJpb3JpdHlMaXN0LCBmZXRjaEFsbFJlc291cmNlTGlzdH0gZnJvbSAnQC9hcGkvYXBpJztcbiAgaW1wb3J0IHtmZXRjaEFsbFVzZXJMaXN0fSBmcm9tICdAL2FwaS9sb2dpbic7XG5cbiAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuXG4gIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAgcGFnZU51bTogMSxcbiAgICBwYWdlU2l6ZTogMTAsXG4gICAgc2VhcmNoS2V5OiBudWxsLFxuICAgIGNhdGVnb3J5SWQ6IG51bGwsXG4gIH07XG4uLi5cbiAgICBtZXRob2RzOiB7XG4gICAgICBnZXRVc2VyTGlzdCgpIHtcbiAgICAgICAgZmV0Y2hBbGxVc2VyTGlzdCgpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMudXNlckxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRSZXNvdXJjZUxpc3QoKSB7XG4gICAgICAgIGZldGNoQWxsUmVzb3VyY2VMaXN0KCkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5yZXNvdXJjZUxpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRQcmlvcml0eUxpc3QoKSB7XG4gICAgICAgIGZldGNoQWxsUHJpb3JpdHlMaXN0KHt0eXBlOiAxfSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5pbXBvcnRhbmNlTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgIH0pO1xuICAgICAgICBmZXRjaEFsbFByaW9yaXR5TGlzdCh7dHlwZTogMn0pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMuZXhpZ2VuY3lMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpXG4gICAgICB9LFxuLi4uXG4gICAgICBoYW5kbGVEaWFsb2dDb25maXJtKCkge1xuICAgICAgICB0aGlzLiRyZWZzLmFkbWluRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7XG4gICAgICAgICAgaWYgKHZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbopoHnoa7orqQ/JywgJ+aPkOekuicsIHtcbiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLFxuICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnXG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5hZG1pbi51c2VyRGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuYWRtaW4udXNlcklkcyk7XG4gICAgICAgICAgICAgIHRoaXMuYWRtaW4ucmVzb3VyY2VzRGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuYWRtaW4ucmVzb3VyY2VJZHMpO1xuICAgICAgICAgICAgICBpZiAodGhpcy5pc0VkaXQpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVUYXNrKHRoaXMuYWRtaW4pLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip/vvIEnLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNyZWF0ZVRhc2sodGhpcy5hZG1pbikudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIm+W7uuaIkOWKn++8gScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVTZWFyY2hMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtID0gMTtcbiAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlU2l6ZUNoYW5nZSh2YWwpIHtcbiAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IDE7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplID0gdmFsO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtID0gdmFsO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVBZGQoKSB7XG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgIC8vIHRoaXMudXNlcklkcyA9IFtdO1xuICAgICAgICAvLyB0aGlzLnJlc291cmNlSWRzID0gW107XG4gICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWRtaW4pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7XG4gICAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuimgeWIoOmZpOivpeS7u+WKoT/liKDpmaTlkI7lsIbml6Dms5XmkqTplIAnLCAn5o+Q56S6Jywge1xuICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJyxcbiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJyxcbiAgICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgZGVsZXRlVGFzayhyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVVcGRhdGUocm93KSB7XG4gICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByb3cudXNlcklkcyA9IEpTT04ucGFyc2Uocm93LnVzZXJEYXRhKTtcbiAgICAgICAgICByb3cucmVzb3VyY2VJZHMgPSBKU09OLnBhcnNlKHJvdy5yZXNvdXJjZXNEYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByb3cudXNlcklkcyA9IFtdO1xuICAgICAgICAgIHJvdy5yZXNvdXJjZUlkcyA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LHJvdyk7XG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICB9LFxuICAgICAgZ2V0TGlzdCgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIGZldGNoVGFza0xpc3QodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZVN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUpIHtcbiAgICAgICAgLy8g5aSE55CG5LiK5Lyg5oiQ5Yqf5ZCO55qE6YC76L6R77yM6I635Y+W5ZCO56uv6L+U5Zue55qE5paH5Lu26Lev5b6EXG4gICAgICAgIGNvbnN0IGZpbGVQYXRoID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgdGhpcy5hZG1pbi5pbWFnZSA9IGAke3Byb2Nlc3MuZW52LkJBU0VfQVBJfS8ke2ZpbGVQYXRofWA7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZmlsZVBhdGgpO1xuICAgICAgfSxcbiAgICAgIGdldENhdGVnb3J5TGlzdCgpIHtcbiAgICAgICAgZmV0Y2hBbGxDYXRlZ29yeUxpc3QoKS50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSByZXMuZGF0YVxuICAgICAgICB9KVxuICAgICAgfSxcbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNGQyMGNjZjYtNDRiYy00Mjg2LWI1MzQtMGRiYWU4YjBlY2FmO3Rvb2x1XzAxOTRRb1E2a1M0aWdydVZ5Q3BOZ0FEVyI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1NjaGVkdWxlQ29udHJvbGxlci5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgNDdcdFxuICAgIDQ4XHQgICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhDb21tb25QYWdlLnJlc3RQYWdlKHNjaGVkdWxlUGFnZSkpO1xuICAgIDQ5XHQgICAgfVxuICAgIDUwXHRcbiAgICA1MVx0ICAgIEBBcGlPcGVyYXRpb24oXCLnlKjmiLfml6XnqIvmn6Xor6IgLSDmmbrog73mjpLluo9cIilcbiAgICA1Mlx0ICAgIEBHZXRNYXBwaW5nKFwiL3VzZXIvc21hcnRTb3J0XCIpXG4gICAgNTNcdCAgICBwdWJsaWMgQ29tbW9uUmVzdWx0PENvbW1vblBhZ2U8U2NoZWR1bGVWbz4+IHVzZXJTbWFydFNvcnQoQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZVNpemVcIiwgZGVmYXVsdFZhbHVlID0gXCIyMFwiKSBJbnRlZ2VyIHBhZ2VTaXplLFxuICAgIDU0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZU51bVwiLCBkZWZhdWx0VmFsdWUgPSBcIjFcIikgSW50ZWdlciBwYWdlTnVtLFxuICAgIDU1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwic2VhcmNoS2V5XCIsIHJlcXVpcmVkID0gZmFsc2UpIFN0cmluZyBzZWFyY2hLZXksXG4gICAgNTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJzdGF0dXNcIiwgcmVxdWlyZWQgPSBmYWxzZSkgSW50ZWdlciBzdGF0dXMpIHtcbiAgICA1N1x0ICAgICAgICBMb25nIHVzZXJJZCA9IFNlY3VyaXR5VXRpbHMuZ2V0Q3VycmVudFVzZXJJZCgpO1xuICAgIDU4XHQgICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gc2NoZWR1bGVQYWdlID0gc2NoZWR1bGVTZXJ2aWNlLnNtYXJ0U29ydFVzZXIocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgdXNlcklkLCBzdGF0dXMpO1xuICAgIDU5XHRcbiAgICA2MFx0ICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MoQ29tbW9uUGFnZS5yZXN0UGFnZShzY2hlZHVsZVBhZ2UpKTtcbiAgICA2MVx0ICAgIH1cbiAgICA2Mlx0XG4gICAgNjNcdCAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLliJvlu7rml6XnqIvlronmjpJcIilcbiAgICA2NFx0ICAgIEBQb3N0TWFwcGluZyhcIi9jcmVhdGVcIilcbiAgICA2NVx0ICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Qm9vbGVhbj4gY3JlYXRlKEBSZXF1ZXN0Qm9keSBTY2hlZHVsZSBzY2hlZHVsZSkge1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIyNjkyZmVlNy05YWY5LTRjOTktYWMyOC1mOWI5ZGRmZmQwYzU7dG9vbHVfMDFBWURiM1Z1SFh2YXhMdncyWVlUMW83Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmE6XG4gICAgIDFcdHBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2U7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbiAgICAgNFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5TY2hlZHVsZTtcbiAgICAgNVx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24uc2VydmljZS5JU2VydmljZTtcbiAgICAgNlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvO1xuICAgICA3XHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbiAgICAgOFx0XG4gICAgIDlcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAxMFx0aW1wb3J0IGphdmEudXRpbC5NYXA7XG4gICAgMTFcdFxuICAgIDEyXHQvKipcbiAgICAxM1x0ICogPHA+XG4gICAgMTRcdCAqIOaXpeeoi+WuieaOkuihqCDmnI3liqHnsbtcbiAgICAxNVx0ICogPC9wPlxuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGludGVyZmFjZSBTY2hlZHVsZVNlcnZpY2UgZXh0ZW5kcyBJU2VydmljZTxTY2hlZHVsZT4ge1xuICAgIDE4XHRcbiAgICAxOVx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSk7XG4gICAgMjBcdFxuICAgIDIxXHQgICAgQm9vbGVhbiBjcmVhdGUoU2NoZWR1bGUgc2NoZWR1bGUpO1xuICAgIDIyXHRcbiAgICAyM1x0ICAgIGJvb2xlYW4gdXBkYXRlU2NoZWR1bGUoU2NoZWR1bGUgc2NoZWR1bGUpO1xuICAgIDI0XHRcbiAgICAyNVx0ICAgIExpc3Q8VGFza1ZvPiBjb25mbGljdExpc3QoTG9uZyBpZCwgTGlzdDxMb25nPiBzY2hlZHVsZUlkcyk7XG4gICAgMjZcdFxuICAgIDI3XHQgICAgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyBpZCk7XG4gICAgMjhcdCAgICBcbiAgICAyOVx0ICAgIE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+IGdldFNjaGVkdWxlc0J5TW9udGgoU3RyaW5nIHllYXJNb250aCk7XG4gICAgMzBcdCAgICBcbiAgICAzMVx0ICAgIC8qKlxuICAgIDMyXHQgICAgICog5qC55o2u5pyI5Lu95ZKM55So5oi35p2D6ZmQ6I635Y+W5pel56iL5a6J5o6SXG4gICAgMzNcdCAgICAgKiBcbiAgICAzNFx0ICAgICAqIEBwYXJhbSB5ZWFyTW9udGgg5bm05pyI77yM5qC85byP5Li677yaeXl5eS1NTVxuICAgIDM1XHQgICAgICogQHBhcmFtIHVzZXJJZCDnlKjmiLdJRO+8jOWmguaenOaYr+euoeeQhuWRmOWImeiOt+WPluaJgOacieaXpeeoi++8jOWQpuWImeWPquiOt+WPluS4jueUqOaIt+ebuOWFs+eahOaXpeeoi1xuICAgIDM2XHQgICAgICogQHBhcmFtIGlzQWRtaW4g5piv5ZCm5Li6566h55CG5ZGYXG4gICAgMzdcdCAgICAgKiBAcmV0dXJuIOaXpeacn+S4uumUru+8jOaXpeeoi+WIl+ihqOS4uuWAvOeahOaYoOWwhFxuICAgIDM4XHQgICAgICovXG4gICAgMzlcdCAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCwgYm9vbGVhbiBpc0FkbWluKTtcbiAgICA0MFx0ICAgIFxuICAgIDQxXHQgICAgLyoqXG4gICAgNDJcdCAgICAgKiDmmbrog73mjpLluo/ml6XnqItcbiAgICA0M1x0ICAgICAqIOagueaNruaXtumXtOe0p+aApeaAp+OAgeS7u+WKoemHjeimgeaAp+etieWboOe0oOi/m+ihjOaZuuiDveaOkuW6j1xuICAgIDQ0XHQgICAgICogXG4gICAgNDVcdCAgICAgKiBAcGFyYW0gcGFnZVNpemUg6aG16Z2i5aSn5bCPXG4gICAgNDZcdCAgICAgKiBAcGFyYW0gcGFnZU51bSDpobXnoIFcbiAgICA0N1x0ICAgICAqIEBwYXJhbSBzZWFyY2hLZXkg5pCc57Si5YWz6ZSu6K+NXG4gICAgNDhcdCAgICAgKiBAcmV0dXJuIOaOkuW6j+WQjueahOaXpeeoi+WIhumhtee7k+aenFxuICAgIDQ5XHQgICAgICovXG4gICAgNTBcdCAgICBQYWdlPFNjaGVkdWxlVm8+IHNtYXJ0U29ydChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpO1xuICAgIDUxXHQgICAgXG4gICAgNTJcdCAgICAvKipcbiAgICA1M1x0ICAgICAqIOeUqOaIt+aZuuiDveaOkuW6j+aXpeeoi1xuICAgIDU0XHQgICAgICog5qC55o2u5pe26Ze057Sn5oCl5oCn44CB5Lu75Yqh6YeN6KaB5oCn562J5Zug57Sg5a+55b2T5YmN55So5oi355qE5pel56iL6L+b6KGM5pm66IO95o6S5bqPXG4gICAgNTVcdCAgICAgKiBcbiAgICA1Nlx0ICAgICAqIEBwYXJhbSBwYWdlU2l6ZSDpobXpnaLlpKflsI9cbiAgICA1N1x0ICAgICAqIEBwYXJhbSBwYWdlTnVtIOmhteeggVxuICAgIDU4XHQgICAgICogQHBhcmFtIHNlYXJjaEtleSDmkJzntKLlhbPplK7or41cbiAgICA1OVx0ICAgICAqIEBwYXJhbSB1c2VySWQg55So5oi3SURcbiAgICA2MFx0ICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgNjFcdCAgICAgKi9cbiAgICA2Mlx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKTtcbiAgICA2M1x0fVxuICAgIDY0XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDY0XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJmOWRlYWQ5My0xNDRiLTQ5YjktYWM3Mi00ZjUzMjg5YjE3NDc7dG9vbHVfMDFOdVdrVnVucTRiWU40RXNFVzVhZzZqIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvU2NoZWR1bGVTZXJ2aWNlLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0OFx0ICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgNDlcdCAgICAgKi9cbiAgICA1MFx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0KEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSk7XG4gICAgNTFcdFxuICAgIDUyXHQgICAgLyoqXG4gICAgNTNcdCAgICAgKiDnlKjmiLfmmbrog73mjpLluo/ml6XnqItcbiAgICA1NFx0ICAgICAqIOagueaNruaXtumXtOe0p+aApeaAp+OAgeS7u+WKoemHjeimgeaAp+etieWboOe0oOWvueW9k+WJjeeUqOaIt+eahOaXpeeoi+i/m+ihjOaZuuiDveaOkuW6j1xuICAgIDU1XHQgICAgICpcbiAgICA1Nlx0ICAgICAqIEBwYXJhbSBwYWdlU2l6ZSDpobXpnaLlpKflsI9cbiAgICA1N1x0ICAgICAqIEBwYXJhbSBwYWdlTnVtIOmhteeggVxuICAgIDU4XHQgICAgICogQHBhcmFtIHNlYXJjaEtleSDmkJzntKLlhbPplK7or41cbiAgICA1OVx0ICAgICAqIEBwYXJhbSB1c2VySWQg55So5oi3SURcbiAgICA2MFx0ICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgNjFcdCAgICAgKi9cbiAgICA2Mlx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKTtcbiAgICA2M1x0XG4gICAgNjRcdCAgICAvKipcbiAgICA2NVx0ICAgICAqIOeUqOaIt+aZuuiDveaOkuW6j+aXpeeoi++8jOW5tuaMieeKtuaAgei/h+a7pFxuICAgIDY2XHQgICAgICog5qC55o2u5pe26Ze057Sn5oCl5oCn44CB5Lu75Yqh6YeN6KaB5oCn562J5Zug57Sg5a+55b2T5YmN55So5oi355qE5pel56iL6L+b6KGM5pm66IO95o6S5bqPXG4gICAgNjdcdCAgICAgKlxuICAgIDY4XHQgICAgICogQHBhcmFtIHBhZ2VTaXplIOmhtemdouWkp+Wwj1xuICAgIDY5XHQgICAgICogQHBhcmFtIHBhZ2VOdW0g6aG156CBXG4gICAgNzBcdCAgICAgKiBAcGFyYW0gc2VhcmNoS2V5IOaQnOe0ouWFs+mUruivjVxuICAgIDcxXHQgICAgICogQHBhcmFtIHVzZXJJZCDnlKjmiLdJRFxuICAgIDcyXHQgICAgICogQHBhcmFtIHN0YXR1cyDku7vliqHnirbmgIHvvIgxOuW+heWKniwgMjrlt7LlronmjpIsIDM66L+b6KGM5LitLCA0OuW3suWujOaIkCwgNTrlt7LpgL7mnJ/vvIlcbiAgICA3M1x0ICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgNzRcdCAgICAgKi9cbiAgICA3NVx0ICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkLCBJbnRlZ2VyIHN0YXR1cyk7XG4gICAgNzZcdH1cbiAgICA3N1x0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjdiZTgwZjBmLTRiZTktNDU1Ni1iNWFlLWNhNjM4MzdiNDlhYzt0b29sdV8wMVdlZHlnRnl6dW00ZkhkQ0dxZUxQSFAiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9TY2hlZHVsZVNlcnZpY2VJbXBsLmphdmFcbi4uLlxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFBhZ2U8U2NoZWR1bGVWbz4gc2VhcmNoKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBwYWdlUmVzdWx0ID0gc2NoZWR1bGVNYXBwZXIuc2VhcmNoU2NoZWR1bGUocGFnZSxzZWFyY2hLZXksIG51bGwpO1xuICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlVm9zID0gIHBhZ2VSZXN1bHQuZ2V0UmVjb3JkcygpO1xuXG4gICAgICAgIC8vIOafpeivouaJgOacieS7u+WKoe+8jOeUqOS6juWGsueqgeajgOa1i1xuICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IGFsbFNjaGVkdWxlcyA9IHNjaGVkdWxlTWFwcGVyLmZpbmRBbGxTY2hlZHVsZXMoKTtcblxuICAgICAgICAvLyDliJ3lp4vljJYgT2JqZWN0TWFwcGVyIOeUqOS6juino+aekCBKU09OIOWtl+espuS4slxuICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuXG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDpgY3ljobmr4/kuKrku7vliqHvvIzmo4DmtYvlhrLnqoHlkozmiKrmraLml7bpl7RcbiAgICAgICAgZm9yIChTY2hlZHVsZVZvIGN1cnJlbnRTY2hlZHVsZSA6IHNjaGVkdWxlVm9zKSB7XG4gICAgICAgICAgICAvLyDmo4Dmn6Xml6XnqIvnu5PmnZ/ml7bpl7TmmK/lkKblt7Lov4fmnJ9cbiAgICAgICAgICAgIGlmIChjdXJyZW50U2NoZWR1bGUuZ2V0RW5kVGltZSgpICE9IG51bGwgJiYgXG4gICAgICAgICAgICAgICAgY3VycmVudFNjaGVkdWxlLmdldEVuZFRpbWUoKS5pc0JlZm9yZShub3cpICYmIFxuICAgICAgICAgICAgICAgIChjdXJyZW50U2NoZWR1bGUuZ2V0U3RhdHVzKCkgPT0gbnVsbCB8fCBjdXJyZW50U2NoZWR1bGUuZ2V0U3RhdHVzKCkgIT0gNCkpIHtcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpznu5PmnZ/ml7bpl7Tlt7Lov4fmnJ/kuJTkuI3mmK/lt7LlrozmiJDnirbmgIHvvIzmm7TmlrDkuLrlt7LpgL7mnJ/nirbmgIFcbiAgICAgICAgICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGN1cnJlbnRTY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldFN0YXR1cyg1KTsgLy8g5L+u5pS55Lu75Yqh54q25oCB5Li65bey6YC+5pyfXG4gICAgICAgICAgICAgICAgICAgIHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5zZXRTdGF0dXMoNSk7IC8vIOWQjOatpeS/ruaUueW9k+WJjeaXpeeoi+inhuWbvuWvueixoeeahOeKtuaAgVxuICAgICAgICAgICAgfVxuLi4uXG5cbiAgICBAT3ZlcnJpZGVcbiAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgICBwdWJsaWMgQm9vbGVhbiBjcmVhdGUoU2NoZWR1bGUgc2NoZWR1bGUpIHtcbiAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAgICAgIC8vIOS/ruaUueS7u+WKoeeKtuaAgVxuICAgICAgICB0YXNrLnNldFN0YXR1cygyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIOiuvue9rue7k+adn+aXtumXtO+8jOWmguaenOacquiuvue9ruWImeiHquWKqOagueaNruS7u+WKoeiAl+aXtuiuoeeul1xuICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpID09IG51bGwgJiYgdGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyDmoLnmja7ku7vliqHpooTkvLDml7bpl7Torr7nva7nu5PmnZ/ml7bpl7RcbiAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkucGx1c01pbnV0ZXModGFzay5nZXRUaW1lU3BlbmQoKSkpO1xuICAgICAgICB9IGVsc2UgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsKSB7XG4gICAgICAgICAgICAvLyDpu5jorqTorr7nva7nu5PmnZ/ml7bpl7TkuLrlvIDlp4vml7bpl7TlkI4x5bCP5pe2XG4gICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNIb3VycygxKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzayk7XG5cbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gdGhpcy5zYXZlKHNjaGVkdWxlKTtcblxuICAgICAgICAvLyDlj5HpgIHmj5DphpJcbiAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgICAgICAgU2V0PExvbmc+IHVzZXJJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgICAgICAgTGlzdDxOb3RpZmljYXRpb24+IG5vdGlmaWNhdGlvbnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAgICAgdXNlcklkcy5mb3JFYWNoKGlkIC0+IHtcbiAgICAgICAgICAgIE5vdGlmaWNhdGlvbiBub3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCk7XG4gICAgICAgICAgICBub3RpZmljYXRpb24uc2V0U2NoZWR1bGVJZChzY2hlZHVsZS5nZXRJZCgpKTtcbiAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRVc2VySWQoaWQpO1xuICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldE1lc3NhZ2UoXCLmgqjmnInmlrDnmoTku7vliqHlronmjpLvvIzor7flj4rml7bmn6XnnItcIik7XG4gICAgICAgICAgICBub3RpZmljYXRpb25zLmFkZChub3RpZmljYXRpb24pO1xuICAgICAgICB9KTtcbiAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zYXZlQmF0Y2gobm90aWZpY2F0aW9ucyk7XG5cbiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgfVxuLi4uXG5cbiAgICAgICAgLy8gMy4gVXBkYXRlIHN0YXJ0VGltZSBhbmQgZW5kVGltZSBmcm9tIHRoZSBzY2hlZHVsZVVwZGF0ZXMgb2JqZWN0XG4gICAgICAgIGV4aXN0aW5nU2NoZWR1bGUuc2V0U3RhcnRUaW1lKHNjaGVkdWxlVXBkYXRlcy5nZXRTdGFydFRpbWUoKSk7XG4gICAgICAgIGV4aXN0aW5nU2NoZWR1bGUuc2V0RW5kVGltZShzY2hlZHVsZVVwZGF0ZXMuZ2V0RW5kVGltZSgpKTsgLy8gVXNlIHRoZSB2YWx1ZSBwcm92aWRlZCBieSB0aGUgY2xpZW50XG5cbiAgICAgICAgLy8gNC4gUmVjYWxjdWxhdGUgZW5kVGltZSBvbmx5IGlmIGl0IHdhc24ndCBwcm92aWRlZCBBTkQgdGFzayBleGlzdHMgYW5kIGhhcyB0aW1lU3BlbmRcbiAgICAgICAgaWYgKGV4aXN0aW5nU2NoZWR1bGUuZ2V0RW5kVGltZSgpID09IG51bGwgJiYgdGFzayAhPSBudWxsICYmIHRhc2suZ2V0VGltZVNwZW5kKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g5qC55o2u5Lu75Yqh6aKE5Lyw5pe26Ze06K6+572u57uT5p2f5pe26Ze0XG4gICAgICAgICAgICBleGlzdGluZ1NjaGVkdWxlLnNldEVuZFRpbWUoZXhpc3RpbmdTY2hlZHVsZS5nZXRTdGFydFRpbWUoKS5wbHVzTWludXRlcyh0YXNrLmdldFRpbWVTcGVuZCgpKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXhpc3RpbmdTY2hlZHVsZS5nZXRFbmRUaW1lKCkgPT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g6buY6K6k6K6+572u57uT5p2f5pe26Ze05Li65byA5aeL5pe26Ze05ZCOMeWwj+aXtlxuICAgICAgICAgICAgIGV4aXN0aW5nU2NoZWR1bGUuc2V0RW5kVGltZShleGlzdGluZ1NjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNIb3VycygxKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA1LiBTYXZlIHRoZSB1cGRhdGVkIGV4aXN0aW5nU2NoZWR1bGVcbiAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gdGhpcy51cGRhdGVCeUlkKGV4aXN0aW5nU2NoZWR1bGUpO1xuLi4uXG4gICAgICAgIFxuICAgICAgICBmb3IgKFRhc2sgdGFzayA6IHRhc2tzKSB7XG4gICAgICAgICAgICAvLyDlpoLmnpzorr7nva7kuobmj5DphpLml7bpl7TvvIzlubbkuJTmj5DphpLml7bpl7Tlt7LliLDmiJbljbPlsIbliLDmnaXvvIg15YiG6ZKf5YaF77yJXG4gICAgICAgICAgICBpZiAodGFzay5nZXRSZW1pbmRlclRpbWUoKSAhPSBudWxsICYmIFxuICAgICAgICAgICAgICAgIENocm9ub1VuaXQuTUlOVVRFUy5iZXR3ZWVuKG5vdywgdGFzay5nZXRSZW1pbmRlclRpbWUoKSkgPD0gNSAmJiBcbiAgICAgICAgICAgICAgICBDaHJvbm9Vbml0Lk1JTlVURVMuYmV0d2Vlbihub3csIHRhc2suZ2V0UmVtaW5kZXJUaW1lKCkpID49IDApIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDmn6Xmib7mraTku7vliqHlhbPogZTnmoTml6XnqItcbiAgICAgICAgICAgICAgICBMaXN0PFNjaGVkdWxlPiBzY2hlZHVsZXMgPSB0aGlzLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4oKS5lcShcInRhc2tfaWRcIiwgdGFzay5nZXRJZCgpKSk7XG4uLi5cblxuICAgICAgICAvLyDmnoTlu7ogVGFza1ZvIOWIl+ihqO+8jOWPquWMheWQq+WGsueqgeeahOeUqOaIt+WSjOi1hOa6kOS/oeaBr1xuICAgICAgICByZXR1cm4gc2NoZWR1bGVzLnN0cmVhbSgpXG4gICAgICAgICAgICAgICAgLm1hcChzY2hlZHVsZSAtPiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluS7u+WKoeS/oeaBr1xuICAgICAgICAgICAgICAgICAgICBUYXNrVm8gdGFza1ZvID0gbmV3IFRhc2tWbygpO1xuICAgICAgICAgICAgICAgICAgICBCZWFuVXRpbHMuY29weVByb3BlcnRpZXMoc2NoZWR1bGUsIHRhc2tWbyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6Kej5p6Q55So5oi35ZKM6LWE5rqQ5pWw5o2uXG4gICAgICAgICAgICAgICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldChzY2hlZHVsZS5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICBTZXQ8TG9uZz4gcmVzb3VyY2VJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHNjaGVkdWxlLmdldFJlc291cmNlc0RhdGEoKSwgb2JqZWN0TWFwcGVyKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDorqHnrpfkuI7lvZPliY3ku7vliqHnmoTlhrLnqoHnlKjmiLflkozotYTmupBcbiAgICAgICAgICAgICAgICAgICAgU2V0PExvbmc+IGNvbmZsaWN0VXNlcklkcyA9IG5ldyBIYXNoU2V0PD4odXNlcklkcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0VXNlcklkcy5yZXRhaW5BbGwoY3VycmVudFVzZXJJZHMpO1xuXG4gICAgICAgICAgICAgICAgICAgIFNldDxMb25nPiBjb25mbGljdFJlc291cmNlSWRzID0gbmV3IEhhc2hTZXQ8PihyZXNvdXJjZUlkcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0UmVzb3VyY2VJZHMucmV0YWluQWxsKGN1cnJlbnRSZXNvdXJjZUlkcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+W5Yay56qB55So5oi35ZKM6LWE5rqQ55qE6K+m57uG5L+h5oGvXG4gICAgICAgICAgICAgICAgICAgIExpc3Q8VW1zQWRtaW4+IHVzZXJMaXN0ID0gdXNlclNlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFVtc0FkbWluPigpLmxhbWJkYSgpLmluKFVtc0FkbWluOjpnZXRJZCwgY29uZmxpY3RVc2VySWRzKSk7XG4gICAgICAgICAgICAgICAgICAgIExpc3Q8UmVzb3VyY2VzPiByZXNvdXJjZXNMaXN0ID0gcmVzb3VyY2VzU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8UmVzb3VyY2VzPigpLmxhbWJkYSgpLmluKFJlc291cmNlczo6Z2V0SWQsIGNvbmZsaWN0UmVzb3VyY2VJZHMpKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyDorr7nva7lhrLnqoHnlKjmiLflkozotYTmupBcbiAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldFVzZXJMaXN0KHVzZXJMaXN0KTtcbiAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldFJlc291cmNlc0xpc3QocmVzb3VyY2VzTGlzdCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhc2tWbztcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMudG9MaXN0KCkpO1xuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaFVzZXIoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIGlkKSB7XG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gcGFnZSA9IG5ldyBQYWdlPD4ocGFnZU51bSwgcGFnZVNpemUpO1xuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHBhZ2VSZXN1bHQgPSBzY2hlZHVsZU1hcHBlci5zZWFyY2hTY2hlZHVsZShwYWdlLHNlYXJjaEtleSwgaWQpO1xuICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlVm9zID0gIHBhZ2VSZXN1bHQuZ2V0UmVjb3JkcygpO1xuXG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeaXtumXtFxuICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgICAgIFxuICAgICAgICAvLyDpgY3ljobmr4/kuKrku7vliqHvvIzmo4Dmn6Xnu5PmnZ/ml7bpl7RcbiAgICAgICAgZm9yIChTY2hlZHVsZVZvIGN1cnJlbnRTY2hlZHVsZSA6IHNjaGVkdWxlVm9zKSB7XG4gICAgICAgICAgICAvLyDmo4Dmn6Xml6XnqIvnu5PmnZ/ml7bpl7TmmK/lkKblt7Lov4fmnJ9cbiAgICAgICAgICAgIGlmIChjdXJyZW50U2NoZWR1bGUuZ2V0RW5kVGltZSgpICE9IG51bGwgJiYgXG4gICAgICAgICAgICAgICAgY3VycmVudFNjaGVkdWxlLmdldEVuZFRpbWUoKS5pc0JlZm9yZShub3cpICYmIFxuICAgICAgICAgICAgICAgIChjdXJyZW50U2NoZWR1bGUuZ2V0U3RhdHVzKCkgPT0gbnVsbCB8fCBjdXJyZW50U2NoZWR1bGUuZ2V0U3RhdHVzKCkgIT0gNCkpIHtcbiAgICAgICAgICAgICAgICAvLyDlpoLmnpznu5PmnZ/ml7bpl7Tlt7Lov4fmnJ/kuJTkuI3mmK/lt7LlrozmiJDnirbmgIHvvIzmm7TmlrDkuLrlt7LpgL7mnJ/nirbmgIFcbiAgICAgICAgICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGN1cnJlbnRTY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHRhc2sgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0YXNrLnNldFN0YXR1cyg1KTsgLy8g5L+u5pS55Lu75Yqh54q25oCB5Li65bey6YC+5pyfXG4gICAgICAgICAgICAgICAgICAgIHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5zZXRTdGF0dXMoNSk7IC8vIOWQjOatpeS/ruaUueW9k+WJjeaXpeeoi+inhuWbvuWvueixoeeahOeKtuaAgVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcGFnZVJlc3VsdDtcbiAgICB9XG4uLi5cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCwgYm9vbGVhbiBpc0FkbWluKSB7XG4gICAgICAgIExpc3Q8U2NoZWR1bGVWbz4gc2NoZWR1bGVzO1xuICAgICAgICBcbiAgICAgICAgaWYgKGlzQWRtaW4pIHtcbiAgICAgICAgICAgIC8vIOeuoeeQhuWRmOiOt+WPluaJgOacieaXpeeoi1xuICAgICAgICAgICAgc2NoZWR1bGVzID0gc2NoZWR1bGVNYXBwZXIuZmluZFNjaGVkdWxlc0J5TW9udGgoeWVhck1vbnRoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIOaZrumAmueUqOaIt+WPquiOt+WPluS4juiHquW3seebuOWFs+eahOaXpeeoi1xuICAgICAgICAgICAgc2NoZWR1bGVzID0gc2NoZWR1bGVNYXBwZXIuZmluZFNjaGVkdWxlc0J5TW9udGhBbmRVc2VyKHllYXJNb250aCwgdXNlcklkKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gcmVzdWx0ID0gbmV3IEhhc2hNYXA8PigpO1xuICAgICAgICBcbiAgICAgICAgLy8g5oyJ5pel5pyf5YiG57uEXG4gICAgICAgIGZvciAoU2NoZWR1bGVWbyBzY2hlZHVsZSA6IHNjaGVkdWxlcykge1xuICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICBTdHJpbmcgZGF0ZSA9IHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnRvTG9jYWxEYXRlKCkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5jb250YWluc0tleShkYXRlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQucHV0KGRhdGUsIG5ldyBBcnJheUxpc3Q8PigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzdWx0LmdldChkYXRlKS5hZGQoc2NoZWR1bGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbi4uLlxuICAgICAgICBcbiAgICAgICAgLy8g5qC55o2u5Lu75Yqh55qE57Sn5oCl5oCn6K6h566X5b6X5YiGIChleGlnZW5jeUlkKVxuICAgICAgICBpZiAodGFzay5nZXRFeGlnZW5jeUlkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8g5p+l6K+i57Sn5oCl5oCn5p2D6YeNXG4gICAgICAgICAgICBRdWVyeVdyYXBwZXI8Y29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlByaW9yaXR5PiB1cmdlbmN5UXVlcnkgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgICAgICAgICAgIHVyZ2VuY3lRdWVyeS5lcShcImlkXCIsIHRhc2suZ2V0RXhpZ2VuY3lJZCgpKTtcbiAgICAgICAgICAgIGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eSB1cmdlbmN5ID0gdGFza1NlcnZpY2UuZ2V0UHJpb3JpdHlNYXBwZXIoKS5zZWxlY3RPbmUodXJnZW5jeVF1ZXJ5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHVyZ2VuY3kgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGludCBzY29yZSA9IHVyZ2VuY3kuZ2V0U2NvcmUoKSAhPSBudWxsID8gdXJnZW5jeS5nZXRTY29yZSgpIDogMTtcbiAgICAgICAgICAgICAgICBCaWdEZWNpbWFsIHdlaWdodCA9IHVyZ2VuY3kuZ2V0V2VpZ2h0KCkgIT0gbnVsbCA/IHVyZ2VuY3kuZ2V0V2VpZ2h0KCkgOiBCaWdEZWNpbWFsLk9ORTtcbiAgICAgICAgICAgICAgICB1cmdlbmN5U2NvcmUgPSBzY29yZSAqIHdlaWdodC5kb3VibGVWYWx1ZSgpICogMTA7IC8vIOaUvuWkpzEw5YCN77yM5L2/5b6X5YiG5YC85pu05piO5pi+XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOiuoeeul+aIquatouaXtumXtOeahOe0p+aApeaAp1xuICAgICAgICBkb3VibGUgZGVhZGxpbmVVcmdlbmN5ID0gMC4wO1xuICAgICAgICBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcbiAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5aaC5p6c5bey57uP6LaF6L+H5oiq5q2i5pe26Ze077yM5YiZ57Sn5oCl5oCn5pyA6auYXG4gICAgICAgICAgICBpZiAobm93LmlzQWZ0ZXIodGFzay5nZXREZWFkbGluZSgpKSkge1xuICAgICAgICAgICAgICAgIGRlYWRsaW5lVXJnZW5jeSA9IDEwMC4wO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyDorqHnrpfot53nprvmiKrmraLml7bpl7Tov5jmnInlpJrlsJHlsI/ml7ZcbiAgICAgICAgICAgICAgICBsb25nIGhvdXJzVW50aWxEZWFkbGluZSA9IER1cmF0aW9uLmJldHdlZW4obm93LCB0YXNrLmdldERlYWRsaW5lKCkpLnRvSG91cnMoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyDot53nprvmiKrmraLml7bpl7Totorov5HvvIzntKfmgKXmgKfotorpq5hcbiAgICAgICAgICAgICAgICAvLyAyNOWwj+aXtuWGhe+8muacgOmrmOe0p+aApeaAp1xuICAgICAgICAgICAgICAgIC8vIDI0LTcy5bCP5pe277ya6auY57Sn5oCl5oCnXG4gICAgICAgICAgICAgICAgLy8gNzLlsI/ml7bku6XkuIrvvJrkuK3nrYnntKfmgKXmgKdcbiAgICAgICAgICAgICAgICBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDI0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYWRsaW5lVXJnZW5jeSA9IDQwLjAgLSAoaG91cnNVbnRpbERlYWRsaW5lIC8gMjQuMCkgKiAxMC4wOyAgLy8gMzAtNDDliIZcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGhvdXJzVW50aWxEZWFkbGluZSA8PSA3Mikge1xuICAgICAgICAgICAgICAgICAgICBkZWFkbGluZVVyZ2VuY3kgPSAyNS4wIC0gKChob3Vyc1VudGlsRGVhZGxpbmUgLSAyNCkgLyA0OC4wKSAqIDEwLjA7ICAvLyAxNS0yNeWIhlxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYWRsaW5lVXJnZW5jeSA9IE1hdGgubWF4KDUuMCwgMTUuMCAtICgoaG91cnNVbnRpbERlYWRsaW5lIC0gNzIpIC8gNzIuMCkgKiAxMC4wKTsgIC8vIDUtMTXliIZcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOWmguaenOS7u+WKoeW3sue7j+mAvuacn++8jOWinuWKoOWFtue0p+aApeaAp1xuICAgICAgICBpZiAodGFzay5nZXRTdGF0dXMoKSAhPSBudWxsICYmIHRhc2suZ2V0U3RhdHVzKCkgPT0gNSkge1xuICAgICAgICAgICAgZGVhZGxpbmVVcmdlbmN5ICs9IDIwLjA7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOagueaNruS7u+WKoeeKtuaAgeiwg+aVtOS8mOWFiOe6p1xuICAgICAgICBkb3VibGUgc3RhdHVzQWRqdXN0bWVudCA9IDAuMDtcbiAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgc3dpdGNoICh0YXNrLmdldFN0YXR1cygpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAxOiAvLyDlvoXlip5cbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQWRqdXN0bWVudCA9IDEwLjA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMjogLy8g5bey5a6J5o6SXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0FkanVzdG1lbnQgPSAxNS4wO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDM6IC8vIOi/m+ihjOS4rVxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNBZGp1c3RtZW50ID0gMjAuMDtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiAvLyDlt7LlrozmiJBcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQWRqdXN0bWVudCA9IC01MC4wOyAvLyDlt7LlrozmiJDnmoTku7vliqHkvJjlhYjnuqfmnIDkvY5cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA1OiAvLyDlt7LpgL7mnJ9cbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzQWRqdXN0bWVudCA9IDMwLjA7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c0FkanVzdG1lbnQgPSAwLjA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOe7vOWQiOiuoeeul+acgOe7iOS8mOWFiOe6p+W+l+WIhlxuICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGltcG9ydGFuY2VTY29yZSArIHVyZ2VuY3lTY29yZSArIGRlYWRsaW5lVXJnZW5jeSArIHN0YXR1c0FkanVzdG1lbnQ7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgcHJpb3JpdHlTY29yZSk7IC8vIOehruS/neW+l+WIhuS4jeS4uui0n+aVsFxuICAgIH1cblxuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNtYXJ0U29ydChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXkpIHtcbiAgICAgICAgLy8g6I635Y+W5Y6f5aeL5pel56iL5YiX6KGoXG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gb3JpZ2luYWxQYWdlID0gc2VhcmNoKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXkpO1xuICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlTGlzdCA9IG9yaWdpbmFsUGFnZS5nZXRSZWNvcmRzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyDorqHnrpfmr4/kuKrml6XnqIvnmoTkvJjlhYjnuqflvpfliIZcbiAgICAgICAgTWFwPExvbmcsIERvdWJsZT4gc2NoZWR1bGVQcmlvcml0eVNjb3JlcyA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoU2NoZWR1bGVWbyBzY2hlZHVsZSA6IHNjaGVkdWxlTGlzdCkge1xuICAgICAgICAgICAgVGFzayB0YXNrID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChzY2hlZHVsZS5nZXRUYXNrSWQoKSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDorqHnrpfkvJjlhYjnuqflvpfliIZcbiAgICAgICAgICAgIGRvdWJsZSBwcmlvcml0eVNjb3JlID0gY2FsY3VsYXRlUHJpb3JpdHlTY29yZShzY2hlZHVsZSwgdGFzayk7XG4gICAgICAgICAgICBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLnB1dChzY2hlZHVsZS5nZXRJZCgpLCBwcmlvcml0eVNjb3JlKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8g5qC55o2u5LyY5YWI57qn5b6X5YiG5o6S5bqP5pel56iLXG4gICAgICAgIHNjaGVkdWxlTGlzdC5zb3J0KChhLCBiKSAtPiB7XG4gICAgICAgICAgICBEb3VibGUgc2NvcmVBID0gc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYS5nZXRJZCgpLCAwLjApO1xuICAgICAgICAgICAgRG91YmxlIHNjb3JlQiA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGIuZ2V0SWQoKSwgMC4wKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g5YiG5pWw6auY55qE5o6S5Zyo5YmN6Z2iXG4gICAgICAgICAgICByZXR1cm4gRG91YmxlLmNvbXBhcmUoc2NvcmVCLCBzY29yZUEpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIOWIm+W7uuaWsOeahOWIhumhtee7k+aenFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNvcnRlZFBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplLCBvcmlnaW5hbFBhZ2UuZ2V0VG90YWwoKSk7XG4gICAgICAgIHNvcnRlZFBhZ2Uuc2V0UmVjb3JkcyhzY2hlZHVsZUxpc3QpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHNvcnRlZFBhZ2U7XG4gICAgfVxuXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKSB7XG4gICAgICAgIC8vIOiOt+WPluWOn+Wni+aXpeeoi+WIl+ihqFxuICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IG9yaWdpbmFsUGFnZSA9IHNlYXJjaFVzZXIocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgdXNlcklkKTtcbiAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZUxpc3QgPSBvcmlnaW5hbFBhZ2UuZ2V0UmVjb3JkcygpO1xuICAgICAgICBcbiAgICAgICAgLy8g6K6h566X5q+P5Liq5pel56iL55qE5LyY5YWI57qn5b6X5YiGXG4gICAgICAgIE1hcDxMb25nLCBEb3VibGU+IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAgICAgIFxuICAgICAgICBmb3IgKFNjaGVkdWxlVm8gc2NoZWR1bGUgOiBzY2hlZHVsZUxpc3QpIHtcbiAgICAgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XG4gICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8g6K6h566X5LyY5YWI57qn5b6X5YiGXG4gICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUoc2NoZWR1bGUsIHRhc2spO1xuICAgICAgICAgICAgc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5wdXQoc2NoZWR1bGUuZ2V0SWQoKSwgcHJpb3JpdHlTY29yZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIOagueaNruS8mOWFiOe6p+W+l+WIhuaOkuW6j+aXpeeoi1xuICAgICAgICBzY2hlZHVsZUxpc3Quc29ydCgoYSwgYikgLT4ge1xuICAgICAgICAgICAgRG91YmxlIHNjb3JlQSA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGEuZ2V0SWQoKSwgMC4wKTtcbiAgICAgICAgICAgIERvdWJsZSBzY29yZUIgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChiLmdldElkKCksIDAuMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIOWIhuaVsOmrmOeahOaOkuWcqOWJjemdolxuICAgICAgICAgICAgcmV0dXJuIERvdWJsZS5jb21wYXJlKHNjb3JlQiwgc2NvcmVBKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyDliJvlu7rmlrDnmoTliIbpobXnu5PmnpxcbiAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBzb3J0ZWRQYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSwgb3JpZ2luYWxQYWdlLmdldFRvdGFsKCkpO1xuICAgICAgICBzb3J0ZWRQYWdlLnNldFJlY29yZHMoc2NoZWR1bGVMaXN0KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBzb3J0ZWRQYWdlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOavj+Wwj+aXtuajgOafpeS4gOasoeS7u+WKoeaIquatouaXtumXtO+8jOabtOaWsOmAvuacn+S7u+WKoeeKtuaAgVxuICAgICAqL1xuICAgIEBTY2hlZHVsZWQoY3JvbiA9IFwiMCAwICogKiAqID9cIikgLy8g5q+P5bCP5pe25omn6KGM5LiA5qyhXG4gICAgcHVibGljIHZvaWQgY2hlY2tBbmRVcGRhdGVPdmVyZHVlVGFza3MoKSB7XG4gICAgICAgIGxvZy5pbmZvKFwi5omn6KGM5Lu75Yqh6YC+5pyf54q25oCB5qOA5p+lLi4uXCIpO1xuICAgICAgICAvLyDojrflj5blvZPliY3ml7bpl7RcbiAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgICAgICBcbiAgICAgICAgLy8g5p+l6K+i5omA5pyJ5b6F5Yqe44CB5bey5a6J5o6S44CB6L+b6KGM5Lit54q25oCB55qE5Lu75YqhXG4gICAgICAgIExpc3Q8VGFzaz4gdGFza3MgPSB0YXNrU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8VGFzaz4oKS5sYW1iZGEoKVxuICAgICAgICAgICAgICAgIC5pbihUYXNrOjpnZXRTdGF0dXMsIEFycmF5cy5hc0xpc3QoMSwgMiwgMykpKTtcbi4uLlxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyDlpoLmnpzku7vliqHmnInlr7nlupTnmoTml6XnqItcbiAgICAgICAgICAgIGlmICghc2NoZWR1bGVzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIGZvciAoU2NoZWR1bGUgc2NoZWR1bGUgOiBzY2hlZHVsZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5pel56iL5pyJ57uT5p2f5pe26Ze077yM5LiU57uT5p2f5pe26Ze05bey6L+H77yM5pu05paw5Lu75Yqh54q25oCB5Li65bey6YC+5pyfXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY2hlZHVsZS5nZXRFbmRUaW1lKCkgIT0gbnVsbCAmJiBzY2hlZHVsZS5nZXRFbmRUaW1lKCkuaXNCZWZvcmUobm93KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5bCG54q25oCB5pu05paw5Li65bey6YC+5pyfXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXNrLnNldFN0YXR1cyg1KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWPkemAgemAvuacn+mAmuefpVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Kej5p6Q55So5oi35pWw5o2uXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU2V0PExvbmc+IHVzZXJJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+R6YCB6YC+5pyf6YCa55+lXG4gICAgICAgICAgICAgICAgICAgICAgICBMaXN0PE5vdGlmaWNhdGlvbj4gbm90aWZpY2F0aW9ucyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkcy5mb3JFYWNoKGlkIC0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24gbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRTY2hlZHVsZUlkKHNjaGVkdWxlLmdldElkKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRVc2VySWQoaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRUeXBlKDQpOyAvLyDpgL7mnJ/pgJrnn6XnsbvlnotcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0TWVzc2FnZShcIuaCqOeahOS7u+WKoSBcXFwiXCIgKyB0YXNrLmdldFRpdGxlKCkgKyBcIlxcXCIg5bey6YC+5pyf77yM6K+35bC95b+r5aSE55CGXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuYWRkKG5vdGlmaWNhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlt7Lnu4/lsIbku7vliqHmoIforrDkuLrpgL7mnJ/vvIzot7Plh7rlvZPliY3ku7vliqHnmoTml6XnqIvlvqrnjq9cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIC8vIOWmguaenOS7u+WKoeayoeacieaXpeeoi+S9huacieaIquatouaXtumXtO+8jOWImeS+neeEtuajgOafpeaIquatouaXtumXtFxuICAgICAgICAgICAgZWxzZSBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwgJiYgdGFzay5nZXREZWFkbGluZSgpLmlzQmVmb3JlKG5vdykpIHtcbiAgICAgICAgICAgICAgICAvLyDlsIbnirbmgIHmm7TmlrDkuLrlt7LpgL7mnJ9cbiAgICAgICAgICAgICAgICB0YXNrLnNldFN0YXR1cyg1KTtcbiAgICAgICAgICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuLi4uXG5QYXRoOiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9TY2hlZHVsZVNlcnZpY2UuamF2YVxuLi4uXG5cbiAgICAvKipcbiAgICAgKiDmmbrog73mjpLluo/ml6XnqItcbiAgICAgKiDmoLnmja7ml7bpl7TntKfmgKXmgKfjgIHku7vliqHph43opoHmgKfnrYnlm6DntKDov5vooYzmmbrog73mjpLluo9cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYWdlU2l6ZSDpobXpnaLlpKflsI9cbiAgICAgKiBAcGFyYW0gcGFnZU51bSDpobXnoIFcbiAgICAgKiBAcGFyYW0gc2VhcmNoS2V5IOaQnOe0ouWFs+mUruivjVxuICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgICovXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnQoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5KTtcblxuICAgIC8qKlxuICAgICAqIOeUqOaIt+aZuuiDveaOkuW6j+aXpeeoi1xuICAgICAqIOagueaNruaXtumXtOe0p+aApeaAp+OAgeS7u+WKoemHjeimgeaAp+etieWboOe0oOWvueW9k+WJjeeUqOaIt+eahOaXpeeoi+i/m+ihjOaZuuiDveaOkuW6j1xuICAgICAqXG4gICAgICogQHBhcmFtIHBhZ2VTaXplIOmhtemdouWkp+Wwj1xuICAgICAqIEBwYXJhbSBwYWdlTnVtIOmhteeggVxuICAgICAqIEBwYXJhbSBzZWFyY2hLZXkg5pCc57Si5YWz6ZSu6K+NXG4gICAgICogQHBhcmFtIHVzZXJJZCDnlKjmiLdJRFxuICAgICAqIEByZXR1cm4g5o6S5bqP5ZCO55qE5pel56iL5YiG6aG157uT5p6cXG4gICAgICovXG4gICAgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnRVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQpO1xuXG4gICAgLyoqXG4gICAgICog55So5oi35pm66IO95o6S5bqP5pel56iL77yM5bm25oyJ54q25oCB6L+H5rukXG4gICAgICog5qC55o2u5pe26Ze057Sn5oCl5oCn44CB5Lu75Yqh6YeN6KaB5oCn562J5Zug57Sg5a+55b2T5YmN55So5oi355qE5pel56iL6L+b6KGM5pm66IO95o6S5bqPXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGFnZVNpemUg6aG16Z2i5aSn5bCPXG4gICAgICogQHBhcmFtIHBhZ2VOdW0g6aG156CBXG4gICAgICogQHBhcmFtIHNlYXJjaEtleSDmkJzntKLlhbPplK7or41cbiAgICAgKiBAcGFyYW0gdXNlcklkIOeUqOaIt0lEXG4gICAgICogQHBhcmFtIHN0YXR1cyDku7vliqHnirbmgIHvvIgxOuW+heWKniwgMjrlt7LlronmjpIsIDM66L+b6KGM5LitLCA0OuW3suWujOaIkCwgNTrlt7LpgL7mnJ/vvIlcbiAgICAgKiBAcmV0dXJuIOaOkuW6j+WQjueahOaXpeeoi+WIhumhtee7k+aenFxuICAgICAqL1xuICAgIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkLCBJbnRlZ2VyIHN0YXR1cyk7XG59XG4uLi5cblBhdGg6IHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9jb250cm9sbGVyL1NjaGVkdWxlQ29udHJvbGxlci5qYXZhXG4uLi5cblxuICAgIEBBcGlPcGVyYXRpb24oXCLnlKjmiLfml6XnqIvmn6Xor6IgLSDmmbrog73mjpLluo9cIilcbiAgICBAR2V0TWFwcGluZyhcIi91c2VyL3NtYXJ0U29ydFwiKVxuICAgIHB1YmxpYyBDb21tb25SZXN1bHQ8Q29tbW9uUGFnZTxTY2hlZHVsZVZvPj4gdXNlclNtYXJ0U29ydChAUmVxdWVzdFBhcmFtKHZhbHVlID0gXCJwYWdlU2l6ZVwiLCBkZWZhdWx0VmFsdWUgPSBcIjIwXCIpIEludGVnZXIgcGFnZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQFJlcXVlc3RQYXJhbSh2YWx1ZSA9IFwicGFnZU51bVwiLCBkZWZhdWx0VmFsdWUgPSBcIjFcIikgSW50ZWdlciBwYWdlTnVtLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEBSZXF1ZXN0UGFyYW0odmFsdWUgPSBcInNlYXJjaEtleVwiLCByZXF1aXJlZCA9IGZhbHNlKSBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICAgICAgIExvbmcgdXNlcklkID0gU2VjdXJpdHlVdGlscy5nZXRDdXJyZW50VXNlcklkKCk7XG4gICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gc2NoZWR1bGVQYWdlID0gc2NoZWR1bGVTZXJ2aWNlLnNtYXJ0U29ydFVzZXIocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgdXNlcklkKTtcblxuICAgICAgICByZXR1cm4gQ29tbW9uUmVzdWx0LnN1Y2Nlc3MoQ29tbW9uUGFnZS5yZXN0UGFnZShzY2hlZHVsZVBhZ2UpKTtcbiAgICB9XG5cbiAgICBAQXBpT3BlcmF0aW9uKHZhbHVlID0gXCLliJvlu7rml6XnqIvlronmjpJcIilcbiAgICBAUG9zdE1hcHBpbmcoXCIvY3JlYXRlXCIpXG4gICAgcHVibGljIENvbW1vblJlc3VsdDxCb29sZWFuPiBjcmVhdGUoQFJlcXVlc3RCb2R5IFNjaGVkdWxlIHNjaGVkdWxlKSB7XG4gICAgICAgIHJldHVybiBDb21tb25SZXN1bHQuc3VjY2VzcyhzY2hlZHVsZVNlcnZpY2UuY3JlYXRlKHNjaGVkdWxlKSk7XG4gICAgfVxuLi4uXG5QYXRoOiB3ZWIvc3JjL3ZpZXdzL3VzZXJTY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuICAgIG1ldGhvZHM6IHtcbiAgICAgIC8vIOiOt+WPluaXpeeoi+mhueeahOeKtuaAgeagh+etvuexu+Wei1xuICAgICAgZ2V0U3RhdHVzVGFnVHlwZShzdGF0dXMpIHtcbiAgICAgICAgc3dpdGNoKHN0YXR1cykge1xuICAgICAgICAgIGNhc2UgMTogcmV0dXJuICdpbmZvJzsgICAgLy8g5b6F5YqeXG4gICAgICAgICAgY2FzZSAyOiByZXR1cm4gJ3dhcm5pbmcnOyAvLyDlt7LlronmjpJcbiAgICAgICAgICBjYXNlIDM6IHJldHVybiAnc3VjY2Vzcyc7IC8vIOi/m+ihjOS4rVxuICAgICAgICAgIGNhc2UgNDogcmV0dXJuICcnOyAgICAgICAgLy8g5bey5a6M5oiQXG4gICAgICAgICAgY2FzZSA1OiByZXR1cm4gJ2Rhbmdlcic7ICAvLyDlt7LpgL7mnJ9cbiAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gJ2luZm8nO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgXG4gICAgICAvLyDmmbrog73mjpLluo/mlrnms5VcbiAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcbiAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICAgICAgIFxuICAgICAgICAvLyDojrflj5blvZPliY3lubTmnIjvvIzmoLzlvI/kuLpZWVlZLU1NXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHllYXJNb250aCA9IGAke25vdy5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICAgICAgXG4gICAgICAgIC8vIOS9v+eUqOaZuuiDveaOkuW6j+aOpeWPo+iOt+WPluaOkuW6j+WQjueahOeUqOaIt+aXpeeoi1xuICAgICAgICBmZXRjaFVzZXJTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIOWwhuaZuuiDveaOkuW6j+WQjueahOaVsOaNruiuvue9ruS4uuW9k+WJjeWIl+ihqFxuICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgICAgICAgICBcbiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7LmoLnmja7ml7bpl7TntKfmgKXmgKflkozku7vliqHph43opoHmgKfov5vooYzmmbrog73mjpLluo8nLFxuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuICAgIG1ldGhvZHM6IHtcbiAgICAgIC8vIOS/ruaUue+8muWIpOaWreaXpeeoi+aYr+WQpuW3sui/h+e7k+adn+aXtumXtFxuICAgICAgaXNPdmVyZHVlKHNjaGVkdWxlKSB7XG4gICAgICAgIC8vIOWmguaenHN0YXR1c+W3sue7j+aYrzUo5bey6YC+5pyfKeWImeebtOaOpei/lOWbnnRydWVcbiAgICAgICAgaWYgKHNjaGVkdWxlLnN0YXR1cyA9PT0gNSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIOajgOafpSBlbmRUaW1lIOaYr+WQpuWtmOWcqO+8jOaYr+WQpuaXqeS6juW9k+WJjeaXtumXtO+8jOW5tuS4lOS7u+WKoeeKtuaAgeS4jeaYr+W3suWujOaIkCAoNClcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlLmVuZFRpbWUgJiYgbmV3IERhdGUoc2NoZWR1bGUuZW5kVGltZSkgPCBuZXcgRGF0ZSgpICYmIHNjaGVkdWxlLnN0YXR1cyAhPT0gNDtcbiAgICAgIH0sXG5cbiAgICAgIC8vIOaZuuiDveaOkuW6j+aWueazlVxuICAgICAgaGFuZGxlU21hcnRTb3J0KCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7LmoLnmja7ml7bpl7TntKfmgKXmgKflkozku7vliqHph43opoHmgKfov5vooYzmmbrog73mjpLluo8nLFxuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYzkxODgxYWItNDA3My00ZDAyLWE3YmEtYmVkYzYzMmU5YzczO3Rvb2x1XzAxV3JIeGdlaHp0Q3o3REoxcXBOQ1VNWCI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA1NjRcdFxuICAgNTY1XHQgICAgICAgIHJldHVybiBzb3J0ZWRQYWdlO1xuICAgNTY2XHQgICAgfVxuICAgNTY3XHRcbiAgIDU2OFx0ICAgIEBPdmVycmlkZVxuICAgNTY5XHQgICAgcHVibGljIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKSB7XG4gICA1NzBcdCAgICAgICAgcmV0dXJuIHNtYXJ0U29ydFVzZXIocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgdXNlcklkLCBudWxsKTtcbiAgIDU3MVx0ICAgIH1cbiAgIDU3Mlx0XG4gICA1NzNcdCAgICBAT3ZlcnJpZGVcbiAgIDU3NFx0ICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNtYXJ0U29ydFVzZXIoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIHVzZXJJZCwgSW50ZWdlciBzdGF0dXMpIHtcbiAgIDU3NVx0ICAgICAgICAvLyDojrflj5bljp/lp4vml6XnqIvliJfooahcbiAgIDU3Nlx0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IG9yaWdpbmFsUGFnZSA9IHNlYXJjaFVzZXIocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgdXNlcklkKTtcbiAgIDU3N1x0ICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlTGlzdCA9IG9yaWdpbmFsUGFnZS5nZXRSZWNvcmRzKCk7XG4gICA1NzhcdFxuICAgNTc5XHQgICAgICAgIC8vIOiuoeeul+avj+S4quaXpeeoi+eahOS8mOWFiOe6p+W+l+WIhlxuICAgNTgwXHQgICAgICAgIE1hcDxMb25nLCBEb3VibGU+IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICA1ODFcdFxuICAgNTgyXHQgICAgICAgIC8vIOWmguaenOacieeKtuaAgei/h+a7pO+8jOWFiOi/h+a7pOWHuuespuWQiOeKtuaAgeeahOaXpeeoi1xuICAgNTgzXHQgICAgICAgIGlmIChzdGF0dXMgIT0gbnVsbCkge1xuICAgNTg0XHQgICAgICAgICAgICBzY2hlZHVsZUxpc3QgPSBzY2hlZHVsZUxpc3Quc3RyZWFtKClcbiAgIDU4NVx0ICAgICAgICAgICAgICAgIC5maWx0ZXIoc2NoZWR1bGUgLT4gc2NoZWR1bGUuZ2V0U3RhdHVzKCkgIT0gbnVsbCAmJiBzY2hlZHVsZS5nZXRTdGF0dXMoKS5lcXVhbHMoc3RhdHVzKSlcbiAgIDU4Nlx0ICAgICAgICAgICAgICAgIC5jb2xsZWN0KENvbGxlY3RvcnMudG9MaXN0KCkpO1xuICAgNTg3XHQgICAgICAgIH1cbiAgIDU4OFx0XG4gICA1ODlcdCAgICAgICAgZm9yIChTY2hlZHVsZVZvIHNjaGVkdWxlIDogc2NoZWR1bGVMaXN0KSB7XG4gICA1OTBcdCAgICAgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XG4gICA1OTFcdCAgICAgICAgICAgIGlmIChzY2hlZHVsZS5nZXRUYXNrSWQoKSAhPSBudWxsKSB7XG4gICA1OTJcdCAgICAgICAgICAgICAgICB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICA1OTNcdCAgICAgICAgICAgIH1cbiAgIDU5NFx0XG4gICA1OTVcdCAgICAgICAgICAgIC8vIOiuoeeul+S8mOWFiOe6p+W+l+WIhlxuICAgNTk2XHQgICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUoc2NoZWR1bGUsIHRhc2spO1xuICAgNTk3XHQgICAgICAgICAgICBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLnB1dChzY2hlZHVsZS5nZXRJZCgpLCBwcmlvcml0eVNjb3JlKTtcbiAgIDU5OFx0ICAgICAgICB9XG4gICA1OTlcdFxuICAgNjAwXHQgICAgICAgIC8vIOagueaNruS8mOWFiOe6p+W+l+WIhuaOkuW6j+aXpeeoi1xuICAgNjAxXHQgICAgICAgIHNjaGVkdWxlTGlzdC5zb3J0KChhLCBiKSAtPiB7XG4gICA2MDJcdCAgICAgICAgICAgIERvdWJsZSBzY29yZUEgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChhLmdldElkKCksIDAuMCk7XG4gICA2MDNcdCAgICAgICAgICAgIERvdWJsZSBzY29yZUIgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChiLmdldElkKCksIDAuMCk7XG4gICA2MDRcdFxuICAgNjA1XHQgICAgICAgICAgICAvLyDliIbmlbDpq5jnmoTmjpLlnKjliY3pnaJcbiAgIDYwNlx0ICAgICAgICAgICAgcmV0dXJuIERvdWJsZS5jb21wYXJlKHNjb3JlQiwgc2NvcmVBKTtcbiAgIDYwN1x0ICAgICAgICB9KTtcbiAgIDYwOFx0XG4gICA2MDlcdCAgICAgICAgLy8g5Yib5bu65paw55qE5YiG6aG157uT5p6cXG4gICA2MTBcdCAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBzb3J0ZWRQYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSwgb3JpZ2luYWxQYWdlLmdldFRvdGFsKCkpO1xuICAgNjExXHQgICAgICAgIHNvcnRlZFBhZ2Uuc2V0UmVjb3JkcyhzY2hlZHVsZUxpc3QpO1xuICAgNjEyXHRcbiAgIDYxM1x0ICAgICAgICByZXR1cm4gc29ydGVkUGFnZTtcbiAgIDYxNFx0ICAgIH1cbiAgIDYxNVx0XG4gICA2MTZcdCAgICAvKipcbiAgIDYxN1x0ICAgICAqIOavj+Wwj+aXtuajgOafpeS4gOasoeS7u+WKoeaIquatouaXtumXtO+8jOabtOaWsOmAvuacn+S7u+WKoeeKtuaAgVxuICAgNjE4XHQgICAgICovXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImI5NmY5NDQ1LWI5NGItNGU2Zi1iMjExLTE3ZDM2ZTE2ZmE3Yzt0b29sdV8wMUtUZEUzTFpFQ1M3bW9KcGd5V2FoeVYiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgICAgMVx0PHRlbXBsYXRlPiBcbiAgICAgMlx0ICA8ZGl2IGNsYXNzPVwiYXBwLWNvbnRhaW5lclwiPlxuICAgICAzXHQgICAgPGVsLWNhcmQgY2xhc3M9XCJmaWx0ZXItY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICAgNFx0ICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1oZWFkZXJcIj5cbiAgICAgNVx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc2VhcmNoXCI+PC9pPlxuICAgICA2XHQgICAgICAgIDxzcGFuPuetm+mAieaQnOe0ojwvc3Bhbj5cbiAgICAgN1x0ICAgICAgPC9kaXY+XG4gICAgIDhcdCAgICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItY29udGVudFwiPlxuICAgICA5XHQgICAgICAgIDxlbC1mb3JtIDppbmxpbmU9XCJ0cnVlXCIgOm1vZGVsPVwibGlzdFF1ZXJ5XCIgc2l6ZT1cInNtYWxsXCIgbGFiZWwtd2lkdGg9XCIxMjBweFwiPlxuICAgIDEwXHQgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuWFs+mUruWtl++8mlwiPlxuICAgIDExXHQgICAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImxpc3RRdWVyeS5zZWFyY2hLZXlcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeWFs+mUruWtl1wiIGNsZWFyYWJsZT48L2VsLWlucHV0PlxuICAgIDEyXHQgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgMTNcdCAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgMTRcdCAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAxNVx0ICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAxNlx0ICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlU2VhcmNoTGlzdCgpXCJcbiAgICAxN1x0ICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAxOFx0ICAgICAgICAgICAgY2xhc3M9XCJzZWFyY2gtYnRuXCI+XG4gICAgMTlcdCAgICAgICAgICAgIOafpeivouaQnOe0olxuICAgIDIwXHQgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMjFcdCAgICAgICAgPC9lbC1mb3JtPlxuICAgIDIyXHQgICAgICA8L2Rpdj5cbiAgICAyM1x0ICAgIDwvZWwtY2FyZD5cbiAgICAyNFx0ICAgIDxlbC1jYXJkIGNsYXNzPVwib3BlcmF0ZS1jb250YWluZXJcIiBzaGFkb3c9XCJob3ZlclwiPlxuICAgIDI1XHQgICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1oZWFkZXJcIj5cbiAgICAyNlx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tZGF0ZVwiPjwvaT5cbiAgICAyN1x0ICAgICAgICA8c3Bhbj7ml6XnqIvlronmjpI8L3NwYW4+XG4gICAgMjhcdCAgICAgIDwvZGl2PlxuICAgIDI5XHQgICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1hY3Rpb25zXCI+XG4gICAgMzBcdCAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVwic21hbGxcIiBjbGFzcz1cImJ0bi1hZGRcIiBAY2xpY2s9XCJoYW5kbGVBZGQoKVwiIHR5cGU9XCJwcmltYXJ5XCI+XG4gICAgMzFcdCAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tcGx1c1wiPjwvaT7liJvlu7rml6XnqItcbiAgICAzMlx0ICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAzM1x0ICAgICAgICA8ZWwtYnV0dG9uIHNpemU9XCJzbWFsbFwiIGNsYXNzPVwiYnRuLXNvcnRcIiBAY2xpY2s9XCJoYW5kbGVTbWFydFNvcnQoKVwiIHR5cGU9XCJzdWNjZXNzXCI+XG4gICAgMzRcdCAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc29ydFwiPjwvaT7mmbrog73mjpLluo9cbiAgICAzNVx0ICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAzNlx0ICAgICAgPC9kaXY+XG4gICAgMzdcdCAgICA8L2VsLWNhcmQ+XG4gICAgMzhcdCAgICBcbiAgICAzOVx0ICAgIDwhLS0g5LyY6ZuF55qE5pel56iL5pe26Ze06L20IC0tPlxuICAgIDQwXHQgICAgPGVsLWNhcmQgc2hhZG93PVwiaG92ZXJcIiBjbGFzcz1cInNjaGVkdWxlci1jb250YWluZXJcIiB2LWxvYWRpbmc9XCJsaXN0TG9hZGluZ1wiPlxuICAgIDQxXHQgICAgICA8ZGl2IHYtaWY9XCJPYmplY3Qua2V5cyhncm91cGVkU2NoZWR1bGVzKS5sZW5ndGggPT09IDBcIiBjbGFzcz1cImVtcHR5LXN0YXRlXCI+XG4gICAgNDJcdCAgICAgICAgPGVsLWVtcHR5IGRlc2NyaXB0aW9uPVwi5pqC5peg5pel56iL5pWw5o2uXCI+XG4gICAgNDNcdCAgICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiaGFuZGxlQWRkXCIgc2l6ZT1cInNtYWxsXCIgc2xvdD1cImRlc2NyaXB0aW9uXCI+56uL5Y2z5Yib5bu6PC9lbC1idXR0b24+XG4gICAgNDRcdCAgICAgICAgPC9lbC1lbXB0eT5cbiAgICA0NVx0ICAgICAgPC9kaXY+XG4gICAgNDZcdCAgICAgIDxkaXYgdi1lbHNlIGNsYXNzPVwic2NoZWR1bGVyLXdyYXBwZXJcIj5cbiAgICA0N1x0ICAgICAgICA8ZGl2IHYtZm9yPVwiKHNjaGVkdWxlcywgZGF0ZSkgaW4gZ3JvdXBlZFNjaGVkdWxlc1wiIDprZXk9XCJkYXRlXCIgY2xhc3M9XCJkYXktZ3JvdXBcIj5cbiAgICA0OFx0ICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktaGVhZGVyXCI+XG4gICAgNDlcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbGVmdFwiPlxuICAgIDUwXHQgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbnVtYmVyXCI+e3sgZ2V0RGF5TnVtYmVyKGRhdGUpIH19PC9kaXY+XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzA1XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI4MTQyZTgwNS1hOTY4LTQ0MmUtOWJkNy04MjQzMmU2YTBkYjc7dG9vbHVfMDFRbkI2UmRlSEFHSlFyaHZyTm5GUGJ3Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWUuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgNVx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc2VhcmNoXCI+PC9pPlxuICAgICA2XHQgICAgICAgIDxzcGFuPuetm+mAieaQnOe0ojwvc3Bhbj5cbiAgICAgN1x0ICAgICAgPC9kaXY+XG4gICAgIDhcdCAgICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItY29udGVudFwiPlxuICAgICA5XHQgICAgICAgIDxlbC1mb3JtIDppbmxpbmU9XCJ0cnVlXCIgOm1vZGVsPVwibGlzdFF1ZXJ5XCIgc2l6ZT1cInNtYWxsXCIgbGFiZWwtd2lkdGg9XCIxMjBweFwiPlxuICAgIDEwXHQgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuWFs+mUruWtl++8mlwiPlxuICAgIDExXHQgICAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImxpc3RRdWVyeS5zZWFyY2hLZXlcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeWFs+mUruWtl1wiIGNsZWFyYWJsZT48L2VsLWlucHV0PlxuICAgIDEyXHQgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgMTNcdCAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5Lu75Yqh54q25oCB77yaXCI+XG4gICAgMTRcdCAgICAgICAgICAgIDxlbC1zZWxlY3Qgdi1tb2RlbD1cImxpc3RRdWVyeS5zdGF0dXNcIiBwbGFjZWhvbGRlcj1cIuivt+mAieaLqeeKtuaAgVwiIGNsZWFyYWJsZT5cbiAgICAxNVx0ICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjFcIiBsYWJlbD1cIuW+heWKnlwiPjwvZWwtb3B0aW9uPlxuICAgIDE2XHQgICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiMlwiIGxhYmVsPVwi5bey5a6J5o6SXCI+PC9lbC1vcHRpb24+XG4gICAgMTdcdCAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIzXCIgbGFiZWw9XCLov5vooYzkuK1cIj48L2VsLW9wdGlvbj5cbiAgICAxOFx0ICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjRcIiBsYWJlbD1cIuW3suWujOaIkFwiPjwvZWwtb3B0aW9uPlxuICAgIDE5XHQgICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiNVwiIGxhYmVsPVwi5bey6YC+5pyfXCI+PC9lbC1vcHRpb24+XG4gICAgMjBcdCAgICAgICAgICAgIDwvZWwtc2VsZWN0PlxuICAgIDIxXHQgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgMjJcdCAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgMjNcdCAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAyNFx0ICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAyNVx0ICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlU2VhcmNoTGlzdCgpXCJcbiAgICAyNlx0ICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAyN1x0ICAgICAgICAgICAgY2xhc3M9XCJzZWFyY2gtYnRuXCI+XG4gICAgMjhcdCAgICAgICAgICAgIOafpeivouaQnOe0olxuICAgIDI5XHQgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMzBcdCAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgMzFcdCAgICAgICAgICAgIGljb249XCJlbC1pY29uLXJlZnJlc2hcIlxuICAgIDMyXHQgICAgICAgICAgICBAY2xpY2s9XCJoYW5kbGVSZXNldFNlYXJjaCgpXCJcbiAgICAzM1x0ICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCI+XG4gICAgMzRcdCAgICAgICAgICAgIOmHjee9rlxuICAgIDM1XHQgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMzZcdCAgICAgICAgPC9lbC1mb3JtPlxuICAgIDM3XHQgICAgICA8L2Rpdj5cbiAgICAzOFx0ICAgIDwvZWwtY2FyZD5cbiAgICAzOVx0ICAgIDxlbC1jYXJkIGNsYXNzPVwib3BlcmF0ZS1jb250YWluZXJcIiBzaGFkb3c9XCJob3ZlclwiPlxuICAgIDQwXHQgICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1oZWFkZXJcIj5cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMGM0YWUwMTEtOThhZi00MzY4LTg4NDAtYzMzOTQ2OTRjODJjO3Rvb2x1XzAxTGF6emdxZ0FLN0t4aWdDcDF6V3lCdCI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlOlxuICAxMzAwXHQgICAgZm9udC1zaXplOiAxNHB4O1xuICAxMzAxXHQgIH1cbiAgMTMwMlx0fVxuICAxMzAzXHRcbiAgMTMwNFx0LnRhc2stZGV0YWlsIHtcbiAgMTMwNVx0ICAvKiDku7vliqHor6bmg4XmoLflvI8gKi9cblRvdGFsIGxpbmVzIGluIGZpbGU6IDEzMjBcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjdmYzUyYTVjLTZiOTUtNDQ2OC04M2M3LTNkZjVhYWJkMTdjOTt0b29sdV8wMVdnQXdpb2dmUGNHTG5VOXdmZkozVjkiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgIDEwMFx0ICAgICAgICAgICAgICAgICAgc2l6ZT1cIm1pbmlcIlxuICAgMTAxXHQgICAgICAgICAgICAgICAgICBlZmZlY3Q9XCJkYXJrXCJcbiAgIDEwMlx0ICAgICAgICAgICAgICAgICAgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMTBweDsgbGVmdDogMTBweDsgei1pbmRleDogMztcIlxuICAgMTAzXHQgICAgICAgICAgICAgICAgICB2LWlmPVwic2NoZWR1bGUuc3RhdHVzICE9PSB1bmRlZmluZWQgJiYgc2NoZWR1bGUuc3RhdHVzICE9PSBudWxsXCI+XG4gICAxMDRcdCAgICAgICAgICAgICAgICAgIHt7IHNjaGVkdWxlLnN0YXR1cyB8IGZvcm1hdFN0YXR1cyB9fVxuICAgMTA1XHQgICAgICAgICAgICAgICAgPC9lbC10YWc+XG4gICAxMDZcdFxuICAgMTA3XHQgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtdGltZS1yYW5nZVwiIDpzdHlsZT1cIntjb2xvcjogaXNPdmVyZHVlKHNjaGVkdWxlKSA/ICcjYzBjNGNjJyA6ICcjOTA5Mzk5J31cIj5cbiAgIDEwOFx0ICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXRpbWVcIj48L2k+XG4gICAxMDlcdCAgICAgICAgICAgICAgICAgIDxzcGFuPnt7IGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSB9fSAtIHt7IGZvcm1hdFRpbWUoc2NoZWR1bGUuZW5kVGltZSkgfX08L3NwYW4+XG4gICAxMTBcdCAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgIDExMVx0XG4gICAxMTJcdCAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2FyZC10aXRsZVwiIDpzdHlsZT1cIntjb2xvcjogaXNPdmVyZHVlKHNjaGVkdWxlKSA/ICcjYTZhOWFkJyA6ICcjMzAzMTMzJywgJ3BhZGRpbmctbGVmdCc6ICc3MHB4J31cIj5cbiAgIDExM1x0ICAgICAgICAgICAgICAgICAge3sgc2NoZWR1bGUudGFza05hbWUgfX1cbiAgIDExNFx0ICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgMTE1XHRcbiAgIDExNlx0ICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWFjdGlvbnNcIj5cbiAgIDExN1x0ICAgICAgICAgICAgICAgICAgPHRlbXBsYXRlIHYtaWY9XCJzY2hlZHVsZS5oYXNDb25mbGljdFwiPlxuICAgMTE4XHQgICAgICAgICAgICAgICAgICAgIDxlbC10b29sdGlwIGNvbnRlbnQ9XCLmn6XnnIvlhrLnqoHor6bmg4VcIiBwbGFjZW1lbnQ9XCJ0b3BcIiBlZmZlY3Q9XCJsaWdodFwiPlxuICAgMTE5XHQgICAgICAgICAgICAgICAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYWN0aW9uLWJ0biBjb25mbGljdC1idG5cIiBAY2xpY2s9XCJ2aWV3Q29uZmxpY3Qoc2NoZWR1bGUpXCI+XG4gICAxMjBcdCAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi13YXJuaW5nXCI+PC9pPlxuICAgMTIxXHQgICAgICAgICAgICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAxMjJcdCAgICAgICAgICAgICAgICAgICAgPC9lbC10b29sdGlwPlxuICAgMTIzXHQgICAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgMTI0XHRcbiAgIDEyNVx0ICAgICAgICAgICAgICAgICAgPGVsLXRvb2x0aXAgY29udGVudD1cIuafpeeci+ivpuaDhVwiIHBsYWNlbWVudD1cInRvcFwiIGVmZmVjdD1cImxpZ2h0XCI+XG4gICAxMjZcdCAgICAgICAgICAgICAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYWN0aW9uLWJ0biB2aWV3LWJ0blwiIEBjbGljaz1cInZpZXdJbmZvKHNjaGVkdWxlKVwiPlxuICAgMTI3XHQgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXZpZXdcIj48L2k+XG4gICAxMjhcdCAgICAgICAgICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAxMjlcdCAgICAgICAgICAgICAgICAgIDwvZWwtdG9vbHRpcD5cbiAgIDEzMFx0XG4gICAxMzFcdCAgICAgICAgICAgICAgICAgIDxlbC10b29sdGlwIGNvbnRlbnQ9XCLnvJbovpHml6XnqItcIiBwbGFjZW1lbnQ9XCJ0b3BcIiBlZmZlY3Q9XCJsaWdodFwiPlxuICAgMTMyXHQgICAgICAgICAgICAgICAgICAgIDxlbC1idXR0b24gdHlwZT1cInRleHRcIiBjbGFzcz1cImFjdGlvbi1idG4gZWRpdC1idG5cIiBAY2xpY2s9XCJoYW5kbGVVcGRhdGUoZGF0ZSwgc2NoZWR1bGUpXCI+XG4gICAxMzNcdCAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tZWRpdFwiPjwvaT5cbiAgIDEzNFx0ICAgICAgICAgICAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgIDEzNVx0ICAgICAgICAgICAgICAgICAgPC9lbC10b29sdGlwPlxuICAgMTM2XHQgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAxMzdcdCAgICAgICAgICAgICAgPC9kaXY+XG4gICAxMzhcdCAgICAgICAgICAgIDwvZGl2PlxuICAgMTM5XHQgICAgICAgICAgPC9kaXY+XG4gICAxNDBcdCAgICAgICAgPC9kaXY+XG4gICAxNDFcdCAgICAgIDwvZGl2PlxuICAgMTQyXHQgICAgPC9lbC1jYXJkPlxuICAgMTQzXHRcbiAgIDE0NFx0ICAgIDxkaXYgY2xhc3M9XCJwYWdpbmF0aW9uLWNvbnRhaW5lclwiPlxuICAgMTQ1XHQgICAgICA8ZWwtcGFnaW5hdGlvblxuICAgMTQ2XHQgICAgICAgIGJhY2tncm91bmRcbiAgIDE0N1x0ICAgICAgICBAc2l6ZS1jaGFuZ2U9XCJoYW5kbGVTaXplQ2hhbmdlXCJcbiAgIDE0OFx0ICAgICAgICBAY3VycmVudC1jaGFuZ2U9XCJoYW5kbGVDdXJyZW50Q2hhbmdlXCJcbiAgIDE0OVx0ICAgICAgICBsYXlvdXQ9XCJ0b3RhbCwgc2l6ZXMscHJldiwgcGFnZXIsIG5leHQsanVtcGVyXCJcbiAgIDE1MFx0ICAgICAgICA6Y3VycmVudC1wYWdlLnN5bmM9XCJsaXN0UXVlcnkucGFnZU51bVwiXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlYjI4MjFhMi02MmM5LTQ0MDMtYjc1NS1jMzE0OWY2M2MyOGY7dG9vbHVfMDEyUm4zTkE3WVJ1N2FiclppTW5XcjZFIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWU6XG4gIDEwMDBcdH1cbiAgMTAwMVx0XG4gIDEwMDJcdC8qIOmhtumDqOWNoeeJh+agt+W8j+S8mOWMliAqL1xuICAxMDAzXHQuZmlsdGVyLWNvbnRhaW5lciwgLm9wZXJhdGUtY29udGFpbmVyIHtcbiAgMTAwNFx0ICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAxMDA1XHQgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgMTAwNlx0ICBib3JkZXI6IG5vbmU7XG4gIDEwMDdcdH1cbiAgMTAwOFx0XG4gIDEwMDlcdC5maWx0ZXItaGVhZGVyLCAub3BlcmF0ZS1oZWFkZXIge1xuICAxMDEwXHQgIGRpc3BsYXk6IGZsZXg7XG4gIDEwMTFcdCAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgMTAxMlx0ICBmb250LXNpemU6IDE2cHg7XG4gIDEwMTNcdCAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgMTAxNFx0ICBjb2xvcjogIzMwMzEzMztcbiAgMTAxNVx0ICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAxMDE2XHR9XG4gIDEwMTdcdFxuICAxMDE4XHQuZmlsdGVyLWhlYWRlciBpLCAub3BlcmF0ZS1oZWFkZXIgaSB7XG4gIDEwMTlcdCAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gIDEwMjBcdCAgZm9udC1zaXplOiAxOHB4O1xuICAxMDIxXHQgIGNvbG9yOiAjNDA5RUZGO1xuICAxMDIyXHR9XG4gIDEwMjNcdFxuICAxMDI0XHQuZmlsdGVyLWNvbnRlbnQge1xuICAxMDI1XHQgIG1hcmdpbi10b3A6IDE1cHg7XG4gIDEwMjZcdH1cbiAgMTAyN1x0XG4gIDEwMjhcdC5vcGVyYXRlLWFjdGlvbnMge1xuICAxMDI5XHQgIGRpc3BsYXk6IGZsZXg7XG4gIDEwMzBcdCAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgMTAzMVx0fVxuICAxMDMyXHRcbiAgMTAzM1x0LnNlYXJjaC1idG4ge1xuICAxMDM0XHQgIGJhY2tncm91bmQ6ICM0MDlFRkY7XG4gIDEwMzVcdCAgYm9yZGVyLWNvbG9yOiAjNDA5RUZGO1xuICAxMDM2XHQgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgMTAzN1x0fVxuICAxMDM4XHRcbiAgMTAzOVx0LmJ0bi1hZGQge1xuICAxMDQwXHQgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgMTA0MVx0fVxuICAxMDQyXHRcbiAgMTA0M1x0Lyog5paw55qE5pel56iL5pe26Ze06L205qC35byPICovXG4gIDEwNDRcdC5zY2hlZHVsZXItY29udGFpbmVyIHtcbiAgMTA0NVx0ICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICAxMDQ2XHQgIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgMTA0N1x0ICBib3JkZXI6IG5vbmU7XG4gIDEwNDhcdCAgcGFkZGluZzogMDtcbiAgMTA0OVx0ICBvdmVyZmxvdzogaGlkZGVuO1xuICAxMDUwXHR9XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJlYzc5NTZkNy03ZWIwLTQzZTgtOTBkMy1iNmE1YzgwZDg4Mjg7dG9vbHVfMDFNUU0xNzVrVEFMQlBKSlRjZm5jNHNEIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWU6XG4gICAxNTBcdCAgICAgICAgOmN1cnJlbnQtcGFnZS5zeW5jPVwibGlzdFF1ZXJ5LnBhZ2VOdW1cIlxuICAgMTUxXHQgICAgICAgIDpwYWdlLXNpemU9XCJsaXN0UXVlcnkucGFnZVNpemVcIlxuICAgMTUyXHQgICAgICAgIDpwYWdlLXNpemVzPVwiWzEwLDE1LDIwXVwiXG4gICAxNTNcdCAgICAgICAgOnRvdGFsPVwidG90YWxcIj5cbiAgIDE1NFx0ICAgICAgPC9lbC1wYWdpbmF0aW9uPlxuICAgMTU1XHQgICAgPC9kaXY+XG4gICAxNTZcdFxuICAgMTU3XHQgICAgPCEtLSDlr7nor53moYbpg6jliIbkv53mjIHkuI3lj5ggLS0+XG4gICAxNThcdCAgICA8ZWwtZGlhbG9nXG4gICAxNTlcdCAgICAgIDp0aXRsZT1cImlzRWRpdD8n57yW6L6R5pel56iL5a6J5o6SJzon5Yib5bu65pel56iL5a6J5o6SJ1wiXG4gICAxNjBcdCAgICAgIDp2aXNpYmxlLnN5bmM9XCJkaWFsb2dWaXNpYmxlXCJcbiAgIDE2MVx0ICAgICAgd2lkdGg9XCI0MCVcIj5cbiAgIDE2Mlx0ICAgICAgPGVsLWZvcm0gOm1vZGVsPVwiYWRtaW5cIlxuICAgMTYzXHQgICAgICAgICAgICAgIHJlZj1cImFkbWluRm9ybVwiXG4gICAxNjRcdCAgICAgICAgICAgICAgbGFiZWwtd2lkdGg9XCIxMDBweFwiXG4gICAxNjVcdCAgICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgIDE2Nlx0ICAgICAgICAgICAgICA6cnVsZXM9XCJhZG1pblJ1bGVzXCI+XG4gICAxNjdcdCAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuS7u+WKoe+8mlwiIHByb3A9XCJ0YXNrSWRcIj5cbiAgIDE2OFx0ICAgICAgICAgIDxlbC1zZWxlY3Qgdi1pZj1cImlzRWRpdFwiIGRpc2FibGVkIHYtbW9kZWw9XCJhZG1pbi50YXNrSWRcIiBmaWx0ZXJhYmxlIHBsYWNlaG9sZGVyPVwi6K+36YCJ5oup5Lu75YqhXCIgc3R5bGU9XCJ3aWR0aDogMjUwcHhcIj5cbiAgIDE2OVx0ICAgICAgICAgICAgPGVsLW9wdGlvblxuICAgMTcwXHQgICAgICAgICAgICAgIHYtZm9yPVwiKGl0ZW0sIGluZGV4KSBpbiB0YXNrTGlzdFwiXG4gICAxNzFcdCAgICAgICAgICAgICAgOmxhYmVsPVwiYCR7aXRlbS50aXRsZX1gXCJcbiAgIDE3Mlx0ICAgICAgICAgICAgICA6a2V5PVwiaW5kZXhcIlxuICAgMTczXHQgICAgICAgICAgICAgIDp2YWx1ZT1cIml0ZW0uaWRcIj5cbiAgIDE3NFx0ICAgICAgICAgICAgPC9lbC1vcHRpb24+XG4gICAxNzVcdCAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgIDE3Nlx0ICAgICAgICAgIDxlbC1zZWxlY3Qgdi1lbHNlIHYtbW9kZWw9XCJhZG1pbi50YXNrSWRcIiBmaWx0ZXJhYmxlIHBsYWNlaG9sZGVyPVwi6K+36YCJ5oup5Lu75YqhXCIgc3R5bGU9XCJ3aWR0aDogMjUwcHhcIj5cbiAgIDE3N1x0ICAgICAgICAgICAgPGVsLW9wdGlvblxuICAgMTc4XHQgICAgICAgICAgICAgIHYtZm9yPVwiKGl0ZW0sIGluZGV4KSBpbiB0YXNrTGlzdFwiXG4gICAxNzlcdCAgICAgICAgICAgICAgOmxhYmVsPVwiYCR7aXRlbS50aXRsZX0gW+adg+mHjTogJHtpdGVtLnByaW9yaXR5U2NvcmV9XWBcIlxuICAgMTgwXHQgICAgICAgICAgICAgIDprZXk9XCJpbmRleFwiXG4gICAxODFcdCAgICAgICAgICAgICAgOnZhbHVlPVwiaXRlbS5pZFwiPlxuICAgMTgyXHQgICAgICAgICAgICA8L2VsLW9wdGlvbj5cbiAgIDE4M1x0ICAgICAgICAgIDwvZWwtc2VsZWN0PlxuICAgMTg0XHQgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgMTg1XHQgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLmiafooYzml7bpl7TvvJpcIiBwcm9wPVwic3RhcnRUaW1lXCI+XG4gICAxODZcdCAgICAgICAgICA8ZWwtZGF0ZS1waWNrZXJcbiAgIDE4N1x0ICAgICAgICAgICAgc3R5bGU9XCJ3aWR0aDogMjUwcHhcIlxuICAgMTg4XHQgICAgICAgICAgICB2LW1vZGVsPVwiYWRtaW4uc3RhcnRUaW1lXCJcbiAgIDE4OVx0ICAgICAgICAgICAgdHlwZT1cImRhdGV0aW1lXCJcbiAgIDE5MFx0ICAgICAgICAgICAgdmFsdWUtZm9ybWF0PVwieXl5eS1NTS1kZCBISDptbTpzc1wiXG4gICAxOTFcdCAgICAgICAgICAgIDpwaWNrZXItb3B0aW9ucz1cInBpY2tlck9wdGlvbnNcIlxuICAgMTkyXHQgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIumAieaLqeaJp+ihjOaXtumXtFwiPlxuICAgMTkzXHQgICAgICAgICAgPC9lbC1kYXRlLXBpY2tlcj5cbiAgIDE5NFx0ICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgIDE5NVx0ICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi57uT5p2f5pe26Ze077yaXCIgcHJvcD1cImVuZFRpbWVcIj5cbiAgIDE5Nlx0ICAgICAgICAgIDxlbC1kYXRlLXBpY2tlclxuICAgMTk3XHQgICAgICAgICAgICBzdHlsZT1cIndpZHRoOiAyNTBweFwiXG4gICAxOThcdCAgICAgICAgICAgIHYtbW9kZWw9XCJhZG1pbi5lbmRUaW1lXCJcbiAgIDE5OVx0ICAgICAgICAgICAgdHlwZT1cImRhdGV0aW1lXCJcbiAgIDIwMFx0ICAgICAgICAgICAgdmFsdWUtZm9ybWF0PVwieXl5eS1NTS1kZCBISDptbTpzc1wiXG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIwMDRhYTg5ZS05ZWJhLTQxODQtYWU2Ny02MTM5YTQzMDJhYjg7dG9vbHVfMDE0Q200U3hSVVZ5WXFmNWpHVTlTcmlwIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWU6XG4gICA1MDBcdCAgICAgICAgdGltZUNvbG9yczoge1xuICAgNTAxXHQgICAgICAgICAgZWFybHlNb3JuaW5nOiB7XG4gICA1MDJcdCAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNFM0YyRkQnLFxuICAgNTAzXHQgICAgICAgICAgICBib3JkZXJDb2xvcjogJyM5MENBRjknLFxuICAgNTA0XHQgICAgICAgICAgICBkb3RDb2xvcjogJyMyMTk2RjMnXG4gICA1MDVcdCAgICAgICAgICB9LFxuICAgNTA2XHQgICAgICAgICAgbW9ybmluZzoge1xuICAgNTA3XHQgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRThGNUU5JyxcbiAgIDUwOFx0ICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICcjQTVENkE3JyxcbiAgIDUwOVx0ICAgICAgICAgICAgZG90Q29sb3I6ICcjNENBRjUwJ1xuICAgNTEwXHQgICAgICAgICAgfSxcbiAgIDUxMVx0ICAgICAgICAgIG5vb246IHtcbiAgIDUxMlx0ICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0ZGRjhFMScsXG4gICA1MTNcdCAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnI0ZGRTA4MicsXG4gICA1MTRcdCAgICAgICAgICAgIGRvdENvbG9yOiAnI0ZGQzEwNydcbiAgIDUxNVx0ICAgICAgICAgIH0sXG4gICA1MTZcdCAgICAgICAgICBhZnRlcm5vb246IHtcbiAgIDUxN1x0ICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0ZCRTlFNycsXG4gICA1MThcdCAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnI0ZGQUI5MScsXG4gICA1MTlcdCAgICAgICAgICAgIGRvdENvbG9yOiAnI0ZGNTcyMidcbiAgIDUyMFx0ICAgICAgICAgIH0sXG4gICA1MjFcdCAgICAgICAgICBldmVuaW5nOiB7XG4gICA1MjJcdCAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNFREU3RjYnLFxuICAgNTIzXHQgICAgICAgICAgICBib3JkZXJDb2xvcjogJyNCMzlEREInLFxuICAgNTI0XHQgICAgICAgICAgICBkb3RDb2xvcjogJyM2NzNBQjcnXG4gICA1MjVcdCAgICAgICAgICB9LFxuICAgNTI2XHQgICAgICAgICAgbmlnaHQ6IHtcbiAgIDUyN1x0ICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0UxRjVGRScsXG4gICA1MjhcdCAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnIzgxRDRGQScsXG4gICA1MjlcdCAgICAgICAgICAgIGRvdENvbG9yOiAnIzAzQTlGNCdcbiAgIDUzMFx0ICAgICAgICAgIH1cbiAgIDUzMVx0ICAgICAgICB9XG4gICA1MzJcdCAgICAgIH1cbiAgIDUzM1x0ICAgIH0sXG4gICA1MzRcdCAgICBjb21wdXRlZDoge1xuICAgNTM1XHQgICAgICAvLyDmjInml6XmnJ/liIbnu4Tml6XnqIvlronmjpJcbiAgIDUzNlx0ICAgICAgZ3JvdXBlZFNjaGVkdWxlcygpIHtcbiAgIDUzN1x0ICAgICAgICBpZiAoIXRoaXMubGlzdCkgcmV0dXJuIHt9O1xuICAgNTM4XHRcbiAgIDUzOVx0ICAgICAgICAvLyDliJvlu7rln7rkuo7ml6XmnJ/nmoTliIbnu4RcbiAgIDU0MFx0ICAgICAgICBjb25zdCBncm91cHMgPSB7fTtcbiAgIDU0MVx0ICAgICAgICB0aGlzLmxpc3QuZm9yRWFjaChzY2hlZHVsZSA9PiB7XG4gICA1NDJcdCAgICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5nZXREYXRlU3RyKHNjaGVkdWxlLnN0YXJ0VGltZSk7XG4gICA1NDNcdCAgICAgICAgICBpZiAoIWdyb3Vwc1tkYXRlXSkge1xuICAgNTQ0XHQgICAgICAgICAgICBncm91cHNbZGF0ZV0gPSBbXTtcbiAgIDU0NVx0ICAgICAgICAgIH1cbiAgIDU0Nlx0ICAgICAgICAgIGdyb3Vwc1tkYXRlXS5wdXNoKHNjaGVkdWxlKTtcbiAgIDU0N1x0ICAgICAgICB9KTtcbiAgIDU0OFx0XG4gICA1NDlcdCAgICAgICAgLy8g5oyJ5pel5pyf5o6S5bqPXG4gICA1NTBcdCAgICAgICAgY29uc3Qgc29ydGVkRGF0ZXMgPSBPYmplY3Qua2V5cyhncm91cHMpLnNvcnQoKTtcblRvdGFsIGxpbmVzIGluIGZpbGU6IDEzMjBcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImQ5ZjE2NmU0LTM1NzktNDU5NS1iNzhlLWNkZmRiM2UzYWRkMzt0b29sdV8wMUtVZ0JteWM1QWF2OHlGWHJDaXN1M0siOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgIDYwMFx0XG4gICA2MDFcdCAgICAgIC8vIOaZuuiDveaOkuW6j+aWueazlVxuICAgNjAyXHQgICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XG4gICA2MDNcdCAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7XG4gICA2MDRcdCAgICAgICAgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICA2MDVcdCAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICA2MDZcdCAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgIDYwN1x0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDYwOFx0ICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgNjA5XHQgICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgIDYxMFx0ICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICA2MTFcdCAgICAgICAgICB9KTtcbiAgIDYxMlx0ICAgICAgICB9KTtcbiAgIDYxM1x0ICAgICAgfSxcbiAgIDYxNFx0XG4gICA2MTVcdCAgICAgIC8vIOiOt+WPluaXpeacn+agh+etvijku4rlpKkv5piO5aSp562JKVxuICAgNjE2XHQgICAgICBnZXREYXRlVGFnKGRhdGVTdHIpIHtcbiAgIDYxN1x0ICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICA2MThcdCAgICAgICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgNjE5XHQgICAgICAgIHRvZGF5LnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgNjIwXHRcbiAgIDYyMVx0ICAgICAgICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgIDYyMlx0ICAgICAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuICAgNjIzXHRcbiAgIDYyNFx0ICAgICAgICBjb25zdCB5ZXN0ZXJkYXkgPSBuZXcgRGF0ZSh0b2RheSk7XG4gICA2MjVcdCAgICAgICAgeWVzdGVyZGF5LnNldERhdGUoeWVzdGVyZGF5LmdldERhdGUoKSAtIDEpO1xuICAgNjI2XHRcbiAgIDYyN1x0ICAgICAgICBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IHRvZGF5LmdldFRpbWUoKSkge1xuICAgNjI4XHQgICAgICAgICAgcmV0dXJuICfku4rlpKknO1xuICAgNjI5XHQgICAgICAgIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IHRvbW9ycm93LmdldFRpbWUoKSkge1xuICAgNjMwXHQgICAgICAgICAgcmV0dXJuICfmmI7lpKknO1xuICAgNjMxXHQgICAgICAgIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IHllc3RlcmRheS5nZXRUaW1lKCkpIHtcbiAgIDYzMlx0ICAgICAgICAgIHJldHVybiAn5pio5aSpJztcbiAgIDYzM1x0ICAgICAgICB9IGVsc2Uge1xuICAgNjM0XHQgICAgICAgICAgLy8g6L+U5Zue5pif5pyf5YegXG4gICA2MzVcdCAgICAgICAgICBjb25zdCB3ZWVrZGF5cyA9IFsn5ZGo5pelJywgJ+WRqOS4gCcsICflkajkuownLCAn5ZGo5LiJJywgJ+WRqOWbmycsICflkajkupQnLCAn5ZGo5YWtJ107XG4gICA2MzZcdCAgICAgICAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV07XG4gICA2MzdcdCAgICAgICAgfVxuICAgNjM4XHQgICAgICB9LFxuICAgNjM5XHQgICAgICAvLyDmoLzlvI/ljJbml6XmnJ/kuLpZWVlZLU1NLURE5qC85byPXG4gICA2NDBcdCAgICAgIGdldERhdGVTdHIoZGF0ZVN0cikge1xuICAgNjQxXHQgICAgICAgIHJldHVybiBkYXRlU3RyLnNwbGl0KCcgJylbMF07XG4gICA2NDJcdCAgICAgIH0sXG4gICA2NDNcdCAgICAgIC8vIOagvOW8j+WMluWxleekuuaXpeacn1xuICAgNjQ0XHQgICAgICBmb3JtYXREYXlEYXRlKGRhdGVTdHIpIHtcbiAgIDY0NVx0ICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICA2NDZcdCAgICAgICAgcmV0dXJuIGZvcm1hdERhdGUoZGF0ZSwgJ3l5eXnlubRNTeaciGRk5pelJyk7XG4gICA2NDdcdCAgICAgIH0sXG4gICA2NDhcdCAgICAgIC8vIOagvOW8j+WMluaXtumXtOS4ukhIOk1N5qC85byPXG4gICA2NDlcdCAgICAgIGZvcm1hdFRpbWUoZGF0ZVRpbWVTdHIpIHtcbiAgIDY1MFx0ICAgICAgICBpZiAoIWRhdGVUaW1lU3RyKSByZXR1cm4gJyc7XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiAxMzIwXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI1MjZlMTdhZC00MDc5LTQzYzgtYjljNS1jNWQ2M2U4MmJmNDk7dG9vbHVfMDFXUEJCZXBxcncyVXJzajZWZ3BqemtWIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWU6XG4gICA0MDBcdCAgICAgICAgICAgIHZhbHVlLWZvcm1hdD1cInl5eXktTU0tZGQgSEg6bW06c3NcIlxuICAgNDAxXHQgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIumAieaLqeW8gOWni+aXtumXtFwiPlxuICAgNDAyXHQgICAgICAgICAgPC9lbC1kYXRlLXBpY2tlcj5cbiAgIDQwM1x0ICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgIDQwNFx0ICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi57uT5p2f5pe26Ze0XCI+XG4gICA0MDVcdCAgICAgICAgICA8ZWwtZGF0ZS1waWNrZXJcbiAgIDQwNlx0ICAgICAgICAgICAgdi1tb2RlbD1cInNjaGVkdWxlVGltZUZvcm0uZW5kVGltZVwiXG4gICA0MDdcdCAgICAgICAgICAgIHR5cGU9XCJkYXRldGltZVwiXG4gICA0MDhcdCAgICAgICAgICAgIHZhbHVlLWZvcm1hdD1cInl5eXktTU0tZGQgSEg6bW06c3NcIlxuICAgNDA5XHQgICAgICAgICAgICBwbGFjZWhvbGRlcj1cIumAieaLqee7k+adn+aXtumXtFwiPlxuICAgNDEwXHQgICAgICAgICAgPC9lbC1kYXRlLXBpY2tlcj5cbiAgIDQxMVx0ICAgICAgICAgIDxkaXY+PGVsLXRhZyBzaXplPVwibWluaVwiPuS4jeWhq+WGmeWwhuagueaNruS7u+WKoemihOS8sOaXtumVv+iHquWKqOiuoeeulzwvZWwtdGFnPjwvZGl2PlxuICAgNDEyXHQgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgNDEzXHQgICAgICA8L2VsLWZvcm0+XG4gICA0MTRcdCAgICAgIDxzcGFuIHNsb3Q9XCJmb290ZXJcIiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgIDQxNVx0ICAgICAgICA8ZWwtYnV0dG9uIEBjbGljaz1cInNjaGVkdWxlVGltZURpYWxvZ1Zpc2libGUgPSBmYWxzZVwiPuWPliDmtog8L2VsLWJ1dHRvbj5cbiAgIDQxNlx0ICAgICAgICA8ZWwtYnV0dG9uIHR5cGU9XCJwcmltYXJ5XCIgQGNsaWNrPVwiaGFuZGxlU2NoZWR1bGVUaW1lVXBkYXRlXCI+56GuIOWumjwvZWwtYnV0dG9uPlxuICAgNDE3XHQgICAgICA8L3NwYW4+XG4gICA0MThcdCAgICA8L2VsLWRpYWxvZz5cbiAgIDQxOVx0ICA8L2Rpdj5cbiAgIDQyMFx0PC90ZW1wbGF0ZT5cbiAgIDQyMVx0PHNjcmlwdD5cbiAgIDQyMlx0ICBpbXBvcnQge2ZldGNoU2NoZWR1bGVMaXN0LCBmZXRjaFNjaGVkdWxlU21hcnRTb3J0LCBjcmVhdGVTY2hlZHVsZSx1cGRhdGVTY2hlZHVsZSxkZWxldGVTY2hlZHVsZSxmZXRjaEFsbFRhc2tMaXN0LGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cyxmZXRjaFRhc2tJbmZvLGZldGNoQ29uZmxpY3RTY2hlZHVsZUxpc3QsdXBkYXRlVGFza1N0YXR1cyxzZXRUYXNrUmVtaW5kZXJ9IGZyb20gJ0AvYXBpL2FwaSc7XG4gICA0MjNcdCAgaW1wb3J0IEpzQmFyY29kZSBmcm9tICdqc2JhcmNvZGUnO1xuICAgNDI0XHQgIGltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7XG4gICA0MjVcdCAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuICAgNDI2XHRcbiAgIDQyN1x0ICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgNDI4XHQgICAgcGFnZU51bTogMSxcbiAgIDQyOVx0ICAgIHBhZ2VTaXplOiAxMCxcbiAgIDQzMFx0ICAgIHNlYXJjaEtleTogbnVsbCxcbiAgIDQzMVx0ICAgIHR5cGU6IG51bGwsXG4gICA0MzJcdCAgfTtcbiAgIDQzM1x0ICBjb25zdCBkZWZhdWx0QWRtaW4gPSB7XG4gICA0MzRcdCAgICBpZDogbnVsbCxcbiAgIDQzNVx0ICAgIHRhc2tJZDogbnVsbCxcbiAgIDQzNlx0ICAgIHN0YXJ0VGltZTogbnVsbCxcbiAgIDQzN1x0ICAgIGVuZFRpbWU6IG51bGwsXG4gICA0MzhcdCAgICByZW1pbmRlclRpbWU6IG51bGwsXG4gICA0MzlcdCAgfTtcbiAgIDQ0MFx0ICBleHBvcnQgZGVmYXVsdCB7XG4gICA0NDFcdCAgICBuYW1lOiAnYWRtaW5MaXN0JyxcbiAgIDQ0Mlx0ICAgIGRhdGEoKSB7XG4gICA0NDNcdCAgICAgIHJldHVybiB7XG4gICA0NDRcdCAgICAgICAgbGlzdFF1ZXJ5OiBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KSxcbiAgIDQ0NVx0ICAgICAgICBsaXN0OiBudWxsLFxuICAgNDQ2XHQgICAgICAgIHRvdGFsOiBudWxsLFxuICAgNDQ3XHQgICAgICAgIGxpc3RMb2FkaW5nOiBmYWxzZSxcbiAgIDQ0OFx0ICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgIDQ0OVx0ICAgICAgICBhZG1pbjogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEFkbWluKSxcbiAgIDQ1MFx0ICAgICAgICBpc0VkaXQ6IGZhbHNlLFxuVG90YWwgbGluZXMgaW4gZmlsZTogMTMyMFxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMTg0ZGY2YTgtYmVhZi00NDI3LTg5N2MtOGNiYzExYzQwMDg5O3Rvb2x1XzAxUnZFRXVjc3dzNDlEZkhZOVFTZ3JCWiI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA0MjNcdCAgaW1wb3J0IEpzQmFyY29kZSBmcm9tICdqc2JhcmNvZGUnO1xuICAgNDI0XHQgIGltcG9ydCBodG1sMmNhbnZhcyBmcm9tICdodG1sMmNhbnZhcyc7XG4gICA0MjVcdCAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuICAgNDI2XHRcbiAgIDQyN1x0ICBjb25zdCBkZWZhdWx0TGlzdFF1ZXJ5ID0ge1xuICAgNDI4XHQgICAgcGFnZU51bTogMSxcbiAgIDQyOVx0ICAgIHBhZ2VTaXplOiAxMCxcbiAgIDQzMFx0ICAgIHNlYXJjaEtleTogbnVsbCxcbiAgIDQzMVx0ICAgIHN0YXR1czogbnVsbCxcbiAgIDQzMlx0ICAgIHR5cGU6IG51bGwsXG4gICA0MzNcdCAgfTtcbiAgIDQzNFx0ICBjb25zdCBkZWZhdWx0QWRtaW4gPSB7XG4gICA0MzVcdCAgICBpZDogbnVsbCxcbiAgIDQzNlx0ICAgIHRhc2tJZDogbnVsbCxcbiAgIDQzN1x0ICAgIHN0YXJ0VGltZTogbnVsbCxcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMjU5ZWU0ZWMtNTBjOC00MDg3LTkzMWQtMDM4OTVlYTE0ZDc2O3Rvb2x1XzAxTGU2WE51dnhEcDFmeEN0ZndZcXhRSCI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlOlxuICAgNjAwXHQgICAgICB9LFxuICAgNjAxXHRcbiAgIDYwMlx0ICAgICAgLy8g5pm66IO95o6S5bqP5pa55rOVXG4gICA2MDNcdCAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcbiAgIDYwNFx0ICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgIDYwNVx0ICAgICAgICBmZXRjaFNjaGVkdWxlU21hcnRTb3J0KHRoaXMubGlzdFF1ZXJ5KS50aGVuKHJlc3BvbnNlID0+IHtcbiAgIDYwNlx0ICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgIDYwN1x0ICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgNjA4XHQgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgNjA5XHQgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICA2MTBcdCAgICAgICAgICAgIG1lc3NhZ2U6ICflt7LmoLnmja7ml7bpl7TntKfmgKXmgKflkozku7vliqHph43opoHmgKfov5vooYzmmbrog73mjpLluo8nLFxuICAgNjExXHQgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgIDYxMlx0ICAgICAgICAgIH0pO1xuICAgNjEzXHQgICAgICAgIH0pO1xuICAgNjE0XHQgICAgICB9LFxuICAgNjE1XHRcbiAgIDYxNlx0ICAgICAgLy8g6I635Y+W5pel5pyf5qCH562+KOS7iuWkqS/mmI7lpKnnrYkpXG4gICA2MTdcdCAgICAgIGdldERhdGVUYWcoZGF0ZVN0cikge1xuICAgNjE4XHQgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcbiAgIDYxOVx0ICAgICAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICA2MjBcdCAgICAgICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICA2MjFcdFxuICAgNjIyXHQgICAgICAgIGNvbnN0IHRvbW9ycm93ID0gbmV3IERhdGUodG9kYXkpO1xuICAgNjIzXHQgICAgICAgIHRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG4gICA2MjRcdFxuICAgNjI1XHQgICAgICAgIGNvbnN0IHllc3RlcmRheSA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgIDYyNlx0ICAgICAgICB5ZXN0ZXJkYXkuc2V0RGF0ZSh5ZXN0ZXJkYXkuZ2V0RGF0ZSgpIC0gMSk7XG4gICA2MjdcdFxuICAgNjI4XHQgICAgICAgIGlmIChkYXRlLmdldFRpbWUoKSA9PT0gdG9kYXkuZ2V0VGltZSgpKSB7XG4gICA2MjlcdCAgICAgICAgICByZXR1cm4gJ+S7iuWkqSc7XG4gICA2MzBcdCAgICAgICAgfSBlbHNlIGlmIChkYXRlLmdldFRpbWUoKSA9PT0gdG9tb3Jyb3cuZ2V0VGltZSgpKSB7XG4gICA2MzFcdCAgICAgICAgICByZXR1cm4gJ+aYjuWkqSc7XG4gICA2MzJcdCAgICAgICAgfSBlbHNlIGlmIChkYXRlLmdldFRpbWUoKSA9PT0geWVzdGVyZGF5LmdldFRpbWUoKSkge1xuICAgNjMzXHQgICAgICAgICAgcmV0dXJuICfmmKjlpKknO1xuICAgNjM0XHQgICAgICAgIH0gZWxzZSB7XG4gICA2MzVcdCAgICAgICAgICAvLyDov5Tlm57mmJ/mnJ/lh6BcbiAgIDYzNlx0ICAgICAgICAgIGNvbnN0IHdlZWtkYXlzID0gWyflkajml6UnLCAn5ZGo5LiAJywgJ+WRqOS6jCcsICflkajkuIknLCAn5ZGo5ZubJywgJ+WRqOS6lCcsICflkajlha0nXTtcbiAgIDYzN1x0ICAgICAgICAgIHJldHVybiB3ZWVrZGF5c1tkYXRlLmdldERheSgpXTtcbiAgIDYzOFx0ICAgICAgICB9XG4gICA2MzlcdCAgICAgIH0sXG4gICA2NDBcdCAgICAgIC8vIOagvOW8j+WMluaXpeacn+S4ullZWVktTU0tRETmoLzlvI9cbiAgIDY0MVx0ICAgICAgZ2V0RGF0ZVN0cihkYXRlU3RyKSB7XG4gICA2NDJcdCAgICAgICAgcmV0dXJuIGRhdGVTdHIuc3BsaXQoJyAnKVswXTtcbiAgIDY0M1x0ICAgICAgfSxcbiAgIDY0NFx0ICAgICAgLy8g5qC85byP5YyW5bGV56S65pel5pyfXG4gICA2NDVcdCAgICAgIGZvcm1hdERheURhdGUoZGF0ZVN0cikge1xuICAgNjQ2XHQgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcbiAgIDY0N1x0ICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlLCAneXl5eeW5tE1N5pyIZGTml6UnKTtcbiAgIDY0OFx0ICAgICAgfSxcbiAgIDY0OVx0ICAgICAgLy8g5qC85byP5YyW5pe26Ze05Li6SEg6TU3moLzlvI9cbiAgIDY1MFx0ICAgICAgZm9ybWF0VGltZShkYXRlVGltZVN0cikge1xuVG90YWwgbGluZXMgaW4gZmlsZTogMTMyMVxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYzczMzU3MjEtZWMxOC00MWE0LWJlZDgtMTZjMTg5ZmExNjBmO3Rvb2x1XzAxV0d6dTdBN0pBR2YycnF3MWk5U0N0RSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3Mvc2NoZWR1bGUvaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA1OThcdCAgICAgICAgLy8g5qOA5p+lIGVuZFRpbWUg5piv5ZCm5a2Y5Zyo77yM5piv5ZCm5pep5LqO5b2T5YmN5pe26Ze077yM5bm25LiU5Lu75Yqh54q25oCB5LiN5piv5bey5a6M5oiQICg0KVxuICAgNTk5XHQgICAgICAgIHJldHVybiBzY2hlZHVsZS5lbmRUaW1lICYmIG5ldyBEYXRlKHNjaGVkdWxlLmVuZFRpbWUpIDwgbmV3IERhdGUoKSAmJiBzY2hlZHVsZS5zdGF0dXMgIT09IDQ7XG4gICA2MDBcdCAgICAgIH0sXG4gICA2MDFcdFxuICAgNjAyXHQgICAgICAvLyDmmbrog73mjpLluo/mlrnms5VcbiAgIDYwM1x0ICAgICAgaGFuZGxlU21hcnRTb3J0KCkge1xuICAgNjA0XHQgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgNjA1XHQgICAgICAgIGZldGNoU2NoZWR1bGVTbWFydFNvcnQodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgNjA2XHQgICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgNjA3XHQgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICA2MDhcdCAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA2MDlcdCAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgIDYxMFx0ICAgICAgICAgICAgbWVzc2FnZTogJ+W3suagueaNruaXtumXtOe0p+aApeaAp+WSjOS7u+WKoemHjeimgeaAp+i/m+ihjOaZuuiDveaOkuW6jycsXG4gICA2MTFcdCAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgNjEyXHQgICAgICAgICAgfSk7XG4gICA2MTNcdCAgICAgICAgfSk7XG4gICA2MTRcdCAgICAgIH0sXG4gICA2MTVcdFxuICAgNjE2XHQgICAgICAvLyDph43nva7mkJzntKJcbiAgIDYxN1x0ICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICA2MThcdCAgICAgICAgdGhpcy5saXN0UXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KTtcbiAgIDYxOVx0ICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgIDYyMFx0ICAgICAgfSxcbiAgIDYyMVx0XG4gICA2MjJcdCAgICAgIC8vIOiOt+WPluaXpeacn+agh+etvijku4rlpKkv5piO5aSp562JKVxuICAgNjIzXHQgICAgICBnZXREYXRlVGFnKGRhdGVTdHIpIHtcbiAgIDYyNFx0ICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImI5ZmZkNWFjLThmNGMtNDM5YS1iZmIyLTIxNWEwNWNiYzMyOTt0b29sdV8wMVByYXdTTGZmeFRDcWVncnJ5dW5jMzkiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbjx0ZW1wbGF0ZT5cbiAgPGRpdiBjbGFzcz1cImFwcC1jb250YWluZXJcIj5cbiAgICA8ZWwtY2FyZCBjbGFzcz1cImZpbHRlci1jb250YWluZXJcIiBzaGFkb3c9XCJob3ZlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1oZWFkZXJcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXNlYXJjaFwiPjwvaT5cbiAgICAgICAgPHNwYW4+562b6YCJ5pCc57SiPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLWNvbnRlbnRcIj5cbiAgICAgICAgPGVsLWZvcm0gOmlubGluZT1cInRydWVcIiA6bW9kZWw9XCJsaXN0UXVlcnlcIiBzaXplPVwic21hbGxcIiBsYWJlbC13aWR0aD1cIjEyMHB4XCI+XG4gICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuWFs+mUruWtl++8mlwiPlxuICAgICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc2VhcmNoS2V5XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXlhbPplK7lrZdcIiBjbGVhcmFibGU+PC9lbC1pbnB1dD5cbiAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgICA8ZWwtZm9ybS1pdGVtIGxhYmVsPVwi5Lu75Yqh54q25oCB77yaXCI+XG4gICAgICAgICAgICA8ZWwtc2VsZWN0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc3RhdHVzXCIgcGxhY2Vob2xkZXI9XCLor7fpgInmi6nnirbmgIFcIiBjbGVhcmFibGU+XG4gICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiMVwiIGxhYmVsPVwi5b6F5YqeXCI+PC9lbC1vcHRpb24+XG4gICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiMlwiIGxhYmVsPVwi5bey5a6J5o6SXCI+PC9lbC1vcHRpb24+XG4gICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiM1wiIGxhYmVsPVwi6L+b6KGM5LitXCI+PC9lbC1vcHRpb24+XG4gICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiNFwiIGxhYmVsPVwi5bey5a6M5oiQXCI+PC9lbC1vcHRpb24+XG4gICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiNVwiIGxhYmVsPVwi5bey6YC+5pyfXCI+PC9lbC1vcHRpb24+XG4gICAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgICAgICAgICA8L2VsLWZvcm0taXRlbT5cbiAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1zZWFyY2hcIlxuICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlU2VhcmNoTGlzdCgpXCJcbiAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAgICAgICBjbGFzcz1cInNlYXJjaC1idG5cIj5cbiAgICAgICAgICAgIOafpeivouaQnOe0olxuICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgICAgICAgIDxlbC1idXR0b25cbiAgICAgICAgICAgIGljb249XCJlbC1pY29uLXJlZnJlc2hcIlxuICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlUmVzZXRTZWFyY2goKVwiXG4gICAgICAgICAgICBzaXplPVwic21hbGxcIj5cbiAgICAgICAgICAgIOmHjee9rlxuICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgICAgICA8L2VsLWZvcm0+XG4gICAgICA8L2Rpdj5cbiAgICA8L2VsLWNhcmQ+XG4gICAgPGVsLWNhcmQgY2xhc3M9XCJvcGVyYXRlLWNvbnRhaW5lclwiIHNoYWRvdz1cImhvdmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1oZWFkZXJcIj5cbiAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLWRhdGVcIj48L2k+XG4gICAgICAgIDxzcGFuPuaXpeeoi+WuieaOkjwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cIm9wZXJhdGUtYWN0aW9uc1wiPlxuICAgICAgICA8ZWwtYnV0dG9uIHNpemU9XCJzbWFsbFwiIGNsYXNzPVwiYnRuLWFkZFwiIEBjbGljaz1cImhhbmRsZUFkZCgpXCIgdHlwZT1cInByaW1hcnlcIj5cbiAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tcGx1c1wiPjwvaT7liJvlu7rml6XnqItcbiAgICAgICAgPC9lbC1idXR0b24+XG4gICAgICAgIDxlbC1idXR0b24gc2l6ZT1cInNtYWxsXCIgY2xhc3M9XCJidG4tc29ydFwiIEBjbGljaz1cImhhbmRsZVNtYXJ0U29ydCgpXCIgdHlwZT1cInN1Y2Nlc3NcIj5cbiAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc29ydFwiPjwvaT7mmbrog73mjpLluo9cbiAgICAgICAgPC9lbC1idXR0b24+XG4gICAgICA8L2Rpdj5cbiAgICA8L2VsLWNhcmQ+XG5cbiAgICA8IS0tIOS8mOmbheeahOaXpeeoi+aXtumXtOi9tCAtLT5cbiAgICA8ZWwtY2FyZCBzaGFkb3c9XCJob3ZlclwiIGNsYXNzPVwic2NoZWR1bGVyLWNvbnRhaW5lclwiIHYtbG9hZGluZz1cImxpc3RMb2FkaW5nXCI+XG4gICAgICA8ZGl2IHYtaWY9XCJPYmplY3Qua2V5cyhncm91cGVkU2NoZWR1bGVzKS5sZW5ndGggPT09IDBcIiBjbGFzcz1cImVtcHR5LXN0YXRlXCI+XG4gICAgICAgIDxlbC1lbXB0eSBkZXNjcmlwdGlvbj1cIuaaguaXoOaXpeeoi+aVsOaNrlwiPlxuICAgICAgICAgIDxlbC1idXR0b24gdHlwZT1cInByaW1hcnlcIiBAY2xpY2s9XCJoYW5kbGVBZGRcIiBzaXplPVwic21hbGxcIiBzbG90PVwiZGVzY3JpcHRpb25cIj7nq4vljbPliJvlu7o8L2VsLWJ1dHRvbj5cbiAgICAgICAgPC9lbC1lbXB0eT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiB2LWVsc2UgY2xhc3M9XCJzY2hlZHVsZXItd3JhcHBlclwiPlxuICAgICAgICA8ZGl2IHYtZm9yPVwiKHNjaGVkdWxlcywgZGF0ZSkgaW4gZ3JvdXBlZFNjaGVkdWxlc1wiIDprZXk9XCJkYXRlXCIgY2xhc3M9XCJkYXktZ3JvdXBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LWhlYWRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1sZWZ0XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbnVtYmVyXCI+e3sgZ2V0RGF5TnVtYmVyKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktd2Vla2RheVwiPnt7IGdldERheVdlZWtkYXkoZGF0ZSkgfX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1kYXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLXRhZ1wiPnt7IGdldERhdGVUYWcoZGF0ZSkgfX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGUtZnVsbFwiPnt7IGZvcm1hdERheURhdGUoZGF0ZSkgfX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVsaW5lLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVsaW5lLXRyYWNrXCI+PC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgdi1mb3I9XCJzY2hlZHVsZSBpbiBzY2hlZHVsZXNcIiA6a2V5PVwic2NoZWR1bGUuaWRcIiBjbGFzcz1cInRpbWVsaW5lLWV2ZW50XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC10aW1lXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+e3sgZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpIH19PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1hcmtlclwiIDpzdHlsZT1cIntiYWNrZ3JvdW5kQ29sb3I6IGdldFRpbWVTbG90Q29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuZG90Q29sb3J9XCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC1jb25uZWN0b3JcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29ubmVjdG9yLWRvdFwiIDpjbGFzcz1cInsnY29uZmxpY3QtZG90Jzogc2NoZWR1bGUuaGFzQ29uZmxpY3R9XCIgOnN0eWxlPVwie2JhY2tncm91bmRDb2xvcjogZ2V0VGltZVNsb3RDb2xvcnMoZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpKS5kb3RDb2xvcn1cIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29ubmVjdG9yLWxpbmVcIj48L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4uLi5cblxuICAgIDxkaXYgY2xhc3M9XCJwYWdpbmF0aW9uLWNvbnRhaW5lclwiPlxuICAgICAgPGVsLXBhZ2luYXRpb25cbiAgICAgICAgYmFja2dyb3VuZFxuICAgICAgICBAc2l6ZS1jaGFuZ2U9XCJoYW5kbGVTaXplQ2hhbmdlXCJcbiAgICAgICAgQGN1cnJlbnQtY2hhbmdlPVwiaGFuZGxlQ3VycmVudENoYW5nZVwiXG4gICAgICAgIGxheW91dD1cInRvdGFsLCBzaXplcyxwcmV2LCBwYWdlciwgbmV4dCxqdW1wZXJcIlxuICAgICAgICA6Y3VycmVudC1wYWdlLnN5bmM9XCJsaXN0UXVlcnkucGFnZU51bVwiXG4gICAgICAgIDpwYWdlLXNpemU9XCJsaXN0UXVlcnkucGFnZVNpemVcIlxuICAgICAgICA6cGFnZS1zaXplcz1cIlsxMCwxNSwyMF1cIlxuICAgICAgICA6dG90YWw9XCJ0b3RhbFwiPlxuICAgICAgPC9lbC1wYWdpbmF0aW9uPlxuICAgIDwvZGl2PlxuLi4uXG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cIm5hbWVcIiBsYWJlbD1cIuWQjeensFwiIHdpZHRoPVwiMTUwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cImNvZGVcIiBsYWJlbD1cIue8lueggVwiIHdpZHRoPVwiMTUwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cInR5cGVcIiBsYWJlbD1cIuexu+Wei1wiIHdpZHRoPVwiMTAwXCI+XG4gICAgICAgICAgPHRlbXBsYXRlIHNsb3Qtc2NvcGU9XCJzY29wZVwiPlxuICAgICAgICAgICAge3sgc2NvcGUucm93LnR5cGUgPT09IDEgPyAn57G75Z6LQScgOiAn57G75Z6LQicgfX1cbiAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICA8L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwiZGVzY3JpcHRpb25cIiBsYWJlbD1cIuaPj+i/sFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgPC9lbC10YWJsZT5cbiAgICAgIDxzcGFuIHNsb3Q9XCJmb290ZXJcIiBjbGFzcz1cImRpYWxvZy1mb290ZXJcIj5cbiAgICAgICAgPGVsLWJ1dHRvbiBAY2xpY2s9XCJpbmZvRGlhbG9nVmlzaWJsZSA9IGZhbHNlXCI+5YWz6ZetPC9lbC1idXR0b24+XG4gICAgICA8L3NwYW4+XG4gICAgPC9lbC1kaWFsb2c+XG4uLi5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJlbWFpbFwiIGxhYmVsPVwi6YKu566xXCIgd2lkdGg9XCIyMDBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJwaG9uZVwiIGxhYmVsPVwi55S16K+dXCIgd2lkdGg9XCIxNTBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJhZGRyZXNzXCIgbGFiZWw9XCLlnLDlnYBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgPC9lbC10YWJsZT5cbiAgICAgICAgPGgzPuWGsueqgeaJgOmcgOi1hOa6kOWIl+ihqDwvaDM+XG4gICAgICAgIDxlbC10YWJsZSA6ZGF0YT1cIml0ZW0ucmVzb3VyY2VzTGlzdCB8fCBbXVwiIGJvcmRlcj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJpZFwiIGxhYmVsPVwiSURcIiB3aWR0aD1cIjgwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwibmFtZVwiIGxhYmVsPVwi5ZCN56ewXCIgd2lkdGg9XCIxNTBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJjb2RlXCIgbGFiZWw9XCLnvJbnoIFcIiB3aWR0aD1cIjE1MFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cInR5cGVcIiBsYWJlbD1cIuexu+Wei1wiIHdpZHRoPVwiMTAwXCI+XG4gICAgICAgICAgICA8dGVtcGxhdGUgc2xvdC1zY29wZT1cInNjb3BlXCI+XG4gICAgICAgICAgICAgIHt7IHNjb3BlLnJvdy50eXBlID09PSAxID8gJ+exu+Wei0EnIDogJ+exu+Wei0InIH19XG4gICAgICAgICAgICA8L3RlbXBsYXRlPlxuICAgICAgICAgIDwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cImRlc2NyaXB0aW9uXCIgbGFiZWw9XCLmj4/ov7BcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgPC9lbC10YWJsZT5cbiAgICAgIDwvZGl2PlxuLi4uXG4gICAgICA8L3NwYW4+XG4gICAgPC9lbC1kaWFsb2c+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT5cbjxzY3JpcHQ+XG4gIGltcG9ydCB7ZmV0Y2hTY2hlZHVsZUxpc3QsIGZldGNoU2NoZWR1bGVTbWFydFNvcnQsIGNyZWF0ZVNjaGVkdWxlLHVwZGF0ZVNjaGVkdWxlLGRlbGV0ZVNjaGVkdWxlLGZldGNoQWxsVGFza0xpc3QsZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzLGZldGNoVGFza0luZm8sZmV0Y2hDb25mbGljdFNjaGVkdWxlTGlzdCx1cGRhdGVUYXNrU3RhdHVzLHNldFRhc2tSZW1pbmRlcn0gZnJvbSAnQC9hcGkvYXBpJztcbiAgaW1wb3J0IEpzQmFyY29kZSBmcm9tICdqc2JhcmNvZGUnO1xuICBpbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnO1xuICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG5cbiAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgICBwYWdlTnVtOiAxLFxuICAgIHBhZ2VTaXplOiAxMCxcbiAgICBzZWFyY2hLZXk6IG51bGwsXG4gICAgc3RhdHVzOiBudWxsLFxuICAgIHR5cGU6IG51bGwsXG4gIH07XG4gIGNvbnN0IGRlZmF1bHRBZG1pbiA9IHtcbiAgICBpZDogbnVsbCxcbiAgICB0YXNrSWQ6IG51bGwsXG4gICAgc3RhcnRUaW1lOiBudWxsLFxuICAgIGVuZFRpbWU6IG51bGwsXG4gICAgcmVtaW5kZXJUaW1lOiBudWxsLFxuICB9O1xuICBleHBvcnQgZGVmYXVsdCB7XG4gICAgbmFtZTogJ2FkbWluTGlzdCcsXG4gICAgZGF0YSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxpc3RRdWVyeTogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSksXG4gICAgICAgIGxpc3Q6IG51bGwsXG4gICAgICAgIHRvdGFsOiBudWxsLFxuICAgICAgICBsaXN0TG9hZGluZzogZmFsc2UsXG4gICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBhZG1pbjogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEFkbWluKSxcbiAgICAgICAgaXNFZGl0OiBmYWxzZSxcbiAgICAgICAgYWRtaW5SdWxlczoge1xuICAgICAgICAgIHRhc2tJZDogW1xuICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeaXpeeoi+WuieaOkuS7u+WKoScsIHRyaWdnZXI6ICdjaGFuZ2UnIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHN0YXJ0VGltZTogW1xuICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeS7u+WKoeaJp+ihjOaXtumXtCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1cbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBiYXJjb2RlRGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIGN1cnJlbnRDb2RlOiAnJywgLy8g5b2T5YmN6YCJ5Lit55qE57yW56CBXG5cbiAgICAgICAgdGFza0xpc3Q6IFtdLFxuXG4gICAgICAgIC8vIOS7u+WKoeivpuaDheebuOWFs1xuICAgICAgICB0YXNrRGV0YWlsVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHRhc2tEZXRhaWw6IHt9LFxuICAgICAgICBjdXJyZW50U2NoZWR1bGVJZDogbnVsbCxcblxuICAgICAgICAvLyDnirbmgIHlj5jmm7Tnm7jlhbNcbiAgICAgICAgc3RhdHVzQ2hhbmdlVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHN0YXR1c0Zvcm06IHtcbiAgICAgICAgICBzdGF0dXM6IDFcbiAgICAgICAgfSxcblxuICAgICAgICAvLyDmj5DphpLml7bpl7Tnm7jlhbNcbiAgICAgICAgcmVtaW5kZXJEaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgcmVtaW5kZXJUaW1lOiAnJyxcblxuICAgICAgICAvLyDkv67mlLnml6XnqIvml7bpl7Tnm7jlhbNcbiAgICAgICAgc2NoZWR1bGVUaW1lRGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHNjaGVkdWxlVGltZUZvcm06IHtcbiAgICAgICAgICBzdGFydFRpbWU6ICcnLFxuICAgICAgICAgIGVuZFRpbWU6ICcnXG4gICAgICAgIH0sXG4uLi5cbiAgICBjb21wdXRlZDoge1xuICAgICAgLy8g5oyJ5pel5pyf5YiG57uE5pel56iL5a6J5o6SXG4gICAgICBncm91cGVkU2NoZWR1bGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMubGlzdCkgcmV0dXJuIHt9O1xuXG4gICAgICAgIC8vIOWIm+W7uuWfuuS6juaXpeacn+eahOWIhue7hFxuICAgICAgICBjb25zdCBncm91cHMgPSB7fTtcbiAgICAgICAgdGhpcy5saXN0LmZvckVhY2goc2NoZWR1bGUgPT4ge1xuICAgICAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLmdldERhdGVTdHIoc2NoZWR1bGUuc3RhcnRUaW1lKTtcbiAgICAgICAgICBpZiAoIWdyb3Vwc1tkYXRlXSkge1xuICAgICAgICAgICAgZ3JvdXBzW2RhdGVdID0gW107XG4gICAgICAgICAgfVxuICAgICAgICAgIGdyb3Vwc1tkYXRlXS5wdXNoKHNjaGVkdWxlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5oyJ5pel5pyf5o6S5bqPXG4gICAgICAgIGNvbnN0IHNvcnRlZERhdGVzID0gT2JqZWN0LmtleXMoZ3JvdXBzKS5zb3J0KCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHt9O1xuXG4gICAgICAgIHNvcnRlZERhdGVzLmZvckVhY2goZGF0ZSA9PiB7XG4gICAgICAgICAgLy8g5oyJ5byA5aeL5pe26Ze05o6S5bqP5q+P5LiA5aSp55qE5pel56iLXG4gICAgICAgICAgY29uc3Qgc29ydGVkID0gZ3JvdXBzW2RhdGVdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShhLnN0YXJ0VGltZSkgLSBuZXcgRGF0ZShiLnN0YXJ0VGltZSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmVzdWx0W2RhdGVdID0gc29ydGVkO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuICAgIH0sXG4gICAgZmlsdGVyczoge1xuICAgICAgZm9ybWF0RGF0ZVRpbWUodGltZSkge1xuICAgICAgICBpZiAodGltZSA9PSBudWxsIHx8IHRpbWUgPT09ICcnKSB7XG4gICAgICAgICAgcmV0dXJuICdOL0EnO1xuICAgICAgICB9XG4gICAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSk7XG4gICAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIGhoOm1tOnNzJylcbiAgICAgIH0sXG4gICAgICBmb3JtYXRTdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgIGlmIChzdGF0dXMgPT09IDEpIHtcbiAgICAgICAgICByZXR1cm4gJ+W+heWKnic7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSAyKSB7XG4gICAgICAgICAgcmV0dXJuICflt7LlronmjpInO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gMykge1xuICAgICAgICAgIHJldHVybiAn6L+b6KGM5LitJztcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDQpIHtcbiAgICAgICAgICByZXR1cm4gJ+W3suWujOaIkCc7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSA1KSB7XG4gICAgICAgICAgcmV0dXJuICflt7LpgL7mnJ8nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAn5pyq55+lJztcbiAgICAgIH1cbiAgICB9LFxuICAgIGNyZWF0ZWQoKSB7XG4gICAgICB0aGlzLmdldExpc3QoKTtcbiAgICB9LFxuICAgIG1ldGhvZHM6IHtcbiAgICAgIC8vIOS/ruaUue+8muWIpOaWreaXpeeoi+aYr+WQpuW3sui/h+e7k+adn+aXtumXtFxuICAgICAgaXNPdmVyZHVlKHNjaGVkdWxlKSB7XG4gICAgICAgIC8vIOWmguaenHN0YXR1c+W3sue7j+aYrzUo5bey6YC+5pyfKeWImeebtOaOpei/lOWbnnRydWVcbiAgICAgICAgaWYgKHNjaGVkdWxlLnN0YXR1cyA9PT0gNSkge1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIOajgOafpSBlbmRUaW1lIOaYr+WQpuWtmOWcqO+8jOaYr+WQpuaXqeS6juW9k+WJjeaXtumXtO+8jOW5tuS4lOS7u+WKoeeKtuaAgeS4jeaYr+W3suWujOaIkCAoNClcbiAgICAgICAgcmV0dXJuIHNjaGVkdWxlLmVuZFRpbWUgJiYgbmV3IERhdGUoc2NoZWR1bGUuZW5kVGltZSkgPCBuZXcgRGF0ZSgpICYmIHNjaGVkdWxlLnN0YXR1cyAhPT0gNDtcbiAgICAgIH0sXG5cbiAgICAgIC8vIOaZuuiDveaOkuW6j+aWueazlVxuICAgICAgaGFuZGxlU21hcnRTb3J0KCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgZmV0Y2hTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgIG1lc3NhZ2U6ICflt7LmoLnmja7ml7bpl7TntKfmgKXmgKflkozku7vliqHph43opoHmgKfov5vooYzmmbrog73mjpLluo8nLFxuICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgLy8g6YeN572u5pCc57SiXG4gICAgICBoYW5kbGVSZXNldFNlYXJjaCgpIHtcbiAgICAgICAgdGhpcy5saXN0UXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KTtcbiAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgICB9LFxuXG4gICAgICAvLyDojrflj5bml6XmnJ/moIfnrb4o5LuK5aSpL+aYjuWkqeetiSlcbiAgICAgIGdldERhdGVUYWcoZGF0ZVN0cikge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICAgICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICAgICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAgICAgY29uc3QgdG9tb3Jyb3cgPSBuZXcgRGF0ZSh0b2RheSk7XG4gICAgICAgIHRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG5cbiAgICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbmV3IERhdGUodG9kYXkpO1xuICAgICAgICB5ZXN0ZXJkYXkuc2V0RGF0ZSh5ZXN0ZXJkYXkuZ2V0RGF0ZSgpIC0gMSk7XG5cbiAgICAgICAgaWYgKGRhdGUuZ2V0VGltZSgpID09PSB0b2RheS5nZXRUaW1lKCkpIHtcbiAgICAgICAgICByZXR1cm4gJ+S7iuWkqSc7XG4gICAgICAgIH0gZWxzZSBpZiAoZGF0ZS5nZXRUaW1lKCkgPT09IHRvbW9ycm93LmdldFRpbWUoKSkge1xuICAgICAgICAgIHJldHVybiAn5piO5aSpJztcbiAgICAgICAgfSBlbHNlIGlmIChkYXRlLmdldFRpbWUoKSA9PT0geWVzdGVyZGF5LmdldFRpbWUoKSkge1xuICAgICAgICAgIHJldHVybiAn5pio5aSpJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyDov5Tlm57mmJ/mnJ/lh6BcbiAgICAgICAgICBjb25zdCB3ZWVrZGF5cyA9IFsn5ZGo5pelJywgJ+WRqOS4gCcsICflkajkuownLCAn5ZGo5LiJJywgJ+WRqOWbmycsICflkajkupQnLCAn5ZGo5YWtJ107XG4gICAgICAgICAgcmV0dXJuIHdlZWtkYXlzW2RhdGUuZ2V0RGF5KCldO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgLy8g5qC85byP5YyW5pel5pyf5Li6WVlZWS1NTS1EROagvOW8j1xuICAgICAgZ2V0RGF0ZVN0cihkYXRlU3RyKSB7XG4gICAgICAgIHJldHVybiBkYXRlU3RyLnNwbGl0KCcgJylbMF07XG4gICAgICB9LFxuICAgICAgLy8g5qC85byP5YyW5bGV56S65pel5pyfXG4gICAgICBmb3JtYXREYXlEYXRlKGRhdGVTdHIpIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGRhdGVTdHIpO1xuICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlLCAneXl5eeW5tE1N5pyIZGTml6UnKTtcbiAgICAgIH0sXG4gICAgICAvLyDmoLzlvI/ljJbml7bpl7TkuLpISDpNTeagvOW8j1xuICAgICAgZm9ybWF0VGltZShkYXRlVGltZVN0cikge1xuICAgICAgICBpZiAoIWRhdGVUaW1lU3RyKSByZXR1cm4gJyc7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gZGF0ZVRpbWVTdHIuc3BsaXQoJyAnKTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA8IDIgfHwgIXBhcnRzWzFdKSByZXR1cm4gJyc7XG4gICAgICAgIHJldHVybiBwYXJ0c1sxXS5zdWJzdHJpbmcoMCwgNSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0VGFza0xpc3QocGFyYW1zKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbGxUYXNrTGlzdEJ5U3RhdHVzKHBhcmFtcylcbiAgICAgICAgdGhpcy50YXNrTGlzdCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICB9LFxuICAgICAgYXN5bmMgZ2V0QWxsVGFza0xpc3QoKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hBbGxUYXNrTGlzdCgpXG4gICAgICAgIHRoaXMudGFza0xpc3QgPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGdldFRhc2tJbmZvKGlkKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hUYXNrSW5mbyhpZCk7XG4gICAgICAgIHRoaXMudGFza0luZm8gPSByZXNwb25zZS5kYXRhO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHZpZXdCYXJjb2RlKHJvdykge1xuICAgICAgICB0aGlzLmN1cnJlbnRDb2RlID0gcm93LnRhc2tDb2RlO1xuICAgICAgICBhd2FpdCB0aGlzLmdldFRhc2tJbmZvKHJvdy50YXNrSWQpO1xuICAgICAgICB0aGlzLmJhcmNvZGVEaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgIH0sXG4uLi5cbiAgICAgIGV4cG9ydEJhcmNvZGUoKSB7XG4gICAgICAgIGNvbnN0IGJhcmNvZGVFbGVtZW50ID0gdGhpcy4kcmVmcy5iYXJjb2RlUHJldmlldztcblxuICAgICAgICBpZiAoIWJhcmNvZGVFbGVtZW50KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign5p2h56CB5YWD57Sg5pyq5om+5YiwJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ+aNleiOt+adoeeggeWFg+e0oDonLCBiYXJjb2RlRWxlbWVudCk7XG5cbiAgICAgICAgaHRtbDJjYW52YXMoYmFyY29kZUVsZW1lbnQpLnRoZW4oKGNhbnZhcykgPT4ge1xuICAgICAgICAgIGlmICghY2FudmFzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfmnKrog73nlJ/miJAgY2FudmFzJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICBsaW5rLmhyZWYgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS9wbmcnKTtcbiAgICAgICAgICBsaW5rLmRvd25sb2FkID0gYCR7dGhpcy5jdXJyZW50Q29kZX0ucG5nYDtcbiAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2h0bWwyY2FudmFzIOmUmeivrzonLCBlcnJvcik7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZVJlc2V0U2VhcmNoKCkge1xuICAgICAgICAgIHRoaXMubGlzdFF1ZXJ5ID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSk7XG4gICAgICAgICAgdGhpcy5nZXRMaXN0KClcbiAgICAgICAgfSxcbiAgICAgIGhhbmRsZVNlYXJjaExpc3QoKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSAxO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtID0gMTtcbiAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZVNpemUgPSB2YWw7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7XG4gICAgICAgIHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0gPSB2YWw7XG4gICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIGhhbmRsZUFkZCgpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRUYXNrTGlzdCh7c3RhdHVzOjF9KTtcbiAgICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZG1pbiA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZG1pbik7XG4gICAgICB9LFxuICAgICAgaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHtcbiAgICAgICAgdGhpcy4kY29uZmlybSgn5piv5ZCm6KaB5Yig6Zmk6K+l5pel56iL5a6J5o6SP+WIoOmZpOWQjuWwhuaXoOazleaSpOmUgCcsICfmj5DnpLonLCB7XG4gICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLFxuICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLFxuICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJ1xuICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICBkZWxldGVTY2hlZHVsZShyb3cuaWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBoYW5kbGVVcGRhdGUoaW5kZXgsIHJvdykge1xuICAgICAgICBhd2FpdCB0aGlzLmdldEFsbFRhc2tMaXN0KCk7XG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNFZGl0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5hZG1pbiA9IE9iamVjdC5hc3NpZ24oe30scm93KTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVEaWFsb2dDb25maXJtKCkge1xuICAgICAgICB0aGlzLiRyZWZzLmFkbWluRm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7XG4gICAgICAgICAgaWYgKHZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLiRjb25maXJtKCfmmK/lkKbopoHnoa7orqQ/JywgJ+aPkOekuicsIHtcbiAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLFxuICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJyxcbiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnXG4gICAgICAgICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFZGl0KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlU2NoZWR1bGUodGhpcy5hZG1pbikudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+S/ruaUueaIkOWKn++8gScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlU2NoZWR1bGUodGhpcy5hZG1pbikudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ+WIm+W7uuaIkOWKn++8gScsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBnZXRMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgIHBhZ2VOdW06IHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0sXG4gICAgICAgICAgcGFnZVNpemU6IHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleSkge1xuICAgICAgICAgIHBhcmFtcy5zZWFyY2hLZXkgPSB0aGlzLmxpc3RRdWVyeS5zZWFyY2hLZXk7XG4gICAgICAgIH1cblxuICAgICAgICBmZXRjaFNjaGVkdWxlTGlzdChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbi4uLlxuICAgICAgLy8g6I635Y+W5pel5pyf5Lit55qE5aSp5pWwXG4gICAgICBnZXREYXlOdW1iZXIoZGF0ZVN0cikge1xuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoZGF0ZVN0cik7XG4gICAgICAgIHJldHVybiBkYXRlLmdldERhdGUoKTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIOiOt+WPluaXpeacn+eahOaYn+acn+ihqOekulxuICAgICAgZ2V0RGF5V2Vla2RheShkYXRlU3RyKSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTtcbiAgICAgICAgY29uc3Qgd2Vla2RheXMgPSBbJ+WRqOaXpScsICflkajkuIAnLCAn5ZGo5LqMJywgJ+WRqOS4iScsICflkajlm5snLCAn5ZGo5LqUJywgJ+WRqOWFrSddO1xuICAgICAgICByZXR1cm4gd2Vla2RheXNbZGF0ZS5nZXREYXkoKV07XG4gICAgICB9LFxuXG4gICAgICAvLyDmn6XnnIvku7vliqHor6bmg4VcbiAgICAgIGhhbmRsZUNsaWNrVGFza0NhcmQoc2NoZWR1bGUpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U2NoZWR1bGVJZCA9IHNjaGVkdWxlLmlkO1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgZmV0Y2hUYXNrSW5mbyhzY2hlZHVsZS50YXNrSWQpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMudGFza0RldGFpbCA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgdGhpcy50YXNrRGV0YWlsVmlzaWJsZSA9IHRydWU7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG5cbiAgICAgIC8vIOaYvuekuueKtuaAgeWPmOabtOWvueivneahhlxuICAgICAgc2hvd1N0YXR1c0NoYW5nZURpYWxvZygpIHtcbiAgICAgICAgdGhpcy5zdGF0dXNGb3JtLnN0YXR1cyA9IHRoaXMudGFza0RldGFpbC5zdGF0dXM7XG4gICAgICAgIHRoaXMuc3RhdHVzQ2hhbmdlVmlzaWJsZSA9IHRydWU7XG4gICAgICB9LFxuXG4gICAgICAvLyDojrflj5bnirbmgIHmoIfnrb7nsbvlnotcbiAgICAgIGdldFN0YXR1c1RhZ1R5cGUoc3RhdHVzKSB7XG4gICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XG4gICAgICAgICAgY2FzZSAxOiByZXR1cm4gJ2luZm8nOyAgICAvLyDlvoXlip5cbiAgICAgICAgICBjYXNlIDI6IHJldHVybiAnd2FybmluZyc7IC8vIOW3suWuieaOklxuICAgICAgICAgIGNhc2UgMzogcmV0dXJuICdwcmltYXJ5JzsgLy8g6L+b6KGM5LitXG4gICAgICAgICAgY2FzZSA0OiByZXR1cm4gJ3N1Y2Nlc3MnOyAvLyDlt7LlrozmiJBcbiAgICAgICAgICBjYXNlIDU6IHJldHVybiAnZGFuZ2VyJzsgIC8vIOW3sumAvuacn1xuICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnaW5mbyc7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIC8vIOWkhOeQhueKtuaAgeWPmOabtFxuICAgICAgaGFuZGxlU3RhdHVzQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgdXBkYXRlVGFza1N0YXR1cyh0aGlzLnRhc2tEZXRhaWwuaWQsIHRoaXMuc3RhdHVzRm9ybS5zdGF0dXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICAgIHRoaXMuc3RhdHVzQ2hhbmdlVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMudGFza0RldGFpbC5zdGF0dXMgPSB0aGlzLnN0YXR1c0Zvcm0uc3RhdHVzO1xuICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn54q25oCB5pu05paw5oiQ5YqfJyk7XG4gICAgICAgICAgdGhpcy5nZXRMaXN0KCk7IC8vIOWIt+aWsOWIl+ihqFxuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICAvLyDmmL7npLrmj5DphpLorr7nva7lr7nor53moYZcbiAgICAgIHNob3dSZW1pbmRlckRpYWxvZygpIHtcbiAgICAgICAgdGhpcy5yZW1pbmRlclRpbWUgPSB0aGlzLnRhc2tEZXRhaWwucmVtaW5kZXJUaW1lO1xuICAgICAgICB0aGlzLnJlbWluZGVyRGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICB9LFxuLi4uXG5cbiAgICAgIC8vIOabtOaWsOaXpeeoi+aXtumXtFxuICAgICAgaGFuZGxlU2NoZWR1bGVUaW1lVXBkYXRlKCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgY29uc3Qgc2NoZWR1bGVEYXRhID0ge1xuICAgICAgICAgIGlkOiB0aGlzLmN1cnJlbnRTY2hlZHVsZUlkLFxuICAgICAgICAgIHN0YXJ0VGltZTogdGhpcy5zY2hlZHVsZVRpbWVGb3JtLnN0YXJ0VGltZSxcbiAgICAgICAgICBlbmRUaW1lOiB0aGlzLnNjaGVkdWxlVGltZUZvcm0uZW5kVGltZVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIOiwg+eUqOato+ehrueahOabtOaWsOaXpeeoiyBBUEkg5pa55rOVXG4gICAgICAgIHVwZGF0ZVNjaGVkdWxlKHNjaGVkdWxlRGF0YSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmiafooYzml7bpl7Tmm7TmlrDmiJDlip8nKTtcbiAgICAgICAgICB0aGlzLnNjaGVkdWxlVGltZURpYWxvZ1Zpc2libGUgPSBmYWxzZTsgLy8g5YWz6Zet5a+56K+d5qGGXG4gICAgICAgICAgdGhpcy5nZXRMaXN0KCk7IC8vIOWIt+aWsOWIl+ihqFxuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+abtOaWsOaJp+ihjOaXtumXtOWksei0pTonLCBlcnJvcik7XG4gICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5omn6KGM5pe26Ze05pu05paw5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJyk7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfVxuICB9XG48L3NjcmlwdD5cbjxzdHlsZT5cbi8qIOmAmueUqOagt+W8jyAqL1xuLmFwcC1jb250YWluZXIge1xuICBwYWRkaW5nOiAyMHB4O1xufVxuXG4uYXZhdGFyLXVwbG9hZGVyIC5lbC11cGxvYWQge1xuICBib3JkZXI6IDFweCBkYXNoZWQgI2Q5ZDlkOTtcbiAgYm9yZGVyLXJhZGl1czogNnB4O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbn1cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXG4uLi5cbiAgICBtZXRob2RzOiB7XG4gICAgICAvLyDojrflj5bml6XnqIvpobnnmoTnirbmgIHmoIfnrb7nsbvlnotcbiAgICAgIGdldFN0YXR1c1RhZ1R5cGUoc3RhdHVzKSB7XG4gICAgICAgIHN3aXRjaChzdGF0dXMpIHtcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiAnaW5mbyc7ICAgIC8vIOW+heWKnlxuICAgICAgICAgIGNhc2UgMjogcmV0dXJuICd3YXJuaW5nJzsgLy8g5bey5a6J5o6SXG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gJ3N1Y2Nlc3MnOyAvLyDov5vooYzkuK1cbiAgICAgICAgICBjYXNlIDQ6IHJldHVybiAnJzsgICAgICAgIC8vIOW3suWujOaIkFxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuICdkYW5nZXInOyAgLy8g5bey6YC+5pyfXG4gICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdpbmZvJztcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIFxuICAgICAgLy8g5pm66IO95o6S5bqP5pa55rOVXG4gICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN5bm05pyI77yM5qC85byP5Li6WVlZWS1NTVxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCB5ZWFyTW9udGggPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgICAgIFxuICAgICAgICAvLyDkvb/nlKjmmbrog73mjpLluo/mjqXlj6Pojrflj5bmjpLluo/lkI7nmoTnlKjmiLfml6XnqItcbiAgICAgICAgZmV0Y2hVc2VyU2NoZWR1bGVTbWFydFNvcnQodGhpcy5saXN0UXVlcnkpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDlsIbmmbrog73mjpLluo/lkI7nmoTmlbDmja7orr7nva7kuLrlvZPliY3liJfooahcbiAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4uLi5cbiAgICAgIGdldExpc3QoKSB7XG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgICAgICBcbiAgICAgICAgLy8g6I635Y+W5b2T5YmN5bm05pyI77yM5qC85byP5Li6WVlZWS1NTVxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgICAgICBjb25zdCB5ZWFyTW9udGggPSBgJHtub3cuZ2V0RnVsbFllYXIoKX0tJHtTdHJpbmcobm93LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpfWA7XG4gICAgICAgIFxuICAgICAgICAvLyDkvb/nlKjmnIjluqbmjqXlj6Pojrflj5bnlKjmiLfml6XnqItcbiAgICAgICAgZmV0Y2hVc2VyTW9udGhTY2hlZHVsZUxpc3QoeWVhck1vbnRoKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8g5bCG5oyJ5pel5pyf5YiG57uE55qE5pWw5o2u6L2s5o2i5Li65YiX6KGo5b2i5byPXG4gICAgICAgICAgY29uc3QgZ3JvdXBlZERhdGEgPSByZXNwb25zZS5kYXRhO1xuICAgICAgICAgIGxldCBhbGxTY2hlZHVsZXMgPSBbXTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyDpgY3ljobmr4/kuKrml6XmnJ/nmoTml6XnqIvliJfooajvvIzlkIjlubbliLDkuIDkuKrlpKfliJfooajkuK1cbiAgICAgICAgICBPYmplY3QudmFsdWVzKGdyb3VwZWREYXRhKS5mb3JFYWNoKHNjaGVkdWxlcyA9PiB7XG4gICAgICAgICAgICBhbGxTY2hlZHVsZXMgPSBhbGxTY2hlZHVsZXMuY29uY2F0KHNjaGVkdWxlcyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgdGhpcy5saXN0ID0gYWxsU2NoZWR1bGVzO1xuICAgICAgICAgIHRoaXMudG90YWwgPSBhbGxTY2hlZHVsZXMubGVuZ3RoO1xuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5pel56iL5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5pel56iL5pWw5o2u5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9XG4gIH1cbjwvc2NyaXB0PlxuPHN0eWxlPlxuLyog5Z+656GA5qC35byPICovXG4uYXBwLWNvbnRhaW5lciB7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGNUY3RkE7XG59XG4uLi5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImM2ZjA0NTA4LWI1YTItNDA3MS05NmIwLTMyNGE4OTQ3YjFkNDt0b29sdV8wMVdxekJKUktnbWdEWWFHVzl5c2FKaWkiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNzkyXHQgICAgICAgICAgICB9KVxuICAgNzkzXHQgICAgICAgICAgfVxuICAgNzk0XHQgICAgICAgIH0pO1xuICAgNzk1XHQgICAgICB9LFxuICAgNzk2XHQgICAgICBnZXRMaXN0KCkge1xuICAgNzk3XHQgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuICAgNzk4XHQgICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgIDc5OVx0ICAgICAgICAgIHBhZ2VOdW06IHRoaXMubGlzdFF1ZXJ5LnBhZ2VOdW0sXG4gICA4MDBcdCAgICAgICAgICBwYWdlU2l6ZTogdGhpcy5saXN0UXVlcnkucGFnZVNpemVcbiAgIDgwMVx0ICAgICAgICB9O1xuICAgODAyXHRcbiAgIDgwM1x0ICAgICAgICBpZiAodGhpcy5saXN0UXVlcnkuc2VhcmNoS2V5KSB7XG4gICA4MDRcdCAgICAgICAgICBwYXJhbXMuc2VhcmNoS2V5ID0gdGhpcy5saXN0UXVlcnkuc2VhcmNoS2V5O1xuICAgODA1XHQgICAgICAgIH1cbiAgIDgwNlx0XG4gICA4MDdcdCAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnN0YXR1cyAhPT0gbnVsbCAmJiB0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IHVuZGVmaW5lZCkge1xuICAgODA4XHQgICAgICAgICAgcGFyYW1zLnN0YXR1cyA9IHRoaXMubGlzdFF1ZXJ5LnN0YXR1cztcbiAgIDgwOVx0ICAgICAgICB9XG4gICA4MTBcdFxuICAgODExXHQgICAgICAgIC8vIOS9v+eUqOaZuuiDveaOkuW6j+aOpeWPo+iOt+WPluaXpeeoi+WIl+ihqO+8jOaUr+aMgeeKtuaAgei/h+a7pFxuICAgODEyXHQgICAgICAgIGZldGNoU2NoZWR1bGVTbWFydFNvcnQocGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgIDgxM1x0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDgxNFx0ICAgICAgICAgIHRoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdDtcbiAgIDgxNVx0ICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuICAgODE2XHQgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgIDgxN1x0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPluaXpeeoi+aVsOaNruWksei0pTonLCBlcnJvcik7XG4gICA4MThcdCAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA4MTlcdCAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfojrflj5bml6XnqIvmlbDmja7lpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTtcbiAgIDgyMFx0ICAgICAgICB9KTtcbiAgIDgyMVx0ICAgICAgfSxcbiAgIDgyMlx0ICAgICAgLy8g6I635Y+W5pel56iL6aG555qE6aKc6ImyIC0g5L2/55So5pu057K+57uG55qE5pe26Ze05q615YiS5YiGXG4gICA4MjNcdCAgICAgIGdldFRpbWVTbG90Q29sb3JzKHRpbWVTdHIpIHtcbiAgIDgyNFx0ICAgICAgICBpZiAoIXRpbWVTdHIpIHJldHVybiB0aGlzLnRpbWVDb2xvcnMubW9ybmluZztcbiAgIDgyNVx0XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImE3NTY1NGJjLTJiNmMtNGRkZC04ZWMwLTQ2YmYwNmM5M2JjMDt0b29sdV8wMTFBNjU1cGRvbjE0UWhaa2RCVjdOOUEiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL3ZpZXdzL3NjaGVkdWxlL2luZGV4LnZ1ZS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgNTk4XHQgICAgICAgIC8vIOajgOafpSBlbmRUaW1lIOaYr+WQpuWtmOWcqO+8jOaYr+WQpuaXqeS6juW9k+WJjeaXtumXtO+8jOW5tuS4lOS7u+WKoeeKtuaAgeS4jeaYr+W3suWujOaIkCAoNClcbiAgIDU5OVx0ICAgICAgICByZXR1cm4gc2NoZWR1bGUuZW5kVGltZSAmJiBuZXcgRGF0ZShzY2hlZHVsZS5lbmRUaW1lKSA8IG5ldyBEYXRlKCkgJiYgc2NoZWR1bGUuc3RhdHVzICE9PSA0O1xuICAgNjAwXHQgICAgICB9LFxuICAgNjAxXHRcbiAgIDYwMlx0ICAgICAgLy8g5pm66IO95o6S5bqP5pa55rOVXG4gICA2MDNcdCAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcbiAgIDYwNFx0ICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgIDYwNVx0ICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICA2MDZcdCAgICAgICAgICBwYWdlTnVtOiB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtLFxuICAgNjA3XHQgICAgICAgICAgcGFnZVNpemU6IHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplXG4gICA2MDhcdCAgICAgICAgfTtcbiAgIDYwOVx0XG4gICA2MTBcdCAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleSkge1xuICAgNjExXHQgICAgICAgICAgcGFyYW1zLnNlYXJjaEtleSA9IHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleTtcbiAgIDYxMlx0ICAgICAgICB9XG4gICA2MTNcdFxuICAgNjE0XHQgICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IG51bGwgJiYgdGhpcy5saXN0UXVlcnkuc3RhdHVzICE9PSB1bmRlZmluZWQpIHtcbiAgIDYxNVx0ICAgICAgICAgIHBhcmFtcy5zdGF0dXMgPSB0aGlzLmxpc3RRdWVyeS5zdGF0dXM7XG4gICA2MTZcdCAgICAgICAgfVxuICAgNjE3XHRcbiAgIDYxOFx0ICAgICAgICBmZXRjaFNjaGVkdWxlU21hcnRTb3J0KHBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7XG4gICA2MTlcdCAgICAgICAgICB0aGlzLmxpc3QgPSByZXNwb25zZS5kYXRhLmxpc3Q7XG4gICA2MjBcdCAgICAgICAgICB0aGlzLnRvdGFsID0gcmVzcG9uc2UuZGF0YS50b3RhbDtcbiAgIDYyMVx0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDYyMlx0ICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgNjIzXHQgICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgIDYyNFx0ICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnXG4gICA2MjVcdCAgICAgICAgICB9KTtcbiAgIDYyNlx0ICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICA2MjdcdCAgICAgICAgICBjb25zb2xlLmVycm9yKCfmmbrog73mjpLluo/lpLHotKU6JywgZXJyb3IpO1xuICAgNjI4XHQgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgNjI5XHQgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5pm66IO95o6S5bqP5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJyk7XG4gICA2MzBcdCAgICAgICAgfSk7XG4gICA2MzFcdCAgICAgIH0sXG4gICA2MzJcdFxuICAgNjMzXHQgICAgICAvLyDph43nva7mkJzntKJcbiAgIDYzNFx0ICAgICAgaGFuZGxlUmVzZXRTZWFyY2goKSB7XG4gICA2MzVcdCAgICAgICAgdGhpcy5saXN0UXVlcnkgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0TGlzdFF1ZXJ5KTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiZjE4Y2NjODAtZDljZS00OTNiLTk3YmItYzJlYzM1MmNkNjVhO3Rvb2x1XzAxS0pKSHlFcFRIRHVTSnZqQWs2QVdMcCI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHdlYi9zcmMvdmlld3MvdXNlclNjaGVkdWxlL2luZGV4LnZ1ZTpcbiAgICAgMVx0PHRlbXBsYXRlPiBcbiAgICAgMlx0ICA8ZGl2IGNsYXNzPVwiYXBwLWNvbnRhaW5lclwiPlxuICAgICAzXHQgICAgPGVsLWNhcmQgY2xhc3M9XCJmaWx0ZXItY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICAgNFx0ICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1oZWFkZXJcIj5cbiAgICAgNVx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tc2VhcmNoXCI+PC9pPlxuICAgICA2XHQgICAgICAgIDxzcGFuPuetm+mAieaQnOe0ojwvc3Bhbj5cbiAgICAgN1x0ICAgICAgPC9kaXY+XG4gICAgIDhcdCAgICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItY29udGVudFwiPlxuICAgICA5XHQgICAgICAgIDxlbC1mb3JtIDppbmxpbmU9XCJ0cnVlXCIgOm1vZGVsPVwibGlzdFF1ZXJ5XCIgc2l6ZT1cInNtYWxsXCIgbGFiZWwtd2lkdGg9XCIxMjBweFwiPlxuICAgIDEwXHQgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuWFs+mUruWtl++8mlwiPlxuICAgIDExXHQgICAgICAgICAgICA8ZWwtaW5wdXQgdi1tb2RlbD1cImxpc3RRdWVyeS5zZWFyY2hLZXlcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeWFs+mUruWtl1wiIGNsZWFyYWJsZT48L2VsLWlucHV0PlxuICAgIDEyXHQgICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgMTNcdCAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgMTRcdCAgICAgICAgICAgIHR5cGU9XCJwcmltYXJ5XCJcbiAgICAxNVx0ICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAxNlx0ICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlU2VhcmNoTGlzdCgpXCJcbiAgICAxN1x0ICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAxOFx0ICAgICAgICAgICAgY2xhc3M9XCJzZWFyY2gtYnRuXCI+XG4gICAgMTlcdCAgICAgICAgICAgIOafpeivouaQnOe0olxuICAgIDIwXHQgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMjFcdCAgICAgICAgPC9lbC1mb3JtPlxuICAgIDIyXHQgICAgICA8L2Rpdj5cbiAgICAyM1x0ICAgIDwvZWwtY2FyZD5cbiAgICAyNFx0ICAgIDxlbC1jYXJkIGNsYXNzPVwib3BlcmF0ZS1jb250YWluZXJcIiBzaGFkb3c9XCJob3ZlclwiPlxuICAgIDI1XHQgICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1oZWFkZXJcIj5cbiAgICAyNlx0ICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tZGF0ZVwiPjwvaT5cbiAgICAyN1x0ICAgICAgICA8c3Bhbj7miJHnmoTml6XnqIvlronmjpI8L3NwYW4+XG4gICAgMjhcdCAgICAgIDwvZGl2PlxuICAgIDI5XHQgICAgICA8ZGl2IGNsYXNzPVwib3BlcmF0ZS1hY3Rpb25zXCI+XG4gICAgMzBcdCAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVwic21hbGxcIiBjbGFzcz1cImJ0bi1zb3J0XCIgQGNsaWNrPVwiaGFuZGxlU21hcnRTb3J0KClcIiB0eXBlPVwic3VjY2Vzc1wiPlxuICAgIDMxXHQgICAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXNvcnRcIj48L2k+5pm66IO95o6S5bqPXG4gICAgMzJcdCAgICAgICAgPC9lbC1idXR0b24+XG4gICAgMzNcdCAgICAgIDwvZGl2PlxuICAgIDM0XHQgICAgPC9lbC1jYXJkPlxuICAgIDM1XHQgICAgXG4gICAgMzZcdCAgICA8IS0tIOaXpeeoi+aXtumXtOi9tCAtLT5cbiAgICAzN1x0ICAgIDxlbC1jYXJkIHNoYWRvdz1cImhvdmVyXCIgY2xhc3M9XCJzY2hlZHVsZXItY29udGFpbmVyXCIgdi1sb2FkaW5nPVwibGlzdExvYWRpbmdcIj5cbiAgICAzOFx0ICAgICAgPGRpdiB2LWlmPVwiT2JqZWN0LmtleXMoZ3JvdXBlZFNjaGVkdWxlcykubGVuZ3RoID09PSAwXCIgY2xhc3M9XCJlbXB0eS1zdGF0ZVwiPlxuICAgIDM5XHQgICAgICAgIDxlbC1lbXB0eSBkZXNjcmlwdGlvbj1cIuaaguaXoOaXpeeoi+aVsOaNrlwiPjwvZWwtZW1wdHk+XG4gICAgNDBcdCAgICAgIDwvZGl2PlxuICAgIDQxXHQgICAgICA8ZGl2IHYtZWxzZSBjbGFzcz1cInNjaGVkdWxlci13cmFwcGVyXCI+XG4gICAgNDJcdCAgICAgICAgPGRpdiB2LWZvcj1cIihzY2hlZHVsZXMsIGRhdGUpIGluIGdyb3VwZWRTY2hlZHVsZXNcIiA6a2V5PVwiZGF0ZVwiIGNsYXNzPVwiZGF5LWdyb3VwXCI+XG4gICAgNDNcdCAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LWhlYWRlclwiPlxuICAgIDQ0XHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LWxlZnRcIj5cbiAgICA0NVx0ICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LW51bWJlclwiPnt7IGdldERheU51bWJlcihkYXRlKSB9fTwvZGl2PlxuICAgIDQ2XHQgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktd2Vla2RheVwiPnt7IGdldERheVdlZWtkYXkoZGF0ZSkgfX08L2Rpdj5cbiAgICA0N1x0ICAgICAgICAgICAgPC9kaXY+XG4gICAgNDhcdCAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktZGF0ZVwiPlxuICAgIDQ5XHQgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLXRhZ1wiPnt7IGdldERhdGVUYWcoZGF0ZSkgfX08L2Rpdj5cbiAgICA1MFx0ICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS1mdWxsXCI+e3sgZm9ybWF0RGF5RGF0ZShkYXRlKSB9fTwvZGl2PlxuVG90YWwgbGluZXMgaW4gZmlsZTogOTg1XG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI0MWQ5ODNkNC05NzFkLTRiYTAtYmM0NS1jYWE2NmJiMzVlMzI7dG9vbHVfMDFSbjN4MVZMY0FZVmg4U3VaOGoyOXJuIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDVcdCAgICAgICAgPGkgY2xhc3M9XCJlbC1pY29uLXNlYXJjaFwiPjwvaT5cbiAgICAgNlx0ICAgICAgICA8c3Bhbj7nrZvpgInmkJzntKI8L3NwYW4+XG4gICAgIDdcdCAgICAgIDwvZGl2PlxuICAgICA4XHQgICAgICA8ZGl2IGNsYXNzPVwiZmlsdGVyLWNvbnRlbnRcIj5cbiAgICAgOVx0ICAgICAgICA8ZWwtZm9ybSA6aW5saW5lPVwidHJ1ZVwiIDptb2RlbD1cImxpc3RRdWVyeVwiIHNpemU9XCJzbWFsbFwiIGxhYmVsLXdpZHRoPVwiMTIwcHhcIj5cbiAgICAxMFx0ICAgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLlhbPplK7lrZfvvJpcIj5cbiAgICAxMVx0ICAgICAgICAgICAgPGVsLWlucHV0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc2VhcmNoS2V5XCIgcGxhY2Vob2xkZXI9XCLor7fovpPlhaXlhbPplK7lrZdcIiBjbGVhcmFibGU+PC9lbC1pbnB1dD5cbiAgICAxMlx0ICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgIDEzXHQgICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuS7u+WKoeeKtuaAge+8mlwiPlxuICAgIDE0XHQgICAgICAgICAgICA8ZWwtc2VsZWN0IHYtbW9kZWw9XCJsaXN0UXVlcnkuc3RhdHVzXCIgcGxhY2Vob2xkZXI9XCLor7fpgInmi6nnirbmgIFcIiBjbGVhcmFibGU+XG4gICAgMTVcdCAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCIxXCIgbGFiZWw9XCLlvoXlip5cIj48L2VsLW9wdGlvbj5cbiAgICAxNlx0ICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjJcIiBsYWJlbD1cIuW3suWuieaOklwiPjwvZWwtb3B0aW9uPlxuICAgIDE3XHQgICAgICAgICAgICAgIDxlbC1vcHRpb24gOnZhbHVlPVwiM1wiIGxhYmVsPVwi6L+b6KGM5LitXCI+PC9lbC1vcHRpb24+XG4gICAgMThcdCAgICAgICAgICAgICAgPGVsLW9wdGlvbiA6dmFsdWU9XCI0XCIgbGFiZWw9XCLlt7LlrozmiJBcIj48L2VsLW9wdGlvbj5cbiAgICAxOVx0ICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjVcIiBsYWJlbD1cIuW3sumAvuacn1wiPjwvZWwtb3B0aW9uPlxuICAgIDIwXHQgICAgICAgICAgICA8L2VsLXNlbGVjdD5cbiAgICAyMVx0ICAgICAgICAgIDwvZWwtZm9ybS1pdGVtPlxuICAgIDIyXHQgICAgICAgICAgPGVsLWJ1dHRvblxuICAgIDIzXHQgICAgICAgICAgICB0eXBlPVwicHJpbWFyeVwiXG4gICAgMjRcdCAgICAgICAgICAgIGljb249XCJlbC1pY29uLXNlYXJjaFwiXG4gICAgMjVcdCAgICAgICAgICAgIEBjbGljaz1cImhhbmRsZVNlYXJjaExpc3QoKVwiXG4gICAgMjZcdCAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgMjdcdCAgICAgICAgICAgIGNsYXNzPVwic2VhcmNoLWJ0blwiPlxuICAgIDI4XHQgICAgICAgICAgICDmn6Xor6LmkJzntKJcbiAgICAyOVx0ICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgIDMwXHQgICAgICAgICAgPGVsLWJ1dHRvblxuICAgIDMxXHQgICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1yZWZyZXNoXCJcbiAgICAzMlx0ICAgICAgICAgICAgQGNsaWNrPVwiaGFuZGxlUmVzZXRTZWFyY2goKVwiXG4gICAgMzNcdCAgICAgICAgICAgIHNpemU9XCJzbWFsbFwiPlxuICAgIDM0XHQgICAgICAgICAgICDph43nva5cbiAgICAzNVx0ICAgICAgICAgIDwvZWwtYnV0dG9uPlxuICAgIDM2XHQgICAgICAgIDwvZWwtZm9ybT5cbiAgICAzN1x0ICAgICAgPC9kaXY+XG4gICAgMzhcdCAgICA8L2VsLWNhcmQ+XG4gICAgMzlcdCAgICA8ZWwtY2FyZCBjbGFzcz1cIm9wZXJhdGUtY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICA0MFx0ICAgICAgPGRpdiBjbGFzcz1cIm9wZXJhdGUtaGVhZGVyXCI+XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImEzMzcyYTMwLTMyYzMtNDk2Ny05MDIzLWY2M2YyZTZhYzRkNjt0b29sdV8wMVFoWTF2TWM4eUZIc1ZmU1hUNTlmaVUiOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlXG48dGVtcGxhdGU+XG4gIDxkaXYgY2xhc3M9XCJhcHAtY29udGFpbmVyXCI+XG4gICAgPGVsLWNhcmQgY2xhc3M9XCJmaWx0ZXItY29udGFpbmVyXCIgc2hhZG93PVwiaG92ZXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJmaWx0ZXItaGVhZGVyXCI+XG4gICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi1zZWFyY2hcIj48L2k+XG4gICAgICAgIDxzcGFuPuetm+mAieaQnOe0ojwvc3Bhbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImZpbHRlci1jb250ZW50XCI+XG4gICAgICAgIDxlbC1mb3JtIDppbmxpbmU9XCJ0cnVlXCIgOm1vZGVsPVwibGlzdFF1ZXJ5XCIgc2l6ZT1cInNtYWxsXCIgbGFiZWwtd2lkdGg9XCIxMjBweFwiPlxuICAgICAgICAgIDxlbC1mb3JtLWl0ZW0gbGFiZWw9XCLlhbPplK7lrZfvvJpcIj5cbiAgICAgICAgICAgIDxlbC1pbnB1dCB2LW1vZGVsPVwibGlzdFF1ZXJ5LnNlYXJjaEtleVwiIHBsYWNlaG9sZGVyPVwi6K+36L6T5YWl5YWz6ZSu5a2XXCIgY2xlYXJhYmxlPjwvZWwtaW5wdXQ+XG4gICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICAgICAgPGVsLWZvcm0taXRlbSBsYWJlbD1cIuS7u+WKoeeKtuaAge+8mlwiPlxuICAgICAgICAgICAgPGVsLXNlbGVjdCB2LW1vZGVsPVwibGlzdFF1ZXJ5LnN0YXR1c1wiIHBsYWNlaG9sZGVyPVwi6K+36YCJ5oup54q25oCBXCIgY2xlYXJhYmxlPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjFcIiBsYWJlbD1cIuW+heWKnlwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjJcIiBsYWJlbD1cIuW3suWuieaOklwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjNcIiBsYWJlbD1cIui/m+ihjOS4rVwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjRcIiBsYWJlbD1cIuW3suWujOaIkFwiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgICA8ZWwtb3B0aW9uIDp2YWx1ZT1cIjVcIiBsYWJlbD1cIuW3sumAvuacn1wiPjwvZWwtb3B0aW9uPlxuICAgICAgICAgICAgPC9lbC1zZWxlY3Q+XG4gICAgICAgICAgPC9lbC1mb3JtLWl0ZW0+XG4gICAgICAgICAgPGVsLWJ1dHRvblxuICAgICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxuICAgICAgICAgICAgaWNvbj1cImVsLWljb24tc2VhcmNoXCJcbiAgICAgICAgICAgIEBjbGljaz1cImhhbmRsZVNlYXJjaExpc3QoKVwiXG4gICAgICAgICAgICBzaXplPVwic21hbGxcIlxuICAgICAgICAgICAgY2xhc3M9XCJzZWFyY2gtYnRuXCI+XG4gICAgICAgICAgICDmn6Xor6LmkJzntKJcbiAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAgICAgICA8ZWwtYnV0dG9uXG4gICAgICAgICAgICBpY29uPVwiZWwtaWNvbi1yZWZyZXNoXCJcbiAgICAgICAgICAgIEBjbGljaz1cImhhbmRsZVJlc2V0U2VhcmNoKClcIlxuICAgICAgICAgICAgc2l6ZT1cInNtYWxsXCI+XG4gICAgICAgICAgICDph43nva5cbiAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAgICAgPC9lbC1mb3JtPlxuICAgICAgPC9kaXY+XG4gICAgPC9lbC1jYXJkPlxuICAgIDxlbC1jYXJkIGNsYXNzPVwib3BlcmF0ZS1jb250YWluZXJcIiBzaGFkb3c9XCJob3ZlclwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm9wZXJhdGUtaGVhZGVyXCI+XG4gICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi1kYXRlXCI+PC9pPlxuICAgICAgICA8c3Bhbj7miJHnmoTml6XnqIvlronmjpI8L3NwYW4+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJvcGVyYXRlLWFjdGlvbnNcIj5cbiAgICAgICAgPGVsLWJ1dHRvbiBzaXplPVwic21hbGxcIiBjbGFzcz1cImJ0bi1zb3J0XCIgQGNsaWNrPVwiaGFuZGxlU21hcnRTb3J0KClcIiB0eXBlPVwic3VjY2Vzc1wiPlxuICAgICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi1zb3J0XCI+PC9pPuaZuuiDveaOkuW6j1xuICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZWwtY2FyZD5cblxuICAgIDwhLS0g5pel56iL5pe26Ze06L20IC0tPlxuICAgIDxlbC1jYXJkIHNoYWRvdz1cImhvdmVyXCIgY2xhc3M9XCJzY2hlZHVsZXItY29udGFpbmVyXCIgdi1sb2FkaW5nPVwibGlzdExvYWRpbmdcIj5cbiAgICAgIDxkaXYgdi1pZj1cIk9iamVjdC5rZXlzKGdyb3VwZWRTY2hlZHVsZXMpLmxlbmd0aCA9PT0gMFwiIGNsYXNzPVwiZW1wdHktc3RhdGVcIj5cbiAgICAgICAgPGVsLWVtcHR5IGRlc2NyaXB0aW9uPVwi5pqC5peg5pel56iL5pWw5o2uXCI+PC9lbC1lbXB0eT5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiB2LWVsc2UgY2xhc3M9XCJzY2hlZHVsZXItd3JhcHBlclwiPlxuICAgICAgICA8ZGl2IHYtZm9yPVwiKHNjaGVkdWxlcywgZGF0ZSkgaW4gZ3JvdXBlZFNjaGVkdWxlc1wiIDprZXk9XCJkYXRlXCIgY2xhc3M9XCJkYXktZ3JvdXBcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZGF5LWhlYWRlclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1sZWZ0XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbnVtYmVyXCI+e3sgZ2V0RGF5TnVtYmVyKGRhdGUpIH19PC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktd2Vla2RheVwiPnt7IGdldERheVdlZWtkYXkoZGF0ZSkgfX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRheS1kYXRlXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXRlLXRhZ1wiPnt7IGdldERhdGVUYWcoZGF0ZSkgfX08L2Rpdj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRhdGUtZnVsbFwiPnt7IGZvcm1hdERheURhdGUoZGF0ZSkgfX08L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVsaW5lLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInRpbWVsaW5lLXRyYWNrXCI+PC9kaXY+XG5cbiAgICAgICAgICAgIDxkaXYgdi1mb3I9XCJzY2hlZHVsZSBpbiBzY2hlZHVsZXNcIiA6a2V5PVwic2NoZWR1bGUuaWRcIiBjbGFzcz1cInRpbWVsaW5lLWV2ZW50XCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC10aW1lXCI+XG4gICAgICAgICAgICAgICAgPHNwYW4+e3sgZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpIH19PC9zcGFuPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lLW1hcmtlclwiIDpzdHlsZT1cIntiYWNrZ3JvdW5kQ29sb3I6IGdldFRpbWVDb2xvcnMoZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpKS5kb3RDb2xvcn1cIj48L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImV2ZW50LWNvbm5lY3RvclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb25uZWN0b3ItZG90XCIgOmNsYXNzPVwieydjb25mbGljdC1kb3QnOiBzY2hlZHVsZS5oYXNDb25mbGljdH1cIiA6c3R5bGU9XCJ7YmFja2dyb3VuZENvbG9yOiBnZXRUaW1lQ29sb3JzKGZvcm1hdFRpbWUoc2NoZWR1bGUuc3RhcnRUaW1lKSkuZG90Q29sb3J9XCI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbm5lY3Rvci1saW5lXCI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC1jYXJkXCJcbiAgICAgICAgICAgICAgICA6Y2xhc3M9XCJ7XG4gICAgICAgICAgICAgICAgICAnY29uZmxpY3QtY2FyZCc6IHNjaGVkdWxlLmhhc0NvbmZsaWN0LFxuICAgICAgICAgICAgICAgICAgJ292ZXJkdWUtY2FyZCc6IGlzT3ZlcmR1ZShzY2hlZHVsZSlcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICA6c3R5bGU9XCJ7XG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICFpc092ZXJkdWUoc2NoZWR1bGUpID8gZ2V0VGltZUNvbG9ycyhmb3JtYXRUaW1lKHNjaGVkdWxlLnN0YXJ0VGltZSkpLmJhY2tncm91bmRDb2xvciA6ICcjZjVmN2ZhJyxcbiAgICAgICAgICAgICAgICAgIGJvcmRlckxlZnRDb2xvcjogc2NoZWR1bGUuaGFzQ29uZmxpY3QgPyAnI0Y1NkM2QycgOiAoaXNPdmVyZHVlKHNjaGVkdWxlKSA/ICcjZGNkZmU2JyA6IGdldFRpbWVDb2xvcnMoZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpKS5ib3JkZXJDb2xvcilcbiAgICAgICAgICAgICAgICB9XCJcbiAgICAgICAgICAgICAgICBAY2xpY2s9XCJ2aWV3SW5mbyhzY2hlZHVsZSlcIj5cbiAgICAgICAgICAgICAgICA8ZWwtdGFnXG4gICAgICAgICAgICAgICAgICA6dHlwZT1cImdldFN0YXR1c1RhZ1R5cGUoc2NoZWR1bGUuc3RhdHVzKVwiXG4gICAgICAgICAgICAgICAgICBzaXplPVwibWluaVwiXG4gICAgICAgICAgICAgICAgICBlZmZlY3Q9XCJkYXJrXCJcbiAgICAgICAgICAgICAgICAgIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDEwcHg7IGxlZnQ6IDEwcHg7IHotaW5kZXg6IDM7XCJcbiAgICAgICAgICAgICAgICAgIHYtaWY9XCJzY2hlZHVsZS5zdGF0dXMgIT09IHVuZGVmaW5lZCAmJiBzY2hlZHVsZS5zdGF0dXMgIT09IG51bGxcIj5cbiAgICAgICAgICAgICAgICAgIHt7IHNjaGVkdWxlLnN0YXR1cyB8IGZvcm1hdFN0YXR1cyB9fVxuICAgICAgICAgICAgICAgIDwvZWwtdGFnPlxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNhcmQtdGltZS1yYW5nZVwiIDpzdHlsZT1cIntjb2xvcjogaXNPdmVyZHVlKHNjaGVkdWxlKSA/ICcjYzBjNGNjJyA6ICcjOTA5Mzk5J31cIj5cbiAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwiZWwtaWNvbi10aW1lXCI+PC9pPlxuICAgICAgICAgICAgICAgICAgPHNwYW4+e3sgZm9ybWF0VGltZShzY2hlZHVsZS5zdGFydFRpbWUpIH19IC0ge3sgZm9ybWF0VGltZShzY2hlZHVsZS5lbmRUaW1lKSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLXRpdGxlXCIgOnN0eWxlPVwie2NvbG9yOiBpc092ZXJkdWUoc2NoZWR1bGUpID8gJyNhNmE5YWQnIDogJyMzMDMxMzMnLCAncGFkZGluZy1sZWZ0JzogJzcwcHgnfVwiPlxuICAgICAgICAgICAgICAgICAge3sgc2NoZWR1bGUudGFza05hbWUgfX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJkLWFjdGlvbnNcIj5cbiAgICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSB2LWlmPVwic2NoZWR1bGUuaGFzQ29uZmxpY3RcIj5cbiAgICAgICAgICAgICAgICAgICAgPGVsLXRvb2x0aXAgY29udGVudD1cIuafpeeci+WGsueqgeivpuaDhVwiIHBsYWNlbWVudD1cInRvcFwiIGVmZmVjdD1cImxpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgPGVsLWJ1dHRvbiB0eXBlPVwidGV4dFwiIGNsYXNzPVwiYWN0aW9uLWJ0biBjb25mbGljdC1idG5cIiBAY2xpY2s9XCJ2aWV3Q29uZmxpY3Qoc2NoZWR1bGUpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24td2FybmluZ1wiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgICA8L2VsLWJ1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9lbC10b29sdGlwPlxuICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cblxuICAgICAgICAgICAgICAgICAgPGVsLXRvb2x0aXAgY29udGVudD1cIuafpeeci+ivpuaDhVwiIHBsYWNlbWVudD1cInRvcFwiIGVmZmVjdD1cImxpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxlbC1idXR0b24gdHlwZT1cInRleHRcIiBjbGFzcz1cImFjdGlvbi1idG4gdmlldy1idG5cIiBAY2xpY2s9XCJ2aWV3SW5mbyhzY2hlZHVsZSlcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzcz1cImVsLWljb24tdmlld1wiPjwvaT5cbiAgICAgICAgICAgICAgICAgICAgPC9lbC1idXR0b24+XG4gICAgICAgICAgICAgICAgICA8L2VsLXRvb2x0aXA+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9lbC1jYXJkPlxuXG4gICAgPGRpdiBjbGFzcz1cInBhZ2luYXRpb24tY29udGFpbmVyXCI+XG4gICAgICA8ZWwtcGFnaW5hdGlvblxuICAgICAgICBiYWNrZ3JvdW5kXG4gICAgICAgIEBzaXplLWNoYW5nZT1cImhhbmRsZVNpemVDaGFuZ2VcIlxuICAgICAgICBAY3VycmVudC1jaGFuZ2U9XCJoYW5kbGVDdXJyZW50Q2hhbmdlXCJcbiAgICAgICAgbGF5b3V0PVwidG90YWwsIHNpemVzLHByZXYsIHBhZ2VyLCBuZXh0LGp1bXBlclwiXG4gICAgICAgIDpjdXJyZW50LXBhZ2Uuc3luYz1cImxpc3RRdWVyeS5wYWdlTnVtXCJcbiAgICAgICAgOnBhZ2Utc2l6ZT1cImxpc3RRdWVyeS5wYWdlU2l6ZVwiXG4gICAgICAgIDpwYWdlLXNpemVzPVwiWzEwLDE1LDIwXVwiXG4gICAgICAgIDp0b3RhbD1cInRvdGFsXCI+XG4gICAgICA8L2VsLXBhZ2luYXRpb24+XG4gICAgPC9kaXY+XG4uLi5cblxuICAgIDxlbC1kaWFsb2dcbiAgICAgIHRpdGxlPVwi55So5oi35LiO6LWE5rqQ6K+m5oOFXCJcbiAgICAgIDp2aXNpYmxlLnN5bmM9XCJpbmZvRGlhbG9nVmlzaWJsZVwiXG4gICAgICB3aWR0aD1cIjYwJVwiPlxuICAgICAgPGgzPuWPguS4jueUqOaIt+WIl+ihqDwvaDM+XG4gICAgICA8ZWwtdGFibGUgOmRhdGE9XCJ0YXNrSW5mby51c2VyTGlzdCB8fCBbXVwiIGJvcmRlciBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDIwcHg7XCI+XG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cImlkXCIgbGFiZWw9XCJJRFwiIHdpZHRoPVwiODBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwidXNlcm5hbWVcIiBsYWJlbD1cIueUqOaIt+WQjVwiIHdpZHRoPVwiMTUwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cIm5pY2tOYW1lXCIgbGFiZWw9XCLmmLXnp7BcIiB3aWR0aD1cIjEyMFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJlbWFpbFwiIGxhYmVsPVwi6YKu566xXCIgd2lkdGg9XCIyMDBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgPGVsLXRhYmxlLWNvbHVtbiBwcm9wPVwicGhvbmVcIiBsYWJlbD1cIueUteivnVwiIHdpZHRoPVwiMTUwXCI+PC9lbC10YWJsZS1jb2x1bW4+XG4gICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cImFkZHJlc3NcIiBsYWJlbD1cIuWcsOWdgFwiPjwvZWwtdGFibGUtY29sdW1uPlxuICAgICAgPC9lbC10YWJsZT5cbi4uLlxuXG4gICAgPGVsLWRpYWxvZ1xuICAgICAgdGl0bGU9XCLnlKjmiLfkuI7otYTmupDlhrLnqoHor6bmg4VcIlxuICAgICAgOnZpc2libGUuc3luYz1cImNvbmZsaWN0RGlhbG9nVmlzaWJsZVwiXG4gICAgICB3aWR0aD1cIjYwJVwiPlxuICAgICAgPGRpdiB2LWZvcj1cIihpdGVtLCBpbmRleCkgaW4gY29uZmxpY3RMaXN0XCIgOmtleT1cImluZGV4XCI+XG4gICAgICAgIDxlbC1jYXJkIGNsYXNzPVwidGFzay1pbmZvLWNhcmRcIiBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDIwcHg7XCI+XG4gICAgICAgICAgPGgzPuWGsueqgeS7u+WKoXt7IGluZGV4ICsgMSB9fTwvaDM+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+5Lu75Yqh5qCH6aKY77yaPC9zdHJvbmc+e3sgaXRlbS50aXRsZSB9fTwvcD5cbiAgICAgICAgICAgIDxwPjxzdHJvbmc+5Lu75Yqh57yW56CB77yaPC9zdHJvbmc+e3sgaXRlbS5jb2RlIH19PC9wPlxuICAgICAgICAgICAgPHA+PHN0cm9uZz7ku7vliqHmj4/ov7DvvJo8L3N0cm9uZz57eyBpdGVtLmRlc2NyaXB0aW9uIHx8ICfml6AnIH19PC9wPlxuICAgICAgICAgICAgPHA+PHN0cm9uZz7miKrmraLml7bpl7TvvJo8L3N0cm9uZz57eyBpdGVtLmRlYWRsaW5lIH19PC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2VsLWNhcmQ+XG5cbiAgICAgICAgPGgzPuWGsueqgeWPguS4jueUqOaIt+WIl+ihqDwvaDM+XG4gICAgICAgIDxlbC10YWJsZSA6ZGF0YT1cIml0ZW0udXNlckxpc3QgfHwgW11cIiBib3JkZXIgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAyMHB4O1wiPlxuICAgICAgICAgIDxlbC10YWJsZS1jb2x1bW4gcHJvcD1cImlkXCIgbGFiZWw9XCJJRFwiIHdpZHRoPVwiODBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJ1c2VybmFtZVwiIGxhYmVsPVwi55So5oi35ZCNXCIgd2lkdGg9XCIxNTBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJuaWNrTmFtZVwiIGxhYmVsPVwi5pi156ewXCIgd2lkdGg9XCIxMjBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJlbWFpbFwiIGxhYmVsPVwi6YKu566xXCIgd2lkdGg9XCIyMDBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJwaG9uZVwiIGxhYmVsPVwi55S16K+dXCIgd2lkdGg9XCIxNTBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgICA8ZWwtdGFibGUtY29sdW1uIHByb3A9XCJhZGRyZXNzXCIgbGFiZWw9XCLlnLDlnYBcIj48L2VsLXRhYmxlLWNvbHVtbj5cbiAgICAgICAgPC9lbC10YWJsZT5cbi4uLlxuICBpbXBvcnQge2ZldGNoVXNlclNjaGVkdWxlTGlzdCwgZmV0Y2hVc2VyU2NoZWR1bGVTbWFydFNvcnQsIGZldGNoTW9udGhTY2hlZHVsZUxpc3QsIGZldGNoVXNlck1vbnRoU2NoZWR1bGVMaXN0LCBjcmVhdGVTY2hlZHVsZSwgdXBkYXRlU2NoZWR1bGUsIGRlbGV0ZVNjaGVkdWxlLCBmZXRjaEFsbFRhc2tMaXN0LCBmZXRjaEFsbFRhc2tMaXN0QnlTdGF0dXMsIGZldGNoVGFza0luZm8sIGZldGNoQ29uZmxpY3RTY2hlZHVsZUxpc3QsIHVwZGF0ZVRhc2tTdGF0dXMsIHNldFRhc2tSZW1pbmRlcn0gZnJvbSAnQC9hcGkvYXBpJztcbiAgaW1wb3J0IEpzQmFyY29kZSBmcm9tICdqc2JhcmNvZGUnO1xuICBpbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnO1xuICBpbXBvcnQge2Zvcm1hdERhdGV9IGZyb20gJ0AvdXRpbHMvZGF0ZSc7XG5cbiAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgICBwYWdlTnVtOiAxLFxuICAgIHBhZ2VTaXplOiAxMCxcbiAgICBzZWFyY2hLZXk6IG51bGwsXG4gICAgdHlwZTogbnVsbCxcbiAgfTtcbiAgY29uc3QgZGVmYXVsdEFkbWluID0ge1xuICAgIGlkOiBudWxsLFxuICAgIHRhc2tJZDogbnVsbCxcbiAgICBzdGFydFRpbWU6IG51bGwsXG4gICAgZW5kVGltZTogbnVsbCxcbiAgICByZW1pbmRlclRpbWU6IG51bGwsXG4gIH07XG4gIGV4cG9ydCBkZWZhdWx0IHtcbiAgICBuYW1lOiAndXNlclNjaGVkdWxlTGlzdCcsXG4gICAgZGF0YSgpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxpc3RRdWVyeTogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdExpc3RRdWVyeSksXG4gICAgICAgIGxpc3Q6IG51bGwsXG4gICAgICAgIHRvdGFsOiBudWxsLFxuICAgICAgICBsaXN0TG9hZGluZzogZmFsc2UsXG4gICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBhZG1pbjogT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdEFkbWluKSxcbiAgICAgICAgaXNFZGl0OiBmYWxzZSxcbiAgICAgICAgYWRtaW5SdWxlczoge1xuICAgICAgICAgIHRhc2tJZDogW1xuICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeaXpeeoi+WuieaOkuS7u+WKoScsIHRyaWdnZXI6ICdjaGFuZ2UnIH1cbiAgICAgICAgICBdLFxuICAgICAgICAgIHN0YXJ0VGltZTogW1xuICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeS7u+WKoeaJp+ihjOaXtumXtCcsIHRyaWdnZXI6ICdjaGFuZ2UnIH1cbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBiYXJjb2RlRGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIGN1cnJlbnRDb2RlOiAnJywgLy8g5b2T5YmN6YCJ5Lit55qE57yW56CBXG5cbiAgICAgICAgdGFza0xpc3Q6IFtdLFxuXG4gICAgICAgIHBpY2tlck9wdGlvbnM6IHtcbiAgICAgICAgICBkaXNhYmxlZERhdGUodGltZSkge1xuICAgICAgICAgICAgLy8g56aB55So5b2T5YmN5pe26Ze05LmL5YmN55qE5pe26Ze0XG4gICAgICAgICAgICByZXR1cm4gdGltZS5nZXRUaW1lKCkgPCBEYXRlLm5vdygpIC0gODY0MDAwMDA7IC8vIOWHj+WOu+S4gOWkqeaYr+S4uuS6humBv+WFjeaXtuWMuumXrumimFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB0YXNrSW5mbzoge30sXG4gICAgICAgIGluZm9EaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmxpY3REaWFsb2dWaXNpYmxlOiBmYWxzZSxcblxuICAgICAgICBjb25mbGljdExpc3Q6IFtdLFxuXG4gICAgICAgIC8vIOeKtuaAgeWPmOabtOebuOWFs1xuICAgICAgICBzdGF0dXNDaGFuZ2VWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgc3RhdHVzRm9ybToge1xuICAgICAgICAgIHN0YXR1czogMVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIOaPkOmGkuaXtumXtOebuOWFs1xuICAgICAgICByZW1pbmRlckRpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICByZW1pbmRlclRpbWU6ICcnLFxuXG4gICAgICAgIC8vIOS/ruaUueaXpeeoi+aXtumXtOebuOWFs1xuICAgICAgICBzY2hlZHVsZVRpbWVEaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgc2NoZWR1bGVUaW1lRm9ybToge1xuICAgICAgICAgIHN0YXJ0VGltZTogJycsXG4gICAgICAgICAgZW5kVGltZTogJydcbiAgICAgICAgfSxcblxuICAgICAgICAvLyDml7bpl7TmrrXpopzoibLphY3nva4gLSDkvb/nlKjmm7Tnsr7nu4bnmoTml7bpl7TmrrXphY3oibJcbiAgICAgICAgdGltZUNvbG9yczoge1xuICAgICAgICAgIGVhcmx5TW9ybmluZzoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0UzRjJGRCcsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjogJyM5MENBRjknLFxuICAgICAgICAgICAgZG90Q29sb3I6ICcjMjE5NkYzJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbW9ybmluZzoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0U4RjVFOScsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjogJyNBNUQ2QTcnLFxuICAgICAgICAgICAgZG90Q29sb3I6ICcjNENBRjUwJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbm9vbjoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0ZGRjhFMScsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjogJyNGRkUwODInLFxuICAgICAgICAgICAgZG90Q29sb3I6ICcjRkZDMTA3J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYWZ0ZXJub29uOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRkJFOUU3JyxcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnI0ZGQUI5MScsXG4gICAgICAgICAgICBkb3RDb2xvcjogJyNGRjU3MjInXG4gICAgICAgICAgfSxcbiAgICAgICAgICBldmVuaW5nOiB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjRURFN0Y2JyxcbiAgICAgICAgICAgIGJvcmRlckNvbG9yOiAnI0IzOUREQicsXG4gICAgICAgICAgICBkb3RDb2xvcjogJyM2NzNBQjcnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBuaWdodDoge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI0UxRjVGRScsXG4gICAgICAgICAgICBib3JkZXJDb2xvcjogJyM4MUQ0RkEnLFxuICAgICAgICAgICAgZG90Q29sb3I6ICcjMDNBOUY0J1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgY29tcHV0ZWQ6IHtcbiAgICAgIC8vIOaMieaXpeacn+WIhue7hOaXpeeoi+WuieaOklxuICAgICAgZ3JvdXBlZFNjaGVkdWxlcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpc3QpIHJldHVybiB7fTtcblxuICAgICAgICAvLyDliJvlu7rln7rkuo7ml6XmnJ/nmoTliIbnu4RcbiAgICAgICAgY29uc3QgZ3JvdXBzID0ge307XG4gICAgICAgIHRoaXMubGlzdC5mb3JFYWNoKHNjaGVkdWxlID0+IHtcbiAgICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5nZXREYXRlU3RyKHNjaGVkdWxlLnN0YXJ0VGltZSk7XG4gICAgICAgICAgaWYgKCFncm91cHNbZGF0ZV0pIHtcbiAgICAgICAgICAgIGdyb3Vwc1tkYXRlXSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBncm91cHNbZGF0ZV0ucHVzaChzY2hlZHVsZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOaMieaXpeacn+aOkuW6j1xuICAgICAgICBjb25zdCBzb3J0ZWREYXRlcyA9IE9iamVjdC5rZXlzKGdyb3Vwcykuc29ydCgpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcblxuICAgICAgICBzb3J0ZWREYXRlcy5mb3JFYWNoKGRhdGUgPT4ge1xuICAgICAgICAgIC8vIOaMieW8gOWni+aXtumXtOaOkuW6j+avj+S4gOWkqeeahOaXpeeoi1xuICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IGdyb3Vwc1tkYXRlXS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoYS5zdGFydFRpbWUpIC0gbmV3IERhdGUoYi5zdGFydFRpbWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHJlc3VsdFtkYXRlXSA9IHNvcnRlZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZpbHRlcnM6IHtcbiAgICAgIGZvcm1hdERhdGVUaW1lKHRpbWUpIHtcbiAgICAgICAgaWYgKHRpbWUgPT0gbnVsbCB8fCB0aW1lID09PSAnJykge1xuICAgICAgICAgIHJldHVybiAnTi9BJztcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xuICAgICAgICByZXR1cm4gZm9ybWF0RGF0ZShkYXRlLCAneXl5eS1NTS1kZCBoaDptbTpzcycpXG4gICAgICB9LFxuICAgICAgZm9ybWF0U3RhdHVzKHN0YXR1cykge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAxKSB7XG4gICAgICAgICAgcmV0dXJuICflvoXlip4nO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gMikge1xuICAgICAgICAgIHJldHVybiAn5bey5a6J5o6SJztcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0dXMgPT09IDMpIHtcbiAgICAgICAgICByZXR1cm4gJ+i/m+ihjOS4rSc7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdHVzID09PSA0KSB7XG4gICAgICAgICAgcmV0dXJuICflt7LlrozmiJAnO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gNSkge1xuICAgICAgICAgIHJldHVybiAn5bey6YC+5pyfJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ+acquefpSc7XG4gICAgICB9XG4gICAgfSxcbiAgICBjcmVhdGVkKCkge1xuICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICAgfSxcbiAgICBtZXRob2RzOiB7XG4gICAgICAvLyDojrflj5bml6XnqIvpobnnmoTnirbmgIHmoIfnrb7nsbvlnotcbiAgICAgIGdldFN0YXR1c1RhZ1R5cGUoc3RhdHVzKSB7XG4gICAgICAgIHN3aXRjaChzdGF0dXMpIHtcbiAgICAgICAgICBjYXNlIDE6IHJldHVybiAnaW5mbyc7ICAgIC8vIOW+heWKnlxuICAgICAgICAgIGNhc2UgMjogcmV0dXJuICd3YXJuaW5nJzsgLy8g5bey5a6J5o6SXG4gICAgICAgICAgY2FzZSAzOiByZXR1cm4gJ3N1Y2Nlc3MnOyAvLyDov5vooYzkuK1cbiAgICAgICAgICBjYXNlIDQ6IHJldHVybiAnJzsgICAgICAgIC8vIOW3suWujOaIkFxuICAgICAgICAgIGNhc2UgNTogcmV0dXJuICdkYW5nZXInOyAgLy8g5bey6YC+5pyfXG4gICAgICAgICAgZGVmYXVsdDogcmV0dXJuICdpbmZvJztcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgLy8g5pm66IO95o6S5bqP5pa55rOVXG4gICAgICBoYW5kbGVTbWFydFNvcnQoKSB7XG4gICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSB0cnVlO1xuXG4gICAgICAgIC8vIOiOt+WPluW9k+WJjeW5tOaciO+8jOagvOW8j+S4ullZWVktTU1cbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgeWVhck1vbnRoID0gYCR7bm93LmdldEZ1bGxZZWFyKCl9LSR7U3RyaW5nKG5vdy5nZXRNb250aCgpICsgMSkucGFkU3RhcnQoMiwgJzAnKX1gO1xuXG4gICAgICAgIC8vIOS9v+eUqOaZuuiDveaOkuW6j+aOpeWPo+iOt+WPluaOkuW6j+WQjueahOeUqOaIt+aXpeeoi1xuICAgICAgICBmZXRjaFVzZXJTY2hlZHVsZVNtYXJ0U29ydCh0aGlzLmxpc3RRdWVyeSkudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8g5bCG5pm66IO95o6S5bqP5ZCO55qE5pWw5o2u6K6+572u5Li65b2T5YmN5YiX6KGoXG4gICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsO1xuXG4gICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICAgICAgICAgICBtZXNzYWdlOiAn5bey5qC55o2u5pe26Ze057Sn5oCl5oCn5ZKM5Lu75Yqh6YeN6KaB5oCn6L+b6KGM5pm66IO95o6S5bqPJyxcbiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4uLi5cbiAgICAgIGFzeW5jIGdldEFsbFRhc2tMaXN0KCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoQWxsVGFza0xpc3QoKVxuICAgICAgICB0aGlzLnRhc2tMaXN0ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBnZXRUYXNrSW5mbyhpZCkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoVGFza0luZm8oaWQpO1xuICAgICAgICB0aGlzLnRhc2tJbmZvID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgIH0sXG4gICAgICBhc3luYyB2aWV3QmFyY29kZShyb3cpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Q29kZSA9IHJvdy50YXNrQ29kZTtcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRUYXNrSW5mbyhyb3cudGFza0lkKTtcbiAgICAgICAgdGhpcy5iYXJjb2RlRGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICB9LFxuICAgICAgYXN5bmMgdmlld0luZm8ocm93KSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0VGFza0luZm8ocm93LnRhc2tJZCk7XG4gICAgICAgIHRoaXMuaW5mb0RpYWxvZ1Zpc2libGUgPSB0cnVlO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHZpZXdDb25mbGljdChyb3cpIHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2hDb25mbGljdFNjaGVkdWxlTGlzdCh7aWQ6cm93LmlkLHNjaGVkdWxlSWRzOiByb3cuY29uZmxpY3RTY2hlZHVsZUlkcyB8fCAnJ30pO1xuICAgICAgICB0aGlzLmNvbmZsaWN0TGlzdCA9IHJlcy5kYXRhO1xuICAgICAgICB0aGlzLmNvbmZsaWN0RGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICB9LFxuLi4uXG4gICAgICBnZXRMaXN0KCkge1xuICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgICAvLyDojrflj5blvZPliY3lubTmnIjvvIzmoLzlvI/kuLpZWVlZLU1NXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGNvbnN0IHllYXJNb250aCA9IGAke25vdy5nZXRGdWxsWWVhcigpfS0ke1N0cmluZyhub3cuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICAgICAgICAvLyDkvb/nlKjmnIjluqbmjqXlj6Pojrflj5bnlKjmiLfml6XnqItcbiAgICAgICAgZmV0Y2hVc2VyTW9udGhTY2hlZHVsZUxpc3QoeWVhck1vbnRoKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAvLyDlsIbmjInml6XmnJ/liIbnu4TnmoTmlbDmja7ovazmjaLkuLrliJfooajlvaLlvI9cbiAgICAgICAgICBjb25zdCBncm91cGVkRGF0YSA9IHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgbGV0IGFsbFNjaGVkdWxlcyA9IFtdO1xuXG4gICAgICAgICAgLy8g6YGN5Y6G5q+P5Liq5pel5pyf55qE5pel56iL5YiX6KGo77yM5ZCI5bm25Yiw5LiA5Liq5aSn5YiX6KGo5LitXG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyhncm91cGVkRGF0YSkuZm9yRWFjaChzY2hlZHVsZXMgPT4ge1xuICAgICAgICAgICAgYWxsU2NoZWR1bGVzID0gYWxsU2NoZWR1bGVzLmNvbmNhdChzY2hlZHVsZXMpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy5saXN0ID0gYWxsU2NoZWR1bGVzO1xuICAgICAgICAgIHRoaXMudG90YWwgPSBhbGxTY2hlZHVsZXMubGVuZ3RoO1xuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5pel56iL5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcbiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5pel56iL5pWw5o2u5aSx6LSl77yM6K+356iN5ZCO6YeN6K+VJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9XG4gIH1cbjwvc2NyaXB0PlxuPHN0eWxlPlxuLyog5Z+656GA5qC35byPICovXG4uYXBwLWNvbnRhaW5lciB7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIGJhY2tncm91bmQtY29sb3I6ICNGNUY3RkE7XG59XG4uLi5cblxuLyog5pel56iL5qCR5qC35byPICovXG4uZmlsdGVyLWNvbnRhaW5lciwgLm9wZXJhdGUtY29udGFpbmVyLCAuc2NoZWR1bGVyLWNvbnRhaW5lciB7XG4gIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gIGJvcmRlci1yYWRpdXM6IDhweDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgYm94LXNoYWRvdzogMCA0cHggMTBweCByZ2JhKDAsIDAsIDAsIDAuMDUpO1xuICBib3JkZXI6IG5vbmU7XG59XG5cbi5maWx0ZXItaGVhZGVyLCAub3BlcmF0ZS1oZWFkZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBmb250LXNpemU6IDE2cHg7XG4gIGZvbnQtd2VpZ2h0OiA2MDA7XG4gIGNvbG9yOiAjMzAzMTMzO1xuICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0VCRUVGNTtcbiAgcGFkZGluZy1ib3R0b206IDE1cHg7XG59XG5cbi5maWx0ZXItaGVhZGVyIGksIC5vcGVyYXRlLWhlYWRlciBpIHtcbiAgbWFyZ2luLXJpZ2h0OiA4cHg7XG4gIGNvbG9yOiAjNDA5RUZGO1xuICBmb250LXNpemU6IDE4cHg7XG59XG5cbi5maWx0ZXItY29udGVudCB7XG4gIG1hcmdpbi10b3A6IDE1cHg7XG59XG5cbi5zZWFyY2gtYnRuIHtcbiAgYmFja2dyb3VuZDogIzQwOUVGRjtcbiAgYm9yZGVyLWNvbG9yOiAjNDA5RUZGO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIG1hcmdpbi1sZWZ0OiAxMHB4O1xuICBwYWRkaW5nOiA4cHggMTVweDtcbn1cblxuLnNjaGVkdWxlci1jb250YWluZXIge1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xuICBtaW4taGVpZ2h0OiAzMDBweDtcbiAgcGFkZGluZzogMDtcbn1cblxuLmVtcHR5LXN0YXRlIHtcbiAgcGFkZGluZzogNDBweCAwO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59XG5cbi5zY2hlZHVsZXItd3JhcHBlciB7XG4gIHBhZGRpbmc6IDIwcHg7XG59XG5cbi5kYXktZ3JvdXAge1xuICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI0VCRUVGNTtcbiAgcGFkZGluZy1ib3R0b206IDIwcHg7XG59XG5cbi5kYXktZ3JvdXA6bGFzdC1jaGlsZCB7XG4gIG1hcmdpbi1ib3R0b206IDA7XG4gIGJvcmRlci1ib3R0b206IG5vbmU7XG59XG5cbi5kYXktaGVhZGVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgcGFkZGluZzogMTZweCAyMHB4O1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjRjJGNkZDO1xuICBib3JkZXItbGVmdDogNHB4IHNvbGlkICM0MDlFRkY7XG59XG5cbi5kYXktbGVmdCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICBtYXJnaW4tcmlnaHQ6IDE1cHg7XG4gIG1pbi13aWR0aDogNjBweDtcbiAgcGFkZGluZzogOHB4O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjNDA5RUZGLCAjNjRCNUY2KTtcbiAgY29sb3I6IHdoaXRlO1xuICBib3JkZXItcmFkaXVzOiA4cHg7XG4gIGJveC1zaGFkb3c6IDAgMnB4IDZweCByZ2JhKDY0LCAxNTgsIDI1NSwgMC4yNSk7XG59XG5cbi5kYXktbnVtYmVyIHtcbiAgZm9udC1zaXplOiAyOHB4O1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgY29sb3I6ICNmZmY7XG4gIGxpbmUtaGVpZ2h0OiAxO1xufVxuXG4uZGF5LXdlZWtkYXkge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGNvbG9yOiAjZmZmO1xuICBtYXJnaW4tdG9wOiA0cHg7XG4gIGZvbnQtd2VpZ2h0OiA1MDA7XG59XG5cbi5kYXktZGF0ZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi5kYXRlLXRhZyB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIGNvbG9yOiAjZmZmO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDA5RUZGO1xuICBwYWRkaW5nOiA1cHggMTBweDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBtYXJnaW4tcmlnaHQ6IDEwcHg7XG59XG5cbi5kYXRlLWZ1bGwge1xuICBmb250LXNpemU6IDE1cHg7XG4gIGNvbG9yOiAjNjA2MjY2O1xufVxuXG4udGltZWxpbmUtY29udGFpbmVyIHtcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xuICBwYWRkaW5nLWxlZnQ6IDEwMHB4O1xuICBtYXJnaW4tdG9wOiAyMHB4O1xuICBtYXJnaW4tbGVmdDogMjBweDtcbiAgbWFyZ2luLXJpZ2h0OiAyMHB4O1xufVxuXG4udGltZWxpbmUtdHJhY2sge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDcwcHg7XG4gIHRvcDogMDtcbiAgYm90dG9tOiAwO1xuICB3aWR0aDogMnB4O1xuICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTgwZGVnLFxuICAgICNlOGVhZWMgMCUsXG4gICAgIzIxOTZGMyAxNiUsXG4gICAgIzRDQUY1MCAzMiUsXG4gICAgI0ZGQzEwNyA0OCUsXG4gICAgI0ZGNTcyMiA2NCUsXG4gICAgIzY3M0FCNyA4MCUsXG4gICAgIzAzQTlGNCAxMDAlKTtcbiAgei1pbmRleDogMTtcbn1cbi4uLlxuUGF0aDogd2ViL3NyYy92aWV3cy9zY2hlZHVsZS9pbmRleC52dWVcbi4uLlxuICAgICAgPC9zcGFuPlxuICAgIDwvZWwtZGlhbG9nPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+XG48c2NyaXB0PlxuICBpbXBvcnQge2ZldGNoU2NoZWR1bGVMaXN0LCBmZXRjaFNjaGVkdWxlU21hcnRTb3J0LCBjcmVhdGVTY2hlZHVsZSx1cGRhdGVTY2hlZHVsZSxkZWxldGVTY2hlZHVsZSxmZXRjaEFsbFRhc2tMaXN0LGZldGNoQWxsVGFza0xpc3RCeVN0YXR1cyxmZXRjaFRhc2tJbmZvLGZldGNoQ29uZmxpY3RTY2hlZHVsZUxpc3QsdXBkYXRlVGFza1N0YXR1cyxzZXRUYXNrUmVtaW5kZXJ9IGZyb20gJ0AvYXBpL2FwaSc7XG4gIGltcG9ydCBKc0JhcmNvZGUgZnJvbSAnanNiYXJjb2RlJztcbiAgaW1wb3J0IGh0bWwyY2FudmFzIGZyb20gJ2h0bWwyY2FudmFzJztcbiAgaW1wb3J0IHtmb3JtYXREYXRlfSBmcm9tICdAL3V0aWxzL2RhdGUnO1xuXG4gIGNvbnN0IGRlZmF1bHRMaXN0UXVlcnkgPSB7XG4gICAgcGFnZU51bTogMSxcbiAgICBwYWdlU2l6ZTogMTAsXG4gICAgc2VhcmNoS2V5OiBudWxsLFxuICAgIHN0YXR1czogbnVsbCxcbiAgICB0eXBlOiBudWxsLFxuICB9O1xuICBjb25zdCBkZWZhdWx0QWRtaW4gPSB7XG4gICAgaWQ6IG51bGwsXG4gICAgdGFza0lkOiBudWxsLFxuICAgIHN0YXJ0VGltZTogbnVsbCxcbiAgICBlbmRUaW1lOiBudWxsLFxuICAgIHJlbWluZGVyVGltZTogbnVsbCxcbiAgfTtcbiAgZXhwb3J0IGRlZmF1bHQge1xuICAgIG5hbWU6ICdhZG1pbkxpc3QnLFxuICAgIGRhdGEoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsaXN0UXVlcnk6IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpLFxuICAgICAgICBsaXN0OiBudWxsLFxuICAgICAgICB0b3RhbDogbnVsbCxcbiAgICAgICAgbGlzdExvYWRpbmc6IGZhbHNlLFxuICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSxcbiAgICAgICAgYWRtaW46IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRBZG1pbiksXG4gICAgICAgIGlzRWRpdDogZmFsc2UsXG4gICAgICAgIGFkbWluUnVsZXM6IHtcbiAgICAgICAgICB0YXNrSWQ6IFtcbiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nml6XnqIvlronmjpLku7vliqEnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBzdGFydFRpbWU6IFtcbiAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nku7vliqHmiafooYzml7bpl7QnLCB0cmlnZ2VyOiAnY2hhbmdlJyB9XG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgYmFyY29kZURpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBjdXJyZW50Q29kZTogJycsIC8vIOW9k+WJjemAieS4reeahOe8lueggVxuXG4gICAgICAgIHRhc2tMaXN0OiBbXSxcblxuICAgICAgICAvLyDku7vliqHor6bmg4Xnm7jlhbNcbiAgICAgICAgdGFza0RldGFpbFZpc2libGU6IGZhbHNlLFxuICAgICAgICB0YXNrRGV0YWlsOiB7fSxcbiAgICAgICAgY3VycmVudFNjaGVkdWxlSWQ6IG51bGwsXG5cbiAgICAgICAgLy8g54q25oCB5Y+Y5pu055u45YWzXG4gICAgICAgIHN0YXR1c0NoYW5nZVZpc2libGU6IGZhbHNlLFxuICAgICAgICBzdGF0dXNGb3JtOiB7XG4gICAgICAgICAgc3RhdHVzOiAxXG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8g5o+Q6YaS5pe26Ze055u45YWzXG4gICAgICAgIHJlbWluZGVyRGlhbG9nVmlzaWJsZTogZmFsc2UsXG4gICAgICAgIHJlbWluZGVyVGltZTogJycsXG5cbiAgICAgICAgLy8g5L+u5pS55pel56iL5pe26Ze055u45YWzXG4gICAgICAgIHNjaGVkdWxlVGltZURpYWxvZ1Zpc2libGU6IGZhbHNlLFxuICAgICAgICBzY2hlZHVsZVRpbWVGb3JtOiB7XG4gICAgICAgICAgc3RhcnRUaW1lOiAnJyxcbiAgICAgICAgICBlbmRUaW1lOiAnJ1xuICAgICAgICB9LFxuLi4uXG4gICAgICBoYW5kbGVDdXJyZW50Q2hhbmdlKHZhbCkge1xuICAgICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtID0gdmFsO1xuICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBoYW5kbGVBZGQoKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuZ2V0VGFza0xpc3Qoe3N0YXR1czoxfSk7XG4gICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNFZGl0ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWRtaW4gPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0QWRtaW4pO1xuICAgICAgfSxcbiAgICAgIGhhbmRsZURlbGV0ZShpbmRleCwgcm93KSB7XG4gICAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuimgeWIoOmZpOivpeaXpeeoi+WuieaOkj/liKDpmaTlkI7lsIbml6Dms5XmkqTplIAnLCAn5o+Q56S6Jywge1xuICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJyxcbiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJyxcbiAgICAgICAgICB0eXBlOiAnd2FybmluZydcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XG4gICAgICAgICAgZGVsZXRlU2NoZWR1bGUocm93LmlkKS50aGVuKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoe1xuICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgICAgYXN5bmMgaGFuZGxlVXBkYXRlKGluZGV4LCByb3cpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5nLi4uIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMjY3N2RmZmUtNjNiOS00OGYxLTkyMmMtZDhkZDMyNmE1NzNmO3Rvb2x1XzAxWDRnNFhDYkZuTWlxWGs2eDlhY04zUSI6eyJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHdlYi9zcmMvdmlld3MvdXNlclNjaGVkdWxlL2luZGV4LnZ1ZS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2VfZW50cmllc1swXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgMjQxXHQgIGltcG9ydCBKc0JhcmNvZGUgZnJvbSAnanNiYXJjb2RlJztcbiAgIDI0Mlx0ICBpbXBvcnQgaHRtbDJjYW52YXMgZnJvbSAnaHRtbDJjYW52YXMnO1xuICAgMjQzXHQgIGltcG9ydCB7Zm9ybWF0RGF0ZX0gZnJvbSAnQC91dGlscy9kYXRlJztcbiAgIDI0NFx0XG4gICAyNDVcdCAgY29uc3QgZGVmYXVsdExpc3RRdWVyeSA9IHtcbiAgIDI0Nlx0ICAgIHBhZ2VOdW06IDEsXG4gICAyNDdcdCAgICBwYWdlU2l6ZTogMTAsXG4gICAyNDhcdCAgICBzZWFyY2hLZXk6IG51bGwsXG4gICAyNDlcdCAgICBzdGF0dXM6IG51bGwsXG4gICAyNTBcdCAgICB0eXBlOiBudWxsLFxuICAgMjUxXHQgIH07XG4gICAyNTJcdCAgY29uc3QgZGVmYXVsdEFkbWluID0ge1xuICAgMjUzXHQgICAgaWQ6IG51bGwsXG4gICAyNTRcdCAgICB0YXNrSWQ6IG51bGwsXG4gICAyNTVcdCAgICBzdGFydFRpbWU6IG51bGwsXG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImY1NTM0ZjJiLWYxZmMtNDcxMy1iNTYwLTVkMmNiNzIxYzIxZTt0b29sdV8wMUF5SEx3cDU5UE1VQ013Q3ZIS1duZzciOnsicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSB3ZWIvc3JjL3ZpZXdzL3VzZXJTY2hlZHVsZS9pbmRleC52dWUuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDQxM1x0ICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnaW5mbyc7XG4gICA0MTRcdCAgICAgICAgfVxuICAgNDE1XHQgICAgICB9LFxuICAgNDE2XHRcbiAgIDQxN1x0ICAgICAgLy8g5pm66IO95o6S5bqP5pa55rOVXG4gICA0MThcdCAgICAgIGhhbmRsZVNtYXJ0U29ydCgpIHtcbiAgIDQxOVx0ICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgIDQyMFx0ICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICA0MjFcdCAgICAgICAgICBwYWdlTnVtOiB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtLFxuICAgNDIyXHQgICAgICAgICAgcGFnZVNpemU6IHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplXG4gICA0MjNcdCAgICAgICAgfTtcbiAgIDQyNFx0XG4gICA0MjVcdCAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleSkge1xuICAgNDI2XHQgICAgICAgICAgcGFyYW1zLnNlYXJjaEtleSA9IHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleTtcbiAgIDQyN1x0ICAgICAgICB9XG4gICA0MjhcdFxuICAgNDI5XHQgICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IG51bGwgJiYgdGhpcy5saXN0UXVlcnkuc3RhdHVzICE9PSB1bmRlZmluZWQpIHtcbiAgIDQzMFx0ICAgICAgICAgIHBhcmFtcy5zdGF0dXMgPSB0aGlzLmxpc3RRdWVyeS5zdGF0dXM7XG4gICA0MzFcdCAgICAgICAgfVxuICAgNDMyXHRcbiAgIDQzM1x0ICAgICAgICAvLyDkvb/nlKjmmbrog73mjpLluo/mjqXlj6Pojrflj5bmjpLluo/lkI7nmoTnlKjmiLfml6XnqItcbiAgIDQzNFx0ICAgICAgICBmZXRjaFVzZXJTY2hlZHVsZVNtYXJ0U29ydChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgNDM1XHQgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgNDM2XHRcbiAgIDQzN1x0ICAgICAgICAgIC8vIOWwhuaZuuiDveaOkuW6j+WQjueahOaVsOaNruiuvue9ruS4uuW9k+WJjeWIl+ihqFxuICAgNDM4XHQgICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgNDM5XHQgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICA0NDBcdFxuICAgNDQxXHQgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7XG4gICA0NDJcdCAgICAgICAgICAgIG1lc3NhZ2U6ICflt7LmoLnmja7ml7bpl7TntKfmgKXmgKflkozku7vliqHph43opoHmgKfov5vooYzmmbrog73mjpLluo8nLFxuICAgNDQzXHQgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcydcbiAgIDQ0NFx0ICAgICAgICAgIH0pO1xuICAgNDQ1XHQgICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgIDQ0Nlx0ICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+aZuuiDveaOkuW6j+Wksei0pTonLCBlcnJvcik7XG4gICA0NDdcdCAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7XG4gICA0NDhcdCAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmmbrog73mjpLluo/lpLHotKXvvIzor7fnqI3lkI7ph43or5UnKTtcbiAgIDQ0OVx0ICAgICAgICB9KTtcbiAgIDQ1MFx0ICAgICAgfSxcbiAgIDQ1MVx0XG4gICA0NTJcdCAgICAgIC8vIOmHjee9ruaQnOe0olxuICAgNDUzXHQgICAgICBoYW5kbGVSZXNldFNlYXJjaCgpIHtcbiAgIDQ1NFx0ICAgICAgICB0aGlzLmxpc3RRdWVyeSA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRMaXN0UXVlcnkpO1xuICAgNDU1XHQgICAgICAgIHRoaXMuZ2V0TGlzdCgpO1xuICAgNDU2XHQgICAgICB9LFxuICAgNDU3XHRcbiAgIDQ1OFx0ICAgICAgLy8g5pCc57Si5YiX6KGoXG4gICA0NTlcdCAgICAgIGhhbmRsZVNlYXJjaExpc3QoKSB7XG4gICA0NjBcdCAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IDE7XG4gICA0NjFcdCAgICAgICAgdGhpcy5nZXRMaXN0KCk7XG4gICA0NjJcdCAgICAgIH0sXG4gICA0NjNcdFxuICAgNDY0XHQgICAgICAvLyDliKTmlq3ml6XnqIvmmK/lkKblt7Lov4fnu5PmnZ/ml7bpl7RcbiAgIDQ2NVx0ICAgICAgaXNPdmVyZHVlKHNjaGVkdWxlKSB7XG4gICA0NjZcdCAgICAgICAgLy8g5aaC5p6cc3RhdHVz5bey57uP5pivNSjlt7LpgL7mnJ8p5YiZ55u05o6l6L+U5ZuedHJ1ZVxuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI1MDJjNzRkMy03NWIxLTQxMDctOWFlNi0xODEwMmNmNWRlNTc7dG9vbHVfMDFRNlZveDdzUWdaYkJGUzRmaGNzUmFzIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgd2ViL3NyYy92aWV3cy91c2VyU2NoZWR1bGUvaW5kZXgudnVlLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA2MjFcdCAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UodmFsKSB7XG4gICA2MjJcdCAgICAgICAgdGhpcy5saXN0UXVlcnkucGFnZU51bSA9IHZhbDtcbiAgIDYyM1x0ICAgICAgICB0aGlzLmdldExpc3QoKTtcbiAgIDYyNFx0ICAgICAgfSxcbiAgIDYyNVx0ICAgICAgZ2V0TGlzdCgpIHtcbiAgIDYyNlx0ICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTtcbiAgIDYyN1x0ICAgICAgICBjb25zdCBwYXJhbXMgPSB7XG4gICA2MjhcdCAgICAgICAgICBwYWdlTnVtOiB0aGlzLmxpc3RRdWVyeS5wYWdlTnVtLFxuICAgNjI5XHQgICAgICAgICAgcGFnZVNpemU6IHRoaXMubGlzdFF1ZXJ5LnBhZ2VTaXplXG4gICA2MzBcdCAgICAgICAgfTtcbiAgIDYzMVx0XG4gICA2MzJcdCAgICAgICAgaWYgKHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleSkge1xuICAgNjMzXHQgICAgICAgICAgcGFyYW1zLnNlYXJjaEtleSA9IHRoaXMubGlzdFF1ZXJ5LnNlYXJjaEtleTtcbiAgIDYzNFx0ICAgICAgICB9XG4gICA2MzVcdFxuICAgNjM2XHQgICAgICAgIGlmICh0aGlzLmxpc3RRdWVyeS5zdGF0dXMgIT09IG51bGwgJiYgdGhpcy5saXN0UXVlcnkuc3RhdHVzICE9PSB1bmRlZmluZWQpIHtcbiAgIDYzN1x0ICAgICAgICAgIHBhcmFtcy5zdGF0dXMgPSB0aGlzLmxpc3RRdWVyeS5zdGF0dXM7XG4gICA2MzhcdCAgICAgICAgfVxuICAgNjM5XHRcbiAgIDY0MFx0ICAgICAgICAvLyDkvb/nlKjmmbrog73mjpLluo/mjqXlj6Pojrflj5bnlKjmiLfml6XnqIvvvIzmlK/mjIHnirbmgIHov4fmu6RcbiAgIDY0MVx0ICAgICAgICBmZXRjaFVzZXJTY2hlZHVsZVNtYXJ0U29ydChwYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgNjQyXHQgICAgICAgICAgdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlO1xuICAgNjQzXHQgICAgICAgICAgdGhpcy5saXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0O1xuICAgNjQ0XHQgICAgICAgICAgdGhpcy50b3RhbCA9IHJlc3BvbnNlLmRhdGEudG90YWw7XG4gICA2NDVcdCAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgNjQ2XHQgICAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5pel56iL5pWw5o2u5aSx6LSlOicsIGVycm9yKTtcbiAgIDY0N1x0ICAgICAgICAgIHRoaXMubGlzdExvYWRpbmcgPSBmYWxzZTtcbiAgIDY0OFx0ICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluaXpeeoi+aVsOaNruWksei0pe+8jOivt+eojeWQjumHjeivlScpO1xuICAgNjQ5XHQgICAgICAgIH0pO1xuICAgNjUwXHQgICAgICB9LFxuICAgNjUxXHQgICAgfVxuICAgNjUyXHQgIH1cbiAgIDY1M1x0PC9zY3JpcHQ+XG4gICA2NTRcdDxzdHlsZT5cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fX0sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCJ9XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0YXR1cyI6ImRyYWZ0In0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjp0cnVlLCJleHRyYURhdGEiOnsiaXNBZ2VudENvbnZlcnNhdGlvbiI6dHJ1ZSwiaGFzRGlydHlFZGl0cyI6dHJ1ZSwiYmFzZWxpbmVUaW1lc3RhbXAiOjB9LCJwZXJzb25hVHlwZSI6MCwiZHJhZnRBY3RpdmVDb250ZXh0SWRzIjpbIkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7ny9zZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1NjaGVkdWxlU2VydmljZUltcGwuamF2YSIsIkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7n2ZhbHNlZmFsc2UiLCJhZ2VudE1lbW9yaWVzIl19LCJiZjc2M2JhMC00YTAyLTQ5OGYtYjMzNi03YjA4Y2Y4YTczYmIiOnsiaWQiOiJiZjc2M2JhMC00YTAyLTQ5OGYtYjMzNi03YjA4Y2Y4YTczYmIiLCJjcmVhdGVkQXRJc28iOiIyMDI1LTA1LTAzVDE1OjU2OjQwLjEyNVoiLCJsYXN0SW50ZXJhY3RlZEF0SXNvIjoiMjAyNS0wNS0wM1QxNTo1ODo0Ny4wMzZaIiwiY2hhdEhpc3RvcnkiOlt7InJlcXVlc3RfaWQiOiJlNmI2YzhiZi0yMWU4LTQ1MTItOWY4NC1iNGI1NDg3ZTY4YWMiLCJ1dWlkIjoiNDBlMWNkMmMtNWQ1OS00MmM2LWJjYmUtNzY0NjMwOWI0NWI5IiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjowLCJ0b1RpbWVzdGFtcCI6MTc0NjI4NzgwMDEyNiwic2Vlbl9zdGF0ZSI6InNlZW4ifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiZWZlMzQyN2MtOGMxNi00OWE1LWFmODctZDgxNWJhZWJlY2E5IiwicmVxdWVzdF9tZXNzYWdlIjoi55yL5pel56iL5a6J5o6S6L+Z6YeM77yM56ys5LqM5Liq5Lu75Yqh5bqU6K+l5piv5LuO56ys5LiA5Liq5Lu75Yqh57uT5p2f5pe26Ze05byA5aeL55qE77yM6ICM5LiN5piv5LuOOOeCueW8gOWni+OAguavlOWmguesrOS4gOS4quS7u+WKoeaXtumXtOaYrzguMDHnu5PmnZ/vvIzpgqPkuYjnrKzkuozkuKrku7vliqHlvIDlp4vml7bpl7TlupTor6XmmK84LjAx77yM6ICM5LiN5pivOC4wMO+8jOS7peatpOexu+aOqO+8jOivt+S9oOiHquW3semYheivu+i/meS4gOWdl+eahOmAu+i+ke+8jOeEtuWQjuS/ruaUuei/meS4qmJ1ZyIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiLnnIvml6XnqIvlronmjpLov5nph4zvvIznrKzkuozkuKrku7vliqHlupTor6XmmK/ku47nrKzkuIDkuKrku7vliqHnu5PmnZ/ml7bpl7TlvIDlp4vnmoTvvIzogIzkuI3mmK/ku44454K55byA5aeL44CC5q+U5aaC56ys5LiA5Liq5Lu75Yqh5pe26Ze05pivOC4wMee7k+adn++8jOmCo+S5iOesrOS6jOS4quS7u+WKoeW8gOWni+aXtumXtOW6lOivpeaYrzguMDHvvIzogIzkuI3mmK84LjAw77yM5Lul5q2k57G75o6o77yM6K+35L2g6Ieq5bex6ZiF6K+76L+Z5LiA5Z2X55qE6YC76L6R77yM54S25ZCO5L+u5pS56L+Z5LiqYnVnIn1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxSmRvYUdUQ2dQOXc2dVRBUnhnNG9zTSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwidmlld1wiLCBcInBhdGhcIjogXCJzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1NjaGVkdWxlU2VydmljZUltcGwuamF2YVwifSJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSdsbCBoZWxwIHlvdSBmaXggdGhlIGJ1ZyBpbiB0aGUgc2NoZWR1bGUgYXJyYW5nZW1lbnQgbG9naWMuIExldCBtZSBmaXJzdCBleGFtaW5lIHRoZSBjb2RlIHRvIHVuZGVyc3RhbmQgaG93IHRoZSB0YXNrIHNjaGVkdWxpbmcgaXMgY3VycmVudGx5IGltcGxlbWVudGVkLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiLnnIvml6XnqIvlronmjpLov5nph4zvvIznrKzkuozkuKrku7vliqHlupTor6XmmK/ku47nrKzkuIDkuKrku7vliqHnu5PmnZ/ml7bpl7TlvIDlp4vnmoTvvIzogIzkuI3mmK/ku44454K55byA5aeL44CC5q+U5aaC56ys5LiA5Liq5Lu75Yqh5pe26Ze05pivOC4wMee7k+adn++8jOmCo+S5iOesrOS6jOS4quS7u+WKoeW8gOWni+aXtumXtOW6lOivpeaYrzguMDHvvIzogIzkuI3mmK84LjAw77yM5Lul5q2k57G75o6o77yM6K+35L2g6Ieq5bex6ZiF6K+76L+Z5LiA5Z2X55qE6YC76L6R77yM54S25ZCO5L+u5pS56L+Z5LiqYnVnIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJJJ2xsIGhlbHAgeW91IGZpeCB0aGUgYnVnIGluIHRoZSBzY2hlZHVsZSBhcnJhbmdlbWVudCBsb2dpYy4gTGV0IG1lIGZpcnN0IGV4YW1pbmUgdGhlIGNvZGUgdG8gdW5kZXJzdGFuZCBob3cgdGhlIHRhc2sgc2NoZWR1bGluZyBpcyBjdXJyZW50bHkgaW1wbGVtZW50ZWQuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiOTcyZDAwMTgtZTdhOS00N2RmLWI1YzAtOTZjNzYzNTNlNTIxIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUE1eEF5ZVVQRUplZ1AxYTdiUVk2TTkiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhXCIsIFwic3RyX3JlcGxhY2VfZW50cmllc1wiOiBbe1wib2xkX3N0clwiOiBcIiAgICAgICAgICAgIC8vIFxcdTkxY2RcXHU2NWIwXFx1NWI4OVxcdTYzOTJcXHU2NWU1XFx1N2EwYlxcdTY1ZjZcXHU5NWY0XFxuICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBjdXJyZW50VGltZSA9IG1vcm5pbmdTdGFydDtcXG4gICAgICAgICAgICBib29sZWFuIGlzQWZ0ZXJub29uU3RhcnRlZCA9IGZhbHNlO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2NoZWR1bGVzLnNpemUoKTsgaSsrKSB7XFxuICAgICAgICAgICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gc2NoZWR1bGVzLmdldChpKTtcXG4gICAgICAgICAgICAgICAgVGFzayB0YXNrID0gdGFza01hcC5nZXQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgaWYgKHRhc2sgPT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIFxcdTU5ODJcXHU2NzljXFx1NWRmMlxcdTdlY2ZcXHU1MjMwXFx1NGU4NlxcdTRlMmRcXHU1MzQ4XFx1NGYxMVxcdTYwNmZcXHU2NWY2XFx1OTVmNFxcdTRlMTRcXHU4ZmQ4XFx1NmNhMVxcdTVmMDBcXHU1OWNiXFx1NGUwYlxcdTUzNDhcXHVmZjBjXFx1OGY2Y1xcdTUyMzBcXHU0ZTBiXFx1NTM0OFxcdTVmMDBcXHU1OWNiXFx1NjVmNlxcdTk1ZjRcXG4gICAgICAgICAgICAgICAgaWYgKCFpc0FmdGVybm9vblN0YXJ0ZWQgJiYgY3VycmVudFRpbWUuaXNBZnRlcihtb3JuaW5nRW5kKSkge1xcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpbWUgPSBhZnRlcm5vb25TdGFydDtcXG4gICAgICAgICAgICAgICAgICAgIGlzQWZ0ZXJub29uU3RhcnRlZCA9IHRydWU7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIFxcdTU5ODJcXHU2NzljXFx1OGQ4NVxcdTUxZmFcXHU0ZTg2XFx1NGUwYlxcdTUzNDhcXHU1ZGU1XFx1NGY1Y1xcdTY1ZjZcXHU5NWY0XFx1ZmYwY1xcdTUwNWNcXHU2YjYyXFx1NWI4OVxcdTYzOTJcXHVmZjA4XFx1NjIxNlxcdTgwMDVcXHU1M2VmXFx1NGVlNVxcdTkwMDlcXHU2MmU5XFx1N2VlN1xcdTdlZWRcXHU1Yjg5XFx1NjM5MlxcdTUyMzBcXHU2NjBlXFx1NTkyOVxcdWZmMDlcXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lLmlzQWZ0ZXIoYWZ0ZXJub29uRW5kKSkge1xcbiAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXFxcIlxcdTY1ZTVcXHU2NzFmXFxcIiArIGRhdGUgKyBcXFwiXFx1NzY4NFxcdTY1ZTVcXHU3YTBiXFx1NjM5MlxcdTZlZTFcXHU0ZTg2XFx1ZmYwY1xcdTUyNjlcXHU0ZjU5XFxcIiArIChzY2hlZHVsZXMuc2l6ZSgpIC0gaSkgKyBcXFwiXFx1NGUyYVxcdTY1ZTVcXHU3YTBiXFx1NjcyYVxcdTYzOTJcXFwiKTtcXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBcXHU4YmJlXFx1N2Y2ZVxcdTVmMDBcXHU1OWNiXFx1NjVmNlxcdTk1ZjRcXG4gICAgICAgICAgICAgICAgc2NoZWR1bGUuc2V0U3RhcnRUaW1lKGN1cnJlbnRUaW1lKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIFxcdThiYTFcXHU3Yjk3XFx1N2VkM1xcdTY3NWZcXHU2NWY2XFx1OTVmNFxcbiAgICAgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGVuZFRpbWU7XFxuICAgICAgICAgICAgICAgIGlmICh0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgICAgIC8vIFxcdTY4MzlcXHU2MzZlXFx1NGVmYlxcdTUyYTFcXHU5ODg0XFx1NGYzMFxcdTgwMTdcXHU2NWY2XFx1OGJhMVxcdTdiOTdcXHU3ZWQzXFx1Njc1ZlxcdTY1ZjZcXHU5NWY0XFxuICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gY3VycmVudFRpbWUucGx1c01pbnV0ZXModGFzay5nZXRUaW1lU3BlbmQoKSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICAvLyBcXHU1OTgyXFx1Njc5Y1xcdTZjYTFcXHU2NzA5XFx1OTg4NFxcdTRmMzBcXHU2NWY2XFx1OTVmNFxcdWZmMGNcXHU5ZWQ4XFx1OGJhNDMwXFx1NTIwNlxcdTk0OWZcXG4gICAgICAgICAgICAgICAgICAgIGVuZFRpbWUgPSBjdXJyZW50VGltZS5wbHVzTWludXRlcygzMCk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIFxcdThiYmVcXHU3ZjZlXFx1N2VkM1xcdTY3NWZcXHU2NWY2XFx1OTVmNFxcbiAgICAgICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKGVuZFRpbWUpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgLy8gXFx1NWY1M1xcdTUyNGRcXHU0ZWZiXFx1NTJhMVxcdTc2ODRcXHU3ZWQzXFx1Njc1ZlxcdTY1ZjZcXHU5NWY0XFx1NGY1Y1xcdTRlM2FcXHU0ZTBiXFx1NGUwMFxcdTRlMmFcXHU0ZWZiXFx1NTJhMVxcdTc2ODRcXHU1ZjAwXFx1NTljYlxcdTY1ZjZcXHU5NWY0XFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gZW5kVGltZTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIFxcdTY2ZjRcXHU2NWIwXFx1NjVlNVxcdTdhMGJcXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCeUlkKHNjaGVkdWxlKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIFxcdTU0MGNcXHU2NWY2XFx1NjZmNFxcdTY1YjBcXHU2MjQwXFx1NjcwOVxcdTViNTBcXHU2NWU1XFx1N2EwYlxcbiAgICAgICAgICAgICAgICBRdWVyeVdyYXBwZXI8U2NoZWR1bGU+IGNoaWxkV3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xcbiAgICAgICAgICAgICAgICBjaGlsZFdyYXBwZXIuZXEoXFxcInBhcmVudF9pZFxcXCIsIHNjaGVkdWxlLmdldElkKCkpO1xcbiAgICAgICAgICAgICAgICBMaXN0PFNjaGVkdWxlPiBjaGlsZFNjaGVkdWxlcyA9IHRoaXMubGlzdChjaGlsZFdyYXBwZXIpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgZm9yIChTY2hlZHVsZSBjaGlsZFNjaGVkdWxlIDogY2hpbGRTY2hlZHVsZXMpIHtcXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkU2NoZWR1bGUuc2V0U3RhcnRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpKTtcXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkU2NoZWR1bGUuc2V0RW5kVGltZShzY2hlZHVsZS5nZXRFbmRUaW1lKCkpO1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCeUlkKGNoaWxkU2NoZWR1bGUpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBsb2cuaW5mbyhcXFwiXFx1OTFjZFxcdTYzOTJcXHU2NWU1XFx1N2EwYlxcdWZmMWFcXHU0ZWZiXFx1NTJhMVtcXFwiICsgdGFzay5nZXRUaXRsZSgpICsgXFxcIl1cXHVmZjBjXFx1NWYwMFxcdTU5Y2JcXHU2NWY2XFx1OTVmNFxcdWZmMWFcXFwiICsgc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkgKyBcXFwiXFx1ZmYwY1xcdTdlZDNcXHU2NzVmXFx1NjVmNlxcdTk1ZjRcXHVmZjFhXFxcIiArIHNjaGVkdWxlLmdldEVuZFRpbWUoKSk7XFxuICAgICAgICAgICAgfVwiLCBcIm5ld19zdHJcIjogXCIgICAgICAgICAgICAvLyBcXHU5MWNkXFx1NjViMFxcdTViODlcXHU2MzkyXFx1NjVlNVxcdTdhMGJcXHU2NWY2XFx1OTVmNFxcbiAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgY3VycmVudFRpbWUgPSBtb3JuaW5nU3RhcnQ7XFxuICAgICAgICAgICAgYm9vbGVhbiBpc0FmdGVybm9vblN0YXJ0ZWQgPSBmYWxzZTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNjaGVkdWxlcy5zaXplKCk7IGkrKykge1xcbiAgICAgICAgICAgICAgICBTY2hlZHVsZSBzY2hlZHVsZSA9IHNjaGVkdWxlcy5nZXQoaSk7XFxuICAgICAgICAgICAgICAgIFRhc2sgdGFzayA9IHRhc2tNYXAuZ2V0KHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIGlmICh0YXNrID09IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBcXHU1OTgyXFx1Njc5Y1xcdTVkZjJcXHU3ZWNmXFx1NTIzMFxcdTRlODZcXHU0ZTJkXFx1NTM0OFxcdTRmMTFcXHU2MDZmXFx1NjVmNlxcdTk1ZjRcXHU0ZTE0XFx1OGZkOFxcdTZjYTFcXHU1ZjAwXFx1NTljYlxcdTRlMGJcXHU1MzQ4XFx1ZmYwY1xcdThmNmNcXHU1MjMwXFx1NGUwYlxcdTUzNDhcXHU1ZjAwXFx1NTljYlxcdTY1ZjZcXHU5NWY0XFxuICAgICAgICAgICAgICAgIGlmICghaXNBZnRlcm5vb25TdGFydGVkICYmIGN1cnJlbnRUaW1lLmlzQWZ0ZXIobW9ybmluZ0VuZCkpIHtcXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gYWZ0ZXJub29uU3RhcnQ7XFxuICAgICAgICAgICAgICAgICAgICBpc0FmdGVybm9vblN0YXJ0ZWQgPSB0cnVlO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBcXHU1OTgyXFx1Njc5Y1xcdThkODVcXHU1MWZhXFx1NGU4NlxcdTRlMGJcXHU1MzQ4XFx1NWRlNVxcdTRmNWNcXHU2NWY2XFx1OTVmNFxcdWZmMGNcXHU1MDVjXFx1NmI2MlxcdTViODlcXHU2MzkyXFx1ZmYwOFxcdTYyMTZcXHU4MDA1XFx1NTNlZlxcdTRlZTVcXHU5MDA5XFx1NjJlOVxcdTdlZTdcXHU3ZWVkXFx1NWI4OVxcdTYzOTJcXHU1MjMwXFx1NjYwZVxcdTU5MjlcXHVmZjA5XFxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGltZS5pc0FmdGVyKGFmdGVybm9vbkVuZCkpIHtcXG4gICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFxcXCJcXHU2NWU1XFx1NjcxZlxcXCIgKyBkYXRlICsgXFxcIlxcdTc2ODRcXHU2NWU1XFx1N2EwYlxcdTYzOTJcXHU2ZWUxXFx1NGU4NlxcdWZmMGNcXHU1MjY5XFx1NGY1OVxcXCIgKyAoc2NoZWR1bGVzLnNpemUoKSAtIGkpICsgXFxcIlxcdTRlMmFcXHU2NWU1XFx1N2EwYlxcdTY3MmFcXHU2MzkyXFxcIik7XFxuICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgLy8gXFx1OGJiZVxcdTdmNmVcXHU1ZjAwXFx1NTljYlxcdTY1ZjZcXHU5NWY0IC0gXFx1NGY3ZlxcdTc1MjhcXHU1ZjUzXFx1NTI0ZFxcdTY1ZjZcXHU5NWY0XFx1NzBiOVxcdTRmNWNcXHU0ZTNhXFx1NGVmYlxcdTUyYTFcXHU1ZjAwXFx1NTljYlxcdTY1ZjZcXHU5NWY0XFxuICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNldFN0YXJ0VGltZShjdXJyZW50VGltZSk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBcXHU4YmExXFx1N2I5N1xcdTdlZDNcXHU2NzVmXFx1NjVmNlxcdTk1ZjRcXG4gICAgICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBlbmRUaW1lO1xcbiAgICAgICAgICAgICAgICBpZiAodGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgICAgICAvLyBcXHU2ODM5XFx1NjM2ZVxcdTRlZmJcXHU1MmExXFx1OTg4NFxcdTRmMzBcXHU4MDE3XFx1NjVmNlxcdThiYTFcXHU3Yjk3XFx1N2VkM1xcdTY3NWZcXHU2NWY2XFx1OTVmNFxcbiAgICAgICAgICAgICAgICAgICAgZW5kVGltZSA9IGN1cnJlbnRUaW1lLnBsdXNNaW51dGVzKHRhc2suZ2V0VGltZVNwZW5kKCkpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICAgICAgLy8gXFx1NTk4MlxcdTY3OWNcXHU2Y2ExXFx1NjcwOVxcdTk4ODRcXHU0ZjMwXFx1NjVmNlxcdTk1ZjRcXHVmZjBjXFx1OWVkOFxcdThiYTQzMFxcdTUyMDZcXHU5NDlmXFxuICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gY3VycmVudFRpbWUucGx1c01pbnV0ZXMoMzApO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICAvLyBcXHU4YmJlXFx1N2Y2ZVxcdTdlZDNcXHU2NzVmXFx1NjVmNlxcdTk1ZjRcXG4gICAgICAgICAgICAgICAgc2NoZWR1bGUuc2V0RW5kVGltZShlbmRUaW1lKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIFxcdTVmNTNcXHU1MjRkXFx1NGVmYlxcdTUyYTFcXHU3Njg0XFx1N2VkM1xcdTY3NWZcXHU2NWY2XFx1OTVmNFxcdTRmNWNcXHU0ZTNhXFx1NGUwYlxcdTRlMDBcXHU0ZTJhXFx1NGVmYlxcdTUyYTFcXHU3Njg0XFx1NWYwMFxcdTU5Y2JcXHU2NWY2XFx1OTVmNFxcbiAgICAgICAgICAgICAgICAvLyBcXHU3ODZlXFx1NGZkZFxcdTRlMGJcXHU0ZTAwXFx1NGUyYVxcdTRlZmJcXHU1MmExXFx1NzY4NFxcdTVmMDBcXHU1OWNiXFx1NjVmNlxcdTk1ZjRcXHU2NjJmXFx1NWY1M1xcdTUyNGRcXHU0ZWZiXFx1NTJhMVxcdTc2ODRcXHU3ZWQzXFx1Njc1ZlxcdTY1ZjZcXHU5NWY0XFx1ZmYwY1xcdTgwMGNcXHU0ZTBkXFx1NjYyZlxcdTkxY2RcXHU3ZjZlXFx1NGUzYVxcdTU2ZmFcXHU1YjlhXFx1NjVmNlxcdTk1ZjRcXG4gICAgICAgICAgICAgICAgY3VycmVudFRpbWUgPSBlbmRUaW1lO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgLy8gXFx1NjZmNFxcdTY1YjBcXHU2NWU1XFx1N2EwYlxcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ5SWQoc2NoZWR1bGUpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgLy8gXFx1NTQwY1xcdTY1ZjZcXHU2NmY0XFx1NjViMFxcdTYyNDBcXHU2NzA5XFx1NWI1MFxcdTY1ZTVcXHU3YTBiXFxuICAgICAgICAgICAgICAgIFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4gY2hpbGRXcmFwcGVyID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XFxuICAgICAgICAgICAgICAgIGNoaWxkV3JhcHBlci5lcShcXFwicGFyZW50X2lkXFxcIiwgc2NoZWR1bGUuZ2V0SWQoKSk7XFxuICAgICAgICAgICAgICAgIExpc3Q8U2NoZWR1bGU+IGNoaWxkU2NoZWR1bGVzID0gdGhpcy5saXN0KGNoaWxkV3JhcHBlcik7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBmb3IgKFNjaGVkdWxlIGNoaWxkU2NoZWR1bGUgOiBjaGlsZFNjaGVkdWxlcykge1xcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRTY2hlZHVsZS5zZXRTdGFydFRpbWUoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkpO1xcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRTY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldEVuZFRpbWUoKSk7XFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ5SWQoY2hpbGRTY2hlZHVsZSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIGxvZy5pbmZvKFxcXCJcXHU5MWNkXFx1NjM5MlxcdTY1ZTVcXHU3YTBiXFx1ZmYxYVxcdTRlZmJcXHU1MmExW1xcXCIgKyB0YXNrLmdldFRpdGxlKCkgKyBcXFwiXVxcdWZmMGNcXHU1ZjAwXFx1NTljYlxcdTY1ZjZcXHU5NWY0XFx1ZmYxYVxcXCIgKyBzY2hlZHVsZS5nZXRTdGFydFRpbWUoKSArIFxcXCJcXHVmZjBjXFx1N2VkM1xcdTY3NWZcXHU2NWY2XFx1OTVmNFxcdWZmMWFcXFwiICsgc2NoZWR1bGUuZ2V0RW5kVGltZSgpKTtcXG4gICAgICAgICAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA3MjMsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNzgxfV19In19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSBuZWVkIHRvIHVuZGVyc3RhbmQgdGhlIGlzc3VlIGJldHRlci4gTGV0IG1lIGxvb2sgYXQgdGhlIHNwZWNpZmljIHBhcnQgb2YgdGhlIGNvZGUgdGhhdCBoYW5kbGVzIHRhc2sgc2NoZWR1bGluZy4gVGhlIHByb2JsZW0gaXMgdGhhdCB0aGUgc2Vjb25kIHRhc2sgc2hvdWxkIHN0YXJ0IGF0IHRoZSBlbmQgdGltZSBvZiB0aGUgZmlyc3QgdGFzaywgbm90IGF0IDg6MDAgQU0uXG5cbkxvb2tpbmcgYXQgdGhlIGNvZGUsIEkgY2FuIHNlZSB0aGF0IHRoZSBpc3N1ZSBpcyBpbiB0aGUgYGF1dG9BcnJhbmdlRGFpbHlTY2hlZHVsZXNgIG1ldGhvZCwgc3BlY2lmaWNhbGx5IGFyb3VuZCBsaW5lIDc2NC03NjUuIExldCBtZSBhbmFseXplIHRoaXMgcGFydDpcblxuYGBgamF2YVxuLy8g5b2T5YmN5Lu75Yqh55qE57uT5p2f5pe26Ze05L2c5Li65LiL5LiA5Liq5Lu75Yqh55qE5byA5aeL5pe26Ze0XG5jdXJyZW50VGltZSA9IGVuZFRpbWU7XG5gYGBcblxuVGhpcyBsaW5lIGlzIHN1cHBvc2VkIHRvIHNldCB0aGUgbmV4dCB0YXNrJ3Mgc3RhcnQgdGltZSB0byB0aGUgY3VycmVudCB0YXNrJ3MgZW5kIHRpbWUsIHdoaWNoIGlzIGNvcnJlY3QuIEhvd2V2ZXIsIGxldCdzIGNoZWNrIGlmIHRoZXJlJ3MgYW55IGlzc3VlIHdpdGggaG93IHRoZSB0aW1lIGlzIGJlaW5nIGNhbGN1bGF0ZWQgb3IgdXNlZC5cblxuTGV0IG1lIGxvb2sgYXQgdGhlIGVudGlyZSBtZXRob2QgdG8gdW5kZXJzdGFuZCB0aGUgZmxvdzpcblxuMS4gVGhlIG1ldGhvZCBnZXRzIGFsbCBzY2hlZHVsZXMgZm9yIGEgc3BlY2lmaWMgZGF0ZVxuMi4gSXQgc29ydHMgdGhlbSBieSBwcmlvcml0eVxuMy4gSXQgc3RhcnRzIHNjaGVkdWxpbmcgdGFza3MgZnJvbSA4OjAwIEFNXG40LiBGb3IgZWFjaCB0YXNrLCBpdCBzZXRzIHRoZSBzdGFydCB0aW1lIHRvIHRoZSBjdXJyZW50IHRpbWUsIGNhbGN1bGF0ZXMgdGhlIGVuZCB0aW1lLCBhbmQgdGhlbiB1cGRhdGVzIHRoZSBjdXJyZW50IHRpbWUgdG8gdGhlIGVuZCB0aW1lIGZvciB0aGUgbmV4dCB0YXNrXG5cblRoZSBpc3N1ZSBtaWdodCBiZSB0aGF0IHdoZW4gdGhlIGNvZGUgaXMgc2V0dGluZyB0aGUgc3RhcnQgdGltZSBmb3IgdGhlIG5leHQgdGFzaywgaXQncyBub3QgcHJvcGVybHkgdXNpbmcgdGhlIGVuZCB0aW1lIG9mIHRoZSBwcmV2aW91cyB0YXNrLiBMZXQgbWUgZml4IHRoaXMgYnkgbW9kaWZ5aW5nIHRoZSBgYXV0b0FycmFuZ2VEYWlseVNjaGVkdWxlc2AgbWV0aG9kOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzZXJ2ZXIvc3JjL21haW4vamF2YS9jb20vYm9vdC93ZWIvbW9kdWxlcy93ZWIvc2VydmljZS9pbXBsL1NjaGVkdWxlU2VydmljZUltcGwuamF2YTpcbiAgICAgMVx0cGFja2FnZSBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5pbXBsO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGNuLmh1dG9vbC5jb3JlLnV0aWwuT2JqZWN0VXRpbDtcbiAgICAgNFx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5jb3JlLmNvbmRpdGlvbnMucXVlcnkuUXVlcnlXcmFwcGVyO1xuICAgICA1XHRpbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5wbHVnaW5zLnBhZ2luYXRpb24uUGFnZTtcbiAgICAgNlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5tb2RlbC5VbXNBZG1pbjtcbiAgICAgN1x0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLnVtcy5zZXJ2aWNlLlVtc0FkbWluU2VydmljZTtcbiAgICAgOFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Ob3RpZmljYXRpb247XG4gICAgIDlcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUmVzb3VyY2VzO1xuICAgIDEwXHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlNjaGVkdWxlO1xuICAgIDExXHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1hcHBlci5TY2hlZHVsZU1hcHBlcjtcbiAgICAxMlx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5UYXNrO1xuICAgIDEzXHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuTm90aWZpY2F0aW9uU2VydmljZTtcbiAgICAxNFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlJlc291cmNlc1NlcnZpY2U7XG4gICAgMTVcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5TY2hlZHVsZVNlcnZpY2U7XG4gICAgMTZcdGltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuZXh0ZW5zaW9uLnNlcnZpY2UuaW1wbC5TZXJ2aWNlSW1wbDtcbiAgICAxN1x0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLlRhc2tTZXJ2aWNlO1xuICAgIDE4XHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlNjaGVkdWxlVm87XG4gICAgMTlcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIudm8uVGFza1ZvO1xuICAgIDIwXHRpbXBvcnQgY29tLmZhc3RlcnhtbC5qYWNrc29uLmRhdGFiaW5kLk9iamVjdE1hcHBlcjtcbiAgICAyMVx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuQmVhblV0aWxzO1xuICAgIDIyXHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5iZWFucy5mYWN0b3J5LmFubm90YXRpb24uQXV0b3dpcmVkO1xuICAgIDIzXHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zY2hlZHVsaW5nLmFubm90YXRpb24uU2NoZWR1bGVkO1xuICAgIDI0XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay5zdGVyZW90eXBlLlNlcnZpY2U7XG4gICAgMjVcdGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLnRyYW5zYWN0aW9uLmFubm90YXRpb24uVHJhbnNhY3Rpb25hbDtcbiAgICAyNlx0XG4gICAgMjdcdGltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcbiAgICAyOFx0aW1wb3J0IGphdmEudGltZS50ZW1wb3JhbC5DaHJvbm9Vbml0O1xuICAgIDI5XHRpbXBvcnQgamF2YS51dGlsLio7XG4gICAgMzBcdGltcG9ydCBqYXZhLnV0aWwuc3RyZWFtLkNvbGxlY3RvcnM7XG4gICAgMzFcdGltcG9ydCBqYXZhLnV0aWwuc3RyZWFtLlN0cmVhbTtcbiAgICAzMlx0aW1wb3J0IGphdmEudXRpbC5IYXNoTWFwO1xuICAgIDMzXHRpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiAgICAzNFx0aW1wb3J0IG9yZy5zbGY0ai5Mb2dnZXI7XG4gICAgMzVcdGltcG9ydCBvcmcuc2xmNGouTG9nZ2VyRmFjdG9yeTtcbiAgICAzNlx0aW1wb3J0IGphdmEubWF0aC5CaWdEZWNpbWFsO1xuICAgIDM3XHRpbXBvcnQgamF2YS50aW1lLkR1cmF0aW9uO1xuICAgIDM4XHRcbiAgICAzOVx0LyoqXG4gICAgNDBcdCAqIDxwPlxuICAgIDQxXHQgKiDml6XnqIvlronmjpLooagg5pyN5Yqh5a6e546w57G7XG4gICAgNDJcdCAqIDwvcD5cbiAgICA0M1x0ICovXG4gICAgNDRcdEBTZXJ2aWNlXG4gICAgNDVcdHB1YmxpYyBjbGFzcyBTY2hlZHVsZVNlcnZpY2VJbXBsIGV4dGVuZHMgU2VydmljZUltcGw8U2NoZWR1bGVNYXBwZXIsIFNjaGVkdWxlPiBpbXBsZW1lbnRzIFNjaGVkdWxlU2VydmljZSB7XG4gICAgNDZcdFxuICAgIDQ3XHQgICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgTG9nZ2VyIGxvZyA9IExvZ2dlckZhY3RvcnkuZ2V0TG9nZ2VyKFNjaGVkdWxlU2VydmljZUltcGwuY2xhc3MpO1xuICAgIDQ4XHRcbiAgICA0OVx0ICAgIEBBdXRvd2lyZWRcbiAgICA1MFx0ICAgIHByaXZhdGUgU2NoZWR1bGVNYXBwZXIgc2NoZWR1bGVNYXBwZXI7XG4gICAgNTFcdFxuICAgIDUyXHQgICAgQEF1dG93aXJlZFxuICAgIDUzXHQgICAgcHJpdmF0ZSBUYXNrU2VydmljZSB0YXNrU2VydmljZTtcbiAgICA1NFx0XG4gICAgNTVcdCAgICBAQXV0b3dpcmVkXG4gICAgNTZcdCAgICBwcml2YXRlIE5vdGlmaWNhdGlvblNlcnZpY2Ugbm90aWZpY2F0aW9uU2VydmljZTtcbiAgICA1N1x0XG4gICAgNThcdCAgICBAQXV0b3dpcmVkXG4gICAgNTlcdCAgICBwcml2YXRlIFVtc0FkbWluU2VydmljZSB1c2VyU2VydmljZTtcbiAgICA2MFx0XG4gICAgNjFcdCAgICBAQXV0b3dpcmVkXG4gICAgNjJcdCAgICBwcml2YXRlIFJlc291cmNlc1NlcnZpY2UgcmVzb3VyY2VzU2VydmljZTtcbiAgICA2M1x0XG4gICAgNjRcdCAgICBAT3ZlcnJpZGVcbiAgICA2NVx0ICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaChJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIEludGVnZXIgc3RhdHVzKSB7XG4gICAgNjZcdCAgICAgICAgLy8g5rOo5oSP77ya6K+l5pa55rOV6YCa6L+Hc2VhcmNoU2NoZWR1bGXmn6Xor6LvvIzlnKhTUUzkuK3lt7LliqDlhaVwYXJlbnRfaWQgSVMgTlVMTOadoeS7tu+8jOehruS/neWPquaYvuekuueItuaXpeeoi1xuICAgIDY3XHQgICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gcGFnZSA9IG5ldyBQYWdlPD4ocGFnZU51bSwgcGFnZVNpemUpO1xuICAgIDY4XHQgICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gcGFnZVJlc3VsdCA9IHNjaGVkdWxlTWFwcGVyLnNlYXJjaFNjaGVkdWxlKHBhZ2UsIHNlYXJjaEtleSwgc3RhdHVzKTtcbiAgICA2OVx0ICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlVm9zID0gIHBhZ2VSZXN1bHQuZ2V0UmVjb3JkcygpO1xuICAgIDcwXHRcbiAgICA3MVx0ICAgICAgICAvLyDmn6Xor6LmiYDmnInku7vliqHvvIznlKjkuo7lhrLnqoHmo4DmtYtcbiAgICA3Mlx0ICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IGFsbFNjaGVkdWxlcyA9IHNjaGVkdWxlTWFwcGVyLmZpbmRBbGxTY2hlZHVsZXMoKTtcbiAgICA3M1x0XG4gICAgNzRcdCAgICAgICAgLy8g5Yid5aeL5YyWIE9iamVjdE1hcHBlciDnlKjkuo7op6PmnpAgSlNPTiDlrZfnrKbkuLJcbiAgICA3NVx0ICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgIDc2XHRcbiAgICA3N1x0ICAgICAgICAvLyDojrflj5blvZPliY3ml7bpl7RcbiAgICA3OFx0ICAgICAgICBMb2NhbERhdGVUaW1lIG5vdyA9IExvY2FsRGF0ZVRpbWUubm93KCk7XG4gICAgNzlcdFxuICAgIDgwXHQgICAgICAgIC8vIOmBjeWOhuavj+S4quS7u+WKoe+8jOajgOa1i+WGsueqgeWSjOaIquatouaXtumXtFxuICAgIDgxXHQgICAgICAgIGZvciAoU2NoZWR1bGVWbyBjdXJyZW50U2NoZWR1bGUgOiBzY2hlZHVsZVZvcykge1xuICAgIDgyXHQgICAgICAgICAgICAvLyDmo4Dmn6Xml6XnqIvnu5PmnZ/ml7bpl7TmmK/lkKblt7Lov4fmnJ9cbiAgICA4M1x0ICAgICAgICAgICAgaWYgKGN1cnJlbnRTY2hlZHVsZS5nZXRFbmRUaW1lKCkgIT0gbnVsbCAmJlxuICAgIDg0XHQgICAgICAgICAgICAgICAgY3VycmVudFNjaGVkdWxlLmdldEVuZFRpbWUoKS5pc0JlZm9yZShub3cpICYmXG4gICAgODVcdCAgICAgICAgICAgICAgICAoY3VycmVudFNjaGVkdWxlLmdldFN0YXR1cygpID09IG51bGwgfHwgY3VycmVudFNjaGVkdWxlLmdldFN0YXR1cygpICE9IDQpKSB7XG4gICAgODZcdCAgICAgICAgICAgICAgICAvLyDlpoLmnpznu5PmnZ/ml7bpl7Tlt7Lov4fmnJ/kuJTkuI3mmK/lt7LlrozmiJDnirbmgIHvvIzmm7TmlrDkuLrlt7LpgL7mnJ/nirbmgIFcbiAgICA4N1x0ICAgICAgICAgICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoY3VycmVudFNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgICA4OFx0ICAgICAgICAgICAgICAgIGlmICh0YXNrICE9IG51bGwpIHtcbiAgICA4OVx0ICAgICAgICAgICAgICAgICAgICB0YXNrLnNldFN0YXR1cyg1KTsgLy8g5L+u5pS55Lu75Yqh54q25oCB5Li65bey6YC+5pyfXG4gICAgOTBcdCAgICAgICAgICAgICAgICAgICAgdGFza1NlcnZpY2UudXBkYXRlQnlJZCh0YXNrKTtcbiAgICA5MVx0ICAgICAgICAgICAgICAgIH1cbiAgICA5Mlx0ICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5zZXRTdGF0dXMoNSk7IC8vIOWQjOatpeS/ruaUueW9k+WJjeaXpeeoi+inhuWbvuWvueixoeeahOeKtuaAgVxuICAgIDkzXHQgICAgICAgICAgICB9XG4gICAgOTRcdFxuICAgIDk1XHQgICAgICAgICAgICAvLyDojrflj5blvZPliY3ku7vliqHnmoTml7bpl7TojIPlm7RcbiAgICA5Nlx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBzdGFydFRpbWUgPSBjdXJyZW50U2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCk7XG4gICAgOTdcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgZW5kVGltZSA9IGN1cnJlbnRTY2hlZHVsZS5nZXRFbmRUaW1lKCk7XG4gICAgOThcdFxuICAgIDk5XHQgICAgICAgICAgICAvLyDlpoLmnpzlvIDlp4vmiJbnu5PmnZ/ml7bpl7TkuLrnqbrvvIzot7Pov4flhrLnqoHmo4DmtYtcbiAgIDEwMFx0ICAgICAgICAgICAgaWYgKHN0YXJ0VGltZSA9PSBudWxsIHx8IGVuZFRpbWUgPT0gbnVsbCkge1xuICAgMTAxXHQgICAgICAgICAgICAgICAgY3VycmVudFNjaGVkdWxlLnNldEhhc0NvbmZsaWN0KGZhbHNlKTtcbiAgIDEwMlx0ICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5zZXRDb25mbGljdFNjaGVkdWxlSWRzKFwiXCIpO1xuICAgMTAzXHQgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAxMDRcdCAgICAgICAgICAgIH1cbiAgIDEwNVx0XG4gICAxMDZcdCAgICAgICAgICAgIC8vIOW9k+WJjeS7u+WKoeeahOeUqOaIt+WSjOi1hOa6kOaVsOaNrlxuICAgMTA3XHQgICAgICAgICAgICBTZXQ8TG9uZz4gY3VycmVudFVzZXJJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KGN1cnJlbnRTY2hlZHVsZS5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMTA4XHQgICAgICAgICAgICBTZXQ8TG9uZz4gY3VycmVudFJlc291cmNlSWRzID0gcGFyc2VKc29uQXJyYXlUb1NldChjdXJyZW50U2NoZWR1bGUuZ2V0UmVzb3VyY2VzRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMTA5XHRcbiAgIDExMFx0ICAgICAgICAgICAgLy8g5Yay56qB55qE5Lu75YqhIElEIOWIl+ihqFxuICAgMTExXHQgICAgICAgICAgICBMaXN0PExvbmc+IGNvbmZsaWN0U2NoZWR1bGVJZHMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDExMlx0XG4gICAxMTNcdCAgICAgICAgICAgIC8vIOmBjeWOhuaJgOacieS7u+WKoe+8jOajgOa1i+WGsueqgVxuICAgMTE0XHQgICAgICAgICAgICBmb3IgKFNjaGVkdWxlVm8gb3RoZXJTY2hlZHVsZSA6IGFsbFNjaGVkdWxlcykge1xuICAgMTE1XHQgICAgICAgICAgICAgICAgaWYgKCFjdXJyZW50U2NoZWR1bGUuZ2V0SWQoKS5lcXVhbHMob3RoZXJTY2hlZHVsZS5nZXRJZCgpKSkgeyAvLyDmjpLpmaToh6rouqtcbiAgIDExNlx0ICAgICAgICAgICAgICAgICAgICAvLyDlhbbku5bku7vliqHnmoTml7bpl7TojIPlm7RcbiAgIDExN1x0ICAgICAgICAgICAgICAgICAgICBMb2NhbERhdGVUaW1lIG90aGVyU3RhcnRUaW1lID0gb3RoZXJTY2hlZHVsZS5nZXRTdGFydFRpbWUoKTtcbiAgIDExOFx0ICAgICAgICAgICAgICAgICAgICBMb2NhbERhdGVUaW1lIG90aGVyRW5kVGltZSA9IG90aGVyU2NoZWR1bGUuZ2V0RW5kVGltZSgpO1xuICAgMTE5XHRcbiAgIDEyMFx0ICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzlhbbku5bku7vliqHnmoTlvIDlp4vmiJbnu5PmnZ/ml7bpl7TkuLrnqbrvvIzot7Pov4fmr5TovoNcbiAgIDEyMVx0ICAgICAgICAgICAgICAgICAgICBpZiAob3RoZXJTdGFydFRpbWUgPT0gbnVsbCB8fCBvdGhlckVuZFRpbWUgPT0gbnVsbCkge1xuICAgMTIyXHQgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgIDEyM1x0ICAgICAgICAgICAgICAgICAgICB9XG4gICAxMjRcdFxuICAgMTI1XHQgICAgICAgICAgICAgICAgICAgIC8vIOajgOa1i+aXtumXtOiMg+WbtOaYr+WQpumHjeWPoFxuICAgMTI2XHQgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gaXNUaW1lT3ZlcmxhcCA9ICEoZW5kVGltZS5pc0JlZm9yZShvdGhlclN0YXJ0VGltZSkgfHwgc3RhcnRUaW1lLmlzQWZ0ZXIob3RoZXJFbmRUaW1lKSk7XG4gICAxMjdcdFxuICAgMTI4XHQgICAgICAgICAgICAgICAgICAgIGlmIChpc1RpbWVPdmVybGFwKSB7XG4gICAxMjlcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFtuS7luS7u+WKoeeahOeUqOaIt+WSjOi1hOa6kOaVsOaNrlxuICAgMTMwXHQgICAgICAgICAgICAgICAgICAgICAgICBTZXQ8TG9uZz4gb3RoZXJVc2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldChvdGhlclNjaGVkdWxlLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAxMzFcdCAgICAgICAgICAgICAgICAgICAgICAgIFNldDxMb25nPiBvdGhlclJlc291cmNlSWRzID0gcGFyc2VKc29uQXJyYXlUb1NldChvdGhlclNjaGVkdWxlLmdldFJlc291cmNlc0RhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgIDEzMlx0XG4gICAxMzNcdCAgICAgICAgICAgICAgICAgICAgICAgIC8vIOajgOa1i+eUqOaIt+aIlui1hOa6kOaYr+WQpuacieS6pOmbhlxuICAgMTM0XHQgICAgICAgICAgICAgICAgICAgICAgICBib29sZWFuIGhhc1VzZXJDb25mbGljdCA9ICFDb2xsZWN0aW9ucy5kaXNqb2ludChjdXJyZW50VXNlcklkcywgb3RoZXJVc2VySWRzKTtcbiAgIDEzNVx0ICAgICAgICAgICAgICAgICAgICAgICAgYm9vbGVhbiBoYXNSZXNvdXJjZUNvbmZsaWN0ID0gIUNvbGxlY3Rpb25zLmRpc2pvaW50KGN1cnJlbnRSZXNvdXJjZUlkcywgb3RoZXJSZXNvdXJjZUlkcyk7XG4gICAxMzZcdFxuICAgMTM3XHQgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGFzVXNlckNvbmZsaWN0IHx8IGhhc1Jlc291cmNlQ29uZmxpY3QpIHtcbiAgIDEzOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWtmOWcqOWGsueqge+8jOiusOW9leWGsueqgeS7u+WKoSBJRFxuICAgMTM5XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RTY2hlZHVsZUlkcy5hZGQob3RoZXJTY2hlZHVsZS5nZXRJZCgpKTtcbiAgIDE0MFx0ICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgMTQxXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDE0Mlx0ICAgICAgICAgICAgICAgIH1cbiAgIDE0M1x0ICAgICAgICAgICAgfVxuICAgMTQ0XHRcbiAgIDE0NVx0ICAgICAgICAgICAgLy8g6K6+572u5Yay56qB5L+h5oGv5Yiw5b2T5YmN5Lu75Yqh5a+56LGh5LitXG4gICAxNDZcdCAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5zZXRIYXNDb25mbGljdCghY29uZmxpY3RTY2hlZHVsZUlkcy5pc0VtcHR5KCkpO1xuICAgMTQ3XHQgICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUuc2V0Q29uZmxpY3RTY2hlZHVsZUlkcyhjb25mbGljdFNjaGVkdWxlSWRzLmlzRW1wdHkoKSA/IFwiXCIgOiBjb25mbGljdFNjaGVkdWxlSWRzLnN0cmVhbSgpLm1hcChTdHJpbmc6OnZhbHVlT2YpLmNvbGxlY3QoQ29sbGVjdG9ycy5qb2luaW5nKFwiLFwiKSkpO1xuICAgMTQ4XHQgICAgICAgIH1cbiAgIDE0OVx0ICAgICAgICBwYWdlUmVzdWx0LnNldFJlY29yZHMoc2NoZWR1bGVWb3MpO1xuICAgMTUwXHRcbiAgIDE1MVx0ICAgICAgICByZXR1cm4gcGFnZVJlc3VsdDtcbiAgIDE1Mlx0ICAgIH1cbiAgIDE1M1x0XG4gICAxNTRcdCAgICAvLyDovoXliqnmlrnms5XvvJrlsIYgSlNPTiDmlbDnu4TlrZfnrKbkuLLop6PmnpDkuLogU2V0PExvbmc+XG4gICAxNTVcdCAgICBwcml2YXRlIFNldDxMb25nPiBwYXJzZUpzb25BcnJheVRvU2V0KFN0cmluZyBqc29uQXJyYXksIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIpIHtcbiAgIDE1Nlx0ICAgICAgICB0cnkge1xuICAgMTU3XHQgICAgICAgICAgICBpZiAoanNvbkFycmF5ID09IG51bGwgfHwganNvbkFycmF5LmlzRW1wdHkoKSkge1xuICAgMTU4XHQgICAgICAgICAgICAgICAgcmV0dXJuIENvbGxlY3Rpb25zLmVtcHR5U2V0KCk7XG4gICAxNTlcdCAgICAgICAgICAgIH1cbiAgIDE2MFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBIYXNoU2V0PD4oQXJyYXlzLmFzTGlzdChvYmplY3RNYXBwZXIucmVhZFZhbHVlKGpzb25BcnJheSwgTG9uZ1tdLmNsYXNzKSkpO1xuICAgMTYxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAxNjJcdCAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7XG4gICAxNjNcdCAgICAgICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy5lbXB0eVNldCgpO1xuICAgMTY0XHQgICAgICAgIH1cbiAgIDE2NVx0ICAgIH1cbiAgIDE2Nlx0XG4gICAxNjdcdCAgICBAT3ZlcnJpZGVcbiAgIDE2OFx0ICAgIEBUcmFuc2FjdGlvbmFsKHJvbGxiYWNrRm9yID0gRXhjZXB0aW9uLmNsYXNzKVxuICAgMTY5XHQgICAgcHVibGljIEJvb2xlYW4gY3JlYXRlKFNjaGVkdWxlIHNjaGVkdWxlKSB7XG4gICAxNzBcdCAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAxNzFcdCAgICAgICAgaWYgKHRhc2sgPT0gbnVsbCkge1xuICAgMTcyXHQgICAgICAgICAgICBsb2cuZXJyb3IoXCLml6Dms5XliJvlu7rml6XnqIvvvIzku7vliqFJRCB7fSDkuI3lrZjlnKhcIiwgc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgMTczXHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAxNzRcdCAgICAgICAgfVxuICAgMTc1XHQgICAgICAgIFxuICAgMTc2XHQgICAgICAgIC8vIOiuvue9rue7k+adn+aXtumXtO+8jOWmguaenOacquiuvue9ruWImeiHquWKqOagueaNruS7u+WKoeiAl+aXtuiuoeeul1xuICAgMTc3XHQgICAgICAgIGlmIChzY2hlZHVsZS5nZXRFbmRUaW1lKCkgPT0gbnVsbCAmJiB0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgIDE3OFx0ICAgICAgICAgICAgLy8g5qC55o2u5Lu75Yqh6aKE5Lyw5pe26Ze06K6+572u57uT5p2f5pe26Ze0XG4gICAxNzlcdCAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkucGx1c01pbnV0ZXModGFzay5nZXRUaW1lU3BlbmQoKSkpO1xuICAgMTgwXHQgICAgICAgIH0gZWxzZSBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpID09IG51bGwpIHtcbiAgIDE4MVx0ICAgICAgICAgICAgLy8g6buY6K6k6K6+572u57uT5p2f5pe26Ze05Li65byA5aeL5pe26Ze05ZCOMeWwj+aXtlxuICAgMTgyXHQgICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNIb3VycygxKSk7XG4gICAxODNcdCAgICAgICAgfVxuICAgMTg0XHRcbiAgIDE4NVx0ICAgICAgICAvLyDop6PmnpDku7vliqHlhbPogZTnmoTnlKjmiLdJRFxuICAgMTg2XHQgICAgICAgIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIgPSBuZXcgT2JqZWN0TWFwcGVyKCk7XG4gICAxODdcdCAgICAgICAgU2V0PExvbmc+IHVzZXJJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgIDE4OFx0ICAgICAgICBcbiAgIDE4OVx0ICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSB0cnVlO1xuICAgMTkwXHQgICAgICAgIFxuICAgMTkxXHQgICAgICAgIC8vIOS/neWtmOWNleadoeS4u+aXpeeoi1xuICAgMTkyXHQgICAgICAgIHN1Y2Nlc3MgPSB0aGlzLnNhdmUoc2NoZWR1bGUpO1xuICAgMTkzXHQgICAgICAgIExvbmcgbWFpblNjaGVkdWxlSWQgPSBzY2hlZHVsZS5nZXRJZCgpO1xuICAgMTk0XHQgICAgICAgIFxuICAgMTk1XHQgICAgICAgIC8vIOWmguaenOacieWPguS4juS6uuWRmO+8jOS4uuavj+S4queUqOaIt+WIm+W7uumAmuefpVxuICAgMTk2XHQgICAgICAgIGlmICghdXNlcklkcy5pc0VtcHR5KCkgJiYgc3VjY2Vzcykge1xuICAgMTk3XHQgICAgICAgICAgICBMaXN0PE5vdGlmaWNhdGlvbj4gbm90aWZpY2F0aW9ucyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgMTk4XHQgICAgICAgICAgICBcbiAgIDE5OVx0ICAgICAgICAgICAgZm9yIChMb25nIHVzZXJJZCA6IHVzZXJJZHMpIHtcbiAgIDIwMFx0ICAgICAgICAgICAgICAgIC8vIOi3s+i/h+euoeeQhuWRmO+8iOWBh+iuvklE5Li6MeeahOaYr+euoeeQhuWRmO+8iVxuICAgMjAxXHQgICAgICAgICAgICAgICAgaWYgKHVzZXJJZCA9PSAxKSBjb250aW51ZTtcbiAgIDIwMlx0ICAgICAgICAgICAgICAgIFxuICAgMjAzXHQgICAgICAgICAgICAgICAgLy8g5Yib5bu655So5oi36YCa55+lXG4gICAyMDRcdCAgICAgICAgICAgICAgICBOb3RpZmljYXRpb24gbm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbigpO1xuICAgMjA1XHQgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFNjaGVkdWxlSWQobWFpblNjaGVkdWxlSWQpOyAvLyDkvb/nlKjkuLvml6XnqItJRFxuICAgMjA2XHQgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFVzZXJJZCh1c2VySWQpO1xuICAgMjA3XHQgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldE1lc3NhZ2UoXCLmgqjmnInmlrDnmoTku7vliqHlronmjpLvvIzor7flj4rml7bmn6XnnItcIik7XG4gICAyMDhcdCAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmFkZChub3RpZmljYXRpb24pO1xuICAgMjA5XHQgICAgICAgICAgICB9XG4gICAyMTBcdCAgICAgICAgICAgIFxuICAgMjExXHQgICAgICAgICAgICAvLyDmibnph4/kv53lrZjpgJrnn6VcbiAgIDIxMlx0ICAgICAgICAgICAgaWYgKCFub3RpZmljYXRpb25zLmlzRW1wdHkoKSkge1xuICAgMjEzXHQgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zYXZlQmF0Y2gobm90aWZpY2F0aW9ucyk7XG4gICAyMTRcdCAgICAgICAgICAgIH1cbiAgIDIxNVx0ICAgICAgICB9XG4gICAyMTZcdFxuICAgMjE3XHQgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgMjE4XHQgICAgfVxuICAgMjE5XHRcbiAgIDIyMFx0ICAgIEBPdmVycmlkZVxuICAgMjIxXHQgICAgcHVibGljIGJvb2xlYW4gdXBkYXRlU2NoZWR1bGUoU2NoZWR1bGUgc2NoZWR1bGVVcGRhdGVzKSB7XG4gICAyMjJcdCAgICAgICAgLy8gMS4gRmV0Y2ggdGhlIGV4aXN0aW5nIHNjaGVkdWxlIHVzaW5nIHRoZSBJRCBmcm9tIHNjaGVkdWxlVXBkYXRlc1xuICAgMjIzXHQgICAgICAgIFNjaGVkdWxlIGV4aXN0aW5nU2NoZWR1bGUgPSB0aGlzLmdldEJ5SWQoc2NoZWR1bGVVcGRhdGVzLmdldElkKCkpO1xuICAgMjI0XHQgICAgICAgIGlmIChleGlzdGluZ1NjaGVkdWxlID09IG51bGwpIHtcbiAgIDIyNVx0ICAgICAgICAgICAgbG9nLmVycm9yKFwi6K+V5Zu+5pu05paw5LiN5a2Y5Zyo55qE5pel56iLOiBJRCB7fVwiLCBzY2hlZHVsZVVwZGF0ZXMuZ2V0SWQoKSk7XG4gICAyMjZcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTsgLy8gT3IgdGhyb3cgYW4gZXhjZXB0aW9uXG4gICAyMjdcdCAgICAgICAgfVxuICAgMjI4XHRcbiAgIDIyOVx0ICAgICAgICAvLyAyLiBGZXRjaCB0aGUgYXNzb2NpYXRlZCB0YXNrIHVzaW5nIHRoZSB0YXNrSWQgZnJvbSB0aGUgKmV4aXN0aW5nKiBzY2hlZHVsZVxuICAgMjMwXHQgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XG4gICAyMzFcdCAgICAgICAgaWYgKGV4aXN0aW5nU2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkgeyAvLyBDaGVjayBpZiB0YXNrSWQgaXMgbm90IG51bGwgYmVmb3JlIGZldGNoaW5nXG4gICAyMzJcdCAgICAgICAgICAgICB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChleGlzdGluZ1NjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgIDIzM1x0ICAgICAgICB9XG4gICAyMzRcdFxuICAgMjM1XHQgICAgICAgIGlmICh0YXNrID09IG51bGwgJiYgZXhpc3RpbmdTY2hlZHVsZS5nZXRUYXNrSWQoKSAhPSBudWxsKSB7IC8vIExvZyBpZiB0YXNrIG5vdCBmb3VuZCBidXQgSUQgZXhpc3RlZFxuICAgMjM2XHQgICAgICAgICAgICAgbG9nLndhcm4oXCLml6XnqIsge30g5YWz6IGU55qE5Lu75YqhIHt9IOacquaJvuWIsFwiLCBleGlzdGluZ1NjaGVkdWxlLmdldElkKCksIGV4aXN0aW5nU2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgMjM3XHQgICAgICAgIH1cbiAgIDIzOFx0XG4gICAyMzlcdCAgICAgICAgLy8gMy4gVXBkYXRlIHN0YXJ0VGltZSBhbmQgZW5kVGltZSBmcm9tIHRoZSBzY2hlZHVsZVVwZGF0ZXMgb2JqZWN0XG4gICAyNDBcdCAgICAgICAgZXhpc3RpbmdTY2hlZHVsZS5zZXRTdGFydFRpbWUoc2NoZWR1bGVVcGRhdGVzLmdldFN0YXJ0VGltZSgpKTtcbiAgIDI0MVx0ICAgICAgICBleGlzdGluZ1NjaGVkdWxlLnNldEVuZFRpbWUoc2NoZWR1bGVVcGRhdGVzLmdldEVuZFRpbWUoKSk7IC8vIFVzZSB0aGUgdmFsdWUgcHJvdmlkZWQgYnkgdGhlIGNsaWVudFxuICAgMjQyXHRcbiAgIDI0M1x0ICAgICAgICAvLyA0LiBSZWNhbGN1bGF0ZSBlbmRUaW1lIG9ubHkgaWYgaXQgd2Fzbid0IHByb3ZpZGVkIEFORCB0YXNrIGV4aXN0cyBhbmQgaGFzIHRpbWVTcGVuZFxuICAgMjQ0XHQgICAgICAgIGlmIChleGlzdGluZ1NjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsICYmIHRhc2sgIT0gbnVsbCAmJiB0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgIDI0NVx0ICAgICAgICAgICAgLy8g5qC55o2u5Lu75Yqh6aKE5Lyw5pe26Ze06K6+572u57uT5p2f5pe26Ze0XG4gICAyNDZcdCAgICAgICAgICAgIGV4aXN0aW5nU2NoZWR1bGUuc2V0RW5kVGltZShleGlzdGluZ1NjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNNaW51dGVzKHRhc2suZ2V0VGltZVNwZW5kKCkpKTtcbiAgIDI0N1x0ICAgICAgICB9IGVsc2UgaWYgKGV4aXN0aW5nU2NoZWR1bGUuZ2V0RW5kVGltZSgpID09IG51bGwpIHtcbiAgIDI0OFx0ICAgICAgICAgICAgLy8g6buY6K6k6K6+572u57uT5p2f5pe26Ze05Li65byA5aeL5pe26Ze05ZCOMeWwj+aXtlxuICAgMjQ5XHQgICAgICAgICAgICAgZXhpc3RpbmdTY2hlZHVsZS5zZXRFbmRUaW1lKGV4aXN0aW5nU2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkucGx1c0hvdXJzKDEpKTtcbiAgIDI1MFx0ICAgICAgICB9XG4gICAyNTFcdFxuICAgMjUyXHQgICAgICAgIC8vIDUuIFNhdmUgdGhlIHVwZGF0ZWQgZXhpc3RpbmdTY2hlZHVsZVxuICAgMjUzXHQgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IHRoaXMudXBkYXRlQnlJZChleGlzdGluZ1NjaGVkdWxlKTtcbiAgIDI1NFx0XG4gICAyNTVcdCAgICAgICAgLy8gNi4gU2VuZCBub3RpZmljYXRpb24gb25seSBpZiB1cGRhdGUgd2FzIHN1Y2Nlc3NmdWwgQU5EIHRhc2sgZXhpc3RzXG4gICAyNTZcdCAgICAgICAgaWYgKHN1Y2Nlc3MgJiYgdGFzayAhPSBudWxsKSB7XG4gICAyNTdcdCAgICAgICAgICAgIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIgPSBuZXcgT2JqZWN0TWFwcGVyKCk7XG4gICAyNThcdCAgICAgICAgICAgIC8vIFVzZSB0YXNrLmdldFVzZXJEYXRhKCkgd2hpY2ggd2UgZmV0Y2hlZCBlYXJsaWVyXG4gICAyNTlcdCAgICAgICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAyNjBcdCAgICAgICAgICAgIGlmICghdXNlcklkcy5pc0VtcHR5KCkpIHsgLy8gQ2hlY2sgaWYgdXNlcklkcyBpcyBub3QgZW1wdHkgYmVmb3JlIGNyZWF0aW5nIG5vdGlmaWNhdGlvbnNcbiAgIDI2MVx0ICAgICAgICAgICAgICAgIGZpbmFsIFRhc2sgZmluYWxUYXNrID0gdGFzazsgLy8gQ3JlYXRlIGEgZmluYWwgY29weVxuICAgMjYyXHQgICAgICAgICAgICAgICAgTGlzdDxOb3RpZmljYXRpb24+IG5vdGlmaWNhdGlvbnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDI2M1x0ICAgICAgICAgICAgICAgIHVzZXJJZHMuZm9yRWFjaChpZCAtPiB7XG4gICAyNjRcdCAgICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oKTtcbiAgIDI2NVx0ICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0U2NoZWR1bGVJZChleGlzdGluZ1NjaGVkdWxlLmdldElkKCkpOyAvLyBVc2UgZXhpc3RpbmdTY2hlZHVsZS5nZXRJZCgpXG4gICAyNjZcdCAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFVzZXJJZChpZCk7XG4gICAyNjdcdCAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFR5cGUoMik7IC8vIOmAmuefpeexu+WeiyAyOiDml6XnqIvlj5jmm7RcbiAgIDI2OFx0ICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0TWVzc2FnZShcIuaCqOWPguS4jueahOS7u+WKoSBcXFwiXCIgKyBmaW5hbFRhc2suZ2V0VGl0bGUoKSArIFwiXFxcIiDmiafooYzml7bpl7Tlt7Lmm7TmlrBcIik7IC8vIFVzZSB0aGUgZmluYWwgY29weVxuICAgMjY5XHQgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuYWRkKG5vdGlmaWNhdGlvbik7XG4gICAyNzBcdCAgICAgICAgICAgICAgICB9KTtcbiAgIDI3MVx0ICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuICAgMjcyXHQgICAgICAgICAgICB9XG4gICAyNzNcdCAgICAgICAgfSBlbHNlIGlmIChzdWNjZXNzICYmIHRhc2sgPT0gbnVsbCkge1xuICAgMjc0XHQgICAgICAgICAgICAgbG9nLndhcm4oXCLml6XnqIsge30g5pu05paw5oiQ5Yqf77yM5L2G5peg5rOV5Y+R6YCB6YCa55+l77yM5Zug5Li65YWz6IGU5Lu75Yqh5LiN5a2Y5ZyoXCIsIGV4aXN0aW5nU2NoZWR1bGUuZ2V0SWQoKSk7XG4gICAyNzVcdCAgICAgICAgfVxuICAgMjc2XHRcbiAgIDI3N1x0ICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgIDI3OFx0ICAgIH1cbiAgIDI3OVx0XG4gICAyODBcdCAgICAvKipcbiAgIDI4MVx0ICAgICAqIOavj+malDXliIbpkp/mo4Dmn6XkuIDmrKHvvIzlj5HpgIHku7vliqHmj5DphpJcbiAgIDI4Mlx0ICAgICAqL1xuICAgMjgzXHQgICAgQFNjaGVkdWxlZChjcm9uID0gXCIwICovNSAqICogKiA/XCIpXG4gICAyODRcdCAgICBwdWJsaWMgdm9pZCBjaGVja0FuZFNlbmRSZW1pbmRlcnMoKSB7XG4gICAyODVcdCAgICAgICAgLy8g6I635Y+W5b2T5YmN5pe26Ze0XG4gICAyODZcdCAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgMjg3XHRcbiAgIDI4OFx0ICAgICAgICAvLyDojrflj5bmiYDmnInku7vliqFcbiAgIDI4OVx0ICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gdGFza1NlcnZpY2UubGlzdCgpO1xuICAgMjkwXHRcbiAgIDI5MVx0ICAgICAgICBmb3IgKFRhc2sgdGFzayA6IHRhc2tzKSB7XG4gICAyOTJcdCAgICAgICAgICAgIC8vIOWmguaenOiuvue9ruS6huaPkOmGkuaXtumXtO+8jOW5tuS4lOaPkOmGkuaXtumXtOW3suWIsOaIluWNs+WwhuWIsOadpe+8iDXliIbpkp/lhoXvvIlcbiAgIDI5M1x0ICAgICAgICAgICAgaWYgKHRhc2suZ2V0UmVtaW5kZXJUaW1lKCkgIT0gbnVsbCAmJlxuICAgMjk0XHQgICAgICAgICAgICAgICAgQ2hyb25vVW5pdC5NSU5VVEVTLmJldHdlZW4obm93LCB0YXNrLmdldFJlbWluZGVyVGltZSgpKSA8PSA1ICYmXG4gICAyOTVcdCAgICAgICAgICAgICAgICBDaHJvbm9Vbml0Lk1JTlVURVMuYmV0d2Vlbihub3csIHRhc2suZ2V0UmVtaW5kZXJUaW1lKCkpID49IDApIHtcbiAgIDI5Nlx0XG4gICAyOTdcdCAgICAgICAgICAgICAgICAvLyDmn6Xmib7mraTku7vliqHlhbPogZTnmoTml6XnqItcbiAgIDI5OFx0ICAgICAgICAgICAgICAgIExpc3Q8U2NoZWR1bGU+IHNjaGVkdWxlcyA9IHRoaXMubGlzdChuZXcgUXVlcnlXcmFwcGVyPFNjaGVkdWxlPigpLmVxKFwidGFza19pZFwiLCB0YXNrLmdldElkKCkpKTtcbiAgIDI5OVx0XG4gICAzMDBcdCAgICAgICAgICAgICAgICAvLyDlpoLmnpzmnInlhbPogZTnmoTml6XnqIvvvIzlj5HpgIHmj5DphpJcbiAgIDMwMVx0ICAgICAgICAgICAgICAgIGlmICghc2NoZWR1bGVzLmlzRW1wdHkoKSkge1xuICAgMzAyXHQgICAgICAgICAgICAgICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gc2NoZWR1bGVzLmdldCgwKTtcbiAgIDMwM1x0XG4gICAzMDRcdCAgICAgICAgICAgICAgICAgICAgLy8g5Y+R6YCB5o+Q6YaSXG4gICAzMDVcdCAgICAgICAgICAgICAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgIDMwNlx0ICAgICAgICAgICAgICAgICAgICBTZXQ8TG9uZz4gdXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQodGFzay5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMzA3XHQgICAgICAgICAgICAgICAgICAgIFxuICAgMzA4XHQgICAgICAgICAgICAgICAgICAgIC8vIOWPquacieeUqOaIt0lE6ZuG5ZCI6Z2e56m65pe25omN5Yib5bu66YCa55+lXG4gICAzMDlcdCAgICAgICAgICAgICAgICAgICAgaWYgKCF1c2VySWRzLmlzRW1wdHkoKSkge1xuICAgMzEwXHQgICAgICAgICAgICAgICAgICAgICAgICBMaXN0PE5vdGlmaWNhdGlvbj4gbm90aWZpY2F0aW9ucyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgMzExXHQgICAgICAgICAgICAgICAgICAgICAgICB1c2VySWRzLmZvckVhY2goaWQgLT4ge1xuICAgMzEyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oKTtcbiAgIDMxM1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRTY2hlZHVsZUlkKHNjaGVkdWxlLmdldElkKCkpO1xuICAgMzE0XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFVzZXJJZChpZCk7XG4gICAzMTVcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0VHlwZSgzKTtcbiAgIDMxNlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRNZXNzYWdlKFwi5oKo5pyJ5Lu75Yqh5Y2z5bCG5byA5aeL77yM6K+35YGa5aW95YeG5aSHXCIpO1xuICAgMzE3XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5hZGQobm90aWZpY2F0aW9uKTtcbiAgIDMxOFx0ICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAzMTlcdCAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgMzIwXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyDlj6rmnInmnInpgJrnn6Xml7bmiY3mibnph4/kv53lrZhcbiAgIDMyMVx0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFub3RpZmljYXRpb25zLmlzRW1wdHkoKSkge1xuICAgMzIyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uU2VydmljZS5zYXZlQmF0Y2gobm90aWZpY2F0aW9ucyk7XG4gICAzMjNcdCAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDMyNFx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAzMjVcdCAgICAgICAgICAgICAgICB9XG4gICAzMjZcdCAgICAgICAgICAgIH1cbiAgIDMyN1x0ICAgICAgICB9XG4gICAzMjhcdCAgICB9XG4gICAzMjlcdFxuICAgMzMwXHQgICAgQE92ZXJyaWRlXG4gICAzMzFcdCAgICBwdWJsaWMgTGlzdDxUYXNrVm8+IGNvbmZsaWN0TGlzdChMb25nIGlkLCBMaXN0PExvbmc+IHNjaGVkdWxlSWRzKSB7XG4gICAzMzJcdCAgICAgICAgLy8g5p+l6K+i5b2T5YmN5Lu75Yqh5ZKM5Yay56qB5Lu75Yqh55qE6K+m57uG5L+h5oGvXG4gICAzMzNcdCAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZXMgPSBzY2hlZHVsZU1hcHBlci5maW5kQnlJZHMoc2NoZWR1bGVJZHMpO1xuICAgMzM0XHRcbiAgIDMzNVx0ICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgMzM2XHRcbiAgIDMzN1x0ICAgICAgICAvLyDojrflj5blvZPliY3ku7vliqHnmoTor6bnu4bkv6Hmga9cbiAgIDMzOFx0Ly8gICAgICAgIFNjaGVkdWxlVm8gY3VycmVudFNjaGVkdWxlID0gc2NoZWR1bGVzLnN0cmVhbSgpXG4gICAzMzlcdC8vICAgICAgICAgICAgICAgIC5maWx0ZXIoc2NoZWR1bGUgLT4gc2NoZWR1bGUuZ2V0SWQoKS5lcXVhbHMoaWQpKVxuICAgMzQwXHQvLyAgICAgICAgICAgICAgICAuZmluZEZpcnN0KClcbiAgIDM0MVx0Ly8gICAgICAgICAgICAgICAgLm9yRWxzZVRocm93KCgpIC0+IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24oXCLlvZPliY3ku7vliqHkuI3lrZjlnKhcIikpO1xuICAgMzQyXHQgICAgICAgIFNjaGVkdWxlIGN1cnJlbnRTY2hlZHVsZSA9IHRoaXMuZ2V0QnlJZChpZCk7XG4gICAzNDNcdCAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChjdXJyZW50U2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgMzQ0XHRcbiAgIDM0NVx0XG4gICAzNDZcdCAgICAgICAgLy8g6Kej5p6Q5b2T5YmN5Lu75Yqh55qE55So5oi35ZKM6LWE5rqQ5pWw5o2uXG4gICAzNDdcdCAgICAgICAgU2V0PExvbmc+IGN1cnJlbnRVc2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAzNDhcdCAgICAgICAgU2V0PExvbmc+IGN1cnJlbnRSZXNvdXJjZUlkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQodGFzay5nZXRSZXNvdXJjZXNEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAzNDlcdFxuICAgMzUwXHQgICAgICAgIC8vIOaehOW7uiBUYXNrVm8g5YiX6KGo77yM5Y+q5YyF5ZCr5Yay56qB55qE55So5oi35ZKM6LWE5rqQ5L+h5oGvXG4gICAzNTFcdCAgICAgICAgcmV0dXJuIHNjaGVkdWxlcy5zdHJlYW0oKVxuICAgMzUyXHQgICAgICAgICAgICAgICAgLm1hcChzY2hlZHVsZSAtPiB7XG4gICAzNTNcdCAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+W5Lu75Yqh5L+h5oGvXG4gICAzNTRcdCAgICAgICAgICAgICAgICAgICAgVGFza1ZvIHRhc2tWbyA9IG5ldyBUYXNrVm8oKTtcbiAgIDM1NVx0ICAgICAgICAgICAgICAgICAgICBCZWFuVXRpbHMuY29weVByb3BlcnRpZXMoc2NoZWR1bGUsIHRhc2tWbyk7XG4gICAzNTZcdFxuICAgMzU3XHQgICAgICAgICAgICAgICAgICAgIC8vIOino+aekOeUqOaIt+WSjOi1hOa6kOaVsOaNrlxuICAgMzU4XHQgICAgICAgICAgICAgICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldChzY2hlZHVsZS5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMzU5XHRcbiAgIDM2MFx0ICAgICAgICAgICAgICAgICAgICAvLyDorqHnrpfkuI7lvZPliY3ku7vliqHnmoTlhrLnqoHnlKjmiLdcbiAgIDM2MVx0ICAgICAgICAgICAgICAgICAgICBTZXQ8TG9uZz4gY29uZmxpY3RVc2VySWRzID0gbmV3IEhhc2hTZXQ8Pih1c2VySWRzKTtcbiAgIDM2Mlx0ICAgICAgICAgICAgICAgICAgICBjb25mbGljdFVzZXJJZHMucmV0YWluQWxsKGN1cnJlbnRVc2VySWRzKTtcbiAgIDM2M1x0XG4gICAzNjRcdCAgICAgICAgICAgICAgICAgICAgLy8g6I635Y+W5Yay56qB55So5oi355qE6K+m57uG5L+h5oGvXG4gICAzNjVcdCAgICAgICAgICAgICAgICAgICAgTGlzdDxVbXNBZG1pbj4gdXNlckxpc3QgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDM2Nlx0ICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmZsaWN0VXNlcklkcy5pc0VtcHR5KCkpIHtcbiAgIDM2N1x0ICAgICAgICAgICAgICAgICAgICAgICAgdXNlckxpc3QgPSB1c2VyU2VydmljZS5saXN0KG5ldyBRdWVyeVdyYXBwZXI8VW1zQWRtaW4+KCkubGFtYmRhKCkuaW4oVW1zQWRtaW46OmdldElkLCBjb25mbGljdFVzZXJJZHMpKTtcbiAgIDM2OFx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAzNjlcdCAgICAgICAgICAgICAgICAgICAgXG4gICAzNzBcdCAgICAgICAgICAgICAgICAgICAgLy8g6K6+572u5Yay56qB55So5oi3XG4gICAzNzFcdCAgICAgICAgICAgICAgICAgICAgdGFza1ZvLnNldFVzZXJMaXN0KHVzZXJMaXN0KTtcbiAgIDM3Mlx0XG4gICAzNzNcdCAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRhc2tWbztcbiAgIDM3NFx0ICAgICAgICAgICAgICAgIH0pXG4gICAzNzVcdCAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKTtcbiAgIDM3Nlx0ICAgIH1cbiAgIDM3N1x0XG4gICAzNzhcdCAgICBAT3ZlcnJpZGVcbiAgIDM3OVx0ICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNlYXJjaFVzZXIoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIHVzZXJJZCwgSW50ZWdlciBzdGF0dXMpIHtcbiAgIDM4MFx0ICAgICAgICAvLyDms6jmhI/vvJror6Xmlrnms5XpgJrov4dzZWFyY2hVc2VyU2NoZWR1bGXmn6Xor6LvvIzlnKhTUUzkuK3lt7LliqDlhaVwYXJlbnRfaWQgSVMgTk9UIE5VTEzmnaHku7bvvIznoa7kv53nlKjmiLflj6rnnIvliLDlrZDml6XnqItcbiAgIDM4MVx0ICAgICAgICAvLyDliJvlu7rliIbpobXlj4LmlbBcbiAgIDM4Mlx0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgIDM4M1x0ICAgICAgICBcbiAgIDM4NFx0ICAgICAgICAvLyDkvb/nlKjkuJPpl6jnmoTnlKjmiLfml6XnqIvmn6Xor6JcbiAgIDM4NVx0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHVzZXJTY2hlZHVsZVBhZ2UgPSBzY2hlZHVsZU1hcHBlci5zZWFyY2hVc2VyU2NoZWR1bGUocGFnZSwgdXNlcklkLCBzZWFyY2hLZXksIHN0YXR1cyk7XG4gICAzODZcdCAgICAgICAgXG4gICAzODdcdCAgICAgICAgcmV0dXJuIHVzZXJTY2hlZHVsZVBhZ2U7XG4gICAzODhcdCAgICB9XG4gICAzODlcdFxuICAgMzkwXHQgICAgQE92ZXJyaWRlXG4gICAzOTFcdCAgICBwdWJsaWMgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gZ2V0U2NoZWR1bGVzQnlNb250aChTdHJpbmcgeWVhck1vbnRoKSB7XG4gICAzOTJcdCAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZXMgPSBzY2hlZHVsZU1hcHBlci5maW5kU2NoZWR1bGVzQnlNb250aCh5ZWFyTW9udGgpO1xuICAgMzkzXHQgICAgICAgIE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+IHJlc3VsdCA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgIDM5NFx0XG4gICAzOTVcdCAgICAgICAgLy8g5oyJ5pel5pyf5YiG57uEXG4gICAzOTZcdCAgICAgICAgZm9yIChTY2hlZHVsZVZvIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICAzOTdcdCAgICAgICAgICAgIFN0cmluZyBkYXRlID0gc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkudG9Mb2NhbERhdGUoKS50b1N0cmluZygpO1xuICAgMzk4XHQgICAgICAgICAgICBpZiAoIXJlc3VsdC5jb250YWluc0tleShkYXRlKSkge1xuICAgMzk5XHQgICAgICAgICAgICAgICAgcmVzdWx0LnB1dChkYXRlLCBuZXcgQXJyYXlMaXN0PD4oKSk7XG4gICA0MDBcdCAgICAgICAgICAgIH1cbiAgIDQwMVx0ICAgICAgICAgICAgcmVzdWx0LmdldChkYXRlKS5hZGQoc2NoZWR1bGUpO1xuICAgNDAyXHQgICAgICAgIH1cbiAgIDQwM1x0XG4gICA0MDRcdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgIDQwNVx0ICAgIH1cbiAgIDQwNlx0XG4gICA0MDdcdCAgICBAT3ZlcnJpZGVcbiAgIDQwOFx0ICAgIHB1YmxpYyBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiBnZXRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcihTdHJpbmcgeWVhck1vbnRoLCBMb25nIHVzZXJJZCwgYm9vbGVhbiBpc0FkbWluKSB7XG4gICA0MDlcdCAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZXM7XG4gICA0MTBcdFxuICAgNDExXHQgICAgICAgIGlmIChpc0FkbWluKSB7XG4gICA0MTJcdCAgICAgICAgICAgIC8vIOeuoeeQhuWRmOWPquiOt+WPlueItuaXpeeoi++8iFNRTOS4reW3suWKoOWFpXBhcmVudF9pZCBJUyBOVUxM5p2h5Lu277yJXG4gICA0MTNcdCAgICAgICAgICAgIHNjaGVkdWxlcyA9IHNjaGVkdWxlTWFwcGVyLmZpbmRTY2hlZHVsZXNCeU1vbnRoKHllYXJNb250aCk7XG4gICA0MTRcdCAgICAgICAgfSBlbHNlIHtcbiAgIDQxNVx0ICAgICAgICAgICAgLy8g5pmu6YCa55So5oi35Y+q6I635Y+W5a2Q5pel56iL77yIU1FM5Lit5bey5Yqg5YWlcGFyZW50X2lkIElTIE5PVCBOVUxM5p2h5Lu277yJXG4gICA0MTZcdCAgICAgICAgICAgIHNjaGVkdWxlcyA9IHNjaGVkdWxlTWFwcGVyLmZpbmRTY2hlZHVsZXNCeU1vbnRoQW5kVXNlcih5ZWFyTW9udGgsIHVzZXJJZCk7XG4gICA0MTdcdCAgICAgICAgfVxuICAgNDE4XHRcbiAgIDQxOVx0ICAgICAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiByZXN1bHQgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICA0MjBcdFxuICAgNDIxXHQgICAgICAgIC8vIOaMieaXpeacn+WIhue7hFxuICAgNDIyXHQgICAgICAgIGZvciAoU2NoZWR1bGVWbyBzY2hlZHVsZSA6IHNjaGVkdWxlcykge1xuICAgNDIzXHQgICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkgIT0gbnVsbCkge1xuICAgNDI0XHQgICAgICAgICAgICAgICAgU3RyaW5nIGRhdGUgPSBzY2hlZHVsZS5nZXRTdGFydFRpbWUoKS50b0xvY2FsRGF0ZSgpLnRvU3RyaW5nKCk7XG4gICA0MjVcdCAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdC5jb250YWluc0tleShkYXRlKSkge1xuICAgNDI2XHQgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXQoZGF0ZSwgbmV3IEFycmF5TGlzdDw+KCkpO1xuICAgNDI3XHQgICAgICAgICAgICAgICAgfVxuICAgNDI4XHQgICAgICAgICAgICAgICAgcmVzdWx0LmdldChkYXRlKS5hZGQoc2NoZWR1bGUpO1xuICAgNDI5XHQgICAgICAgICAgICB9XG4gICA0MzBcdCAgICAgICAgfVxuICAgNDMxXHRcbiAgIDQzMlx0ICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgNDMzXHQgICAgfVxuICAgNDM0XHRcbiAgIDQzNVx0ICAgIC8qKlxuICAgNDM2XHQgICAgICog6K6h566X5pel56iL5LyY5YWI57qn5b6X5YiGXG4gICA0MzdcdCAgICAgKlxuICAgNDM4XHQgICAgICogQHBhcmFtIHNjaGVkdWxlIOaXpeeoi1xuICAgNDM5XHQgICAgICogQHBhcmFtIHRhc2sg5Lu75YqhXG4gICA0NDBcdCAgICAgKiBAcmV0dXJuIOS8mOWFiOe6p+W+l+WIhlxuICAgNDQxXHQgICAgICovXG4gICA0NDJcdCAgICBwcml2YXRlIGRvdWJsZSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKFNjaGVkdWxlVm8gc2NoZWR1bGUsIFRhc2sgdGFzaykge1xuICAgNDQzXHQgICAgICAgIGlmICh0YXNrID09IG51bGwpIHtcbiAgIDQ0NFx0ICAgICAgICAgICAgcmV0dXJuIDAuMDtcbiAgIDQ0NVx0ICAgICAgICB9XG4gICA0NDZcdFxuICAgNDQ3XHQgICAgICAgIGRvdWJsZSBpbXBvcnRhbmNlU2NvcmUgPSAwLjA7XG4gICA0NDhcdCAgICAgICAgZG91YmxlIHVyZ2VuY3lTY29yZSA9IDAuMDtcbiAgIDQ0OVx0XG4gICA0NTBcdCAgICAgICAgLy8g5qC55o2u5Lu75Yqh55qE6YeN6KaB5oCn6K6h566X5b6X5YiGIChpbXBvcnRhbmNlSWQpXG4gICA0NTFcdCAgICAgICAgaWYgKHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkgIT0gbnVsbCkge1xuICAgNDUyXHQgICAgICAgICAgICAvLyDmn6Xor6Lph43opoHmgKfmnYPph41cbiAgIDQ1M1x0ICAgICAgICAgICAgUXVlcnlXcmFwcGVyPGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eT4gaW1wb3J0YW5jZVF1ZXJ5ID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICA0NTRcdCAgICAgICAgICAgIGltcG9ydGFuY2VRdWVyeS5lcShcImlkXCIsIHRhc2suZ2V0SW1wb3J0YW5jZUlkKCkpO1xuICAgNDU1XHQgICAgICAgICAgICBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUHJpb3JpdHkgaW1wb3J0YW5jZSA9IHRhc2tTZXJ2aWNlLmdldFByaW9yaXR5TWFwcGVyKCkuc2VsZWN0T25lKGltcG9ydGFuY2VRdWVyeSk7XG4gICA0NTZcdFxuICAgNDU3XHQgICAgICAgICAgICBpZiAoaW1wb3J0YW5jZSAhPSBudWxsKSB7XG4gICA0NThcdCAgICAgICAgICAgICAgICBpbnQgc2NvcmUgPSBpbXBvcnRhbmNlLmdldFNjb3JlKCkgIT0gbnVsbCA/IGltcG9ydGFuY2UuZ2V0U2NvcmUoKSA6IDE7XG4gICA0NTlcdCAgICAgICAgICAgICAgICBCaWdEZWNpbWFsIHdlaWdodCA9IGltcG9ydGFuY2UuZ2V0V2VpZ2h0KCkgIT0gbnVsbCA/IGltcG9ydGFuY2UuZ2V0V2VpZ2h0KCkgOiBCaWdEZWNpbWFsLk9ORTtcbiAgIDQ2MFx0ICAgICAgICAgICAgICAgIGltcG9ydGFuY2VTY29yZSA9IHNjb3JlICogd2VpZ2h0LmRvdWJsZVZhbHVlKCkgKiAxMDsgLy8g5pS+5aSnMTDlgI3vvIzkvb/lvpfliIblgLzmm7TmmI7mmL5cbiAgIDQ2MVx0ICAgICAgICAgICAgfVxuICAgNDYyXHQgICAgICAgIH1cbiAgIDQ2M1x0XG4gICA0NjRcdCAgICAgICAgLy8g5qC55o2u5Lu75Yqh55qE57Sn5oCl5oCn6K6h566X5b6X5YiGIChleGlnZW5jeUlkKVxuICAgNDY1XHQgICAgICAgIGlmICh0YXNrLmdldEV4aWdlbmN5SWQoKSAhPSBudWxsKSB7XG4gICA0NjZcdCAgICAgICAgICAgIC8vIOafpeivoue0p+aApeaAp+adg+mHjVxuICAgNDY3XHQgICAgICAgICAgICBRdWVyeVdyYXBwZXI8Y29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlByaW9yaXR5PiB1cmdlbmN5UXVlcnkgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgIDQ2OFx0ICAgICAgICAgICAgdXJnZW5jeVF1ZXJ5LmVxKFwiaWRcIiwgdGFzay5nZXRFeGlnZW5jeUlkKCkpO1xuICAgNDY5XHQgICAgICAgICAgICBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUHJpb3JpdHkgdXJnZW5jeSA9IHRhc2tTZXJ2aWNlLmdldFByaW9yaXR5TWFwcGVyKCkuc2VsZWN0T25lKHVyZ2VuY3lRdWVyeSk7XG4gICA0NzBcdFxuICAgNDcxXHQgICAgICAgICAgICBpZiAodXJnZW5jeSAhPSBudWxsKSB7XG4gICA0NzJcdCAgICAgICAgICAgICAgICBpbnQgc2NvcmUgPSB1cmdlbmN5LmdldFNjb3JlKCkgIT0gbnVsbCA/IHVyZ2VuY3kuZ2V0U2NvcmUoKSA6IDE7XG4gICA0NzNcdCAgICAgICAgICAgICAgICBCaWdEZWNpbWFsIHdlaWdodCA9IHVyZ2VuY3kuZ2V0V2VpZ2h0KCkgIT0gbnVsbCA/IHVyZ2VuY3kuZ2V0V2VpZ2h0KCkgOiBCaWdEZWNpbWFsLk9ORTtcbiAgIDQ3NFx0ICAgICAgICAgICAgICAgIHVyZ2VuY3lTY29yZSA9IHNjb3JlICogd2VpZ2h0LmRvdWJsZVZhbHVlKCkgKiAxMDsgLy8g5pS+5aSnMTDlgI3vvIzkvb/lvpfliIblgLzmm7TmmI7mmL5cbiAgIDQ3NVx0ICAgICAgICAgICAgfVxuICAgNDc2XHQgICAgICAgIH1cbiAgIDQ3N1x0XG4gICA0NzhcdCAgICAgICAgLy8g6K6h566X5oiq5q2i5pe26Ze055qE57Sn5oCl5oCnXG4gICA0NzlcdCAgICAgICAgZG91YmxlIGRlYWRsaW5lVXJnZW5jeSA9IDAuMDtcbiAgIDQ4MFx0ICAgICAgICBpZiAodGFzay5nZXREZWFkbGluZSgpICE9IG51bGwpIHtcbiAgIDQ4MVx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgNDgyXHRcbiAgIDQ4M1x0ICAgICAgICAgICAgLy8g5aaC5p6c5bey57uP6LaF6L+H5oiq5q2i5pe26Ze077yM5YiZ57Sn5oCl5oCn5pyA6auYXG4gICA0ODRcdCAgICAgICAgICAgIGlmIChub3cuaXNBZnRlcih0YXNrLmdldERlYWRsaW5lKCkpKSB7XG4gICA0ODVcdCAgICAgICAgICAgICAgICBkZWFkbGluZVVyZ2VuY3kgPSAxMDAuMDtcbiAgIDQ4Nlx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDQ4N1x0ICAgICAgICAgICAgICAgIC8vIOiuoeeul+i3neemu+aIquatouaXtumXtOi/mOacieWkmuWwkeWwj+aXtlxuICAgNDg4XHQgICAgICAgICAgICAgICAgbG9uZyBob3Vyc1VudGlsRGVhZGxpbmUgPSBEdXJhdGlvbi5iZXR3ZWVuKG5vdywgdGFzay5nZXREZWFkbGluZSgpKS50b0hvdXJzKCk7XG4gICA0ODlcdFxuICAgNDkwXHQgICAgICAgICAgICAgICAgLy8g6Led56a75oiq5q2i5pe26Ze06LaK6L+R77yM57Sn5oCl5oCn6LaK6auYXG4gICA0OTFcdCAgICAgICAgICAgICAgICAvLyAyNOWwj+aXtuWGhe+8muacgOmrmOe0p+aApeaAp1xuICAgNDkyXHQgICAgICAgICAgICAgICAgLy8gMjQtNzLlsI/ml7bvvJrpq5jntKfmgKXmgKdcbiAgIDQ5M1x0ICAgICAgICAgICAgICAgIC8vIDcy5bCP5pe25Lul5LiK77ya5Lit562J57Sn5oCl5oCnXG4gICA0OTRcdCAgICAgICAgICAgICAgICBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDI0KSB7XG4gICA0OTVcdCAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmVVcmdlbmN5ID0gNDAuMCAtIChob3Vyc1VudGlsRGVhZGxpbmUgLyAyNC4wKSAqIDEwLjA7ICAvLyAzMC00MOWIhlxuICAgNDk2XHQgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChob3Vyc1VudGlsRGVhZGxpbmUgPD0gNzIpIHtcbiAgIDQ5N1x0ICAgICAgICAgICAgICAgICAgICBkZWFkbGluZVVyZ2VuY3kgPSAyNS4wIC0gKChob3Vyc1VudGlsRGVhZGxpbmUgLSAyNCkgLyA0OC4wKSAqIDEwLjA7ICAvLyAxNS0yNeWIhlxuICAgNDk4XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDQ5OVx0ICAgICAgICAgICAgICAgICAgICBkZWFkbGluZVVyZ2VuY3kgPSBNYXRoLm1heCg1LjAsIDE1LjAgLSAoKGhvdXJzVW50aWxEZWFkbGluZSAtIDcyKSAvIDcyLjApICogMTAuMCk7ICAvLyA1LTE15YiGXG4gICA1MDBcdCAgICAgICAgICAgICAgICB9XG4gICA1MDFcdCAgICAgICAgICAgIH1cbiAgIDUwMlx0ICAgICAgICB9XG4gICA1MDNcdFxuICAgNTA0XHQgICAgICAgIC8vIOWmguaenOS7u+WKoeW3sue7j+mAvuacn++8jOWinuWKoOWFtue0p+aApeaAp1xuICAgNTA1XHQgICAgICAgIGlmICh0YXNrLmdldFN0YXR1cygpICE9IG51bGwgJiYgdGFzay5nZXRTdGF0dXMoKSA9PSA1KSB7XG4gICA1MDZcdCAgICAgICAgICAgIGRlYWRsaW5lVXJnZW5jeSArPSAyMC4wO1xuICAgNTA3XHQgICAgICAgIH1cbiAgIDUwOFx0XG4gICA1MDlcdCAgICAgICAgLy8g5qC55o2u5Lu75Yqh54q25oCB6LCD5pW05LyY5YWI57qnXG4gICA1MTBcdCAgICAgICAgZG91YmxlIHN0YXR1c0FkanVzdG1lbnQgPSAwLjA7XG4gICA1MTFcdCAgICAgICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgIT0gbnVsbCkge1xuICAgNTEyXHQgICAgICAgICAgICBzd2l0Y2ggKHRhc2suZ2V0U3RhdHVzKCkpIHtcbiAgIDUxM1x0ICAgICAgICAgICAgICAgIGNhc2UgMTogLy8g5b6F5YqeXG4gICA1MTRcdCAgICAgICAgICAgICAgICAgICAgc3RhdHVzQWRqdXN0bWVudCA9IDIwLjA7XG4gICA1MTVcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICA1MTZcdCAgICAgICAgICAgICAgICBjYXNlIDQ6IC8vIOW3suWujOaIkFxuICAgNTE3XHQgICAgICAgICAgICAgICAgICAgIHN0YXR1c0FkanVzdG1lbnQgPSAtNTAuMDsgLy8g5bey5a6M5oiQ55qE5Lu75Yqh5LyY5YWI57qn5pyA5L2OXG4gICA1MThcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICA1MTlcdCAgICAgICAgICAgICAgICBjYXNlIDU6IC8vIOW3sumAvuacn1xuICAgNTIwXHQgICAgICAgICAgICAgICAgICAgIHN0YXR1c0FkanVzdG1lbnQgPSAzMC4wO1xuICAgNTIxXHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgNTIyXHQgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgIDUyM1x0ICAgICAgICAgICAgICAgICAgICBzdGF0dXNBZGp1c3RtZW50ID0gMC4wO1xuICAgNTI0XHQgICAgICAgICAgICB9XG4gICA1MjVcdCAgICAgICAgfVxuICAgNTI2XHRcbiAgIDUyN1x0ICAgICAgICAvLyDnu7zlkIjorqHnrpfmnIDnu4jkvJjlhYjnuqflvpfliIZcbiAgIDUyOFx0ICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGltcG9ydGFuY2VTY29yZSArIHVyZ2VuY3lTY29yZSArIGRlYWRsaW5lVXJnZW5jeSArIHN0YXR1c0FkanVzdG1lbnQ7XG4gICA1MjlcdFxuICAgNTMwXHQgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBwcmlvcml0eVNjb3JlKTsgLy8g56Gu5L+d5b6X5YiG5LiN5Li66LSf5pWwXG4gICA1MzFcdCAgICB9XG4gICA1MzJcdFxuICAgNTMzXHQgICAgQE92ZXJyaWRlXG4gICA1MzRcdCAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzbWFydFNvcnQoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5KSB7XG4gICA1MzVcdCAgICAgICAgLy8g6I635Y+W5Y6f5aeL5pel56iL5YiX6KGoXG4gICA1MzZcdCAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBvcmlnaW5hbFBhZ2UgPSBzZWFyY2gocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgbnVsbCk7XG4gICA1MzdcdCAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZUxpc3QgPSBvcmlnaW5hbFBhZ2UuZ2V0UmVjb3JkcygpO1xuICAgNTM4XHRcbiAgIDUzOVx0ICAgICAgICAvLyDorqHnrpfmr4/kuKrml6XnqIvnmoTkvJjlhYjnuqflvpfliIZcbiAgIDU0MFx0ICAgICAgICBNYXA8TG9uZywgRG91YmxlPiBzY2hlZHVsZVByaW9yaXR5U2NvcmVzID0gbmV3IEhhc2hNYXA8PigpO1xuICAgNTQxXHRcbiAgIDU0Mlx0ICAgICAgICBmb3IgKFNjaGVkdWxlVm8gc2NoZWR1bGUgOiBzY2hlZHVsZUxpc3QpIHtcbiAgIDU0M1x0ICAgICAgICAgICAgVGFzayB0YXNrID0gbnVsbDtcbiAgIDU0NFx0ICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldFRhc2tJZCgpICE9IG51bGwpIHtcbiAgIDU0NVx0ICAgICAgICAgICAgICAgIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgIDU0Nlx0ICAgICAgICAgICAgfVxuICAgNTQ3XHRcbiAgIDU0OFx0ICAgICAgICAgICAgLy8g6K6h566X5LyY5YWI57qn5b6X5YiGXG4gICA1NDlcdCAgICAgICAgICAgIGRvdWJsZSBwcmlvcml0eVNjb3JlID0gY2FsY3VsYXRlUHJpb3JpdHlTY29yZShzY2hlZHVsZSwgdGFzayk7XG4gICA1NTBcdCAgICAgICAgICAgIHNjaGVkdWxlUHJpb3JpdHlTY29yZXMucHV0KHNjaGVkdWxlLmdldElkKCksIHByaW9yaXR5U2NvcmUpO1xuICAgNTUxXHQgICAgICAgIH1cbiAgIDU1Mlx0XG4gICA1NTNcdCAgICAgICAgLy8g5qC55o2u5LyY5YWI57qn5b6X5YiG5o6S5bqP5pel56iLXG4gICA1NTRcdCAgICAgICAgc2NoZWR1bGVMaXN0LnNvcnQoKGEsIGIpIC0+IHtcbiAgIDU1NVx0ICAgICAgICAgICAgRG91YmxlIHNjb3JlQSA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGEuZ2V0SWQoKSwgMC4wKTtcbiAgIDU1Nlx0ICAgICAgICAgICAgRG91YmxlIHNjb3JlQiA9IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGIuZ2V0SWQoKSwgMC4wKTtcbiAgIDU1N1x0XG4gICA1NThcdCAgICAgICAgICAgIC8vIOWIhuaVsOmrmOeahOaOkuWcqOWJjemdolxuICAgNTU5XHQgICAgICAgICAgICByZXR1cm4gRG91YmxlLmNvbXBhcmUoc2NvcmVCLCBzY29yZUEpO1xuICAgNTYwXHQgICAgICAgIH0pO1xuICAgNTYxXHRcbiAgIDU2Mlx0ICAgICAgICAvLyDliJvlu7rmlrDnmoTliIbpobXnu5PmnpxcbiAgIDU2M1x0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHNvcnRlZFBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplLCBvcmlnaW5hbFBhZ2UuZ2V0VG90YWwoKSk7XG4gICA1NjRcdCAgICAgICAgc29ydGVkUGFnZS5zZXRSZWNvcmRzKHNjaGVkdWxlTGlzdCk7XG4gICA1NjVcdFxuICAgNTY2XHQgICAgICAgIHJldHVybiBzb3J0ZWRQYWdlO1xuICAgNTY3XHQgICAgfVxuICAgNTY4XHRcbiAgIDU2OVx0ICAgIEBPdmVycmlkZVxuICAgNTcwXHQgICAgcHVibGljIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0VXNlcihJbnRlZ2VyIHBhZ2VTaXplLCBJbnRlZ2VyIHBhZ2VOdW0sIFN0cmluZyBzZWFyY2hLZXksIExvbmcgdXNlcklkKSB7XG4gICA1NzFcdCAgICAgICAgLy8g6I635Y+W5Y6f5aeL5pel56iL5YiX6KGo77yM5L2/55Soc2VhcmNoVXNlcuaWueazleehruS/neiDveafpeivouWIsOeUqOaIt+ebuOWFs+aXpeeoi1xuICAgNTcyXHQgICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gb3JpZ2luYWxQYWdlID0gc2VhcmNoVXNlcihwYWdlU2l6ZSwgcGFnZU51bSwgc2VhcmNoS2V5LCB1c2VySWQsIG51bGwpO1xuICAgNTczXHQgICAgICAgIExpc3Q8U2NoZWR1bGVWbz4gc2NoZWR1bGVMaXN0ID0gb3JpZ2luYWxQYWdlLmdldFJlY29yZHMoKTtcbiAgIDU3NFx0ICAgICAgICBcbiAgIDU3NVx0ICAgICAgICAvLyDlpoLmnpzmsqHmnInojrflj5bliLDml6XnqIvmlbDmja7vvIznm7TmjqXov5Tlm57nqbrnu5PmnpxcbiAgIDU3Nlx0ICAgICAgICBpZiAoc2NoZWR1bGVMaXN0LmlzRW1wdHkoKSkge1xuICAgNTc3XHQgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxQYWdlO1xuICAgNTc4XHQgICAgICAgIH1cbiAgIDU3OVx0XG4gICA1ODBcdCAgICAgICAgLy8g6K6h566X5q+P5Liq5pel56iL55qE5LyY5YWI57qn5b6X5YiGXG4gICA1ODFcdCAgICAgICAgTWFwPExvbmcsIERvdWJsZT4gc2NoZWR1bGVQcmlvcml0eVNjb3JlcyA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgIDU4Mlx0XG4gICA1ODNcdCAgICAgICAgZm9yIChTY2hlZHVsZVZvIHNjaGVkdWxlIDogc2NoZWR1bGVMaXN0KSB7XG4gICA1ODRcdCAgICAgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XG4gICA1ODVcdCAgICAgICAgICAgIGlmIChzY2hlZHVsZS5nZXRUYXNrSWQoKSAhPSBudWxsKSB7XG4gICA1ODZcdCAgICAgICAgICAgICAgICB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICA1ODdcdCAgICAgICAgICAgIH1cbiAgIDU4OFx0XG4gICA1ODlcdCAgICAgICAgICAgIC8vIOiuoeeul+S8mOWFiOe6p+W+l+WIhlxuICAgNTkwXHQgICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUoc2NoZWR1bGUsIHRhc2spO1xuICAgNTkxXHQgICAgICAgICAgICBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLnB1dChzY2hlZHVsZS5nZXRJZCgpLCBwcmlvcml0eVNjb3JlKTtcbiAgIDU5Mlx0ICAgICAgICB9XG4gICA1OTNcdFxuICAgNTk0XHQgICAgICAgIC8vIOagueaNruS8mOWFiOe6p+W+l+WIhuaOkuW6j+aXpeeoi1xuICAgNTk1XHQgICAgICAgIHNjaGVkdWxlTGlzdC5zb3J0KChhLCBiKSAtPiB7XG4gICA1OTZcdCAgICAgICAgICAgIERvdWJsZSBzY29yZUEgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChhLmdldElkKCksIDAuMCk7XG4gICA1OTdcdCAgICAgICAgICAgIERvdWJsZSBzY29yZUIgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChiLmdldElkKCksIDAuMCk7XG4gICA1OThcdFxuICAgNTk5XHQgICAgICAgICAgICAvLyDliIbmlbDpq5jnmoTmjpLlnKjliY3pnaJcbiAgIDYwMFx0ICAgICAgICAgICAgcmV0dXJuIERvdWJsZS5jb21wYXJlKHNjb3JlQiwgc2NvcmVBKTtcbiAgIDYwMVx0ICAgICAgICB9KTtcbiAgIDYwMlx0XG4gICA2MDNcdCAgICAgICAgLy8g5Yib5bu65paw55qE5YiG6aG157uT5p6cXG4gICA2MDRcdCAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBzb3J0ZWRQYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSwgb3JpZ2luYWxQYWdlLmdldFRvdGFsKCkpO1xuICAgNjA1XHQgICAgICAgIHNvcnRlZFBhZ2Uuc2V0UmVjb3JkcyhzY2hlZHVsZUxpc3QpO1xuICAgNjA2XHRcbiAgIDYwN1x0ICAgICAgICByZXR1cm4gc29ydGVkUGFnZTtcbiAgIDYwOFx0ICAgIH1cbiAgIDYwOVx0XG4gICA2MTBcdCAgICAvKipcbiAgIDYxMVx0ICAgICAqIOavj+Wwj+aXtuajgOafpeS4gOasoeS7u+WKoeaIquatouaXtumXtO+8jOabtOaWsOmAvuacn+S7u+WKoeeKtuaAgVxuICAgNjEyXHQgICAgICovXG4gICA2MTNcdCAgICBAU2NoZWR1bGVkKGNyb24gPSBcIjAgMCAqICogKiA/XCIpXG4gICA2MTRcdCAgICBwdWJsaWMgdm9pZCBjaGVja1Rhc2tEZWFkbGluZXMoKSB7XG4gICA2MTVcdCAgICAgICAgbG9nLmluZm8oXCLlrprml7bku7vliqHvvJrmo4Dmn6Xku7vliqHmiKrmraLml7bpl7TvvIzmm7TmlrDpgL7mnJ/ku7vliqHnirbmgIFcIik7XG4gICA2MTZcdCAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgNjE3XHQgICAgICAgIFxuICAgNjE4XHQgICAgICAgIC8vIOafpeivouaJgOacieacquWujOaIkOeahOaXpeeoi1xuICAgNjE5XHQgICAgICAgIFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4gcXVlcnlXcmFwcGVyID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICA2MjBcdCAgICAgICAgTGlzdDxTY2hlZHVsZT4gc2NoZWR1bGVzID0gdGhpcy5saXN0KHF1ZXJ5V3JhcHBlcik7XG4gICA2MjFcdCAgICAgICAgXG4gICA2MjJcdCAgICAgICAgZm9yIChTY2hlZHVsZSBzY2hlZHVsZSA6IHNjaGVkdWxlcykge1xuICAgNjIzXHQgICAgICAgICAgICAvLyDojrflj5blhbPogZTnmoTku7vliqFcbiAgIDYyNFx0ICAgICAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICA2MjVcdCAgICAgICAgICAgIGlmICh0YXNrID09IG51bGwgfHwgdGFzay5nZXRTdGF0dXMoKSA9PSA0KSB7IC8vIOS7u+WKoeS4jeWtmOWcqOaIluW3suWujOaIkO+8jOi3s+i/h1xuICAgNjI2XHQgICAgICAgICAgICAgICAgY29udGludWU7XG4gICA2MjdcdCAgICAgICAgICAgIH1cbiAgIDYyOFx0ICAgICAgICAgICAgXG4gICA2MjlcdCAgICAgICAgICAgIC8vIOajgOafpeaXpeeoi+eahOe7k+adn+aXtumXtO+8jOWmguaenOW3sui/h+acn+S4lOS7u+WKoeacquWujOaIkO+8jOWImeWwhuS7u+WKoeeKtuaAgeabtOaWsOS4uuW3sumAvuacn1xuICAgNjMwXHQgICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpICE9IG51bGwgJiYgbm93LmlzQWZ0ZXIoc2NoZWR1bGUuZ2V0RW5kVGltZSgpKSAmJiB0YXNrLmdldFN0YXR1cygpICE9IDUpIHtcbiAgIDYzMVx0ICAgICAgICAgICAgICAgIHRhc2suc2V0U3RhdHVzKDUpOyAvLyDlt7LpgL7mnJ9cbiAgIDYzMlx0ICAgICAgICAgICAgICAgIHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzayk7XG4gICA2MzNcdCAgICAgICAgICAgICAgICBsb2cuaW5mbyhcIuS7u+WKoeW3sumAvuacn++8muS7u+WKoUlEPVwiICsgdGFzay5nZXRJZCgpICsgXCIsIOaXpeeoi0lEPVwiICsgc2NoZWR1bGUuZ2V0SWQoKSk7XG4gICA2MzRcdCAgICAgICAgICAgIH1cbiAgIDYzNVx0ICAgICAgICB9XG4gICA2MzZcdCAgICB9XG4gICA2MzdcdCAgICBcbiAgIDYzOFx0ICAgIC8qKlxuICAgNjM5XHQgICAgICog5q+P5aSp5YeM5pmoMueCueaJp+ihjO+8jOiHquWKqOWuieaOkuS7iuWkqeeahOaXpeeoi1xuICAgNjQwXHQgICAgICovXG4gICA2NDFcdCAgICBAU2NoZWR1bGVkKGNyb24gPSBcIjAgMCAyICogKiA/XCIpXG4gICA2NDJcdCAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgIDY0M1x0ICAgIHB1YmxpYyB2b2lkIGRhaWx5U2NoZWR1bGVBcnJhbmdlbWVudCgpIHtcbiAgIDY0NFx0ICAgICAgICAvLyDojrflj5bku4rlpKnnmoTml6XmnJ/vvIzmoLzlvI95eXl5LU1NLWRkXG4gICA2NDVcdCAgICAgICAgU3RyaW5nIHRvZGF5ID0gTG9jYWxEYXRlVGltZS5ub3coKS50b0xvY2FsRGF0ZSgpLnRvU3RyaW5nKCk7XG4gICA2NDZcdCAgICAgICAgbG9nLmluZm8oXCLlrprml7bku7vliqHvvJroh6rliqjlronmjpLku4rlpKkoXCIgKyB0b2RheSArIFwiKeeahOaXpeeoi1wiKTtcbiAgIDY0N1x0ICAgICAgICBcbiAgIDY0OFx0ICAgICAgICB0cnkge1xuICAgNjQ5XHQgICAgICAgICAgICAvLyDoh6rliqjlronmjpLku4rlpKnnmoTml6XnqItcbiAgIDY1MFx0ICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gYXV0b0FycmFuZ2VEYWlseVNjaGVkdWxlcyh0b2RheSk7XG4gICA2NTFcdCAgICAgICAgICAgIFxuICAgNjUyXHQgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgNjUzXHQgICAgICAgICAgICAgICAgbG9nLmluZm8oXCLku4rml6UoXCIgKyB0b2RheSArIFwiKeaXpeeoi+WuieaOkuWujOaIkFwiKTtcbiAgIDY1NFx0ICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDY1NVx0ICAgICAgICAgICAgICAgIGxvZy5lcnJvcihcIuS7iuaXpShcIiArIHRvZGF5ICsgXCIp5pel56iL5a6J5o6S5aSx6LSlXCIpO1xuICAgNjU2XHQgICAgICAgICAgICB9XG4gICA2NTdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDY1OFx0ICAgICAgICAgICAgbG9nLmVycm9yKFwi6Ieq5Yqo5a6J5o6S5pel56iL5byC5bi477yaXCIgKyBlLmdldE1lc3NhZ2UoKSwgZSk7XG4gICA2NTlcdCAgICAgICAgfVxuICAgNjYwXHQgICAgfVxuICAgNjYxXHQgICAgXG4gICA2NjJcdCAgICBAT3ZlcnJpZGVcbiAgIDY2M1x0ICAgIEBUcmFuc2FjdGlvbmFsKHJvbGxiYWNrRm9yID0gRXhjZXB0aW9uLmNsYXNzKVxuICAgNjY0XHQgICAgcHVibGljIGJvb2xlYW4gYXV0b0FycmFuZ2VEYWlseVNjaGVkdWxlcyhTdHJpbmcgZGF0ZSkge1xuICAgNjY1XHQgICAgICAgIHRyeSB7XG4gICA2NjZcdCAgICAgICAgICAgIC8vIOino+aekOaXpeacn1xuICAgNjY3XHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIHN0YXJ0T2ZEYXkgPSBMb2NhbERhdGVUaW1lLnBhcnNlKGRhdGUgKyBcIlQwMDowMDowMFwiKTtcbiAgIDY2OFx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBlbmRPZkRheSA9IExvY2FsRGF0ZVRpbWUucGFyc2UoZGF0ZSArIFwiVDIzOjU5OjU5XCIpO1xuICAgNjY5XHQgICAgICAgICAgICBcbiAgIDY3MFx0ICAgICAgICAgICAgLy8g5p+l6K+i5oyH5a6a5pel5pyf55qE5omA5pyJ5pel56iLXG4gICA2NzFcdCAgICAgICAgICAgIFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4gcXVlcnlXcmFwcGVyID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICA2NzJcdCAgICAgICAgICAgIHF1ZXJ5V3JhcHBlci5nZShcInN0YXJ0X3RpbWVcIiwgc3RhcnRPZkRheSlcbiAgIDY3M1x0ICAgICAgICAgICAgICAgICAgICAgICAgLmxlKFwic3RhcnRfdGltZVwiLCBlbmRPZkRheSlcbiAgIDY3NFx0ICAgICAgICAgICAgICAgICAgICAgICAgLmlzTnVsbChcInBhcmVudF9pZFwiKTsgLy8g5Y+q5aSE55CG54i25pel56iLXG4gICA2NzVcdCAgICAgICAgICAgIFxuICAgNjc2XHQgICAgICAgICAgICBMaXN0PFNjaGVkdWxlPiBzY2hlZHVsZXMgPSB0aGlzLmxpc3QocXVlcnlXcmFwcGVyKTtcbiAgIDY3N1x0ICAgICAgICAgICAgaWYgKHNjaGVkdWxlcy5pc0VtcHR5KCkpIHtcbiAgIDY3OFx0ICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwi5rKh5pyJ5om+5Yiw5pel5pyfXCIgKyBkYXRlICsgXCLnmoTml6XnqIvvvIzml6DpnIDph43mjpJcIik7XG4gICA2NzlcdCAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgIDY4MFx0ICAgICAgICAgICAgfVxuICAgNjgxXHQgICAgICAgICAgICBcbiAgIDY4Mlx0ICAgICAgICAgICAgLy8g6I635Y+W5omA5pyJ5YWz6IGU55qE5Lu75Yqh77yM5Lul5L6/6K6h566X5LyY5YWI57qnXG4gICA2ODNcdCAgICAgICAgICAgIExpc3Q8VGFzaz4gdGFza3MgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDY4NFx0ICAgICAgICAgICAgTWFwPExvbmcsIFRhc2s+IHRhc2tNYXAgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICA2ODVcdCAgICAgICAgICAgIGZvciAoU2NoZWR1bGUgc2NoZWR1bGUgOiBzY2hlZHVsZXMpIHtcbiAgIDY4Nlx0ICAgICAgICAgICAgICAgIGlmIChzY2hlZHVsZS5nZXRUYXNrSWQoKSAhPSBudWxsKSB7XG4gICA2ODdcdCAgICAgICAgICAgICAgICAgICAgVGFzayB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICA2ODhcdCAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2sgIT0gbnVsbCkge1xuICAgNjg5XHQgICAgICAgICAgICAgICAgICAgICAgICB0YXNrcy5hZGQodGFzayk7XG4gICA2OTBcdCAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tNYXAucHV0KHRhc2suZ2V0SWQoKSwgdGFzayk7XG4gICA2OTFcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgNjkyXHQgICAgICAgICAgICAgICAgfVxuICAgNjkzXHQgICAgICAgICAgICB9XG4gICA2OTRcdCAgICAgICAgICAgIFxuICAgNjk1XHQgICAgICAgICAgICBpZiAodGFza3MuaXNFbXB0eSgpKSB7XG4gICA2OTZcdCAgICAgICAgICAgICAgICBsb2cuaW5mbyhcIuaXpeacn1wiICsgZGF0ZSArIFwi55qE5pel56iL5rKh5pyJ5YWz6IGU5Lu75Yqh77yM5peg5rOV6K6h566X5LyY5YWI57qnXCIpO1xuICAgNjk3XHQgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgNjk4XHQgICAgICAgICAgICB9XG4gICA2OTlcdCAgICAgICAgICAgIFxuICAgNzAwXHQgICAgICAgICAgICAvLyDorqHnrpfmr4/kuKrku7vliqHnmoTkvJjlhYjnuqflvpfliIZcbiAgIDcwMVx0ICAgICAgICAgICAgTWFwPExvbmcsIERvdWJsZT4gdGFza1ByaW9yaXR5U2NvcmVzID0gbmV3IEhhc2hNYXA8PigpO1xuICAgNzAyXHQgICAgICAgICAgICBmb3IgKFRhc2sgdGFzayA6IHRhc2tzKSB7XG4gICA3MDNcdCAgICAgICAgICAgICAgICBTY2hlZHVsZVZvIHRlbXBTY2hlZHVsZSA9IG5ldyBTY2hlZHVsZVZvKCk7XG4gICA3MDRcdCAgICAgICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUodGVtcFNjaGVkdWxlLCB0YXNrKTtcbiAgIDcwNVx0ICAgICAgICAgICAgICAgIHRhc2tQcmlvcml0eVNjb3Jlcy5wdXQodGFzay5nZXRJZCgpLCBwcmlvcml0eVNjb3JlKTtcbiAgIDcwNlx0ICAgICAgICAgICAgfVxuICAgNzA3XHQgICAgICAgICAgICBcbiAgIDcwOFx0ICAgICAgICAgICAgLy8g5oyJ5LyY5YWI57qn5o6S5bqP5pel56iLXG4gICA3MDlcdCAgICAgICAgICAgIHNjaGVkdWxlcy5zb3J0KChhLCBiKSAtPiB7XG4gICA3MTBcdCAgICAgICAgICAgICAgICBEb3VibGUgc2NvcmVBID0gdGFza1ByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChhLmdldFRhc2tJZCgpLCAwLjApO1xuICAgNzExXHQgICAgICAgICAgICAgICAgRG91YmxlIHNjb3JlQiA9IHRhc2tQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYi5nZXRUYXNrSWQoKSwgMC4wKTtcbiAgIDcxMlx0ICAgICAgICAgICAgICAgIFxuICAgNzEzXHQgICAgICAgICAgICAgICAgLy8g5LyY5YWI57qn6auY55qE5o6S5Zyo5YmN6Z2iXG4gICA3MTRcdCAgICAgICAgICAgICAgICByZXR1cm4gRG91YmxlLmNvbXBhcmUoc2NvcmVCLCBzY29yZUEpO1xuICAgNzE1XHQgICAgICAgICAgICB9KTtcbiAgIDcxNlx0ICAgICAgICAgICAgXG4gICA3MTdcdCAgICAgICAgICAgIC8vIOWumuS5ieW3peS9nOaXtumXtOautVxuICAgNzE4XHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIG1vcm5pbmdTdGFydCA9IExvY2FsRGF0ZVRpbWUucGFyc2UoZGF0ZSArIFwiVDA4OjAwOjAwXCIpO1xuICAgNzE5XHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIG1vcm5pbmdFbmQgPSBMb2NhbERhdGVUaW1lLnBhcnNlKGRhdGUgKyBcIlQxMjowMDowMFwiKTtcbiAgIDcyMFx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBhZnRlcm5vb25TdGFydCA9IExvY2FsRGF0ZVRpbWUucGFyc2UoZGF0ZSArIFwiVDE0OjAwOjAwXCIpO1xuICAgNzIxXHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGFmdGVybm9vbkVuZCA9IExvY2FsRGF0ZVRpbWUucGFyc2UoZGF0ZSArIFwiVDE4OjAwOjAwXCIpO1xuICAgNzIyXHQgICAgICAgICAgICBcbiAgIDcyM1x0ICAgICAgICAgICAgLy8g6YeN5paw5a6J5o6S5pel56iL5pe26Ze0XG4gICA3MjRcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgY3VycmVudFRpbWUgPSBtb3JuaW5nU3RhcnQ7XG4gICA3MjVcdCAgICAgICAgICAgIGJvb2xlYW4gaXNBZnRlcm5vb25TdGFydGVkID0gZmFsc2U7XG4gICA3MjZcdCAgICAgICAgICAgIFxuICAgNzI3XHQgICAgICAgICAgICBmb3IgKGludCBpID0gMDsgaSA8IHNjaGVkdWxlcy5zaXplKCk7IGkrKykge1xuICAgNzI4XHQgICAgICAgICAgICAgICAgU2NoZWR1bGUgc2NoZWR1bGUgPSBzY2hlZHVsZXMuZ2V0KGkpO1xuICAgNzI5XHQgICAgICAgICAgICAgICAgVGFzayB0YXNrID0gdGFza01hcC5nZXQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgNzMwXHQgICAgICAgICAgICAgICAgXG4gICA3MzFcdCAgICAgICAgICAgICAgICBpZiAodGFzayA9PSBudWxsKSB7XG4gICA3MzJcdCAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICA3MzNcdCAgICAgICAgICAgICAgICB9XG4gICA3MzRcdCAgICAgICAgICAgICAgICBcbiAgIDczNVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOW3sue7j+WIsOS6huS4reWNiOS8keaBr+aXtumXtOS4lOi/mOayoeW8gOWni+S4i+WNiO+8jOi9rOWIsOS4i+WNiOW8gOWni+aXtumXtFxuICAgNzM2XHQgICAgICAgICAgICAgICAgaWYgKCFpc0FmdGVybm9vblN0YXJ0ZWQgJiYgY3VycmVudFRpbWUuaXNBZnRlcihtb3JuaW5nRW5kKSkge1xuICAgNzM3XHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gYWZ0ZXJub29uU3RhcnQ7XG4gICA3MzhcdCAgICAgICAgICAgICAgICAgICAgaXNBZnRlcm5vb25TdGFydGVkID0gdHJ1ZTtcbiAgIDczOVx0ICAgICAgICAgICAgICAgIH1cbiAgIDc0MFx0ICAgICAgICAgICAgICAgIFxuICAgNzQxXHQgICAgICAgICAgICAgICAgLy8g5aaC5p6c6LaF5Ye65LqG5LiL5Y2I5bel5L2c5pe26Ze077yM5YGc5q2i5a6J5o6S77yI5oiW6ICF5Y+v5Lul6YCJ5oup57un57ut5a6J5o6S5Yiw5piO5aSp77yJXG4gICA3NDJcdCAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRpbWUuaXNBZnRlcihhZnRlcm5vb25FbmQpKSB7XG4gICA3NDNcdCAgICAgICAgICAgICAgICAgICAgbG9nLndhcm4oXCLml6XmnJ9cIiArIGRhdGUgKyBcIueahOaXpeeoi+aOkua7oeS6hu+8jOWJqeS9mVwiICsgKHNjaGVkdWxlcy5zaXplKCkgLSBpKSArIFwi5Liq5pel56iL5pyq5o6SXCIpO1xuICAgNzQ0XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgNzQ1XHQgICAgICAgICAgICAgICAgfVxuICAgNzQ2XHQgICAgICAgICAgICAgICAgXG4gICA3NDdcdCAgICAgICAgICAgICAgICAvLyDorr7nva7lvIDlp4vml7bpl7RcbiAgIDc0OFx0ICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNldFN0YXJ0VGltZShjdXJyZW50VGltZSk7XG4gICA3NDlcdCAgICAgICAgICAgICAgICBcbiAgIDc1MFx0ICAgICAgICAgICAgICAgIC8vIOiuoeeul+e7k+adn+aXtumXtFxuICAgNzUxXHQgICAgICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBlbmRUaW1lO1xuICAgNzUyXHQgICAgICAgICAgICAgICAgaWYgKHRhc2suZ2V0VGltZVNwZW5kKCkgIT0gbnVsbCkge1xuICAgNzUzXHQgICAgICAgICAgICAgICAgICAgIC8vIOagueaNruS7u+WKoemihOS8sOiAl+aXtuiuoeeul+e7k+adn+aXtumXtFxuICAgNzU0XHQgICAgICAgICAgICAgICAgICAgIGVuZFRpbWUgPSBjdXJyZW50VGltZS5wbHVzTWludXRlcyh0YXNrLmdldFRpbWVTcGVuZCgpKTtcbiAgIDc1NVx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICA3NTZcdCAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ6aKE5Lyw5pe26Ze077yM6buY6K6kMzDliIbpkp9cbiAgIDc1N1x0ICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gY3VycmVudFRpbWUucGx1c01pbnV0ZXMoMzApO1xuICAgNzU4XHQgICAgICAgICAgICAgICAgfVxuICAgNzU5XHQgICAgICAgICAgICAgICAgXG4gICA3NjBcdCAgICAgICAgICAgICAgICAvLyDorr7nva7nu5PmnZ/ml7bpl7RcbiAgIDc2MVx0ICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNldEVuZFRpbWUoZW5kVGltZSk7XG4gICA3NjJcdCAgICAgICAgICAgICAgICBcbiAgIDc2M1x0ICAgICAgICAgICAgICAgIC8vIOW9k+WJjeS7u+WKoeeahOe7k+adn+aXtumXtOS9nOS4uuS4i+S4gOS4quS7u+WKoeeahOW8gOWni+aXtumXtFxuICAgNzY0XHQgICAgICAgICAgICAgICAgY3VycmVudFRpbWUgPSBlbmRUaW1lO1xuICAgNzY1XHQgICAgICAgICAgICAgICAgXG4gICA3NjZcdCAgICAgICAgICAgICAgICAvLyDmm7TmlrDml6XnqItcbiAgIDc2N1x0ICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQnlJZChzY2hlZHVsZSk7XG4gICA3NjhcdCAgICAgICAgICAgICAgICBcbiAgIDc2OVx0ICAgICAgICAgICAgICAgIC8vIOWQjOaXtuabtOaWsOaJgOacieWtkOaXpeeoi1xuICAgNzcwXHQgICAgICAgICAgICAgICAgUXVlcnlXcmFwcGVyPFNjaGVkdWxlPiBjaGlsZFdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgIDc3MVx0ICAgICAgICAgICAgICAgIGNoaWxkV3JhcHBlci5lcShcInBhcmVudF9pZFwiLCBzY2hlZHVsZS5nZXRJZCgpKTtcbiAgIDc3Mlx0ICAgICAgICAgICAgICAgIExpc3Q8U2NoZWR1bGU+IGNoaWxkU2NoZWR1bGVzID0gdGhpcy5saXN0KGNoaWxkV3JhcHBlcik7XG4gICA3NzNcdCAgICAgICAgICAgICAgICBcbiAgIDc3NFx0ICAgICAgICAgICAgICAgIGZvciAoU2NoZWR1bGUgY2hpbGRTY2hlZHVsZSA6IGNoaWxkU2NoZWR1bGVzKSB7XG4gICA3NzVcdCAgICAgICAgICAgICAgICAgICAgY2hpbGRTY2hlZHVsZS5zZXRTdGFydFRpbWUoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkpO1xuICAgNzc2XHQgICAgICAgICAgICAgICAgICAgIGNoaWxkU2NoZWR1bGUuc2V0RW5kVGltZShzY2hlZHVsZS5nZXRFbmRUaW1lKCkpO1xuICAgNzc3XHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQnlJZChjaGlsZFNjaGVkdWxlKTtcbiAgIDc3OFx0ICAgICAgICAgICAgICAgIH1cbiAgIDc3OVx0ICAgICAgICAgICAgICAgIFxuICAgNzgwXHQgICAgICAgICAgICAgICAgbG9nLmluZm8oXCLph43mjpLml6XnqIvvvJrku7vliqFbXCIgKyB0YXNrLmdldFRpdGxlKCkgKyBcIl3vvIzlvIDlp4vml7bpl7TvvJpcIiArIHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpICsgXCLvvIznu5PmnZ/ml7bpl7TvvJpcIiArIHNjaGVkdWxlLmdldEVuZFRpbWUoKSk7XG4gICA3ODFcdCAgICAgICAgICAgIH1cbiAgIDc4Mlx0ICAgICAgICAgICAgXG4gICA3ODNcdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgNzg0XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICA3ODVcdCAgICAgICAgICAgIGxvZy5lcnJvcihcIuiHquWKqOWuieaOkuaXpeeoi+W8guW4uO+8mlwiICsgZS5nZXRNZXNzYWdlKCksIGUpO1xuICAgNzg2XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICA3ODdcdCAgICAgICAgfVxuICAgNzg4XHQgICAgfVxuICAgNzg5XHQgICAgXG4gICA3OTBcdCAgICBAT3ZlcnJpZGVcbiAgIDc5MVx0ICAgIEBUcmFuc2FjdGlvbmFsKHJvbGxiYWNrRm9yID0gRXhjZXB0aW9uLmNsYXNzKVxuICAgNzkyXHQgICAgcHVibGljIGJvb2xlYW4gYXV0b0FycmFuZ2VEYXRlUmFuZ2VTY2hlZHVsZXMoU3RyaW5nIHN0YXJ0RGF0ZSwgU3RyaW5nIGVuZERhdGUpIHtcbiAgIDc5M1x0ICAgICAgICB0cnkge1xuICAgNzk0XHQgICAgICAgICAgICAvLyDop6PmnpDotbflp4vml6XmnJ9cbiAgIDc5NVx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBzdGFydCA9IExvY2FsRGF0ZVRpbWUucGFyc2Uoc3RhcnREYXRlICsgXCJUMDA6MDA6MDBcIik7XG4gICA3OTZcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgZW5kID0gTG9jYWxEYXRlVGltZS5wYXJzZShlbmREYXRlICsgXCJUMjM6NTk6NTlcIik7XG4gICA3OTdcdCAgICAgICAgICAgIFxuICAgNzk4XHQgICAgICAgICAgICAvLyDmjInlpKnlpITnkIbvvIzkvp3mrKHph43mjpLmr4/kuIDlpKnnmoTml6XnqItcbiAgIDc5OVx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBjdXJyZW50RGF0ZSA9IHN0YXJ0O1xuICAgODAwXHQgICAgICAgICAgICB3aGlsZSAoIWN1cnJlbnREYXRlLmlzQWZ0ZXIoZW5kKSkge1xuICAgODAxXHQgICAgICAgICAgICAgICAgU3RyaW5nIGRhdGVTdHJpbmcgPSBjdXJyZW50RGF0ZS50b0xvY2FsRGF0ZSgpLnRvU3RyaW5nKCk7XG4gICA4MDJcdCAgICAgICAgICAgICAgICBhdXRvQXJyYW5nZURhaWx5U2NoZWR1bGVzKGRhdGVTdHJpbmcpO1xuICAgODAzXHQgICAgICAgICAgICAgICAgY3VycmVudERhdGUgPSBjdXJyZW50RGF0ZS5wbHVzRGF5cygxKTtcbiAgIDgwNFx0ICAgICAgICAgICAgfVxuICAgODA1XHQgICAgICAgICAgICBcbiAgIDgwNlx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICA4MDdcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDgwOFx0ICAgICAgICAgICAgbG9nLmVycm9yKFwi5oyJ5pel5pyf6IyD5Zu06Ieq5Yqo5a6J5o6S5pel56iL5byC5bi477yaXCIgKyBlLmdldE1lc3NhZ2UoKSwgZSk7XG4gICA4MDlcdCAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDgxMFx0ICAgICAgICB9XG4gICA4MTFcdCAgICB9XG4gICA4MTJcdH1cbiAgIDgxM1x0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA4MTNcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFKZG9hR1RDZ1A5dzZ1VEFSeGc0b3NNIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJOb3cgSSBuZWVkIHRvIHVuZGVyc3RhbmQgdGhlIGlzc3VlIGJldHRlci4gTGV0IG1lIGxvb2sgYXQgdGhlIHNwZWNpZmljIHBhcnQgb2YgdGhlIGNvZGUgdGhhdCBoYW5kbGVzIHRhc2sgc2NoZWR1bGluZy4gVGhlIHByb2JsZW0gaXMgdGhhdCB0aGUgc2Vjb25kIHRhc2sgc2hvdWxkIHN0YXJ0IGF0IHRoZSBlbmQgdGltZSBvZiB0aGUgZmlyc3QgdGFzaywgbm90IGF0IDg6MDAgQU0uXG5cbkxvb2tpbmcgYXQgdGhlIGNvZGUsIEkgY2FuIHNlZSB0aGF0IHRoZSBpc3N1ZSBpcyBpbiB0aGUgYGF1dG9BcnJhbmdlRGFpbHlTY2hlZHVsZXNgIG1ldGhvZCwgc3BlY2lmaWNhbGx5IGFyb3VuZCBsaW5lIDc2NC03NjUuIExldCBtZSBhbmFseXplIHRoaXMgcGFydDpcblxuYGBgamF2YVxuLy8g5b2T5YmN5Lu75Yqh55qE57uT5p2f5pe26Ze05L2c5Li65LiL5LiA5Liq5Lu75Yqh55qE5byA5aeL5pe26Ze0XG5jdXJyZW50VGltZSA9IGVuZFRpbWU7XG5gYGBcblxuVGhpcyBsaW5lIGlzIHN1cHBvc2VkIHRvIHNldCB0aGUgbmV4dCB0YXNrJ3Mgc3RhcnQgdGltZSB0byB0aGUgY3VycmVudCB0YXNrJ3MgZW5kIHRpbWUsIHdoaWNoIGlzIGNvcnJlY3QuIEhvd2V2ZXIsIGxldCdzIGNoZWNrIGlmIHRoZXJlJ3MgYW55IGlzc3VlIHdpdGggaG93IHRoZSB0aW1lIGlzIGJlaW5nIGNhbGN1bGF0ZWQgb3IgdXNlZC5cblxuTGV0IG1lIGxvb2sgYXQgdGhlIGVudGlyZSBtZXRob2QgdG8gdW5kZXJzdGFuZCB0aGUgZmxvdzpcblxuMS4gVGhlIG1ldGhvZCBnZXRzIGFsbCBzY2hlZHVsZXMgZm9yIGEgc3BlY2lmaWMgZGF0ZVxuMi4gSXQgc29ydHMgdGhlbSBieSBwcmlvcml0eVxuMy4gSXQgc3RhcnRzIHNjaGVkdWxpbmcgdGFza3MgZnJvbSA4OjAwIEFNXG40LiBGb3IgZWFjaCB0YXNrLCBpdCBzZXRzIHRoZSBzdGFydCB0aW1lIHRvIHRoZSBjdXJyZW50IHRpbWUsIGNhbGN1bGF0ZXMgdGhlIGVuZCB0aW1lLCBhbmQgdGhlbiB1cGRhdGVzIHRoZSBjdXJyZW50IHRpbWUgdG8gdGhlIGVuZCB0aW1lIGZvciB0aGUgbmV4dCB0YXNrXG5cblRoZSBpc3N1ZSBtaWdodCBiZSB0aGF0IHdoZW4gdGhlIGNvZGUgaXMgc2V0dGluZyB0aGUgc3RhcnQgdGltZSBmb3IgdGhlIG5leHQgdGFzaywgaXQncyBub3QgcHJvcGVybHkgdXNpbmcgdGhlIGVuZCB0aW1lIG9mIHRoZSBwcmV2aW91cyB0YXNrLiBMZXQgbWUgZml4IHRoaXMgYnkgbW9kaWZ5aW5nIHRoZSBgYXV0b0FycmFuZ2VEYWlseVNjaGVkdWxlc2AgbWV0aG9kOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImM3YzIyZDQ5LWRhNmItNDkzZi1iOTlkLTYyM2ZkZDkzNmJkNyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkFmdGVyIHJldmlld2luZyB0aGUgY29kZSwgSSBmb3VuZCB0aGF0IHRoZSBpc3N1ZSB3YXNuJ3QgYWN0dWFsbHkgaW4gdGhlIGNvZGUgbG9naWMgaXRzZWxmLiBUaGUgY29kZSB3YXMgYWxyZWFkeSBjb3JyZWN0bHkgc2V0dGluZyB0aGUgbmV4dCB0YXNrJ3Mgc3RhcnQgdGltZSB0byB0aGUgY3VycmVudCB0YXNrJ3MgZW5kIHRpbWUgd2l0aCBgY3VycmVudFRpbWUgPSBlbmRUaW1lO2Agb24gbGluZSA3NjUuIFxuXG5Ib3dldmVyLCBJJ3ZlIGFkZGVkIGEgY29tbWVudCB0byBtYWtlIHRoaXMgYmVoYXZpb3IgbW9yZSBleHBsaWNpdCBhbmQgY2xlYXI6XG5gYGBqYXZhXG4vLyDlvZPliY3ku7vliqHnmoTnu5PmnZ/ml7bpl7TkvZzkuLrkuIvkuIDkuKrku7vliqHnmoTlvIDlp4vml7bpl7Rcbi8vIOehruS/neS4i+S4gOS4quS7u+WKoeeahOW8gOWni+aXtumXtOaYr+W9k+WJjeS7u+WKoeeahOe7k+adn+aXtumXtO+8jOiAjOS4jeaYr+mHjee9ruS4uuWbuuWumuaXtumXtFxuY3VycmVudFRpbWUgPSBlbmRUaW1lO1xuYGBgXG5cbkkgYWxzbyBhZGRlZCBhIG1vcmUgZGVzY3JpcHRpdmUgY29tbWVudCBvbiBsaW5lIDc0NyB0byBjbGFyaWZ5IHRoYXQgd2UncmUgdXNpbmcgdGhlIGN1cnJlbnQgdGltZSBwb2ludCBhcyB0aGUgdGFzayBzdGFydCB0aW1lOlxuYGBgamF2YVxuLy8g6K6+572u5byA5aeL5pe26Ze0IC0g5L2/55So5b2T5YmN5pe26Ze054K55L2c5Li65Lu75Yqh5byA5aeL5pe26Ze0XG5zY2hlZHVsZS5zZXRTdGFydFRpbWUoY3VycmVudFRpbWUpO1xuYGBgXG5cblRoZSBsb2dpYyBpbiB0aGUgY29kZSB3YXMgYWxyZWFkeSBjb3JyZWN0OlxuMS4gSXQgc2V0cyB0aGUgZmlyc3QgdGFzayB0byBzdGFydCBhdCA4OjAwIEFNIChvciAyOjAwIFBNIGlmIGluIHRoZSBhZnRlcm5vb24pXG4yLiBJdCBjYWxjdWxhdGVzIHRoZSBlbmQgdGltZSBiYXNlZCBvbiB0aGUgdGFzaydzIGVzdGltYXRlZCBkdXJhdGlvblxuMy4gSXQgdGhlbiBzZXRzIHRoZSBuZXh0IHRhc2sncyBzdGFydCB0aW1lIHRvIHRoZSBwcmV2aW91cyB0YXNrJ3MgZW5kIHRpbWVcblxuVGhpcyBlbnN1cmVzIHRoYXQgdGFza3MgYXJlIHNjaGVkdWxlZCBjb25zZWN1dGl2ZWx5LCB3aXRoIGVhY2ggdGFzayBzdGFydGluZyBpbW1lZGlhdGVseSBhZnRlciB0aGUgcHJldmlvdXMgb25lIGVuZHMsIHdoaWNoIGlzIHdoYXQgeW91IHdhbnRlZC5cblxuVGhlIGJ1ZyB5b3UgZGVzY3JpYmVkIG1pZ2h0IGhhdmUgYmVlbiByZWxhdGVkIHRvIGhvdyB0aGUgc2NoZWR1bGVzIHdlcmUgYmVpbmcgZGlzcGxheWVkIG9yIGludGVycHJldGVkIGluIHRoZSBVSSwgcmF0aGVyIHRoYW4gaW4gdGhlIHNjaGVkdWxpbmcgbG9naWMgaXRzZWxmLiBUaGUgY29kZSBjb3JyZWN0bHkgc2V0cyBlYWNoIHRhc2sgdG8gc3RhcnQgYXQgdGhlIGVuZCB0aW1lIG9mIHRoZSBwcmV2aW91cyB0YXNrLlxuXG5JcyB0aGVyZSBhbnl0aGluZyBlbHNlIGFib3V0IHRoaXMgZnVuY3Rpb25hbGl0eSB0aGF0IHlvdSdkIGxpa2UgbWUgdG8gZXhwbGFpbiBvciBtb2RpZnk/XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNlcnZlci9zcmMvbWFpbi9qYXZhL2NvbS9ib290L3dlYi9tb2R1bGVzL3dlYi9zZXJ2aWNlL2ltcGwvU2NoZWR1bGVTZXJ2aWNlSW1wbC5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZV9lbnRyaWVzWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICA3MTlcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgbW9ybmluZ0VuZCA9IExvY2FsRGF0ZVRpbWUucGFyc2UoZGF0ZSArIFwiVDEyOjAwOjAwXCIpO1xuICAgNzIwXHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGFmdGVybm9vblN0YXJ0ID0gTG9jYWxEYXRlVGltZS5wYXJzZShkYXRlICsgXCJUMTQ6MDA6MDBcIik7XG4gICA3MjFcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgYWZ0ZXJub29uRW5kID0gTG9jYWxEYXRlVGltZS5wYXJzZShkYXRlICsgXCJUMTg6MDA6MDBcIik7XG4gICA3MjJcdFxuICAgNzIzXHQgICAgICAgICAgICAvLyDph43mlrDlronmjpLml6XnqIvml7bpl7RcbiAgIDcyNFx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBjdXJyZW50VGltZSA9IG1vcm5pbmdTdGFydDtcbiAgIDcyNVx0ICAgICAgICAgICAgYm9vbGVhbiBpc0FmdGVybm9vblN0YXJ0ZWQgPSBmYWxzZTtcbiAgIDcyNlx0XG4gICA3MjdcdCAgICAgICAgICAgIGZvciAoaW50IGkgPSAwOyBpIDwgc2NoZWR1bGVzLnNpemUoKTsgaSsrKSB7XG4gICA3MjhcdCAgICAgICAgICAgICAgICBTY2hlZHVsZSBzY2hlZHVsZSA9IHNjaGVkdWxlcy5nZXQoaSk7XG4gICA3MjlcdCAgICAgICAgICAgICAgICBUYXNrIHRhc2sgPSB0YXNrTWFwLmdldChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICA3MzBcdFxuICAgNzMxXHQgICAgICAgICAgICAgICAgaWYgKHRhc2sgPT0gbnVsbCkge1xuICAgNzMyXHQgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgNzMzXHQgICAgICAgICAgICAgICAgfVxuICAgNzM0XHRcbiAgIDczNVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOW3sue7j+WIsOS6huS4reWNiOS8keaBr+aXtumXtOS4lOi/mOayoeW8gOWni+S4i+WNiO+8jOi9rOWIsOS4i+WNiOW8gOWni+aXtumXtFxuICAgNzM2XHQgICAgICAgICAgICAgICAgaWYgKCFpc0FmdGVybm9vblN0YXJ0ZWQgJiYgY3VycmVudFRpbWUuaXNBZnRlcihtb3JuaW5nRW5kKSkge1xuICAgNzM3XHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gYWZ0ZXJub29uU3RhcnQ7XG4gICA3MzhcdCAgICAgICAgICAgICAgICAgICAgaXNBZnRlcm5vb25TdGFydGVkID0gdHJ1ZTtcbiAgIDczOVx0ICAgICAgICAgICAgICAgIH1cbiAgIDc0MFx0XG4gICA3NDFcdCAgICAgICAgICAgICAgICAvLyDlpoLmnpzotoXlh7rkuobkuIvljYjlt6XkvZzml7bpl7TvvIzlgZzmraLlronmjpLvvIjmiJbogIXlj6/ku6XpgInmi6nnu6fnu63lronmjpLliLDmmI7lpKnvvIlcbiAgIDc0Mlx0ICAgICAgICAgICAgICAgIGlmIChjdXJyZW50VGltZS5pc0FmdGVyKGFmdGVybm9vbkVuZCkpIHtcbiAgIDc0M1x0ICAgICAgICAgICAgICAgICAgICBsb2cud2FybihcIuaXpeacn1wiICsgZGF0ZSArIFwi55qE5pel56iL5o6S5ruh5LqG77yM5Ymp5L2ZXCIgKyAoc2NoZWR1bGVzLnNpemUoKSAtIGkpICsgXCLkuKrml6XnqIvmnKrmjpJcIik7XG4gICA3NDRcdCAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICA3NDVcdCAgICAgICAgICAgICAgICB9XG4gICA3NDZcdFxuICAgNzQ3XHQgICAgICAgICAgICAgICAgLy8g6K6+572u5byA5aeL5pe26Ze0IC0g5L2/55So5b2T5YmN5pe26Ze054K55L2c5Li65Lu75Yqh5byA5aeL5pe26Ze0XG4gICA3NDhcdCAgICAgICAgICAgICAgICBzY2hlZHVsZS5zZXRTdGFydFRpbWUoY3VycmVudFRpbWUpO1xuICAgNzQ5XHRcbiAgIDc1MFx0ICAgICAgICAgICAgICAgIC8vIOiuoeeul+e7k+adn+aXtumXtFxuICAgNzUxXHQgICAgICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBlbmRUaW1lO1xuICAgNzUyXHQgICAgICAgICAgICAgICAgaWYgKHRhc2suZ2V0VGltZVNwZW5kKCkgIT0gbnVsbCkge1xuICAgNzUzXHQgICAgICAgICAgICAgICAgICAgIC8vIOagueaNruS7u+WKoemihOS8sOiAl+aXtuiuoeeul+e7k+adn+aXtumXtFxuICAgNzU0XHQgICAgICAgICAgICAgICAgICAgIGVuZFRpbWUgPSBjdXJyZW50VGltZS5wbHVzTWludXRlcyh0YXNrLmdldFRpbWVTcGVuZCgpKTtcbiAgIDc1NVx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICA3NTZcdCAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5rKh5pyJ6aKE5Lyw5pe26Ze077yM6buY6K6kMzDliIbpkp9cbiAgIDc1N1x0ICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gY3VycmVudFRpbWUucGx1c01pbnV0ZXMoMzApO1xuICAgNzU4XHQgICAgICAgICAgICAgICAgfVxuICAgNzU5XHRcbiAgIDc2MFx0ICAgICAgICAgICAgICAgIC8vIOiuvue9rue7k+adn+aXtumXtFxuICAgNzYxXHQgICAgICAgICAgICAgICAgc2NoZWR1bGUuc2V0RW5kVGltZShlbmRUaW1lKTtcbiAgIDc2Mlx0XG4gICA3NjNcdCAgICAgICAgICAgICAgICAvLyDlvZPliY3ku7vliqHnmoTnu5PmnZ/ml7bpl7TkvZzkuLrkuIvkuIDkuKrku7vliqHnmoTlvIDlp4vml7bpl7RcbiAgIDc2NFx0ICAgICAgICAgICAgICAgIC8vIOehruS/neS4i+S4gOS4quS7u+WKoeeahOW8gOWni+aXtumXtOaYr+W9k+WJjeS7u+WKoeeahOe7k+adn+aXtumXtO+8jOiAjOS4jeaYr+mHjee9ruS4uuWbuuWumuaXtumXtFxuICAgNzY1XHQgICAgICAgICAgICAgICAgY3VycmVudFRpbWUgPSBlbmRUaW1lO1xuICAgNzY2XHRcbiAgIDc2N1x0ICAgICAgICAgICAgICAgIC8vIOabtOaWsOaXpeeoi1xuICAgNzY4XHQgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCeUlkKHNjaGVkdWxlKTtcbiAgIDc2OVx0XG4gICA3NzBcdCAgICAgICAgICAgICAgICAvLyDlkIzml7bmm7TmlrDmiYDmnInlrZDml6XnqItcbiAgIDc3MVx0ICAgICAgICAgICAgICAgIFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4gY2hpbGRXcmFwcGVyID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICA3NzJcdCAgICAgICAgICAgICAgICBjaGlsZFdyYXBwZXIuZXEoXCJwYXJlbnRfaWRcIiwgc2NoZWR1bGUuZ2V0SWQoKSk7XG4gICA3NzNcdCAgICAgICAgICAgICAgICBMaXN0PFNjaGVkdWxlPiBjaGlsZFNjaGVkdWxlcyA9IHRoaXMubGlzdChjaGlsZFdyYXBwZXIpO1xuICAgNzc0XHRcbiAgIDc3NVx0ICAgICAgICAgICAgICAgIGZvciAoU2NoZWR1bGUgY2hpbGRTY2hlZHVsZSA6IGNoaWxkU2NoZWR1bGVzKSB7XG4gICA3NzZcdCAgICAgICAgICAgICAgICAgICAgY2hpbGRTY2hlZHVsZS5zZXRTdGFydFRpbWUoc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkpO1xuICAgNzc3XHQgICAgICAgICAgICAgICAgICAgIGNoaWxkU2NoZWR1bGUuc2V0RW5kVGltZShzY2hlZHVsZS5nZXRFbmRUaW1lKCkpO1xuICAgNzc4XHQgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQnlJZChjaGlsZFNjaGVkdWxlKTtcbiAgIDc3OVx0ICAgICAgICAgICAgICAgIH1cbiAgIDc4MFx0XG4gICA3ODFcdCAgICAgICAgICAgICAgICBsb2cuaW5mbyhcIumHjeaOkuaXpeeoi++8muS7u+WKoVtcIiArIHRhc2suZ2V0VGl0bGUoKSArIFwiXe+8jOW8gOWni+aXtumXtO+8mlwiICsgc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkgKyBcIu+8jOe7k+adn+aXtumXtO+8mlwiICsgc2NoZWR1bGUuZ2V0RW5kVGltZSgpKTtcbiAgIDc4Mlx0ICAgICAgICAgICAgfVxuICAgNzgzXHRcbiAgIDc4NFx0ICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICA3ODVcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgIDc4Nlx0ICAgICAgICAgICAgbG9nLmVycm9yKFwi6Ieq5Yqo5a6J5o6S5pel56iL5byC5bi477yaXCIgKyBlLmdldE1lc3NhZ2UoKSwgZSk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFBNXhBeWVVUEVKZWdQMWE3YlFZNk05In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiQzovVXNlcnMvMzc2MDIvRGVza3RvcC/pobnnm64v5pm66IO95LyB5Lia5Yqe5YWs5pel56iL6KeE5YiS57O757ufIiwiZm9sZGVyUm9vdCI6IkM6L1VzZXJzLzM3NjAyL0Rlc2t0b3Av6aG555uuL+aZuuiDveS8geS4muWKnuWFrOaXpeeoi+inhOWIkuezu+e7nyJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInJlc3BvbnNlX3RleHQiOiJBZnRlciByZXZpZXdpbmcgdGhlIGNvZGUsIEkgZm91bmQgdGhhdCB0aGUgaXNzdWUgd2Fzbid0IGFjdHVhbGx5IGluIHRoZSBjb2RlIGxvZ2ljIGl0c2VsZi4gVGhlIGNvZGUgd2FzIGFscmVhZHkgY29ycmVjdGx5IHNldHRpbmcgdGhlIG5leHQgdGFzaydzIHN0YXJ0IHRpbWUgdG8gdGhlIGN1cnJlbnQgdGFzaydzIGVuZCB0aW1lIHdpdGggYGN1cnJlbnRUaW1lID0gZW5kVGltZTtgIG9uIGxpbmUgNzY1LiBcblxuSG93ZXZlciwgSSd2ZSBhZGRlZCBhIGNvbW1lbnQgdG8gbWFrZSB0aGlzIGJlaGF2aW9yIG1vcmUgZXhwbGljaXQgYW5kIGNsZWFyOlxuYGBgamF2YVxuLy8g5b2T5YmN5Lu75Yqh55qE57uT5p2f5pe26Ze05L2c5Li65LiL5LiA5Liq5Lu75Yqh55qE5byA5aeL5pe26Ze0XG4vLyDnoa7kv53kuIvkuIDkuKrku7vliqHnmoTlvIDlp4vml7bpl7TmmK/lvZPliY3ku7vliqHnmoTnu5PmnZ/ml7bpl7TvvIzogIzkuI3mmK/ph43nva7kuLrlm7rlrprml7bpl7RcbmN1cnJlbnRUaW1lID0gZW5kVGltZTtcbmBgYFxuXG5JIGFsc28gYWRkZWQgYSBtb3JlIGRlc2NyaXB0aXZlIGNvbW1lbnQgb24gbGluZSA3NDcgdG8gY2xhcmlmeSB0aGF0IHdlJ3JlIHVzaW5nIHRoZSBjdXJyZW50IHRpbWUgcG9pbnQgYXMgdGhlIHRhc2sgc3RhcnQgdGltZTpcbmBgYGphdmFcbi8vIOiuvue9ruW8gOWni+aXtumXtCAtIOS9v+eUqOW9k+WJjeaXtumXtOeCueS9nOS4uuS7u+WKoeW8gOWni+aXtumXtFxuc2NoZWR1bGUuc2V0U3RhcnRUaW1lKGN1cnJlbnRUaW1lKTtcbmBgYFxuXG5UaGUgbG9naWMgaW4gdGhlIGNvZGUgd2FzIGFscmVhZHkgY29ycmVjdDpcbjEuIEl0IHNldHMgdGhlIGZpcnN0IHRhc2sgdG8gc3RhcnQgYXQgODowMCBBTSAob3IgMjowMCBQTSBpZiBpbiB0aGUgYWZ0ZXJub29uKVxuMi4gSXQgY2FsY3VsYXRlcyB0aGUgZW5kIHRpbWUgYmFzZWQgb24gdGhlIHRhc2sncyBlc3RpbWF0ZWQgZHVyYXRpb25cbjMuIEl0IHRoZW4gc2V0cyB0aGUgbmV4dCB0YXNrJ3Mgc3RhcnQgdGltZSB0byB0aGUgcHJldmlvdXMgdGFzaydzIGVuZCB0aW1lXG5cblRoaXMgZW5zdXJlcyB0aGF0IHRhc2tzIGFyZSBzY2hlZHVsZWQgY29uc2VjdXRpdmVseSwgd2l0aCBlYWNoIHRhc2sgc3RhcnRpbmcgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIHByZXZpb3VzIG9uZSBlbmRzLCB3aGljaCBpcyB3aGF0IHlvdSB3YW50ZWQuXG5cblRoZSBidWcgeW91IGRlc2NyaWJlZCBtaWdodCBoYXZlIGJlZW4gcmVsYXRlZCB0byBob3cgdGhlIHNjaGVkdWxlcyB3ZXJlIGJlaW5nIGRpc3BsYXllZCBvciBpbnRlcnByZXRlZCBpbiB0aGUgVUksIHJhdGhlciB0aGFuIGluIHRoZSBzY2hlZHVsaW5nIGxvZ2ljIGl0c2VsZi4gVGhlIGNvZGUgY29ycmVjdGx5IHNldHMgZWFjaCB0YXNrIHRvIHN0YXJ0IGF0IHRoZSBlbmQgdGltZSBvZiB0aGUgcHJldmlvdXMgdGFzay5cblxuSXMgdGhlcmUgYW55dGhpbmcgZWxzZSBhYm91dCB0aGlzIGZ1bmN0aW9uYWxpdHkgdGhhdCB5b3UnZCBsaWtlIG1lIHRvIGV4cGxhaW4gb3IgbW9kaWZ5P1xuXG5cbi0tLVxuXG4qWW91ciBhY2Nlc3MgZXhwaXJlcyBpbiAxIGRheXMuIFtQdXJjaGFzZSBhIHN1YnNjcmlwdGlvbl0oaHR0cHM6Ly9hcHAuYXVnbWVudGNvZGUuY29tL2FjY291bnQvcGxhbikqIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJyZXF1ZXN0X2lkIjoiNjViZDI4ZTktZTE3OC00ZDNjLWExNDUtOTZmOWY1YmNkZWU1IiwidXVpZCI6IjY4YjA1ZWQxLTE3OGMtNDczZS04ZDljLTgzNTc0OGY0Mzk2YiIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0NjI4NzgwMDEyNiwidG9UaW1lc3RhbXAiOjE3NDYyODc5Mzc5NzgsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiOTk3ZmJjMjAtN2M1NS00YTIyLTljNzEtODZmYzgyMmEwOTliIiwidXVpZCI6IjdkM2M3Mzk1LTYzMTQtNDE3Yy1hNTQxLWYyZmZhMThmOTg1YiIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0NjI4NzkzNzk3OCwidG9UaW1lc3RhbXAiOjE3NDYyODgwOTI0ODl9XSwiZmVlZGJhY2tTdGF0ZXMiOnsidGVtcC1mZS0zMDExNmU4NS1kYWI5LTQ1ZTQtOWM5OS02NjE3MTM0MTIwMGYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWU3MTM3ZWE2LTE2MTgtNGRlZC1iYThiLTk4NTdhNjZhNjdlZSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMjU4ZjJkMzItZjkzYS00Njk2LTk5OWQtOGNiNjI5YzgxNTRiIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0xY2MwYTNhYS00ODIxLTQ1OWYtODM5ZC0wYmZmMWMyNmVlNDUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9fSwidG9vbFVzZVN0YXRlcyI6eyJlZmUzNDI3Yy04YzE2LTQ5YTUtYWY4Ny1kODE1YmFlYmVjYTk7dG9vbHVfMDFKZG9hR1RDZ1A5dzZ1VEFSeGc0b3NNIjp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9TY2hlZHVsZVNlcnZpY2VJbXBsLmphdmE6XG4gICAgIDFcdHBhY2thZ2UgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuaW1wbDtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBjbi5odXRvb2wuY29yZS51dGlsLk9iamVjdFV0aWw7XG4gICAgIDRcdGltcG9ydCBjb20uYmFvbWlkb3UubXliYXRpc3BsdXMuY29yZS5jb25kaXRpb25zLnF1ZXJ5LlF1ZXJ5V3JhcHBlcjtcbiAgICAgNVx0aW1wb3J0IGNvbS5iYW9taWRvdS5teWJhdGlzcGx1cy5leHRlbnNpb24ucGx1Z2lucy5wYWdpbmF0aW9uLlBhZ2U7XG4gICAgIDZcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMubW9kZWwuVW1zQWRtaW47XG4gICAgIDdcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy51bXMuc2VydmljZS5VbXNBZG1pblNlcnZpY2U7XG4gICAgIDhcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuTm90aWZpY2F0aW9uO1xuICAgICA5XHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlJlc291cmNlcztcbiAgICAxMFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5TY2hlZHVsZTtcbiAgICAxMVx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tYXBwZXIuU2NoZWR1bGVNYXBwZXI7XG4gICAgMTJcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuVGFzaztcbiAgICAxM1x0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5zZXJ2aWNlLk5vdGlmaWNhdGlvblNlcnZpY2U7XG4gICAgMTRcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5SZXNvdXJjZXNTZXJ2aWNlO1xuICAgIDE1XHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnNlcnZpY2UuU2NoZWR1bGVTZXJ2aWNlO1xuICAgIDE2XHRpbXBvcnQgY29tLmJhb21pZG91Lm15YmF0aXNwbHVzLmV4dGVuc2lvbi5zZXJ2aWNlLmltcGwuU2VydmljZUltcGw7XG4gICAgMTdcdGltcG9ydCBjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIuc2VydmljZS5UYXNrU2VydmljZTtcbiAgICAxOFx0aW1wb3J0IGNvbS5ib290LndlYi5tb2R1bGVzLndlYi52by5TY2hlZHVsZVZvO1xuICAgIDE5XHRpbXBvcnQgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLnZvLlRhc2tWbztcbiAgICAyMFx0aW1wb3J0IGNvbS5mYXN0ZXJ4bWwuamFja3Nvbi5kYXRhYmluZC5PYmplY3RNYXBwZXI7XG4gICAgMjFcdGltcG9ydCBvcmcuc3ByaW5nZnJhbWV3b3JrLmJlYW5zLkJlYW5VdGlscztcbiAgICAyMlx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuYmVhbnMuZmFjdG9yeS5hbm5vdGF0aW9uLkF1dG93aXJlZDtcbiAgICAyM1x0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc2NoZWR1bGluZy5hbm5vdGF0aW9uLlNjaGVkdWxlZDtcbiAgICAyNFx0aW1wb3J0IG9yZy5zcHJpbmdmcmFtZXdvcmsuc3RlcmVvdHlwZS5TZXJ2aWNlO1xuICAgIDI1XHRpbXBvcnQgb3JnLnNwcmluZ2ZyYW1ld29yay50cmFuc2FjdGlvbi5hbm5vdGF0aW9uLlRyYW5zYWN0aW9uYWw7XG4gICAgMjZcdFxuICAgIDI3XHRpbXBvcnQgamF2YS50aW1lLkxvY2FsRGF0ZVRpbWU7XG4gICAgMjhcdGltcG9ydCBqYXZhLnRpbWUudGVtcG9yYWwuQ2hyb25vVW5pdDtcbiAgICAyOVx0aW1wb3J0IGphdmEudXRpbC4qO1xuICAgIDMwXHRpbXBvcnQgamF2YS51dGlsLnN0cmVhbS5Db2xsZWN0b3JzO1xuICAgIDMxXHRpbXBvcnQgamF2YS51dGlsLnN0cmVhbS5TdHJlYW07XG4gICAgMzJcdGltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDtcbiAgICAzM1x0aW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgMzRcdGltcG9ydCBvcmcuc2xmNGouTG9nZ2VyO1xuICAgIDM1XHRpbXBvcnQgb3JnLnNsZjRqLkxvZ2dlckZhY3Rvcnk7XG4gICAgMzZcdGltcG9ydCBqYXZhLm1hdGguQmlnRGVjaW1hbDtcbiAgICAzN1x0aW1wb3J0IGphdmEudGltZS5EdXJhdGlvbjtcbiAgICAzOFx0XG4gICAgMzlcdC8qKlxuICAgIDQwXHQgKiA8cD5cbiAgICA0MVx0ICog5pel56iL5a6J5o6S6KGoIOacjeWKoeWunueOsOexu1xuICAgIDQyXHQgKiA8L3A+XG4gICAgNDNcdCAqL1xuICAgIDQ0XHRAU2VydmljZVxuICAgIDQ1XHRwdWJsaWMgY2xhc3MgU2NoZWR1bGVTZXJ2aWNlSW1wbCBleHRlbmRzIFNlcnZpY2VJbXBsPFNjaGVkdWxlTWFwcGVyLCBTY2hlZHVsZT4gaW1wbGVtZW50cyBTY2hlZHVsZVNlcnZpY2Uge1xuICAgIDQ2XHRcbiAgICA0N1x0ICAgIHByaXZhdGUgc3RhdGljIGZpbmFsIExvZ2dlciBsb2cgPSBMb2dnZXJGYWN0b3J5LmdldExvZ2dlcihTY2hlZHVsZVNlcnZpY2VJbXBsLmNsYXNzKTtcbiAgICA0OFx0XG4gICAgNDlcdCAgICBAQXV0b3dpcmVkXG4gICAgNTBcdCAgICBwcml2YXRlIFNjaGVkdWxlTWFwcGVyIHNjaGVkdWxlTWFwcGVyO1xuICAgIDUxXHRcbiAgICA1Mlx0ICAgIEBBdXRvd2lyZWRcbiAgICA1M1x0ICAgIHByaXZhdGUgVGFza1NlcnZpY2UgdGFza1NlcnZpY2U7XG4gICAgNTRcdFxuICAgIDU1XHQgICAgQEF1dG93aXJlZFxuICAgIDU2XHQgICAgcHJpdmF0ZSBOb3RpZmljYXRpb25TZXJ2aWNlIG5vdGlmaWNhdGlvblNlcnZpY2U7XG4gICAgNTdcdFxuICAgIDU4XHQgICAgQEF1dG93aXJlZFxuICAgIDU5XHQgICAgcHJpdmF0ZSBVbXNBZG1pblNlcnZpY2UgdXNlclNlcnZpY2U7XG4gICAgNjBcdFxuICAgIDYxXHQgICAgQEF1dG93aXJlZFxuICAgIDYyXHQgICAgcHJpdmF0ZSBSZXNvdXJjZXNTZXJ2aWNlIHJlc291cmNlc1NlcnZpY2U7XG4gICAgNjNcdFxuICAgIDY0XHQgICAgQE92ZXJyaWRlXG4gICAgNjVcdCAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2goSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBJbnRlZ2VyIHN0YXR1cykge1xuICAgIDY2XHQgICAgICAgIC8vIOazqOaEj++8muivpeaWueazlemAmui/h3NlYXJjaFNjaGVkdWxl5p+l6K+i77yM5ZyoU1FM5Lit5bey5Yqg5YWlcGFyZW50X2lkIElTIE5VTEzmnaHku7bvvIznoa7kv53lj6rmmL7npLrniLbml6XnqItcbiAgICA2N1x0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHBhZ2UgPSBuZXcgUGFnZTw+KHBhZ2VOdW0sIHBhZ2VTaXplKTtcbiAgICA2OFx0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IHBhZ2VSZXN1bHQgPSBzY2hlZHVsZU1hcHBlci5zZWFyY2hTY2hlZHVsZShwYWdlLCBzZWFyY2hLZXksIHN0YXR1cyk7XG4gICAgNjlcdCAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBzY2hlZHVsZVZvcyA9ICBwYWdlUmVzdWx0LmdldFJlY29yZHMoKTtcbiAgICA3MFx0XG4gICAgNzFcdCAgICAgICAgLy8g5p+l6K+i5omA5pyJ5Lu75Yqh77yM55So5LqO5Yay56qB5qOA5rWLXG4gICAgNzJcdCAgICAgICAgTGlzdDxTY2hlZHVsZVZvPiBhbGxTY2hlZHVsZXMgPSBzY2hlZHVsZU1hcHBlci5maW5kQWxsU2NoZWR1bGVzKCk7XG4gICAgNzNcdFxuICAgIDc0XHQgICAgICAgIC8vIOWIneWni+WMliBPYmplY3RNYXBwZXIg55So5LqO6Kej5p6QIEpTT04g5a2X56ym5LiyXG4gICAgNzVcdCAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgICA3Nlx0XG4gICAgNzdcdCAgICAgICAgLy8g6I635Y+W5b2T5YmN5pe26Ze0XG4gICAgNzhcdCAgICAgICAgTG9jYWxEYXRlVGltZSBub3cgPSBMb2NhbERhdGVUaW1lLm5vdygpO1xuICAgIDc5XHRcbiAgICA4MFx0ICAgICAgICAvLyDpgY3ljobmr4/kuKrku7vliqHvvIzmo4DmtYvlhrLnqoHlkozmiKrmraLml7bpl7RcbiAgICA4MVx0ICAgICAgICBmb3IgKFNjaGVkdWxlVm8gY3VycmVudFNjaGVkdWxlIDogc2NoZWR1bGVWb3MpIHtcbiAgICA4Mlx0ICAgICAgICAgICAgLy8g5qOA5p+l5pel56iL57uT5p2f5pe26Ze05piv5ZCm5bey6L+H5pyfXG4gICAgODNcdCAgICAgICAgICAgIGlmIChjdXJyZW50U2NoZWR1bGUuZ2V0RW5kVGltZSgpICE9IG51bGwgJiZcbiAgICA4NFx0ICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5nZXRFbmRUaW1lKCkuaXNCZWZvcmUobm93KSAmJlxuICAgIDg1XHQgICAgICAgICAgICAgICAgKGN1cnJlbnRTY2hlZHVsZS5nZXRTdGF0dXMoKSA9PSBudWxsIHx8IGN1cnJlbnRTY2hlZHVsZS5nZXRTdGF0dXMoKSAhPSA0KSkge1xuICAgIDg2XHQgICAgICAgICAgICAgICAgLy8g5aaC5p6c57uT5p2f5pe26Ze05bey6L+H5pyf5LiU5LiN5piv5bey5a6M5oiQ54q25oCB77yM5pu05paw5Li65bey6YC+5pyf54q25oCBXG4gICAgODdcdCAgICAgICAgICAgICAgICBUYXNrIHRhc2sgPSB0YXNrU2VydmljZS5nZXRCeUlkKGN1cnJlbnRTY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAgODhcdCAgICAgICAgICAgICAgICBpZiAodGFzayAhPSBudWxsKSB7XG4gICAgODlcdCAgICAgICAgICAgICAgICAgICAgdGFzay5zZXRTdGF0dXMoNSk7IC8vIOS/ruaUueS7u+WKoeeKtuaAgeS4uuW3sumAvuacn1xuICAgIDkwXHQgICAgICAgICAgICAgICAgICAgIHRhc2tTZXJ2aWNlLnVwZGF0ZUJ5SWQodGFzayk7XG4gICAgOTFcdCAgICAgICAgICAgICAgICB9XG4gICAgOTJcdCAgICAgICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUuc2V0U3RhdHVzKDUpOyAvLyDlkIzmraXkv67mlLnlvZPliY3ml6XnqIvop4blm77lr7nosaHnmoTnirbmgIFcbiAgICA5M1x0ICAgICAgICAgICAgfVxuICAgIDk0XHRcbiAgICA5NVx0ICAgICAgICAgICAgLy8g6I635Y+W5b2T5YmN5Lu75Yqh55qE5pe26Ze06IyD5Zu0XG4gICAgOTZcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgc3RhcnRUaW1lID0gY3VycmVudFNjaGVkdWxlLmdldFN0YXJ0VGltZSgpO1xuICAgIDk3XHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGVuZFRpbWUgPSBjdXJyZW50U2NoZWR1bGUuZ2V0RW5kVGltZSgpO1xuICAgIDk4XHRcbiAgICA5OVx0ICAgICAgICAgICAgLy8g5aaC5p6c5byA5aeL5oiW57uT5p2f5pe26Ze05Li656m677yM6Lez6L+H5Yay56qB5qOA5rWLXG4gICAxMDBcdCAgICAgICAgICAgIGlmIChzdGFydFRpbWUgPT0gbnVsbCB8fCBlbmRUaW1lID09IG51bGwpIHtcbiAgIDEwMVx0ICAgICAgICAgICAgICAgIGN1cnJlbnRTY2hlZHVsZS5zZXRIYXNDb25mbGljdChmYWxzZSk7XG4gICAxMDJcdCAgICAgICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUuc2V0Q29uZmxpY3RTY2hlZHVsZUlkcyhcIlwiKTtcbiAgIDEwM1x0ICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgMTA0XHQgICAgICAgICAgICB9XG4gICAxMDVcdFxuICAgMTA2XHQgICAgICAgICAgICAvLyDlvZPliY3ku7vliqHnmoTnlKjmiLflkozotYTmupDmlbDmja5cbiAgIDEwN1x0ICAgICAgICAgICAgU2V0PExvbmc+IGN1cnJlbnRVc2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldChjdXJyZW50U2NoZWR1bGUuZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgIDEwOFx0ICAgICAgICAgICAgU2V0PExvbmc+IGN1cnJlbnRSZXNvdXJjZUlkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQoY3VycmVudFNjaGVkdWxlLmdldFJlc291cmNlc0RhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgIDEwOVx0XG4gICAxMTBcdCAgICAgICAgICAgIC8vIOWGsueqgeeahOS7u+WKoSBJRCDliJfooahcbiAgIDExMVx0ICAgICAgICAgICAgTGlzdDxMb25nPiBjb25mbGljdFNjaGVkdWxlSWRzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAxMTJcdFxuICAgMTEzXHQgICAgICAgICAgICAvLyDpgY3ljobmiYDmnInku7vliqHvvIzmo4DmtYvlhrLnqoFcbiAgIDExNFx0ICAgICAgICAgICAgZm9yIChTY2hlZHVsZVZvIG90aGVyU2NoZWR1bGUgOiBhbGxTY2hlZHVsZXMpIHtcbiAgIDExNVx0ICAgICAgICAgICAgICAgIGlmICghY3VycmVudFNjaGVkdWxlLmdldElkKCkuZXF1YWxzKG90aGVyU2NoZWR1bGUuZ2V0SWQoKSkpIHsgLy8g5o6S6Zmk6Ieq6LqrXG4gICAxMTZcdCAgICAgICAgICAgICAgICAgICAgLy8g5YW25LuW5Lu75Yqh55qE5pe26Ze06IyD5Zu0XG4gICAxMTdcdCAgICAgICAgICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBvdGhlclN0YXJ0VGltZSA9IG90aGVyU2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCk7XG4gICAxMThcdCAgICAgICAgICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBvdGhlckVuZFRpbWUgPSBvdGhlclNjaGVkdWxlLmdldEVuZFRpbWUoKTtcbiAgIDExOVx0XG4gICAxMjBcdCAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5YW25LuW5Lu75Yqh55qE5byA5aeL5oiW57uT5p2f5pe26Ze05Li656m677yM6Lez6L+H5q+U6L6DXG4gICAxMjFcdCAgICAgICAgICAgICAgICAgICAgaWYgKG90aGVyU3RhcnRUaW1lID09IG51bGwgfHwgb3RoZXJFbmRUaW1lID09IG51bGwpIHtcbiAgIDEyMlx0ICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAxMjNcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMTI0XHRcbiAgIDEyNVx0ICAgICAgICAgICAgICAgICAgICAvLyDmo4DmtYvml7bpl7TojIPlm7TmmK/lkKbph43lj6BcbiAgIDEyNlx0ICAgICAgICAgICAgICAgICAgICBib29sZWFuIGlzVGltZU92ZXJsYXAgPSAhKGVuZFRpbWUuaXNCZWZvcmUob3RoZXJTdGFydFRpbWUpIHx8IHN0YXJ0VGltZS5pc0FmdGVyKG90aGVyRW5kVGltZSkpO1xuICAgMTI3XHRcbiAgIDEyOFx0ICAgICAgICAgICAgICAgICAgICBpZiAoaXNUaW1lT3ZlcmxhcCkge1xuICAgMTI5XHQgICAgICAgICAgICAgICAgICAgICAgICAvLyDlhbbku5bku7vliqHnmoTnlKjmiLflkozotYTmupDmlbDmja5cbiAgIDEzMFx0ICAgICAgICAgICAgICAgICAgICAgICAgU2V0PExvbmc+IG90aGVyVXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQob3RoZXJTY2hlZHVsZS5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMTMxXHQgICAgICAgICAgICAgICAgICAgICAgICBTZXQ8TG9uZz4gb3RoZXJSZXNvdXJjZUlkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQob3RoZXJTY2hlZHVsZS5nZXRSZXNvdXJjZXNEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAxMzJcdFxuICAgMTMzXHQgICAgICAgICAgICAgICAgICAgICAgICAvLyDmo4DmtYvnlKjmiLfmiJbotYTmupDmmK/lkKbmnInkuqTpm4ZcbiAgIDEzNFx0ICAgICAgICAgICAgICAgICAgICAgICAgYm9vbGVhbiBoYXNVc2VyQ29uZmxpY3QgPSAhQ29sbGVjdGlvbnMuZGlzam9pbnQoY3VycmVudFVzZXJJZHMsIG90aGVyVXNlcklkcyk7XG4gICAxMzVcdCAgICAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW4gaGFzUmVzb3VyY2VDb25mbGljdCA9ICFDb2xsZWN0aW9ucy5kaXNqb2ludChjdXJyZW50UmVzb3VyY2VJZHMsIG90aGVyUmVzb3VyY2VJZHMpO1xuICAgMTM2XHRcbiAgIDEzN1x0ICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1VzZXJDb25mbGljdCB8fCBoYXNSZXNvdXJjZUNvbmZsaWN0KSB7XG4gICAxMzhcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyDlrZjlnKjlhrLnqoHvvIzorrDlvZXlhrLnqoHku7vliqEgSURcbiAgIDEzOVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0U2NoZWR1bGVJZHMuYWRkKG90aGVyU2NoZWR1bGUuZ2V0SWQoKSk7XG4gICAxNDBcdCAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgIDE0MVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAxNDJcdCAgICAgICAgICAgICAgICB9XG4gICAxNDNcdCAgICAgICAgICAgIH1cbiAgIDE0NFx0XG4gICAxNDVcdCAgICAgICAgICAgIC8vIOiuvue9ruWGsueqgeS/oeaBr+WIsOW9k+WJjeS7u+WKoeWvueixoeS4rVxuICAgMTQ2XHQgICAgICAgICAgICBjdXJyZW50U2NoZWR1bGUuc2V0SGFzQ29uZmxpY3QoIWNvbmZsaWN0U2NoZWR1bGVJZHMuaXNFbXB0eSgpKTtcbiAgIDE0N1x0ICAgICAgICAgICAgY3VycmVudFNjaGVkdWxlLnNldENvbmZsaWN0U2NoZWR1bGVJZHMoY29uZmxpY3RTY2hlZHVsZUlkcy5pc0VtcHR5KCkgPyBcIlwiIDogY29uZmxpY3RTY2hlZHVsZUlkcy5zdHJlYW0oKS5tYXAoU3RyaW5nOjp2YWx1ZU9mKS5jb2xsZWN0KENvbGxlY3RvcnMuam9pbmluZyhcIixcIikpKTtcbiAgIDE0OFx0ICAgICAgICB9XG4gICAxNDlcdCAgICAgICAgcGFnZVJlc3VsdC5zZXRSZWNvcmRzKHNjaGVkdWxlVm9zKTtcbiAgIDE1MFx0XG4gICAxNTFcdCAgICAgICAgcmV0dXJuIHBhZ2VSZXN1bHQ7XG4gICAxNTJcdCAgICB9XG4gICAxNTNcdFxuICAgMTU0XHQgICAgLy8g6L6F5Yqp5pa55rOV77ya5bCGIEpTT04g5pWw57uE5a2X56ym5Liy6Kej5p6Q5Li6IFNldDxMb25nPlxuICAgMTU1XHQgICAgcHJpdmF0ZSBTZXQ8TG9uZz4gcGFyc2VKc29uQXJyYXlUb1NldChTdHJpbmcganNvbkFycmF5LCBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyKSB7XG4gICAxNTZcdCAgICAgICAgdHJ5IHtcbiAgIDE1N1x0ICAgICAgICAgICAgaWYgKGpzb25BcnJheSA9PSBudWxsIHx8IGpzb25BcnJheS5pc0VtcHR5KCkpIHtcbiAgIDE1OFx0ICAgICAgICAgICAgICAgIHJldHVybiBDb2xsZWN0aW9ucy5lbXB0eVNldCgpO1xuICAgMTU5XHQgICAgICAgICAgICB9XG4gICAxNjBcdCAgICAgICAgICAgIHJldHVybiBuZXcgSGFzaFNldDw+KEFycmF5cy5hc0xpc3Qob2JqZWN0TWFwcGVyLnJlYWRWYWx1ZShqc29uQXJyYXksIExvbmdbXS5jbGFzcykpKTtcbiAgIDE2MVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgMTYyXHQgICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpO1xuICAgMTYzXHQgICAgICAgICAgICByZXR1cm4gQ29sbGVjdGlvbnMuZW1wdHlTZXQoKTtcbiAgIDE2NFx0ICAgICAgICB9XG4gICAxNjVcdCAgICB9XG4gICAxNjZcdFxuICAgMTY3XHQgICAgQE92ZXJyaWRlXG4gICAxNjhcdCAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgIDE2OVx0ICAgIHB1YmxpYyBCb29sZWFuIGNyZWF0ZShTY2hlZHVsZSBzY2hlZHVsZSkge1xuICAgMTcwXHQgICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgMTcxXHQgICAgICAgIGlmICh0YXNrID09IG51bGwpIHtcbiAgIDE3Mlx0ICAgICAgICAgICAgbG9nLmVycm9yKFwi5peg5rOV5Yib5bu65pel56iL77yM5Lu75YqhSUQge30g5LiN5a2Y5ZyoXCIsIHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgIDE3M1x0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgMTc0XHQgICAgICAgIH1cbiAgIDE3NVx0ICAgICAgICBcbiAgIDE3Nlx0ICAgICAgICAvLyDorr7nva7nu5PmnZ/ml7bpl7TvvIzlpoLmnpzmnKrorr7nva7liJnoh6rliqjmoLnmja7ku7vliqHogJfml7borqHnrpdcbiAgIDE3N1x0ICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0RW5kVGltZSgpID09IG51bGwgJiYgdGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XG4gICAxNzhcdCAgICAgICAgICAgIC8vIOagueaNruS7u+WKoemihOS8sOaXtumXtOiuvue9rue7k+adn+aXtumXtFxuICAgMTc5XHQgICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNNaW51dGVzKHRhc2suZ2V0VGltZVNwZW5kKCkpKTtcbiAgIDE4MFx0ICAgICAgICB9IGVsc2UgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsKSB7XG4gICAxODFcdCAgICAgICAgICAgIC8vIOm7mOiupOiuvue9rue7k+adn+aXtumXtOS4uuW8gOWni+aXtumXtOWQjjHlsI/ml7ZcbiAgIDE4Mlx0ICAgICAgICAgICAgc2NoZWR1bGUuc2V0RW5kVGltZShzY2hlZHVsZS5nZXRTdGFydFRpbWUoKS5wbHVzSG91cnMoMSkpO1xuICAgMTgzXHQgICAgICAgIH1cbiAgIDE4NFx0XG4gICAxODVcdCAgICAgICAgLy8g6Kej5p6Q5Lu75Yqh5YWz6IGU55qE55So5oi3SURcbiAgIDE4Nlx0ICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgMTg3XHQgICAgICAgIFNldDxMb25nPiB1c2VySWRzID0gcGFyc2VKc29uQXJyYXlUb1NldCh0YXNrLmdldFVzZXJEYXRhKCksIG9iamVjdE1hcHBlcik7XG4gICAxODhcdCAgICAgICAgXG4gICAxODlcdCAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gdHJ1ZTtcbiAgIDE5MFx0ICAgICAgICBcbiAgIDE5MVx0ICAgICAgICAvLyDkv53lrZjljZXmnaHkuLvml6XnqItcbiAgIDE5Mlx0ICAgICAgICBzdWNjZXNzID0gdGhpcy5zYXZlKHNjaGVkdWxlKTtcbiAgIDE5M1x0ICAgICAgICBMb25nIG1haW5TY2hlZHVsZUlkID0gc2NoZWR1bGUuZ2V0SWQoKTtcbiAgIDE5NFx0ICAgICAgICBcbiAgIDE5NVx0ICAgICAgICAvLyDlpoLmnpzmnInlj4LkuI7kurrlkZjvvIzkuLrmr4/kuKrnlKjmiLfliJvlu7rpgJrnn6VcbiAgIDE5Nlx0ICAgICAgICBpZiAoIXVzZXJJZHMuaXNFbXB0eSgpICYmIHN1Y2Nlc3MpIHtcbiAgIDE5N1x0ICAgICAgICAgICAgTGlzdDxOb3RpZmljYXRpb24+IG5vdGlmaWNhdGlvbnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDE5OFx0ICAgICAgICAgICAgXG4gICAxOTlcdCAgICAgICAgICAgIGZvciAoTG9uZyB1c2VySWQgOiB1c2VySWRzKSB7XG4gICAyMDBcdCAgICAgICAgICAgICAgICAvLyDot7Pov4fnrqHnkIblkZjvvIjlgYforr5JROS4ujHnmoTmmK/nrqHnkIblkZjvvIlcbiAgIDIwMVx0ICAgICAgICAgICAgICAgIGlmICh1c2VySWQgPT0gMSkgY29udGludWU7XG4gICAyMDJcdCAgICAgICAgICAgICAgICBcbiAgIDIwM1x0ICAgICAgICAgICAgICAgIC8vIOWIm+W7uueUqOaIt+mAmuefpVxuICAgMjA0XHQgICAgICAgICAgICAgICAgTm90aWZpY2F0aW9uIG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oKTtcbiAgIDIwNVx0ICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRTY2hlZHVsZUlkKG1haW5TY2hlZHVsZUlkKTsgLy8g5L2/55So5Li75pel56iLSURcbiAgIDIwNlx0ICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRVc2VySWQodXNlcklkKTtcbiAgIDIwN1x0ICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRNZXNzYWdlKFwi5oKo5pyJ5paw55qE5Lu75Yqh5a6J5o6S77yM6K+35Y+K5pe25p+l55yLXCIpO1xuICAgMjA4XHQgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9ucy5hZGQobm90aWZpY2F0aW9uKTtcbiAgIDIwOVx0ICAgICAgICAgICAgfVxuICAgMjEwXHQgICAgICAgICAgICBcbiAgIDIxMVx0ICAgICAgICAgICAgLy8g5om56YeP5L+d5a2Y6YCa55+lXG4gICAyMTJcdCAgICAgICAgICAgIGlmICghbm90aWZpY2F0aW9ucy5pc0VtcHR5KCkpIHtcbiAgIDIxM1x0ICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuICAgMjE0XHQgICAgICAgICAgICB9XG4gICAyMTVcdCAgICAgICAgfVxuICAgMjE2XHRcbiAgIDIxN1x0ICAgICAgICByZXR1cm4gc3VjY2VzcztcbiAgIDIxOFx0ICAgIH1cbiAgIDIxOVx0XG4gICAyMjBcdCAgICBAT3ZlcnJpZGVcbiAgIDIyMVx0ICAgIHB1YmxpYyBib29sZWFuIHVwZGF0ZVNjaGVkdWxlKFNjaGVkdWxlIHNjaGVkdWxlVXBkYXRlcykge1xuICAgMjIyXHQgICAgICAgIC8vIDEuIEZldGNoIHRoZSBleGlzdGluZyBzY2hlZHVsZSB1c2luZyB0aGUgSUQgZnJvbSBzY2hlZHVsZVVwZGF0ZXNcbiAgIDIyM1x0ICAgICAgICBTY2hlZHVsZSBleGlzdGluZ1NjaGVkdWxlID0gdGhpcy5nZXRCeUlkKHNjaGVkdWxlVXBkYXRlcy5nZXRJZCgpKTtcbiAgIDIyNFx0ICAgICAgICBpZiAoZXhpc3RpbmdTY2hlZHVsZSA9PSBudWxsKSB7XG4gICAyMjVcdCAgICAgICAgICAgIGxvZy5lcnJvcihcIuivleWbvuabtOaWsOS4jeWtmOWcqOeahOaXpeeoizogSUQge31cIiwgc2NoZWR1bGVVcGRhdGVzLmdldElkKCkpO1xuICAgMjI2XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7IC8vIE9yIHRocm93IGFuIGV4Y2VwdGlvblxuICAgMjI3XHQgICAgICAgIH1cbiAgIDIyOFx0XG4gICAyMjlcdCAgICAgICAgLy8gMi4gRmV0Y2ggdGhlIGFzc29jaWF0ZWQgdGFzayB1c2luZyB0aGUgdGFza0lkIGZyb20gdGhlICpleGlzdGluZyogc2NoZWR1bGVcbiAgIDIzMFx0ICAgICAgICBUYXNrIHRhc2sgPSBudWxsO1xuICAgMjMxXHQgICAgICAgIGlmIChleGlzdGluZ1NjaGVkdWxlLmdldFRhc2tJZCgpICE9IG51bGwpIHsgLy8gQ2hlY2sgaWYgdGFza0lkIGlzIG5vdCBudWxsIGJlZm9yZSBmZXRjaGluZ1xuICAgMjMyXHQgICAgICAgICAgICAgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoZXhpc3RpbmdTY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICAyMzNcdCAgICAgICAgfVxuICAgMjM0XHRcbiAgIDIzNVx0ICAgICAgICBpZiAodGFzayA9PSBudWxsICYmIGV4aXN0aW5nU2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkgeyAvLyBMb2cgaWYgdGFzayBub3QgZm91bmQgYnV0IElEIGV4aXN0ZWRcbiAgIDIzNlx0ICAgICAgICAgICAgIGxvZy53YXJuKFwi5pel56iLIHt9IOWFs+iBlOeahOS7u+WKoSB7fSDmnKrmib7liLBcIiwgZXhpc3RpbmdTY2hlZHVsZS5nZXRJZCgpLCBleGlzdGluZ1NjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgIDIzN1x0ICAgICAgICB9XG4gICAyMzhcdFxuICAgMjM5XHQgICAgICAgIC8vIDMuIFVwZGF0ZSBzdGFydFRpbWUgYW5kIGVuZFRpbWUgZnJvbSB0aGUgc2NoZWR1bGVVcGRhdGVzIG9iamVjdFxuICAgMjQwXHQgICAgICAgIGV4aXN0aW5nU2NoZWR1bGUuc2V0U3RhcnRUaW1lKHNjaGVkdWxlVXBkYXRlcy5nZXRTdGFydFRpbWUoKSk7XG4gICAyNDFcdCAgICAgICAgZXhpc3RpbmdTY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlVXBkYXRlcy5nZXRFbmRUaW1lKCkpOyAvLyBVc2UgdGhlIHZhbHVlIHByb3ZpZGVkIGJ5IHRoZSBjbGllbnRcbiAgIDI0Mlx0XG4gICAyNDNcdCAgICAgICAgLy8gNC4gUmVjYWxjdWxhdGUgZW5kVGltZSBvbmx5IGlmIGl0IHdhc24ndCBwcm92aWRlZCBBTkQgdGFzayBleGlzdHMgYW5kIGhhcyB0aW1lU3BlbmRcbiAgIDI0NFx0ICAgICAgICBpZiAoZXhpc3RpbmdTY2hlZHVsZS5nZXRFbmRUaW1lKCkgPT0gbnVsbCAmJiB0YXNrICE9IG51bGwgJiYgdGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XG4gICAyNDVcdCAgICAgICAgICAgIC8vIOagueaNruS7u+WKoemihOS8sOaXtumXtOiuvue9rue7k+adn+aXtumXtFxuICAgMjQ2XHQgICAgICAgICAgICBleGlzdGluZ1NjaGVkdWxlLnNldEVuZFRpbWUoZXhpc3RpbmdTY2hlZHVsZS5nZXRTdGFydFRpbWUoKS5wbHVzTWludXRlcyh0YXNrLmdldFRpbWVTcGVuZCgpKSk7XG4gICAyNDdcdCAgICAgICAgfSBlbHNlIGlmIChleGlzdGluZ1NjaGVkdWxlLmdldEVuZFRpbWUoKSA9PSBudWxsKSB7XG4gICAyNDhcdCAgICAgICAgICAgIC8vIOm7mOiupOiuvue9rue7k+adn+aXtumXtOS4uuW8gOWni+aXtumXtOWQjjHlsI/ml7ZcbiAgIDI0OVx0ICAgICAgICAgICAgIGV4aXN0aW5nU2NoZWR1bGUuc2V0RW5kVGltZShleGlzdGluZ1NjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnBsdXNIb3VycygxKSk7XG4gICAyNTBcdCAgICAgICAgfVxuICAgMjUxXHRcbiAgIDI1Mlx0ICAgICAgICAvLyA1LiBTYXZlIHRoZSB1cGRhdGVkIGV4aXN0aW5nU2NoZWR1bGVcbiAgIDI1M1x0ICAgICAgICBib29sZWFuIHN1Y2Nlc3MgPSB0aGlzLnVwZGF0ZUJ5SWQoZXhpc3RpbmdTY2hlZHVsZSk7XG4gICAyNTRcdFxuICAgMjU1XHQgICAgICAgIC8vIDYuIFNlbmQgbm90aWZpY2F0aW9uIG9ubHkgaWYgdXBkYXRlIHdhcyBzdWNjZXNzZnVsIEFORCB0YXNrIGV4aXN0c1xuICAgMjU2XHQgICAgICAgIGlmIChzdWNjZXNzICYmIHRhc2sgIT0gbnVsbCkge1xuICAgMjU3XHQgICAgICAgICAgICBPYmplY3RNYXBwZXIgb2JqZWN0TWFwcGVyID0gbmV3IE9iamVjdE1hcHBlcigpO1xuICAgMjU4XHQgICAgICAgICAgICAvLyBVc2UgdGFzay5nZXRVc2VyRGF0YSgpIHdoaWNoIHdlIGZldGNoZWQgZWFybGllclxuICAgMjU5XHQgICAgICAgICAgICBTZXQ8TG9uZz4gdXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQodGFzay5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMjYwXHQgICAgICAgICAgICBpZiAoIXVzZXJJZHMuaXNFbXB0eSgpKSB7IC8vIENoZWNrIGlmIHVzZXJJZHMgaXMgbm90IGVtcHR5IGJlZm9yZSBjcmVhdGluZyBub3RpZmljYXRpb25zXG4gICAyNjFcdCAgICAgICAgICAgICAgICBmaW5hbCBUYXNrIGZpbmFsVGFzayA9IHRhc2s7IC8vIENyZWF0ZSBhIGZpbmFsIGNvcHlcbiAgIDI2Mlx0ICAgICAgICAgICAgICAgIExpc3Q8Tm90aWZpY2F0aW9uPiBub3RpZmljYXRpb25zID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAyNjNcdCAgICAgICAgICAgICAgICB1c2VySWRzLmZvckVhY2goaWQgLT4ge1xuICAgMjY0XHQgICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbiBub3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCk7XG4gICAyNjVcdCAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFNjaGVkdWxlSWQoZXhpc3RpbmdTY2hlZHVsZS5nZXRJZCgpKTsgLy8gVXNlIGV4aXN0aW5nU2NoZWR1bGUuZ2V0SWQoKVxuICAgMjY2XHQgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRVc2VySWQoaWQpO1xuICAgMjY3XHQgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRUeXBlKDIpOyAvLyDpgJrnn6XnsbvlnosgMjog5pel56iL5Y+Y5pu0XG4gICAyNjhcdCAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldE1lc3NhZ2UoXCLmgqjlj4LkuI7nmoTku7vliqEgXFxcIlwiICsgZmluYWxUYXNrLmdldFRpdGxlKCkgKyBcIlxcXCIg5omn6KGM5pe26Ze05bey5pu05pawXCIpOyAvLyBVc2UgdGhlIGZpbmFsIGNvcHlcbiAgIDI2OVx0ICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb25zLmFkZChub3RpZmljYXRpb24pO1xuICAgMjcwXHQgICAgICAgICAgICAgICAgfSk7XG4gICAyNzFcdCAgICAgICAgICAgICAgICBub3RpZmljYXRpb25TZXJ2aWNlLnNhdmVCYXRjaChub3RpZmljYXRpb25zKTtcbiAgIDI3Mlx0ICAgICAgICAgICAgfVxuICAgMjczXHQgICAgICAgIH0gZWxzZSBpZiAoc3VjY2VzcyAmJiB0YXNrID09IG51bGwpIHtcbiAgIDI3NFx0ICAgICAgICAgICAgIGxvZy53YXJuKFwi5pel56iLIHt9IOabtOaWsOaIkOWKn++8jOS9huaXoOazleWPkemAgemAmuefpe+8jOWboOS4uuWFs+iBlOS7u+WKoeS4jeWtmOWcqFwiLCBleGlzdGluZ1NjaGVkdWxlLmdldElkKCkpO1xuICAgMjc1XHQgICAgICAgIH1cbiAgIDI3Nlx0XG4gICAyNzdcdCAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAyNzhcdCAgICB9XG4gICAyNzlcdFxuICAgMjgwXHQgICAgLyoqXG4gICAyODFcdCAgICAgKiDmr4/pmpQ15YiG6ZKf5qOA5p+l5LiA5qyh77yM5Y+R6YCB5Lu75Yqh5o+Q6YaSXG4gICAyODJcdCAgICAgKi9cbiAgIDI4M1x0ICAgIEBTY2hlZHVsZWQoY3JvbiA9IFwiMCAqLzUgKiAqICogP1wiKVxuICAgMjg0XHQgICAgcHVibGljIHZvaWQgY2hlY2tBbmRTZW5kUmVtaW5kZXJzKCkge1xuICAgMjg1XHQgICAgICAgIC8vIOiOt+WPluW9k+WJjeaXtumXtFxuICAgMjg2XHQgICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgIDI4N1x0XG4gICAyODhcdCAgICAgICAgLy8g6I635Y+W5omA5pyJ5Lu75YqhXG4gICAyODlcdCAgICAgICAgTGlzdDxUYXNrPiB0YXNrcyA9IHRhc2tTZXJ2aWNlLmxpc3QoKTtcbiAgIDI5MFx0XG4gICAyOTFcdCAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xuICAgMjkyXHQgICAgICAgICAgICAvLyDlpoLmnpzorr7nva7kuobmj5DphpLml7bpl7TvvIzlubbkuJTmj5DphpLml7bpl7Tlt7LliLDmiJbljbPlsIbliLDmnaXvvIg15YiG6ZKf5YaF77yJXG4gICAyOTNcdCAgICAgICAgICAgIGlmICh0YXNrLmdldFJlbWluZGVyVGltZSgpICE9IG51bGwgJiZcbiAgIDI5NFx0ICAgICAgICAgICAgICAgIENocm9ub1VuaXQuTUlOVVRFUy5iZXR3ZWVuKG5vdywgdGFzay5nZXRSZW1pbmRlclRpbWUoKSkgPD0gNSAmJlxuICAgMjk1XHQgICAgICAgICAgICAgICAgQ2hyb25vVW5pdC5NSU5VVEVTLmJldHdlZW4obm93LCB0YXNrLmdldFJlbWluZGVyVGltZSgpKSA+PSAwKSB7XG4gICAyOTZcdFxuICAgMjk3XHQgICAgICAgICAgICAgICAgLy8g5p+l5om+5q2k5Lu75Yqh5YWz6IGU55qE5pel56iLXG4gICAyOThcdCAgICAgICAgICAgICAgICBMaXN0PFNjaGVkdWxlPiBzY2hlZHVsZXMgPSB0aGlzLmxpc3QobmV3IFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4oKS5lcShcInRhc2tfaWRcIiwgdGFzay5nZXRJZCgpKSk7XG4gICAyOTlcdFxuICAgMzAwXHQgICAgICAgICAgICAgICAgLy8g5aaC5p6c5pyJ5YWz6IGU55qE5pel56iL77yM5Y+R6YCB5o+Q6YaSXG4gICAzMDFcdCAgICAgICAgICAgICAgICBpZiAoIXNjaGVkdWxlcy5pc0VtcHR5KCkpIHtcbiAgIDMwMlx0ICAgICAgICAgICAgICAgICAgICBTY2hlZHVsZSBzY2hlZHVsZSA9IHNjaGVkdWxlcy5nZXQoMCk7XG4gICAzMDNcdFxuICAgMzA0XHQgICAgICAgICAgICAgICAgICAgIC8vIOWPkemAgeaPkOmGklxuICAgMzA1XHQgICAgICAgICAgICAgICAgICAgIE9iamVjdE1hcHBlciBvYmplY3RNYXBwZXIgPSBuZXcgT2JqZWN0TWFwcGVyKCk7XG4gICAzMDZcdCAgICAgICAgICAgICAgICAgICAgU2V0PExvbmc+IHVzZXJJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgIDMwN1x0ICAgICAgICAgICAgICAgICAgICBcbiAgIDMwOFx0ICAgICAgICAgICAgICAgICAgICAvLyDlj6rmnInnlKjmiLdJROmbhuWQiOmdnuepuuaXtuaJjeWIm+W7uumAmuefpVxuICAgMzA5XHQgICAgICAgICAgICAgICAgICAgIGlmICghdXNlcklkcy5pc0VtcHR5KCkpIHtcbiAgIDMxMFx0ICAgICAgICAgICAgICAgICAgICAgICAgTGlzdDxOb3RpZmljYXRpb24+IG5vdGlmaWNhdGlvbnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgIDMxMVx0ICAgICAgICAgICAgICAgICAgICAgICAgdXNlcklkcy5mb3JFYWNoKGlkIC0+IHtcbiAgIDMxMlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5vdGlmaWNhdGlvbiBub3RpZmljYXRpb24gPSBuZXcgTm90aWZpY2F0aW9uKCk7XG4gICAzMTNcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0U2NoZWR1bGVJZChzY2hlZHVsZS5nZXRJZCgpKTtcbiAgIDMxNFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbi5zZXRVc2VySWQoaWQpO1xuICAgMzE1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uLnNldFR5cGUoMyk7XG4gICAzMTZcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZmljYXRpb24uc2V0TWVzc2FnZShcIuaCqOacieS7u+WKoeWNs+WwhuW8gOWni++8jOivt+WBmuWlveWHhuWkh1wiKTtcbiAgIDMxN1x0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbnMuYWRkKG5vdGlmaWNhdGlvbik7XG4gICAzMThcdCAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgMzE5XHQgICAgICAgICAgICAgICAgICAgICAgICBcbiAgIDMyMFx0ICAgICAgICAgICAgICAgICAgICAgICAgLy8g5Y+q5pyJ5pyJ6YCa55+l5pe25omN5om56YeP5L+d5a2YXG4gICAzMjFcdCAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbm90aWZpY2F0aW9ucy5pc0VtcHR5KCkpIHtcbiAgIDMyMlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvblNlcnZpY2Uuc2F2ZUJhdGNoKG5vdGlmaWNhdGlvbnMpO1xuICAgMzIzXHQgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAzMjRcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMzI1XHQgICAgICAgICAgICAgICAgfVxuICAgMzI2XHQgICAgICAgICAgICB9XG4gICAzMjdcdCAgICAgICAgfVxuICAgMzI4XHQgICAgfVxuICAgMzI5XHRcbiAgIDMzMFx0ICAgIEBPdmVycmlkZVxuICAgMzMxXHQgICAgcHVibGljIExpc3Q8VGFza1ZvPiBjb25mbGljdExpc3QoTG9uZyBpZCwgTGlzdDxMb25nPiBzY2hlZHVsZUlkcykge1xuICAgMzMyXHQgICAgICAgIC8vIOafpeivouW9k+WJjeS7u+WKoeWSjOWGsueqgeS7u+WKoeeahOivpue7huS/oeaBr1xuICAgMzMzXHQgICAgICAgIExpc3Q8U2NoZWR1bGVWbz4gc2NoZWR1bGVzID0gc2NoZWR1bGVNYXBwZXIuZmluZEJ5SWRzKHNjaGVkdWxlSWRzKTtcbiAgIDMzNFx0XG4gICAzMzVcdCAgICAgICAgT2JqZWN0TWFwcGVyIG9iamVjdE1hcHBlciA9IG5ldyBPYmplY3RNYXBwZXIoKTtcbiAgIDMzNlx0XG4gICAzMzdcdCAgICAgICAgLy8g6I635Y+W5b2T5YmN5Lu75Yqh55qE6K+m57uG5L+h5oGvXG4gICAzMzhcdC8vICAgICAgICBTY2hlZHVsZVZvIGN1cnJlbnRTY2hlZHVsZSA9IHNjaGVkdWxlcy5zdHJlYW0oKVxuICAgMzM5XHQvLyAgICAgICAgICAgICAgICAuZmlsdGVyKHNjaGVkdWxlIC0+IHNjaGVkdWxlLmdldElkKCkuZXF1YWxzKGlkKSlcbiAgIDM0MFx0Ly8gICAgICAgICAgICAgICAgLmZpbmRGaXJzdCgpXG4gICAzNDFcdC8vICAgICAgICAgICAgICAgIC5vckVsc2VUaHJvdygoKSAtPiBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKFwi5b2T5YmN5Lu75Yqh5LiN5a2Y5ZyoXCIpKTtcbiAgIDM0Mlx0ICAgICAgICBTY2hlZHVsZSBjdXJyZW50U2NoZWR1bGUgPSB0aGlzLmdldEJ5SWQoaWQpO1xuICAgMzQzXHQgICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoY3VycmVudFNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgIDM0NFx0XG4gICAzNDVcdFxuICAgMzQ2XHQgICAgICAgIC8vIOino+aekOW9k+WJjeS7u+WKoeeahOeUqOaIt+WSjOi1hOa6kOaVsOaNrlxuICAgMzQ3XHQgICAgICAgIFNldDxMb25nPiBjdXJyZW50VXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQodGFzay5nZXRVc2VyRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMzQ4XHQgICAgICAgIFNldDxMb25nPiBjdXJyZW50UmVzb3VyY2VJZHMgPSBwYXJzZUpzb25BcnJheVRvU2V0KHRhc2suZ2V0UmVzb3VyY2VzRGF0YSgpLCBvYmplY3RNYXBwZXIpO1xuICAgMzQ5XHRcbiAgIDM1MFx0ICAgICAgICAvLyDmnoTlu7ogVGFza1ZvIOWIl+ihqO+8jOWPquWMheWQq+WGsueqgeeahOeUqOaIt+WSjOi1hOa6kOS/oeaBr1xuICAgMzUxXHQgICAgICAgIHJldHVybiBzY2hlZHVsZXMuc3RyZWFtKClcbiAgIDM1Mlx0ICAgICAgICAgICAgICAgIC5tYXAoc2NoZWR1bGUgLT4ge1xuICAgMzUzXHQgICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluS7u+WKoeS/oeaBr1xuICAgMzU0XHQgICAgICAgICAgICAgICAgICAgIFRhc2tWbyB0YXNrVm8gPSBuZXcgVGFza1ZvKCk7XG4gICAzNTVcdCAgICAgICAgICAgICAgICAgICAgQmVhblV0aWxzLmNvcHlQcm9wZXJ0aWVzKHNjaGVkdWxlLCB0YXNrVm8pO1xuICAgMzU2XHRcbiAgIDM1N1x0ICAgICAgICAgICAgICAgICAgICAvLyDop6PmnpDnlKjmiLflkozotYTmupDmlbDmja5cbiAgIDM1OFx0ICAgICAgICAgICAgICAgICAgICBTZXQ8TG9uZz4gdXNlcklkcyA9IHBhcnNlSnNvbkFycmF5VG9TZXQoc2NoZWR1bGUuZ2V0VXNlckRhdGEoKSwgb2JqZWN0TWFwcGVyKTtcbiAgIDM1OVx0XG4gICAzNjBcdCAgICAgICAgICAgICAgICAgICAgLy8g6K6h566X5LiO5b2T5YmN5Lu75Yqh55qE5Yay56qB55So5oi3XG4gICAzNjFcdCAgICAgICAgICAgICAgICAgICAgU2V0PExvbmc+IGNvbmZsaWN0VXNlcklkcyA9IG5ldyBIYXNoU2V0PD4odXNlcklkcyk7XG4gICAzNjJcdCAgICAgICAgICAgICAgICAgICAgY29uZmxpY3RVc2VySWRzLnJldGFpbkFsbChjdXJyZW50VXNlcklkcyk7XG4gICAzNjNcdFxuICAgMzY0XHQgICAgICAgICAgICAgICAgICAgIC8vIOiOt+WPluWGsueqgeeUqOaIt+eahOivpue7huS/oeaBr1xuICAgMzY1XHQgICAgICAgICAgICAgICAgICAgIExpc3Q8VW1zQWRtaW4+IHVzZXJMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAzNjZcdCAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25mbGljdFVzZXJJZHMuaXNFbXB0eSgpKSB7XG4gICAzNjdcdCAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJMaXN0ID0gdXNlclNlcnZpY2UubGlzdChuZXcgUXVlcnlXcmFwcGVyPFVtc0FkbWluPigpLmxhbWJkYSgpLmluKFVtc0FkbWluOjpnZXRJZCwgY29uZmxpY3RVc2VySWRzKSk7XG4gICAzNjhcdCAgICAgICAgICAgICAgICAgICAgfVxuICAgMzY5XHQgICAgICAgICAgICAgICAgICAgIFxuICAgMzcwXHQgICAgICAgICAgICAgICAgICAgIC8vIOiuvue9ruWGsueqgeeUqOaIt1xuICAgMzcxXHQgICAgICAgICAgICAgICAgICAgIHRhc2tWby5zZXRVc2VyTGlzdCh1c2VyTGlzdCk7XG4gICAzNzJcdFxuICAgMzczXHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0YXNrVm87XG4gICAzNzRcdCAgICAgICAgICAgICAgICB9KVxuICAgMzc1XHQgICAgICAgICAgICAgICAgLmNvbGxlY3QoQ29sbGVjdG9ycy50b0xpc3QoKSk7XG4gICAzNzZcdCAgICB9XG4gICAzNzdcdFxuICAgMzc4XHQgICAgQE92ZXJyaWRlXG4gICAzNzlcdCAgICBwdWJsaWMgUGFnZTxTY2hlZHVsZVZvPiBzZWFyY2hVc2VyKEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSwgTG9uZyB1c2VySWQsIEludGVnZXIgc3RhdHVzKSB7XG4gICAzODBcdCAgICAgICAgLy8g5rOo5oSP77ya6K+l5pa55rOV6YCa6L+Hc2VhcmNoVXNlclNjaGVkdWxl5p+l6K+i77yM5ZyoU1FM5Lit5bey5Yqg5YWlcGFyZW50X2lkIElTIE5PVCBOVUxM5p2h5Lu277yM56Gu5L+d55So5oi35Y+q55yL5Yiw5a2Q5pel56iLXG4gICAzODFcdCAgICAgICAgLy8g5Yib5bu65YiG6aG15Y+C5pWwXG4gICAzODJcdCAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBwYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSk7XG4gICAzODNcdCAgICAgICAgXG4gICAzODRcdCAgICAgICAgLy8g5L2/55So5LiT6Zeo55qE55So5oi35pel56iL5p+l6K+iXG4gICAzODVcdCAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiB1c2VyU2NoZWR1bGVQYWdlID0gc2NoZWR1bGVNYXBwZXIuc2VhcmNoVXNlclNjaGVkdWxlKHBhZ2UsIHVzZXJJZCwgc2VhcmNoS2V5LCBzdGF0dXMpO1xuICAgMzg2XHQgICAgICAgIFxuICAgMzg3XHQgICAgICAgIHJldHVybiB1c2VyU2NoZWR1bGVQYWdlO1xuICAgMzg4XHQgICAgfVxuICAgMzg5XHRcbiAgIDM5MFx0ICAgIEBPdmVycmlkZVxuICAgMzkxXHQgICAgcHVibGljIE1hcDxTdHJpbmcsIExpc3Q8U2NoZWR1bGVWbz4+IGdldFNjaGVkdWxlc0J5TW9udGgoU3RyaW5nIHllYXJNb250aCkge1xuICAgMzkyXHQgICAgICAgIExpc3Q8U2NoZWR1bGVWbz4gc2NoZWR1bGVzID0gc2NoZWR1bGVNYXBwZXIuZmluZFNjaGVkdWxlc0J5TW9udGgoeWVhck1vbnRoKTtcbiAgIDM5M1x0ICAgICAgICBNYXA8U3RyaW5nLCBMaXN0PFNjaGVkdWxlVm8+PiByZXN1bHQgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICAzOTRcdFxuICAgMzk1XHQgICAgICAgIC8vIOaMieaXpeacn+WIhue7hFxuICAgMzk2XHQgICAgICAgIGZvciAoU2NoZWR1bGVWbyBzY2hlZHVsZSA6IHNjaGVkdWxlcykge1xuICAgMzk3XHQgICAgICAgICAgICBTdHJpbmcgZGF0ZSA9IHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpLnRvTG9jYWxEYXRlKCkudG9TdHJpbmcoKTtcbiAgIDM5OFx0ICAgICAgICAgICAgaWYgKCFyZXN1bHQuY29udGFpbnNLZXkoZGF0ZSkpIHtcbiAgIDM5OVx0ICAgICAgICAgICAgICAgIHJlc3VsdC5wdXQoZGF0ZSwgbmV3IEFycmF5TGlzdDw+KCkpO1xuICAgNDAwXHQgICAgICAgICAgICB9XG4gICA0MDFcdCAgICAgICAgICAgIHJlc3VsdC5nZXQoZGF0ZSkuYWRkKHNjaGVkdWxlKTtcbiAgIDQwMlx0ICAgICAgICB9XG4gICA0MDNcdFxuICAgNDA0XHQgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICA0MDVcdCAgICB9XG4gICA0MDZcdFxuICAgNDA3XHQgICAgQE92ZXJyaWRlXG4gICA0MDhcdCAgICBwdWJsaWMgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gZ2V0U2NoZWR1bGVzQnlNb250aEFuZFVzZXIoU3RyaW5nIHllYXJNb250aCwgTG9uZyB1c2VySWQsIGJvb2xlYW4gaXNBZG1pbikge1xuICAgNDA5XHQgICAgICAgIExpc3Q8U2NoZWR1bGVWbz4gc2NoZWR1bGVzO1xuICAgNDEwXHRcbiAgIDQxMVx0ICAgICAgICBpZiAoaXNBZG1pbikge1xuICAgNDEyXHQgICAgICAgICAgICAvLyDnrqHnkIblkZjlj6rojrflj5bniLbml6XnqIvvvIhTUUzkuK3lt7LliqDlhaVwYXJlbnRfaWQgSVMgTlVMTOadoeS7tu+8iVxuICAgNDEzXHQgICAgICAgICAgICBzY2hlZHVsZXMgPSBzY2hlZHVsZU1hcHBlci5maW5kU2NoZWR1bGVzQnlNb250aCh5ZWFyTW9udGgpO1xuICAgNDE0XHQgICAgICAgIH0gZWxzZSB7XG4gICA0MTVcdCAgICAgICAgICAgIC8vIOaZrumAmueUqOaIt+WPquiOt+WPluWtkOaXpeeoi++8iFNRTOS4reW3suWKoOWFpXBhcmVudF9pZCBJUyBOT1QgTlVMTOadoeS7tu+8iVxuICAgNDE2XHQgICAgICAgICAgICBzY2hlZHVsZXMgPSBzY2hlZHVsZU1hcHBlci5maW5kU2NoZWR1bGVzQnlNb250aEFuZFVzZXIoeWVhck1vbnRoLCB1c2VySWQpO1xuICAgNDE3XHQgICAgICAgIH1cbiAgIDQxOFx0XG4gICA0MTlcdCAgICAgICAgTWFwPFN0cmluZywgTGlzdDxTY2hlZHVsZVZvPj4gcmVzdWx0ID0gbmV3IEhhc2hNYXA8PigpO1xuICAgNDIwXHRcbiAgIDQyMVx0ICAgICAgICAvLyDmjInml6XmnJ/liIbnu4RcbiAgIDQyMlx0ICAgICAgICBmb3IgKFNjaGVkdWxlVm8gc2NoZWR1bGUgOiBzY2hlZHVsZXMpIHtcbiAgIDQyM1x0ICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpICE9IG51bGwpIHtcbiAgIDQyNFx0ICAgICAgICAgICAgICAgIFN0cmluZyBkYXRlID0gc2NoZWR1bGUuZ2V0U3RhcnRUaW1lKCkudG9Mb2NhbERhdGUoKS50b1N0cmluZygpO1xuICAgNDI1XHQgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuY29udGFpbnNLZXkoZGF0ZSkpIHtcbiAgIDQyNlx0ICAgICAgICAgICAgICAgICAgICByZXN1bHQucHV0KGRhdGUsIG5ldyBBcnJheUxpc3Q8PigpKTtcbiAgIDQyN1x0ICAgICAgICAgICAgICAgIH1cbiAgIDQyOFx0ICAgICAgICAgICAgICAgIHJlc3VsdC5nZXQoZGF0ZSkuYWRkKHNjaGVkdWxlKTtcbiAgIDQyOVx0ICAgICAgICAgICAgfVxuICAgNDMwXHQgICAgICAgIH1cbiAgIDQzMVx0XG4gICA0MzJcdCAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgIDQzM1x0ICAgIH1cbiAgIDQzNFx0XG4gICA0MzVcdCAgICAvKipcbiAgIDQzNlx0ICAgICAqIOiuoeeul+aXpeeoi+S8mOWFiOe6p+W+l+WIhlxuICAgNDM3XHQgICAgICpcbiAgIDQzOFx0ICAgICAqIEBwYXJhbSBzY2hlZHVsZSDml6XnqItcbiAgIDQzOVx0ICAgICAqIEBwYXJhbSB0YXNrIOS7u+WKoVxuICAgNDQwXHQgICAgICogQHJldHVybiDkvJjlhYjnuqflvpfliIZcbiAgIDQ0MVx0ICAgICAqL1xuICAgNDQyXHQgICAgcHJpdmF0ZSBkb3VibGUgY2FsY3VsYXRlUHJpb3JpdHlTY29yZShTY2hlZHVsZVZvIHNjaGVkdWxlLCBUYXNrIHRhc2spIHtcbiAgIDQ0M1x0ICAgICAgICBpZiAodGFzayA9PSBudWxsKSB7XG4gICA0NDRcdCAgICAgICAgICAgIHJldHVybiAwLjA7XG4gICA0NDVcdCAgICAgICAgfVxuICAgNDQ2XHRcbiAgIDQ0N1x0ICAgICAgICBkb3VibGUgaW1wb3J0YW5jZVNjb3JlID0gMC4wO1xuICAgNDQ4XHQgICAgICAgIGRvdWJsZSB1cmdlbmN5U2NvcmUgPSAwLjA7XG4gICA0NDlcdFxuICAgNDUwXHQgICAgICAgIC8vIOagueaNruS7u+WKoeeahOmHjeimgeaAp+iuoeeul+W+l+WIhiAoaW1wb3J0YW5jZUlkKVxuICAgNDUxXHQgICAgICAgIGlmICh0YXNrLmdldEltcG9ydGFuY2VJZCgpICE9IG51bGwpIHtcbiAgIDQ1Mlx0ICAgICAgICAgICAgLy8g5p+l6K+i6YeN6KaB5oCn5p2D6YeNXG4gICA0NTNcdCAgICAgICAgICAgIFF1ZXJ5V3JhcHBlcjxjb20uYm9vdC53ZWIubW9kdWxlcy53ZWIubW9kZWwuUHJpb3JpdHk+IGltcG9ydGFuY2VRdWVyeSA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xuICAgNDU0XHQgICAgICAgICAgICBpbXBvcnRhbmNlUXVlcnkuZXEoXCJpZFwiLCB0YXNrLmdldEltcG9ydGFuY2VJZCgpKTtcbiAgIDQ1NVx0ICAgICAgICAgICAgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlByaW9yaXR5IGltcG9ydGFuY2UgPSB0YXNrU2VydmljZS5nZXRQcmlvcml0eU1hcHBlcigpLnNlbGVjdE9uZShpbXBvcnRhbmNlUXVlcnkpO1xuICAgNDU2XHRcbiAgIDQ1N1x0ICAgICAgICAgICAgaWYgKGltcG9ydGFuY2UgIT0gbnVsbCkge1xuICAgNDU4XHQgICAgICAgICAgICAgICAgaW50IHNjb3JlID0gaW1wb3J0YW5jZS5nZXRTY29yZSgpICE9IG51bGwgPyBpbXBvcnRhbmNlLmdldFNjb3JlKCkgOiAxO1xuICAgNDU5XHQgICAgICAgICAgICAgICAgQmlnRGVjaW1hbCB3ZWlnaHQgPSBpbXBvcnRhbmNlLmdldFdlaWdodCgpICE9IG51bGwgPyBpbXBvcnRhbmNlLmdldFdlaWdodCgpIDogQmlnRGVjaW1hbC5PTkU7XG4gICA0NjBcdCAgICAgICAgICAgICAgICBpbXBvcnRhbmNlU2NvcmUgPSBzY29yZSAqIHdlaWdodC5kb3VibGVWYWx1ZSgpICogMTA7IC8vIOaUvuWkpzEw5YCN77yM5L2/5b6X5YiG5YC85pu05piO5pi+XG4gICA0NjFcdCAgICAgICAgICAgIH1cbiAgIDQ2Mlx0ICAgICAgICB9XG4gICA0NjNcdFxuICAgNDY0XHQgICAgICAgIC8vIOagueaNruS7u+WKoeeahOe0p+aApeaAp+iuoeeul+W+l+WIhiAoZXhpZ2VuY3lJZClcbiAgIDQ2NVx0ICAgICAgICBpZiAodGFzay5nZXRFeGlnZW5jeUlkKCkgIT0gbnVsbCkge1xuICAgNDY2XHQgICAgICAgICAgICAvLyDmn6Xor6LntKfmgKXmgKfmnYPph41cbiAgIDQ2N1x0ICAgICAgICAgICAgUXVlcnlXcmFwcGVyPGNvbS5ib290LndlYi5tb2R1bGVzLndlYi5tb2RlbC5Qcmlvcml0eT4gdXJnZW5jeVF1ZXJ5ID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICA0NjhcdCAgICAgICAgICAgIHVyZ2VuY3lRdWVyeS5lcShcImlkXCIsIHRhc2suZ2V0RXhpZ2VuY3lJZCgpKTtcbiAgIDQ2OVx0ICAgICAgICAgICAgY29tLmJvb3Qud2ViLm1vZHVsZXMud2ViLm1vZGVsLlByaW9yaXR5IHVyZ2VuY3kgPSB0YXNrU2VydmljZS5nZXRQcmlvcml0eU1hcHBlcigpLnNlbGVjdE9uZSh1cmdlbmN5UXVlcnkpO1xuICAgNDcwXHRcbiAgIDQ3MVx0ICAgICAgICAgICAgaWYgKHVyZ2VuY3kgIT0gbnVsbCkge1xuICAgNDcyXHQgICAgICAgICAgICAgICAgaW50IHNjb3JlID0gdXJnZW5jeS5nZXRTY29yZSgpICE9IG51bGwgPyB1cmdlbmN5LmdldFNjb3JlKCkgOiAxO1xuICAgNDczXHQgICAgICAgICAgICAgICAgQmlnRGVjaW1hbCB3ZWlnaHQgPSB1cmdlbmN5LmdldFdlaWdodCgpICE9IG51bGwgPyB1cmdlbmN5LmdldFdlaWdodCgpIDogQmlnRGVjaW1hbC5PTkU7XG4gICA0NzRcdCAgICAgICAgICAgICAgICB1cmdlbmN5U2NvcmUgPSBzY29yZSAqIHdlaWdodC5kb3VibGVWYWx1ZSgpICogMTA7IC8vIOaUvuWkpzEw5YCN77yM5L2/5b6X5YiG5YC85pu05piO5pi+XG4gICA0NzVcdCAgICAgICAgICAgIH1cbiAgIDQ3Nlx0ICAgICAgICB9XG4gICA0NzdcdFxuICAgNDc4XHQgICAgICAgIC8vIOiuoeeul+aIquatouaXtumXtOeahOe0p+aApeaAp1xuICAgNDc5XHQgICAgICAgIGRvdWJsZSBkZWFkbGluZVVyZ2VuY3kgPSAwLjA7XG4gICA0ODBcdCAgICAgICAgaWYgKHRhc2suZ2V0RGVhZGxpbmUoKSAhPSBudWxsKSB7XG4gICA0ODFcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgIDQ4Mlx0XG4gICA0ODNcdCAgICAgICAgICAgIC8vIOWmguaenOW3sue7j+i2hei/h+aIquatouaXtumXtO+8jOWImee0p+aApeaAp+acgOmrmFxuICAgNDg0XHQgICAgICAgICAgICBpZiAobm93LmlzQWZ0ZXIodGFzay5nZXREZWFkbGluZSgpKSkge1xuICAgNDg1XHQgICAgICAgICAgICAgICAgZGVhZGxpbmVVcmdlbmN5ID0gMTAwLjA7XG4gICA0ODZcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICA0ODdcdCAgICAgICAgICAgICAgICAvLyDorqHnrpfot53nprvmiKrmraLml7bpl7Tov5jmnInlpJrlsJHlsI/ml7ZcbiAgIDQ4OFx0ICAgICAgICAgICAgICAgIGxvbmcgaG91cnNVbnRpbERlYWRsaW5lID0gRHVyYXRpb24uYmV0d2Vlbihub3csIHRhc2suZ2V0RGVhZGxpbmUoKSkudG9Ib3VycygpO1xuICAgNDg5XHRcbiAgIDQ5MFx0ICAgICAgICAgICAgICAgIC8vIOi3neemu+aIquatouaXtumXtOi2iui/ke+8jOe0p+aApeaAp+i2iumrmFxuICAgNDkxXHQgICAgICAgICAgICAgICAgLy8gMjTlsI/ml7blhoXvvJrmnIDpq5jntKfmgKXmgKdcbiAgIDQ5Mlx0ICAgICAgICAgICAgICAgIC8vIDI0LTcy5bCP5pe277ya6auY57Sn5oCl5oCnXG4gICA0OTNcdCAgICAgICAgICAgICAgICAvLyA3MuWwj+aXtuS7peS4iu+8muS4reetiee0p+aApeaAp1xuICAgNDk0XHQgICAgICAgICAgICAgICAgaWYgKGhvdXJzVW50aWxEZWFkbGluZSA8PSAyNCkge1xuICAgNDk1XHQgICAgICAgICAgICAgICAgICAgIGRlYWRsaW5lVXJnZW5jeSA9IDQwLjAgLSAoaG91cnNVbnRpbERlYWRsaW5lIC8gMjQuMCkgKiAxMC4wOyAgLy8gMzAtNDDliIZcbiAgIDQ5Nlx0ICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaG91cnNVbnRpbERlYWRsaW5lIDw9IDcyKSB7XG4gICA0OTdcdCAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmVVcmdlbmN5ID0gMjUuMCAtICgoaG91cnNVbnRpbERlYWRsaW5lIC0gMjQpIC8gNDguMCkgKiAxMC4wOyAgLy8gMTUtMjXliIZcbiAgIDQ5OFx0ICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICA0OTlcdCAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmVVcmdlbmN5ID0gTWF0aC5tYXgoNS4wLCAxNS4wIC0gKChob3Vyc1VudGlsRGVhZGxpbmUgLSA3MikgLyA3Mi4wKSAqIDEwLjApOyAgLy8gNS0xNeWIhlxuICAgNTAwXHQgICAgICAgICAgICAgICAgfVxuICAgNTAxXHQgICAgICAgICAgICB9XG4gICA1MDJcdCAgICAgICAgfVxuICAgNTAzXHRcbiAgIDUwNFx0ICAgICAgICAvLyDlpoLmnpzku7vliqHlt7Lnu4/pgL7mnJ/vvIzlop7liqDlhbbntKfmgKXmgKdcbiAgIDUwNVx0ICAgICAgICBpZiAodGFzay5nZXRTdGF0dXMoKSAhPSBudWxsICYmIHRhc2suZ2V0U3RhdHVzKCkgPT0gNSkge1xuICAgNTA2XHQgICAgICAgICAgICBkZWFkbGluZVVyZ2VuY3kgKz0gMjAuMDtcbiAgIDUwN1x0ICAgICAgICB9XG4gICA1MDhcdFxuICAgNTA5XHQgICAgICAgIC8vIOagueaNruS7u+WKoeeKtuaAgeiwg+aVtOS8mOWFiOe6p1xuICAgNTEwXHQgICAgICAgIGRvdWJsZSBzdGF0dXNBZGp1c3RtZW50ID0gMC4wO1xuICAgNTExXHQgICAgICAgIGlmICh0YXNrLmdldFN0YXR1cygpICE9IG51bGwpIHtcbiAgIDUxMlx0ICAgICAgICAgICAgc3dpdGNoICh0YXNrLmdldFN0YXR1cygpKSB7XG4gICA1MTNcdCAgICAgICAgICAgICAgICBjYXNlIDE6IC8vIOW+heWKnlxuICAgNTE0XHQgICAgICAgICAgICAgICAgICAgIHN0YXR1c0FkanVzdG1lbnQgPSAyMC4wO1xuICAgNTE1XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgNTE2XHQgICAgICAgICAgICAgICAgY2FzZSA0OiAvLyDlt7LlrozmiJBcbiAgIDUxN1x0ICAgICAgICAgICAgICAgICAgICBzdGF0dXNBZGp1c3RtZW50ID0gLTUwLjA7IC8vIOW3suWujOaIkOeahOS7u+WKoeS8mOWFiOe6p+acgOS9jlxuICAgNTE4XHQgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgNTE5XHQgICAgICAgICAgICAgICAgY2FzZSA1OiAvLyDlt7LpgL7mnJ9cbiAgIDUyMFx0ICAgICAgICAgICAgICAgICAgICBzdGF0dXNBZGp1c3RtZW50ID0gMzAuMDtcbiAgIDUyMVx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgIDUyMlx0ICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICA1MjNcdCAgICAgICAgICAgICAgICAgICAgc3RhdHVzQWRqdXN0bWVudCA9IDAuMDtcbiAgIDUyNFx0ICAgICAgICAgICAgfVxuICAgNTI1XHQgICAgICAgIH1cbiAgIDUyNlx0XG4gICA1MjdcdCAgICAgICAgLy8g57u85ZCI6K6h566X5pyA57uI5LyY5YWI57qn5b6X5YiGXG4gICA1MjhcdCAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBpbXBvcnRhbmNlU2NvcmUgKyB1cmdlbmN5U2NvcmUgKyBkZWFkbGluZVVyZ2VuY3kgKyBzdGF0dXNBZGp1c3RtZW50O1xuICAgNTI5XHRcbiAgIDUzMFx0ICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgcHJpb3JpdHlTY29yZSk7IC8vIOehruS/neW+l+WIhuS4jeS4uui0n+aVsFxuICAgNTMxXHQgICAgfVxuICAgNTMyXHRcbiAgIDUzM1x0ICAgIEBPdmVycmlkZVxuICAgNTM0XHQgICAgcHVibGljIFBhZ2U8U2NoZWR1bGVWbz4gc21hcnRTb3J0KEludGVnZXIgcGFnZVNpemUsIEludGVnZXIgcGFnZU51bSwgU3RyaW5nIHNlYXJjaEtleSkge1xuICAgNTM1XHQgICAgICAgIC8vIOiOt+WPluWOn+Wni+aXpeeoi+WIl+ihqFxuICAgNTM2XHQgICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gb3JpZ2luYWxQYWdlID0gc2VhcmNoKHBhZ2VTaXplLCBwYWdlTnVtLCBzZWFyY2hLZXksIG51bGwpO1xuICAgNTM3XHQgICAgICAgIExpc3Q8U2NoZWR1bGVWbz4gc2NoZWR1bGVMaXN0ID0gb3JpZ2luYWxQYWdlLmdldFJlY29yZHMoKTtcbiAgIDUzOFx0XG4gICA1MzlcdCAgICAgICAgLy8g6K6h566X5q+P5Liq5pel56iL55qE5LyY5YWI57qn5b6X5YiGXG4gICA1NDBcdCAgICAgICAgTWFwPExvbmcsIERvdWJsZT4gc2NoZWR1bGVQcmlvcml0eVNjb3JlcyA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgIDU0MVx0XG4gICA1NDJcdCAgICAgICAgZm9yIChTY2hlZHVsZVZvIHNjaGVkdWxlIDogc2NoZWR1bGVMaXN0KSB7XG4gICA1NDNcdCAgICAgICAgICAgIFRhc2sgdGFzayA9IG51bGw7XG4gICA1NDRcdCAgICAgICAgICAgIGlmIChzY2hlZHVsZS5nZXRUYXNrSWQoKSAhPSBudWxsKSB7XG4gICA1NDVcdCAgICAgICAgICAgICAgICB0YXNrID0gdGFza1NlcnZpY2UuZ2V0QnlJZChzY2hlZHVsZS5nZXRUYXNrSWQoKSk7XG4gICA1NDZcdCAgICAgICAgICAgIH1cbiAgIDU0N1x0XG4gICA1NDhcdCAgICAgICAgICAgIC8vIOiuoeeul+S8mOWFiOe6p+W+l+WIhlxuICAgNTQ5XHQgICAgICAgICAgICBkb3VibGUgcHJpb3JpdHlTY29yZSA9IGNhbGN1bGF0ZVByaW9yaXR5U2NvcmUoc2NoZWR1bGUsIHRhc2spO1xuICAgNTUwXHQgICAgICAgICAgICBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLnB1dChzY2hlZHVsZS5nZXRJZCgpLCBwcmlvcml0eVNjb3JlKTtcbiAgIDU1MVx0ICAgICAgICB9XG4gICA1NTJcdFxuICAgNTUzXHQgICAgICAgIC8vIOagueaNruS8mOWFiOe6p+W+l+WIhuaOkuW6j+aXpeeoi1xuICAgNTU0XHQgICAgICAgIHNjaGVkdWxlTGlzdC5zb3J0KChhLCBiKSAtPiB7XG4gICA1NTVcdCAgICAgICAgICAgIERvdWJsZSBzY29yZUEgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChhLmdldElkKCksIDAuMCk7XG4gICA1NTZcdCAgICAgICAgICAgIERvdWJsZSBzY29yZUIgPSBzY2hlZHVsZVByaW9yaXR5U2NvcmVzLmdldE9yRGVmYXVsdChiLmdldElkKCksIDAuMCk7XG4gICA1NTdcdFxuICAgNTU4XHQgICAgICAgICAgICAvLyDliIbmlbDpq5jnmoTmjpLlnKjliY3pnaJcbiAgIDU1OVx0ICAgICAgICAgICAgcmV0dXJuIERvdWJsZS5jb21wYXJlKHNjb3JlQiwgc2NvcmVBKTtcbiAgIDU2MFx0ICAgICAgICB9KTtcbiAgIDU2MVx0XG4gICA1NjJcdCAgICAgICAgLy8g5Yib5bu65paw55qE5YiG6aG157uT5p6cXG4gICA1NjNcdCAgICAgICAgUGFnZTxTY2hlZHVsZVZvPiBzb3J0ZWRQYWdlID0gbmV3IFBhZ2U8PihwYWdlTnVtLCBwYWdlU2l6ZSwgb3JpZ2luYWxQYWdlLmdldFRvdGFsKCkpO1xuICAgNTY0XHQgICAgICAgIHNvcnRlZFBhZ2Uuc2V0UmVjb3JkcyhzY2hlZHVsZUxpc3QpO1xuICAgNTY1XHRcbiAgIDU2Nlx0ICAgICAgICByZXR1cm4gc29ydGVkUGFnZTtcbiAgIDU2N1x0ICAgIH1cbiAgIDU2OFx0XG4gICA1NjlcdCAgICBAT3ZlcnJpZGVcbiAgIDU3MFx0ICAgIHB1YmxpYyBQYWdlPFNjaGVkdWxlVm8+IHNtYXJ0U29ydFVzZXIoSW50ZWdlciBwYWdlU2l6ZSwgSW50ZWdlciBwYWdlTnVtLCBTdHJpbmcgc2VhcmNoS2V5LCBMb25nIHVzZXJJZCkge1xuICAgNTcxXHQgICAgICAgIC8vIOiOt+WPluWOn+Wni+aXpeeoi+WIl+ihqO+8jOS9v+eUqHNlYXJjaFVzZXLmlrnms5Xnoa7kv53og73mn6Xor6LliLDnlKjmiLfnm7jlhbPml6XnqItcbiAgIDU3Mlx0ICAgICAgICBQYWdlPFNjaGVkdWxlVm8+IG9yaWdpbmFsUGFnZSA9IHNlYXJjaFVzZXIocGFnZVNpemUsIHBhZ2VOdW0sIHNlYXJjaEtleSwgdXNlcklkLCBudWxsKTtcbiAgIDU3M1x0ICAgICAgICBMaXN0PFNjaGVkdWxlVm8+IHNjaGVkdWxlTGlzdCA9IG9yaWdpbmFsUGFnZS5nZXRSZWNvcmRzKCk7XG4gICA1NzRcdCAgICAgICAgXG4gICA1NzVcdCAgICAgICAgLy8g5aaC5p6c5rKh5pyJ6I635Y+W5Yiw5pel56iL5pWw5o2u77yM55u05o6l6L+U5Zue56m657uT5p6cXG4gICA1NzZcdCAgICAgICAgaWYgKHNjaGVkdWxlTGlzdC5pc0VtcHR5KCkpIHtcbiAgIDU3N1x0ICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsUGFnZTtcbiAgIDU3OFx0ICAgICAgICB9XG4gICA1NzlcdFxuICAgNTgwXHQgICAgICAgIC8vIOiuoeeul+avj+S4quaXpeeoi+eahOS8mOWFiOe6p+W+l+WIhlxuICAgNTgxXHQgICAgICAgIE1hcDxMb25nLCBEb3VibGU+IHNjaGVkdWxlUHJpb3JpdHlTY29yZXMgPSBuZXcgSGFzaE1hcDw+KCk7XG4gICA1ODJcdFxuICAgNTgzXHQgICAgICAgIGZvciAoU2NoZWR1bGVWbyBzY2hlZHVsZSA6IHNjaGVkdWxlTGlzdCkge1xuICAgNTg0XHQgICAgICAgICAgICBUYXNrIHRhc2sgPSBudWxsO1xuICAgNTg1XHQgICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkge1xuICAgNTg2XHQgICAgICAgICAgICAgICAgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgNTg3XHQgICAgICAgICAgICB9XG4gICA1ODhcdFxuICAgNTg5XHQgICAgICAgICAgICAvLyDorqHnrpfkvJjlhYjnuqflvpfliIZcbiAgIDU5MFx0ICAgICAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKHNjaGVkdWxlLCB0YXNrKTtcbiAgIDU5MVx0ICAgICAgICAgICAgc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5wdXQoc2NoZWR1bGUuZ2V0SWQoKSwgcHJpb3JpdHlTY29yZSk7XG4gICA1OTJcdCAgICAgICAgfVxuICAgNTkzXHRcbiAgIDU5NFx0ICAgICAgICAvLyDmoLnmja7kvJjlhYjnuqflvpfliIbmjpLluo/ml6XnqItcbiAgIDU5NVx0ICAgICAgICBzY2hlZHVsZUxpc3Quc29ydCgoYSwgYikgLT4ge1xuICAgNTk2XHQgICAgICAgICAgICBEb3VibGUgc2NvcmVBID0gc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYS5nZXRJZCgpLCAwLjApO1xuICAgNTk3XHQgICAgICAgICAgICBEb3VibGUgc2NvcmVCID0gc2NoZWR1bGVQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYi5nZXRJZCgpLCAwLjApO1xuICAgNTk4XHRcbiAgIDU5OVx0ICAgICAgICAgICAgLy8g5YiG5pWw6auY55qE5o6S5Zyo5YmN6Z2iXG4gICA2MDBcdCAgICAgICAgICAgIHJldHVybiBEb3VibGUuY29tcGFyZShzY29yZUIsIHNjb3JlQSk7XG4gICA2MDFcdCAgICAgICAgfSk7XG4gICA2MDJcdFxuICAgNjAzXHQgICAgICAgIC8vIOWIm+W7uuaWsOeahOWIhumhtee7k+aenFxuICAgNjA0XHQgICAgICAgIFBhZ2U8U2NoZWR1bGVWbz4gc29ydGVkUGFnZSA9IG5ldyBQYWdlPD4ocGFnZU51bSwgcGFnZVNpemUsIG9yaWdpbmFsUGFnZS5nZXRUb3RhbCgpKTtcbiAgIDYwNVx0ICAgICAgICBzb3J0ZWRQYWdlLnNldFJlY29yZHMoc2NoZWR1bGVMaXN0KTtcbiAgIDYwNlx0XG4gICA2MDdcdCAgICAgICAgcmV0dXJuIHNvcnRlZFBhZ2U7XG4gICA2MDhcdCAgICB9XG4gICA2MDlcdFxuICAgNjEwXHQgICAgLyoqXG4gICA2MTFcdCAgICAgKiDmr4/lsI/ml7bmo4Dmn6XkuIDmrKHku7vliqHmiKrmraLml7bpl7TvvIzmm7TmlrDpgL7mnJ/ku7vliqHnirbmgIFcbiAgIDYxMlx0ICAgICAqL1xuICAgNjEzXHQgICAgQFNjaGVkdWxlZChjcm9uID0gXCIwIDAgKiAqICogP1wiKVxuICAgNjE0XHQgICAgcHVibGljIHZvaWQgY2hlY2tUYXNrRGVhZGxpbmVzKCkge1xuICAgNjE1XHQgICAgICAgIGxvZy5pbmZvKFwi5a6a5pe25Lu75Yqh77ya5qOA5p+l5Lu75Yqh5oiq5q2i5pe26Ze077yM5pu05paw6YC+5pyf5Lu75Yqh54q25oCBXCIpO1xuICAgNjE2XHQgICAgICAgIExvY2FsRGF0ZVRpbWUgbm93ID0gTG9jYWxEYXRlVGltZS5ub3coKTtcbiAgIDYxN1x0ICAgICAgICBcbiAgIDYxOFx0ICAgICAgICAvLyDmn6Xor6LmiYDmnInmnKrlrozmiJDnmoTml6XnqItcbiAgIDYxOVx0ICAgICAgICBRdWVyeVdyYXBwZXI8U2NoZWR1bGU+IHF1ZXJ5V3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xuICAgNjIwXHQgICAgICAgIExpc3Q8U2NoZWR1bGU+IHNjaGVkdWxlcyA9IHRoaXMubGlzdChxdWVyeVdyYXBwZXIpO1xuICAgNjIxXHQgICAgICAgIFxuICAgNjIyXHQgICAgICAgIGZvciAoU2NoZWR1bGUgc2NoZWR1bGUgOiBzY2hlZHVsZXMpIHtcbiAgIDYyM1x0ICAgICAgICAgICAgLy8g6I635Y+W5YWz6IGU55qE5Lu75YqhXG4gICA2MjRcdCAgICAgICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgNjI1XHQgICAgICAgICAgICBpZiAodGFzayA9PSBudWxsIHx8IHRhc2suZ2V0U3RhdHVzKCkgPT0gNCkgeyAvLyDku7vliqHkuI3lrZjlnKjmiJblt7LlrozmiJDvvIzot7Pov4dcbiAgIDYyNlx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgNjI3XHQgICAgICAgICAgICB9XG4gICA2MjhcdCAgICAgICAgICAgIFxuICAgNjI5XHQgICAgICAgICAgICAvLyDmo4Dmn6Xml6XnqIvnmoTnu5PmnZ/ml7bpl7TvvIzlpoLmnpzlt7Lov4fmnJ/kuJTku7vliqHmnKrlrozmiJDvvIzliJnlsIbku7vliqHnirbmgIHmm7TmlrDkuLrlt7LpgL7mnJ9cbiAgIDYzMFx0ICAgICAgICAgICAgaWYgKHNjaGVkdWxlLmdldEVuZFRpbWUoKSAhPSBudWxsICYmIG5vdy5pc0FmdGVyKHNjaGVkdWxlLmdldEVuZFRpbWUoKSkgJiYgdGFzay5nZXRTdGF0dXMoKSAhPSA1KSB7XG4gICA2MzFcdCAgICAgICAgICAgICAgICB0YXNrLnNldFN0YXR1cyg1KTsgLy8g5bey6YC+5pyfXG4gICA2MzJcdCAgICAgICAgICAgICAgICB0YXNrU2VydmljZS51cGRhdGVCeUlkKHRhc2spO1xuICAgNjMzXHQgICAgICAgICAgICAgICAgbG9nLmluZm8oXCLku7vliqHlt7LpgL7mnJ/vvJrku7vliqFJRD1cIiArIHRhc2suZ2V0SWQoKSArIFwiLCDml6XnqItJRD1cIiArIHNjaGVkdWxlLmdldElkKCkpO1xuICAgNjM0XHQgICAgICAgICAgICB9XG4gICA2MzVcdCAgICAgICAgfVxuICAgNjM2XHQgICAgfVxuICAgNjM3XHQgICAgXG4gICA2MzhcdCAgICAvKipcbiAgIDYzOVx0ICAgICAqIOavj+WkqeWHjOaZqDLngrnmiafooYzvvIzoh6rliqjlronmjpLku4rlpKnnmoTml6XnqItcbiAgIDY0MFx0ICAgICAqL1xuICAgNjQxXHQgICAgQFNjaGVkdWxlZChjcm9uID0gXCIwIDAgMiAqICogP1wiKVxuICAgNjQyXHQgICAgQFRyYW5zYWN0aW9uYWwocm9sbGJhY2tGb3IgPSBFeGNlcHRpb24uY2xhc3MpXG4gICA2NDNcdCAgICBwdWJsaWMgdm9pZCBkYWlseVNjaGVkdWxlQXJyYW5nZW1lbnQoKSB7XG4gICA2NDRcdCAgICAgICAgLy8g6I635Y+W5LuK5aSp55qE5pel5pyf77yM5qC85byPeXl5eS1NTS1kZFxuICAgNjQ1XHQgICAgICAgIFN0cmluZyB0b2RheSA9IExvY2FsRGF0ZVRpbWUubm93KCkudG9Mb2NhbERhdGUoKS50b1N0cmluZygpO1xuICAgNjQ2XHQgICAgICAgIGxvZy5pbmZvKFwi5a6a5pe25Lu75Yqh77ya6Ieq5Yqo5a6J5o6S5LuK5aSpKFwiICsgdG9kYXkgKyBcIinnmoTml6XnqItcIik7XG4gICA2NDdcdCAgICAgICAgXG4gICA2NDhcdCAgICAgICAgdHJ5IHtcbiAgIDY0OVx0ICAgICAgICAgICAgLy8g6Ieq5Yqo5a6J5o6S5LuK5aSp55qE5pel56iLXG4gICA2NTBcdCAgICAgICAgICAgIGJvb2xlYW4gc3VjY2VzcyA9IGF1dG9BcnJhbmdlRGFpbHlTY2hlZHVsZXModG9kYXkpO1xuICAgNjUxXHQgICAgICAgICAgICBcbiAgIDY1Mlx0ICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcbiAgIDY1M1x0ICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwi5LuK5pelKFwiICsgdG9kYXkgKyBcIinml6XnqIvlronmjpLlrozmiJBcIik7XG4gICA2NTRcdCAgICAgICAgICAgIH0gZWxzZSB7XG4gICA2NTVcdCAgICAgICAgICAgICAgICBsb2cuZXJyb3IoXCLku4rml6UoXCIgKyB0b2RheSArIFwiKeaXpeeoi+WuieaOkuWksei0pVwiKTtcbiAgIDY1Nlx0ICAgICAgICAgICAgfVxuICAgNjU3XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICA2NThcdCAgICAgICAgICAgIGxvZy5lcnJvcihcIuiHquWKqOWuieaOkuaXpeeoi+W8guW4uO+8mlwiICsgZS5nZXRNZXNzYWdlKCksIGUpO1xuICAgNjU5XHQgICAgICAgIH1cbiAgIDY2MFx0ICAgIH1cbiAgIDY2MVx0ICAgIFxuICAgNjYyXHQgICAgQE92ZXJyaWRlXG4gICA2NjNcdCAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgIDY2NFx0ICAgIHB1YmxpYyBib29sZWFuIGF1dG9BcnJhbmdlRGFpbHlTY2hlZHVsZXMoU3RyaW5nIGRhdGUpIHtcbiAgIDY2NVx0ICAgICAgICB0cnkge1xuICAgNjY2XHQgICAgICAgICAgICAvLyDop6PmnpDml6XmnJ9cbiAgIDY2N1x0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBzdGFydE9mRGF5ID0gTG9jYWxEYXRlVGltZS5wYXJzZShkYXRlICsgXCJUMDA6MDA6MDBcIik7XG4gICA2NjhcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgZW5kT2ZEYXkgPSBMb2NhbERhdGVUaW1lLnBhcnNlKGRhdGUgKyBcIlQyMzo1OTo1OVwiKTtcbiAgIDY2OVx0ICAgICAgICAgICAgXG4gICA2NzBcdCAgICAgICAgICAgIC8vIOafpeivouaMh+WumuaXpeacn+eahOaJgOacieaXpeeoi1xuICAgNjcxXHQgICAgICAgICAgICBRdWVyeVdyYXBwZXI8U2NoZWR1bGU+IHF1ZXJ5V3JhcHBlciA9IG5ldyBRdWVyeVdyYXBwZXI8PigpO1xuICAgNjcyXHQgICAgICAgICAgICBxdWVyeVdyYXBwZXIuZ2UoXCJzdGFydF90aW1lXCIsIHN0YXJ0T2ZEYXkpXG4gICA2NzNcdCAgICAgICAgICAgICAgICAgICAgICAgIC5sZShcInN0YXJ0X3RpbWVcIiwgZW5kT2ZEYXkpXG4gICA2NzRcdCAgICAgICAgICAgICAgICAgICAgICAgIC5pc051bGwoXCJwYXJlbnRfaWRcIik7IC8vIOWPquWkhOeQhueItuaXpeeoi1xuICAgNjc1XHQgICAgICAgICAgICBcbiAgIDY3Nlx0ICAgICAgICAgICAgTGlzdDxTY2hlZHVsZT4gc2NoZWR1bGVzID0gdGhpcy5saXN0KHF1ZXJ5V3JhcHBlcik7XG4gICA2NzdcdCAgICAgICAgICAgIGlmIChzY2hlZHVsZXMuaXNFbXB0eSgpKSB7XG4gICA2NzhcdCAgICAgICAgICAgICAgICBsb2cuaW5mbyhcIuayoeacieaJvuWIsOaXpeacn1wiICsgZGF0ZSArIFwi55qE5pel56iL77yM5peg6ZyA6YeN5o6SXCIpO1xuICAgNjc5XHQgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICA2ODBcdCAgICAgICAgICAgIH1cbiAgIDY4MVx0ICAgICAgICAgICAgXG4gICA2ODJcdCAgICAgICAgICAgIC8vIOiOt+WPluaJgOacieWFs+iBlOeahOS7u+WKoe+8jOS7peS+v+iuoeeul+S8mOWFiOe6p1xuICAgNjgzXHQgICAgICAgICAgICBMaXN0PFRhc2s+IHRhc2tzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICA2ODRcdCAgICAgICAgICAgIE1hcDxMb25nLCBUYXNrPiB0YXNrTWFwID0gbmV3IEhhc2hNYXA8PigpO1xuICAgNjg1XHQgICAgICAgICAgICBmb3IgKFNjaGVkdWxlIHNjaGVkdWxlIDogc2NoZWR1bGVzKSB7XG4gICA2ODZcdCAgICAgICAgICAgICAgICBpZiAoc2NoZWR1bGUuZ2V0VGFza0lkKCkgIT0gbnVsbCkge1xuICAgNjg3XHQgICAgICAgICAgICAgICAgICAgIFRhc2sgdGFzayA9IHRhc2tTZXJ2aWNlLmdldEJ5SWQoc2NoZWR1bGUuZ2V0VGFza0lkKCkpO1xuICAgNjg4XHQgICAgICAgICAgICAgICAgICAgIGlmICh0YXNrICE9IG51bGwpIHtcbiAgIDY4OVx0ICAgICAgICAgICAgICAgICAgICAgICAgdGFza3MuYWRkKHRhc2spO1xuICAgNjkwXHQgICAgICAgICAgICAgICAgICAgICAgICB0YXNrTWFwLnB1dCh0YXNrLmdldElkKCksIHRhc2spO1xuICAgNjkxXHQgICAgICAgICAgICAgICAgICAgIH1cbiAgIDY5Mlx0ICAgICAgICAgICAgICAgIH1cbiAgIDY5M1x0ICAgICAgICAgICAgfVxuICAgNjk0XHQgICAgICAgICAgICBcbiAgIDY5NVx0ICAgICAgICAgICAgaWYgKHRhc2tzLmlzRW1wdHkoKSkge1xuICAgNjk2XHQgICAgICAgICAgICAgICAgbG9nLmluZm8oXCLml6XmnJ9cIiArIGRhdGUgKyBcIueahOaXpeeoi+ayoeacieWFs+iBlOS7u+WKoe+8jOaXoOazleiuoeeul+S8mOWFiOe6p1wiKTtcbiAgIDY5N1x0ICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgIDY5OFx0ICAgICAgICAgICAgfVxuICAgNjk5XHQgICAgICAgICAgICBcbiAgIDcwMFx0ICAgICAgICAgICAgLy8g6K6h566X5q+P5Liq5Lu75Yqh55qE5LyY5YWI57qn5b6X5YiGXG4gICA3MDFcdCAgICAgICAgICAgIE1hcDxMb25nLCBEb3VibGU+IHRhc2tQcmlvcml0eVNjb3JlcyA9IG5ldyBIYXNoTWFwPD4oKTtcbiAgIDcwMlx0ICAgICAgICAgICAgZm9yIChUYXNrIHRhc2sgOiB0YXNrcykge1xuICAgNzAzXHQgICAgICAgICAgICAgICAgU2NoZWR1bGVWbyB0ZW1wU2NoZWR1bGUgPSBuZXcgU2NoZWR1bGVWbygpO1xuICAgNzA0XHQgICAgICAgICAgICAgICAgZG91YmxlIHByaW9yaXR5U2NvcmUgPSBjYWxjdWxhdGVQcmlvcml0eVNjb3JlKHRlbXBTY2hlZHVsZSwgdGFzayk7XG4gICA3MDVcdCAgICAgICAgICAgICAgICB0YXNrUHJpb3JpdHlTY29yZXMucHV0KHRhc2suZ2V0SWQoKSwgcHJpb3JpdHlTY29yZSk7XG4gICA3MDZcdCAgICAgICAgICAgIH1cbiAgIDcwN1x0ICAgICAgICAgICAgXG4gICA3MDhcdCAgICAgICAgICAgIC8vIOaMieS8mOWFiOe6p+aOkuW6j+aXpeeoi1xuICAgNzA5XHQgICAgICAgICAgICBzY2hlZHVsZXMuc29ydCgoYSwgYikgLT4ge1xuICAgNzEwXHQgICAgICAgICAgICAgICAgRG91YmxlIHNjb3JlQSA9IHRhc2tQcmlvcml0eVNjb3Jlcy5nZXRPckRlZmF1bHQoYS5nZXRUYXNrSWQoKSwgMC4wKTtcbiAgIDcxMVx0ICAgICAgICAgICAgICAgIERvdWJsZSBzY29yZUIgPSB0YXNrUHJpb3JpdHlTY29yZXMuZ2V0T3JEZWZhdWx0KGIuZ2V0VGFza0lkKCksIDAuMCk7XG4gICA3MTJcdCAgICAgICAgICAgICAgICBcbiAgIDcxM1x0ICAgICAgICAgICAgICAgIC8vIOS8mOWFiOe6p+mrmOeahOaOkuWcqOWJjemdolxuICAgNzE0XHQgICAgICAgICAgICAgICAgcmV0dXJuIERvdWJsZS5jb21wYXJlKHNjb3JlQiwgc2NvcmVBKTtcbiAgIDcxNVx0ICAgICAgICAgICAgfSk7XG4gICA3MTZcdCAgICAgICAgICAgIFxuICAgNzE3XHQgICAgICAgICAgICAvLyDlrprkuYnlt6XkvZzml7bpl7TmrrVcbiAgIDcxOFx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBtb3JuaW5nU3RhcnQgPSBMb2NhbERhdGVUaW1lLnBhcnNlKGRhdGUgKyBcIlQwODowMDowMFwiKTtcbiAgIDcxOVx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBtb3JuaW5nRW5kID0gTG9jYWxEYXRlVGltZS5wYXJzZShkYXRlICsgXCJUMTI6MDA6MDBcIik7XG4gICA3MjBcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgYWZ0ZXJub29uU3RhcnQgPSBMb2NhbERhdGVUaW1lLnBhcnNlKGRhdGUgKyBcIlQxNDowMDowMFwiKTtcbiAgIDcyMVx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBhZnRlcm5vb25FbmQgPSBMb2NhbERhdGVUaW1lLnBhcnNlKGRhdGUgKyBcIlQxODowMDowMFwiKTtcbiAgIDcyMlx0ICAgICAgICAgICAgXG4gICA3MjNcdCAgICAgICAgICAgIC8vIOmHjeaWsOWuieaOkuaXpeeoi+aXtumXtFxuICAgNzI0XHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGN1cnJlbnRUaW1lID0gbW9ybmluZ1N0YXJ0O1xuICAgNzI1XHQgICAgICAgICAgICBib29sZWFuIGlzQWZ0ZXJub29uU3RhcnRlZCA9IGZhbHNlO1xuICAgNzI2XHQgICAgICAgICAgICBcbiAgIDcyN1x0ICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzY2hlZHVsZXMuc2l6ZSgpOyBpKyspIHtcbiAgIDcyOFx0ICAgICAgICAgICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gc2NoZWR1bGVzLmdldChpKTtcbiAgIDcyOVx0ICAgICAgICAgICAgICAgIFRhc2sgdGFzayA9IHRhc2tNYXAuZ2V0KHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgIDczMFx0ICAgICAgICAgICAgICAgIFxuICAgNzMxXHQgICAgICAgICAgICAgICAgaWYgKHRhc2sgPT0gbnVsbCkge1xuICAgNzMyXHQgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgNzMzXHQgICAgICAgICAgICAgICAgfVxuICAgNzM0XHQgICAgICAgICAgICAgICAgXG4gICA3MzVcdCAgICAgICAgICAgICAgICAvLyDlpoLmnpzlt7Lnu4/liLDkuobkuK3ljYjkvJHmga/ml7bpl7TkuJTov5jmsqHlvIDlp4vkuIvljYjvvIzovazliLDkuIvljYjlvIDlp4vml7bpl7RcbiAgIDczNlx0ICAgICAgICAgICAgICAgIGlmICghaXNBZnRlcm5vb25TdGFydGVkICYmIGN1cnJlbnRUaW1lLmlzQWZ0ZXIobW9ybmluZ0VuZCkpIHtcbiAgIDczN1x0ICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IGFmdGVybm9vblN0YXJ0O1xuICAgNzM4XHQgICAgICAgICAgICAgICAgICAgIGlzQWZ0ZXJub29uU3RhcnRlZCA9IHRydWU7XG4gICA3MzlcdCAgICAgICAgICAgICAgICB9XG4gICA3NDBcdCAgICAgICAgICAgICAgICBcbiAgIDc0MVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOi2heWHuuS6huS4i+WNiOW3peS9nOaXtumXtO+8jOWBnOatouWuieaOku+8iOaIluiAheWPr+S7pemAieaLqee7p+e7reWuieaOkuWIsOaYjuWkqe+8iVxuICAgNzQyXHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lLmlzQWZ0ZXIoYWZ0ZXJub29uRW5kKSkge1xuICAgNzQzXHQgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwi5pel5pyfXCIgKyBkYXRlICsgXCLnmoTml6XnqIvmjpLmu6HkuobvvIzliankvZlcIiArIChzY2hlZHVsZXMuc2l6ZSgpIC0gaSkgKyBcIuS4quaXpeeoi+acquaOklwiKTtcbiAgIDc0NFx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgIDc0NVx0ICAgICAgICAgICAgICAgIH1cbiAgIDc0Nlx0ICAgICAgICAgICAgICAgIFxuICAgNzQ3XHQgICAgICAgICAgICAgICAgLy8g6K6+572u5byA5aeL5pe26Ze0XG4gICA3NDhcdCAgICAgICAgICAgICAgICBzY2hlZHVsZS5zZXRTdGFydFRpbWUoY3VycmVudFRpbWUpO1xuICAgNzQ5XHQgICAgICAgICAgICAgICAgXG4gICA3NTBcdCAgICAgICAgICAgICAgICAvLyDorqHnrpfnu5PmnZ/ml7bpl7RcbiAgIDc1MVx0ICAgICAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgZW5kVGltZTtcbiAgIDc1Mlx0ICAgICAgICAgICAgICAgIGlmICh0YXNrLmdldFRpbWVTcGVuZCgpICE9IG51bGwpIHtcbiAgIDc1M1x0ICAgICAgICAgICAgICAgICAgICAvLyDmoLnmja7ku7vliqHpooTkvLDogJfml7borqHnrpfnu5PmnZ/ml7bpl7RcbiAgIDc1NFx0ICAgICAgICAgICAgICAgICAgICBlbmRUaW1lID0gY3VycmVudFRpbWUucGx1c01pbnV0ZXModGFzay5nZXRUaW1lU3BlbmQoKSk7XG4gICA3NTVcdCAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgNzU2XHQgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOayoeaciemihOS8sOaXtumXtO+8jOm7mOiupDMw5YiG6ZKfXG4gICA3NTdcdCAgICAgICAgICAgICAgICAgICAgZW5kVGltZSA9IGN1cnJlbnRUaW1lLnBsdXNNaW51dGVzKDMwKTtcbiAgIDc1OFx0ICAgICAgICAgICAgICAgIH1cbiAgIDc1OVx0ICAgICAgICAgICAgICAgIFxuICAgNzYwXHQgICAgICAgICAgICAgICAgLy8g6K6+572u57uT5p2f5pe26Ze0XG4gICA3NjFcdCAgICAgICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKGVuZFRpbWUpO1xuICAgNzYyXHQgICAgICAgICAgICAgICAgXG4gICA3NjNcdCAgICAgICAgICAgICAgICAvLyDlvZPliY3ku7vliqHnmoTnu5PmnZ/ml7bpl7TkvZzkuLrkuIvkuIDkuKrku7vliqHnmoTlvIDlp4vml7bpl7RcbiAgIDc2NFx0ICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lID0gZW5kVGltZTtcbiAgIDc2NVx0ICAgICAgICAgICAgICAgIFxuICAgNzY2XHQgICAgICAgICAgICAgICAgLy8g5pu05paw5pel56iLXG4gICA3NjdcdCAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ5SWQoc2NoZWR1bGUpO1xuICAgNzY4XHQgICAgICAgICAgICAgICAgXG4gICA3NjlcdCAgICAgICAgICAgICAgICAvLyDlkIzml7bmm7TmlrDmiYDmnInlrZDml6XnqItcbiAgIDc3MFx0ICAgICAgICAgICAgICAgIFF1ZXJ5V3JhcHBlcjxTY2hlZHVsZT4gY2hpbGRXcmFwcGVyID0gbmV3IFF1ZXJ5V3JhcHBlcjw+KCk7XG4gICA3NzFcdCAgICAgICAgICAgICAgICBjaGlsZFdyYXBwZXIuZXEoXCJwYXJlbnRfaWRcIiwgc2NoZWR1bGUuZ2V0SWQoKSk7XG4gICA3NzJcdCAgICAgICAgICAgICAgICBMaXN0PFNjaGVkdWxlPiBjaGlsZFNjaGVkdWxlcyA9IHRoaXMubGlzdChjaGlsZFdyYXBwZXIpO1xuICAgNzczXHQgICAgICAgICAgICAgICAgXG4gICA3NzRcdCAgICAgICAgICAgICAgICBmb3IgKFNjaGVkdWxlIGNoaWxkU2NoZWR1bGUgOiBjaGlsZFNjaGVkdWxlcykge1xuICAgNzc1XHQgICAgICAgICAgICAgICAgICAgIGNoaWxkU2NoZWR1bGUuc2V0U3RhcnRUaW1lKHNjaGVkdWxlLmdldFN0YXJ0VGltZSgpKTtcbiAgIDc3Nlx0ICAgICAgICAgICAgICAgICAgICBjaGlsZFNjaGVkdWxlLnNldEVuZFRpbWUoc2NoZWR1bGUuZ2V0RW5kVGltZSgpKTtcbiAgIDc3N1x0ICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ5SWQoY2hpbGRTY2hlZHVsZSk7XG4gICA3NzhcdCAgICAgICAgICAgICAgICB9XG4gICA3NzlcdCAgICAgICAgICAgICAgICBcbiAgIDc4MFx0ICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwi6YeN5o6S5pel56iL77ya5Lu75YqhW1wiICsgdGFzay5nZXRUaXRsZSgpICsgXCJd77yM5byA5aeL5pe26Ze077yaXCIgKyBzY2hlZHVsZS5nZXRTdGFydFRpbWUoKSArIFwi77yM57uT5p2f5pe26Ze077yaXCIgKyBzY2hlZHVsZS5nZXRFbmRUaW1lKCkpO1xuICAgNzgxXHQgICAgICAgICAgICB9XG4gICA3ODJcdCAgICAgICAgICAgIFxuICAgNzgzXHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgIDc4NFx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgNzg1XHQgICAgICAgICAgICBsb2cuZXJyb3IoXCLoh6rliqjlronmjpLml6XnqIvlvILluLjvvJpcIiArIGUuZ2V0TWVzc2FnZSgpLCBlKTtcbiAgIDc4Nlx0ICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgNzg3XHQgICAgICAgIH1cbiAgIDc4OFx0ICAgIH1cbiAgIDc4OVx0ICAgIFxuICAgNzkwXHQgICAgQE92ZXJyaWRlXG4gICA3OTFcdCAgICBAVHJhbnNhY3Rpb25hbChyb2xsYmFja0ZvciA9IEV4Y2VwdGlvbi5jbGFzcylcbiAgIDc5Mlx0ICAgIHB1YmxpYyBib29sZWFuIGF1dG9BcnJhbmdlRGF0ZVJhbmdlU2NoZWR1bGVzKFN0cmluZyBzdGFydERhdGUsIFN0cmluZyBlbmREYXRlKSB7XG4gICA3OTNcdCAgICAgICAgdHJ5IHtcbiAgIDc5NFx0ICAgICAgICAgICAgLy8g6Kej5p6Q6LW35aeL5pel5pyfXG4gICA3OTVcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgc3RhcnQgPSBMb2NhbERhdGVUaW1lLnBhcnNlKHN0YXJ0RGF0ZSArIFwiVDAwOjAwOjAwXCIpO1xuICAgNzk2XHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGVuZCA9IExvY2FsRGF0ZVRpbWUucGFyc2UoZW5kRGF0ZSArIFwiVDIzOjU5OjU5XCIpO1xuICAgNzk3XHQgICAgICAgICAgICBcbiAgIDc5OFx0ICAgICAgICAgICAgLy8g5oyJ5aSp5aSE55CG77yM5L6d5qyh6YeN5o6S5q+P5LiA5aSp55qE5pel56iLXG4gICA3OTlcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgY3VycmVudERhdGUgPSBzdGFydDtcbiAgIDgwMFx0ICAgICAgICAgICAgd2hpbGUgKCFjdXJyZW50RGF0ZS5pc0FmdGVyKGVuZCkpIHtcbiAgIDgwMVx0ICAgICAgICAgICAgICAgIFN0cmluZyBkYXRlU3RyaW5nID0gY3VycmVudERhdGUudG9Mb2NhbERhdGUoKS50b1N0cmluZygpO1xuICAgODAyXHQgICAgICAgICAgICAgICAgYXV0b0FycmFuZ2VEYWlseVNjaGVkdWxlcyhkYXRlU3RyaW5nKTtcbiAgIDgwM1x0ICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlID0gY3VycmVudERhdGUucGx1c0RheXMoMSk7XG4gICA4MDRcdCAgICAgICAgICAgIH1cbiAgIDgwNVx0ICAgICAgICAgICAgXG4gICA4MDZcdCAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgODA3XHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICA4MDhcdCAgICAgICAgICAgIGxvZy5lcnJvcihcIuaMieaXpeacn+iMg+WbtOiHquWKqOWuieaOkuaXpeeoi+W8guW4uO+8mlwiICsgZS5nZXRNZXNzYWdlKCksIGUpO1xuICAgODA5XHQgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICA4MTBcdCAgICAgICAgfVxuICAgODExXHQgICAgfVxuICAgODEyXHR9XG4gICA4MTNcdFxuVG90YWwgbGluZXMgaW4gZmlsZTogODEzXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI5NzJkMDAxOC1lN2E5LTQ3ZGYtYjVjMC05NmM3NjM1M2U1MjE7dG9vbHVfMDFBNXhBeWVVUEVKZWdQMWE3YlFZNk05Ijp7InBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc2VydmVyL3NyYy9tYWluL2phdmEvY29tL2Jvb3Qvd2ViL21vZHVsZXMvd2ViL3NlcnZpY2UvaW1wbC9TY2hlZHVsZVNlcnZpY2VJbXBsLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlX2VudHJpZXNbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgIDcxOVx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBtb3JuaW5nRW5kID0gTG9jYWxEYXRlVGltZS5wYXJzZShkYXRlICsgXCJUMTI6MDA6MDBcIik7XG4gICA3MjBcdCAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUgYWZ0ZXJub29uU3RhcnQgPSBMb2NhbERhdGVUaW1lLnBhcnNlKGRhdGUgKyBcIlQxNDowMDowMFwiKTtcbiAgIDcyMVx0ICAgICAgICAgICAgTG9jYWxEYXRlVGltZSBhZnRlcm5vb25FbmQgPSBMb2NhbERhdGVUaW1lLnBhcnNlKGRhdGUgKyBcIlQxODowMDowMFwiKTtcbiAgIDcyMlx0XG4gICA3MjNcdCAgICAgICAgICAgIC8vIOmHjeaWsOWuieaOkuaXpeeoi+aXtumXtFxuICAgNzI0XHQgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGN1cnJlbnRUaW1lID0gbW9ybmluZ1N0YXJ0O1xuICAgNzI1XHQgICAgICAgICAgICBib29sZWFuIGlzQWZ0ZXJub29uU3RhcnRlZCA9IGZhbHNlO1xuICAgNzI2XHRcbiAgIDcyN1x0ICAgICAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCBzY2hlZHVsZXMuc2l6ZSgpOyBpKyspIHtcbiAgIDcyOFx0ICAgICAgICAgICAgICAgIFNjaGVkdWxlIHNjaGVkdWxlID0gc2NoZWR1bGVzLmdldChpKTtcbiAgIDcyOVx0ICAgICAgICAgICAgICAgIFRhc2sgdGFzayA9IHRhc2tNYXAuZ2V0KHNjaGVkdWxlLmdldFRhc2tJZCgpKTtcbiAgIDczMFx0XG4gICA3MzFcdCAgICAgICAgICAgICAgICBpZiAodGFzayA9PSBudWxsKSB7XG4gICA3MzJcdCAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICA3MzNcdCAgICAgICAgICAgICAgICB9XG4gICA3MzRcdFxuICAgNzM1XHQgICAgICAgICAgICAgICAgLy8g5aaC5p6c5bey57uP5Yiw5LqG5Lit5Y2I5LyR5oGv5pe26Ze05LiU6L+Y5rKh5byA5aeL5LiL5Y2I77yM6L2s5Yiw5LiL5Y2I5byA5aeL5pe26Ze0XG4gICA3MzZcdCAgICAgICAgICAgICAgICBpZiAoIWlzQWZ0ZXJub29uU3RhcnRlZCAmJiBjdXJyZW50VGltZS5pc0FmdGVyKG1vcm5pbmdFbmQpKSB7XG4gICA3MzdcdCAgICAgICAgICAgICAgICAgICAgY3VycmVudFRpbWUgPSBhZnRlcm5vb25TdGFydDtcbiAgIDczOFx0ICAgICAgICAgICAgICAgICAgICBpc0FmdGVybm9vblN0YXJ0ZWQgPSB0cnVlO1xuICAgNzM5XHQgICAgICAgICAgICAgICAgfVxuICAgNzQwXHRcbiAgIDc0MVx0ICAgICAgICAgICAgICAgIC8vIOWmguaenOi2heWHuuS6huS4i+WNiOW3peS9nOaXtumXtO+8jOWBnOatouWuieaOku+8iOaIluiAheWPr+S7pemAieaLqee7p+e7reWuieaOkuWIsOaYjuWkqe+8iVxuICAgNzQyXHQgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRUaW1lLmlzQWZ0ZXIoYWZ0ZXJub29uRW5kKSkge1xuICAgNzQzXHQgICAgICAgICAgICAgICAgICAgIGxvZy53YXJuKFwi5pel5pyfXCIgKyBkYXRlICsgXCLnmoTml6XnqIvmjpLmu6HkuobvvIzliankvZlcIiArIChzY2hlZHVsZXMuc2l6ZSgpIC0gaSkgKyBcIuS4quaXpeeoi+acquaOklwiKTtcbiAgIDc0NFx0ICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgIDc0NVx0ICAgICAgICAgICAgICAgIH1cbiAgIDc0Nlx0XG4gICA3NDdcdCAgICAgICAgICAgICAgICAvLyDorr7nva7lvIDlp4vml7bpl7QgLSDkvb/nlKjlvZPliY3ml7bpl7TngrnkvZzkuLrku7vliqHlvIDlp4vml7bpl7RcbiAgIDc0OFx0ICAgICAgICAgICAgICAgIHNjaGVkdWxlLnNldFN0YXJ0VGltZShjdXJyZW50VGltZSk7XG4gICA3NDlcdFxuICAgNzUwXHQgICAgICAgICAgICAgICAgLy8g6K6h566X57uT5p2f5pe26Ze0XG4gICA3NTFcdCAgICAgICAgICAgICAgICBMb2NhbERhdGVUaW1lIGVuZFRpbWU7XG4gICA3NTJcdCAgICAgICAgICAgICAgICBpZiAodGFzay5nZXRUaW1lU3BlbmQoKSAhPSBudWxsKSB7XG4gICA3NTNcdCAgICAgICAgICAgICAgICAgICAgLy8g5qC55o2u5Lu75Yqh6aKE5Lyw6ICX5pe26K6h566X57uT5p2f5pe26Ze0XG4gICA3NTRcdCAgICAgICAgICAgICAgICAgICAgZW5kVGltZSA9IGN1cnJlbnRUaW1lLnBsdXNNaW51dGVzKHRhc2suZ2V0VGltZVNwZW5kKCkpO1xuICAgNzU1XHQgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgIDc1Nlx0ICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmsqHmnInpooTkvLDml7bpl7TvvIzpu5jorqQzMOWIhumSn1xuICAgNzU3XHQgICAgICAgICAgICAgICAgICAgIGVuZFRpbWUgPSBjdXJyZW50VGltZS5wbHVzTWludXRlcygzMCk7XG4gICA3NThcdCAgICAgICAgICAgICAgICB9XG4gICA3NTlcdFxuICAgNzYwXHQgICAgICAgICAgICAgICAgLy8g6K6+572u57uT5p2f5pe26Ze0XG4gICA3NjFcdCAgICAgICAgICAgICAgICBzY2hlZHVsZS5zZXRFbmRUaW1lKGVuZFRpbWUpO1xuICAgNzYyXHRcbiAgIDc2M1x0ICAgICAgICAgICAgICAgIC8vIOW9k+WJjeS7u+WKoeeahOe7k+adn+aXtumXtOS9nOS4uuS4i+S4gOS4quS7u+WKoeeahOW8gOWni+aXtumXtFxuICAgNzY0XHQgICAgICAgICAgICAgICAgLy8g56Gu5L+d5LiL5LiA5Liq5Lu75Yqh55qE5byA5aeL5pe26Ze05piv5b2T5YmN5Lu75Yqh55qE57uT5p2f5pe26Ze077yM6ICM5LiN5piv6YeN572u5Li65Zu65a6a5pe26Ze0XG4gICA3NjVcdCAgICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IGVuZFRpbWU7XG4gICA3NjZcdFxuICAgNzY3XHQgICAgICAgICAgICAgICAgLy8g5pu05paw5pel56iLXG4gICA3NjhcdCAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUJ5SWQoc2NoZWR1bGUpO1xuICAgNzY5XHRcbiAgIDc3MFx0ICAgICAgICAgICAgICAgIC8vIOWQjOaXtuabtOaWsOaJgOacieWtkOaXpeeoi1xuICAgNzcxXHQgICAgICAgICAgICAgICAgUXVlcnlXcmFwcGVyPFNjaGVkdWxlPiBjaGlsZFdyYXBwZXIgPSBuZXcgUXVlcnlXcmFwcGVyPD4oKTtcbiAgIDc3Mlx0ICAgICAgICAgICAgICAgIGNoaWxkV3JhcHBlci5lcShcInBhcmVudF9pZFwiLCBzY2hlZHVsZS5nZXRJZCgpKTtcbiAgIDc3M1x0ICAgICAgICAgICAgICAgIExpc3Q8U2NoZWR1bGU+IGNoaWxkU2NoZWR1bGVzID0gdGhpcy5saXN0KGNoaWxkV3JhcHBlcik7XG4gICA3NzRcdFxuICAgNzc1XHQgICAgICAgICAgICAgICAgZm9yIChTY2hlZHVsZSBjaGlsZFNjaGVkdWxlIDogY2hpbGRTY2hlZHVsZXMpIHtcbiAgIDc3Nlx0ICAgICAgICAgICAgICAgICAgICBjaGlsZFNjaGVkdWxlLnNldFN0YXJ0VGltZShzY2hlZHVsZS5nZXRTdGFydFRpbWUoKSk7XG4gICA3NzdcdCAgICAgICAgICAgICAgICAgICAgY2hpbGRTY2hlZHVsZS5zZXRFbmRUaW1lKHNjaGVkdWxlLmdldEVuZFRpbWUoKSk7XG4gICA3NzhcdCAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVCeUlkKGNoaWxkU2NoZWR1bGUpO1xuICAgNzc5XHQgICAgICAgICAgICAgICAgfVxuICAgNzgwXHRcbiAgIDc4MVx0ICAgICAgICAgICAgICAgIGxvZy5pbmZvKFwi6YeN5o6S5pel56iL77ya5Lu75YqhW1wiICsgdGFzay5nZXRUaXRsZSgpICsgXCJd77yM5byA5aeL5pe26Ze077yaXCIgKyBzY2hlZHVsZS5nZXRTdGFydFRpbWUoKSArIFwi77yM57uT5p2f5pe26Ze077yaXCIgKyBzY2hlZHVsZS5nZXRFbmRUaW1lKCkpO1xuICAgNzgyXHQgICAgICAgICAgICB9XG4gICA3ODNcdFxuICAgNzg0XHQgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgIDc4NVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgNzg2XHQgICAgICAgICAgICBsb2cuZXJyb3IoXCLoh6rliqjlronmjpLml6XnqIvlvILluLjvvJpcIiArIGUuZ2V0TWVzc2FnZSgpLCBlKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fX0sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoiIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCJ9XX0sInN0YXR1cyI6ImRyYWZ0In0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjp0cnVlLCJleHRyYURhdGEiOnsiaXNBZ2VudENvbnZlcnNhdGlvbiI6dHJ1ZSwiaGFzRGlydHlFZGl0cyI6ZmFsc2UsImJhc2VsaW5lVGltZXN0YW1wIjowfSwicGVyc29uYVR5cGUiOjB9fSwiYWdlbnRFeGVjdXRpb25Nb2RlIjoibWFudWFsIiwiaXNBZ2VudEVkaXRzQ29sbGFwc2VkIjp0cnVlfQ==" />
      </map>
    </option>
  </component>
</project>